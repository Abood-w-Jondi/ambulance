import{$ as _r,$a as S,$b as We,A as Wn,Aa as nl,Ab as z,B as wi,Ba as vh,Bb as q,C as _a,Ca as Lr,Cb as vt,D as oh,Da as xh,Db as ya,E as Kd,Ea as yh,Eb as R,F as Po,Fa as m,Fb as N,G as Do,Ga as qa,Gb as V,H as va,Ha as sm,Hb as Fh,I as Jd,Ia as B0,Ib as Gn,J as sh,Ja as sr,Jb as Ei,K as lh,Ka as G,Kb as $i,L as uh,La as lm,Lb as xr,M as ar,Ma as rl,Mb as No,N as Io,Na as bh,Nb as gt,O as gi,Oa as um,Ob as Ya,P as Mt,Pa as Oe,Pb as Bt,Q as jn,Qa as ta,Qb as kh,R as Pe,Ra as zt,Rb as Ph,S as Qr,Sa as U0,Sb as Dh,T as ch,Ta as hn,Tb as Ih,U as Tt,Ua as H,Ub as dm,V as Qd,Va as Ch,Vb as ba,W as Ue,Wa as Ro,Wb as Oh,X as Ne,Xa as wh,Xb as Lh,Y as Oo,Ya as Sh,Yb as Rh,Z as dh,Za as Th,Zb as Xa,_ as $a,_a as Pn,_b as yr,a as ve,aa as vr,ab as dt,ac as H0,b as Qe,ba as b,bb as fe,ca as C,cb as gn,d as kv,da as em,db as _i,e as Jp,ea as mh,eb as cm,f as Qp,fa as Hn,fb as le,g as eh,ga as tm,gb as pt,h as N0,ha as Za,hb as Te,i as $d,ia as im,ib as Ee,j as Zd,ja as fh,jb as s,k as Vi,ka as V0,kb as l,l as Gi,la as di,lb as x,m as Jr,ma as ea,mb as Si,n as an,na as nm,nb as Ti,o as ut,oa as Lo,ob as Q,p as pn,pa as xa,pb as zn,q as th,qa as or,qb as Ii,r as ih,ra as Z,rb as T,s as Be,sa as ph,sb as h,t as qd,ta as rm,tb as Eh,u as Un,ua as hh,ub as Ah,v as Yd,va as il,vb as Mh,w as nh,wa as gh,wb as W0,x as Xd,xa as am,xb as j0,y as rh,ya as _h,yb as Rr,z as ah,za as om,zb as d}from"./chunk-QP5AOGDX.js";var lp=kv((Bc,y2)=>{"use strict";(function(i,t){typeof Bc=="object"&&typeof y2<"u"?t(Bc):typeof define=="function"&&define.amd?define(["exports"],t):(i=typeof globalThis<"u"?globalThis:i||self,t(i.leaflet={}))})(Bc,function(i){"use strict";var t="1.9.4";function e(o){var c,f,_,w;for(f=1,_=arguments.length;f<_;f++){w=arguments[f];for(c in w)o[c]=w[c]}return o}var n=Object.create||function(){function o(){}return function(c){return o.prototype=c,new o}}();function r(o,c){var f=Array.prototype.slice;if(o.bind)return o.bind.apply(o,f.call(arguments,1));var _=f.call(arguments,2);return function(){return o.apply(c,_.length?_.concat(f.call(arguments)):arguments)}}var a=0;function u(o){return"_leaflet_id"in o||(o._leaflet_id=++a),o._leaflet_id}function p(o,c,f){var _,w,P,Y;return Y=function(){_=!1,w&&(P.apply(f,w),w=!1)},P=function(){_?w=arguments:(o.apply(f,arguments),setTimeout(Y,c),_=!0)},P}function g(o,c,f){var _=c[1],w=c[0],P=_-w;return o===_&&f?o:((o-w)%P+P)%P+w}function v(){return!1}function y(o,c){if(c===!1)return o;var f=Math.pow(10,c===void 0?6:c);return Math.round(o*f)/f}function M(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function E(o){return M(o).split(/\s+/)}function A(o,c){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?n(o.options):{});for(var f in c)o.options[f]=c[f];return o.options}function O(o,c,f){var _=[];for(var w in o)_.push(encodeURIComponent(f?w.toUpperCase():w)+"="+encodeURIComponent(o[w]));return(!c||c.indexOf("?")===-1?"?":"&")+_.join("&")}var F=/\{ *([\w_ -]+) *\}/g;function D(o,c){return o.replace(F,function(f,_){var w=c[_];if(w===void 0)throw new Error("No value provided for variable "+f);return typeof w=="function"&&(w=w(c)),w})}var ee=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function ie(o,c){for(var f=0;f<o.length;f++)if(o[f]===c)return f;return-1}var te="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function pe(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var Ce=0;function ze(o){var c=+new Date,f=Math.max(0,16-(c-Ce));return Ce=c+f,window.setTimeout(o,f)}var ne=window.requestAnimationFrame||pe("RequestAnimationFrame")||ze,xe=window.cancelAnimationFrame||pe("CancelAnimationFrame")||pe("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function me(o,c,f){if(f&&ne===ze)o.call(c);else return ne.call(window,r(o,c))}function _e(o){o&&xe.call(window,o)}var Ae={__proto__:null,extend:e,create:n,bind:r,get lastId(){return a},stamp:u,throttle:p,wrapNum:g,falseFn:v,formatNum:y,trim:M,splitWords:E,setOptions:A,getParamString:O,template:D,isArray:ee,indexOf:ie,emptyImageUrl:te,requestFn:ne,cancelFn:xe,requestAnimFrame:me,cancelAnimFrame:_e};function we(){}we.extend=function(o){var c=function(){A(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},f=c.__super__=this.prototype,_=n(f);_.constructor=c,c.prototype=_;for(var w in this)Object.prototype.hasOwnProperty.call(this,w)&&w!=="prototype"&&w!=="__super__"&&(c[w]=this[w]);return o.statics&&e(c,o.statics),o.includes&&(Ke(o.includes),e.apply(null,[_].concat(o.includes))),e(_,o),delete _.statics,delete _.includes,_.options&&(_.options=f.options?n(f.options):{},e(_.options,o.options)),_._initHooks=[],_.callInitHooks=function(){if(!this._initHooksCalled){f.callInitHooks&&f.callInitHooks.call(this),this._initHooksCalled=!0;for(var P=0,Y=_._initHooks.length;P<Y;P++)_._initHooks[P].call(this)}},c},we.include=function(o){var c=this.prototype.options;return e(this.prototype,o),o.options&&(this.prototype.options=c,this.mergeOptions(o.options)),this},we.mergeOptions=function(o){return e(this.prototype.options,o),this},we.addInitHook=function(o){var c=Array.prototype.slice.call(arguments,1),f=typeof o=="function"?o:function(){this[o].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(f),this};function Ke(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=ee(o)?o:[o];for(var c=0;c<o.length;c++)o[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var mt={on:function(o,c,f){if(typeof o=="object")for(var _ in o)this._on(_,o[_],c);else{o=E(o);for(var w=0,P=o.length;w<P;w++)this._on(o[w],c,f)}return this},off:function(o,c,f){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var _ in o)this._off(_,o[_],c);else{o=E(o);for(var w=arguments.length===1,P=0,Y=o.length;P<Y;P++)w?this._off(o[P]):this._off(o[P],c,f)}return this},_on:function(o,c,f,_){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(o,c,f)===!1){f===this&&(f=void 0);var w={fn:c,ctx:f};_&&(w.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(w)}},_off:function(o,c,f){var _,w,P;if(this._events&&(_=this._events[o],!!_)){if(arguments.length===1){if(this._firingCount)for(w=0,P=_.length;w<P;w++)_[w].fn=v;delete this._events[o];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var Y=this._listens(o,c,f);if(Y!==!1){var re=_[Y];this._firingCount&&(re.fn=v,this._events[o]=_=_.slice()),_.splice(Y,1)}}},fire:function(o,c,f){if(!this.listens(o,f))return this;var _=e({},c,{type:o,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var w=this._events[o];if(w){this._firingCount=this._firingCount+1||1;for(var P=0,Y=w.length;P<Y;P++){var re=w[P],de=re.fn;re.once&&this.off(o,de,re.ctx),de.call(re.ctx||this,_)}this._firingCount--}}return f&&this._propagateEvent(_),this},listens:function(o,c,f,_){typeof o!="string"&&console.warn('"string" type argument expected');var w=c;typeof c!="function"&&(_=!!c,w=void 0,f=void 0);var P=this._events&&this._events[o];if(P&&P.length&&this._listens(o,w,f)!==!1)return!0;if(_){for(var Y in this._eventParents)if(this._eventParents[Y].listens(o,c,f,_))return!0}return!1},_listens:function(o,c,f){if(!this._events)return!1;var _=this._events[o]||[];if(!c)return!!_.length;f===this&&(f=void 0);for(var w=0,P=_.length;w<P;w++)if(_[w].fn===c&&_[w].ctx===f)return w;return!1},once:function(o,c,f){if(typeof o=="object")for(var _ in o)this._on(_,o[_],c,!0);else{o=E(o);for(var w=0,P=o.length;w<P;w++)this._on(o[w],c,f,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[u(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[u(o)],this},_propagateEvent:function(o){for(var c in this._eventParents)this._eventParents[c].fire(o.type,e({layer:o.target,propagatedFrom:o.target},o),!0)}};mt.addEventListener=mt.on,mt.removeEventListener=mt.clearAllEventListeners=mt.off,mt.addOneTimeEventListener=mt.once,mt.fireEvent=mt.fire,mt.hasEventListeners=mt.listens;var it=we.extend(mt);function Je(o,c,f){this.x=f?Math.round(o):o,this.y=f?Math.round(c):c}var Pi=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};Je.prototype={clone:function(){return new Je(this.x,this.y)},add:function(o){return this.clone()._add(nt(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(nt(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new Je(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new Je(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Pi(this.x),this.y=Pi(this.y),this},distanceTo:function(o){o=nt(o);var c=o.x-this.x,f=o.y-this.y;return Math.sqrt(c*c+f*f)},equals:function(o){return o=nt(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=nt(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function nt(o,c,f){return o instanceof Je?o:ee(o)?new Je(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new Je(o.x,o.y):new Je(o,c,f)}function St(o,c){if(o)for(var f=c?[o,c]:o,_=0,w=f.length;_<w;_++)this.extend(f[_])}St.prototype={extend:function(o){var c,f;if(!o)return this;if(o instanceof Je||typeof o[0]=="number"||"x"in o)c=f=nt(o);else if(o=Wt(o),c=o.min,f=o.max,!c||!f)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=f.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(f.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(f.y,this.max.y)),this},getCenter:function(o){return nt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return nt(this.min.x,this.max.y)},getTopRight:function(){return nt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var c,f;return typeof o[0]=="number"||o instanceof Je?o=nt(o):o=Wt(o),o instanceof St?(c=o.min,f=o.max):c=f=o,c.x>=this.min.x&&f.x<=this.max.x&&c.y>=this.min.y&&f.y<=this.max.y},intersects:function(o){o=Wt(o);var c=this.min,f=this.max,_=o.min,w=o.max,P=w.x>=c.x&&_.x<=f.x,Y=w.y>=c.y&&_.y<=f.y;return P&&Y},overlaps:function(o){o=Wt(o);var c=this.min,f=this.max,_=o.min,w=o.max,P=w.x>c.x&&_.x<f.x,Y=w.y>c.y&&_.y<f.y;return P&&Y},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var c=this.min,f=this.max,_=Math.abs(c.x-f.x)*o,w=Math.abs(c.y-f.y)*o;return Wt(nt(c.x-_,c.y-w),nt(f.x+_,f.y+w))},equals:function(o){return o?(o=Wt(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function Wt(o,c){return!o||o instanceof St?o:new St(o,c)}function Jt(o,c){if(o)for(var f=c?[o,c]:o,_=0,w=f.length;_<w;_++)this.extend(f[_])}Jt.prototype={extend:function(o){var c=this._southWest,f=this._northEast,_,w;if(o instanceof ue)_=o,w=o;else if(o instanceof Jt){if(_=o._southWest,w=o._northEast,!_||!w)return this}else return o?this.extend(K(o)||X(o)):this;return!c&&!f?(this._southWest=new ue(_.lat,_.lng),this._northEast=new ue(w.lat,w.lng)):(c.lat=Math.min(_.lat,c.lat),c.lng=Math.min(_.lng,c.lng),f.lat=Math.max(w.lat,f.lat),f.lng=Math.max(w.lng,f.lng)),this},pad:function(o){var c=this._southWest,f=this._northEast,_=Math.abs(c.lat-f.lat)*o,w=Math.abs(c.lng-f.lng)*o;return new Jt(new ue(c.lat-_,c.lng-w),new ue(f.lat+_,f.lng+w))},getCenter:function(){return new ue((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ue(this.getNorth(),this.getWest())},getSouthEast:function(){return new ue(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof ue||"lat"in o?o=K(o):o=X(o);var c=this._southWest,f=this._northEast,_,w;return o instanceof Jt?(_=o.getSouthWest(),w=o.getNorthEast()):_=w=o,_.lat>=c.lat&&w.lat<=f.lat&&_.lng>=c.lng&&w.lng<=f.lng},intersects:function(o){o=X(o);var c=this._southWest,f=this._northEast,_=o.getSouthWest(),w=o.getNorthEast(),P=w.lat>=c.lat&&_.lat<=f.lat,Y=w.lng>=c.lng&&_.lng<=f.lng;return P&&Y},overlaps:function(o){o=X(o);var c=this._southWest,f=this._northEast,_=o.getSouthWest(),w=o.getNorthEast(),P=w.lat>c.lat&&_.lat<f.lat,Y=w.lng>c.lng&&_.lng<f.lng;return P&&Y},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,c){return o?(o=X(o),this._southWest.equals(o.getSouthWest(),c)&&this._northEast.equals(o.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function X(o,c){return o instanceof Jt?o:new Jt(o,c)}function ue(o,c,f){if(isNaN(o)||isNaN(c))throw new Error("Invalid LatLng object: ("+o+", "+c+")");this.lat=+o,this.lng=+c,f!==void 0&&(this.alt=+f)}ue.prototype={equals:function(o,c){if(!o)return!1;o=K(o);var f=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return f<=(c===void 0?1e-9:c)},toString:function(o){return"LatLng("+y(this.lat,o)+", "+y(this.lng,o)+")"},distanceTo:function(o){return ye.distance(this,K(o))},wrap:function(){return ye.wrapLatLng(this)},toBounds:function(o){var c=180*o/40075017,f=c/Math.cos(Math.PI/180*this.lat);return X([this.lat-c,this.lng-f],[this.lat+c,this.lng+f])},clone:function(){return new ue(this.lat,this.lng,this.alt)}};function K(o,c,f){return o instanceof ue?o:ee(o)&&typeof o[0]!="object"?o.length===3?new ue(o[0],o[1],o[2]):o.length===2?new ue(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new ue(o.lat,"lng"in o?o.lng:o.lon,o.alt):c===void 0?null:new ue(o,c,f)}var J={latLngToPoint:function(o,c){var f=this.projection.project(o),_=this.scale(c);return this.transformation._transform(f,_)},pointToLatLng:function(o,c){var f=this.scale(c),_=this.transformation.untransform(o,f);return this.projection.unproject(_)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var c=this.projection.bounds,f=this.scale(o),_=this.transformation.transform(c.min,f),w=this.transformation.transform(c.max,f);return new St(_,w)},infinite:!1,wrapLatLng:function(o){var c=this.wrapLng?g(o.lng,this.wrapLng,!0):o.lng,f=this.wrapLat?g(o.lat,this.wrapLat,!0):o.lat,_=o.alt;return new ue(f,c,_)},wrapLatLngBounds:function(o){var c=o.getCenter(),f=this.wrapLatLng(c),_=c.lat-f.lat,w=c.lng-f.lng;if(_===0&&w===0)return o;var P=o.getSouthWest(),Y=o.getNorthEast(),re=new ue(P.lat-_,P.lng-w),de=new ue(Y.lat-_,Y.lng-w);return new Jt(re,de)}},ye=e({},J,{wrapLng:[-180,180],R:6371e3,distance:function(o,c){var f=Math.PI/180,_=o.lat*f,w=c.lat*f,P=Math.sin((c.lat-o.lat)*f/2),Y=Math.sin((c.lng-o.lng)*f/2),re=P*P+Math.cos(_)*Math.cos(w)*Y*Y,de=2*Math.atan2(Math.sqrt(re),Math.sqrt(1-re));return this.R*de}}),Ze=6378137,st={R:Ze,MAX_LATITUDE:85.0511287798,project:function(o){var c=Math.PI/180,f=this.MAX_LATITUDE,_=Math.max(Math.min(f,o.lat),-f),w=Math.sin(_*c);return new Je(this.R*o.lng*c,this.R*Math.log((1+w)/(1-w))/2)},unproject:function(o){var c=180/Math.PI;return new ue((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*c,o.x*c/this.R)},bounds:function(){var o=Ze*Math.PI;return new St([-o,-o],[o,o])}()};function Ge(o,c,f,_){if(ee(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=c,this._c=f,this._d=_}Ge.prototype={transform:function(o,c){return this._transform(o.clone(),c)},_transform:function(o,c){return c=c||1,o.x=c*(this._a*o.x+this._b),o.y=c*(this._c*o.y+this._d),o},untransform:function(o,c){return c=c||1,new Je((o.x/c-this._b)/this._a,(o.y/c-this._d)/this._c)}};function Fe(o,c,f,_){return new Ge(o,c,f,_)}var jt=e({},ye,{code:"EPSG:3857",projection:st,transformation:function(){var o=.5/(Math.PI*st.R);return Fe(o,.5,-o,.5)}()}),Dt=e({},jt,{code:"EPSG:900913"});function Li(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function Rt(o,c){var f="",_,w,P,Y,re,de;for(_=0,P=o.length;_<P;_++){for(re=o[_],w=0,Y=re.length;w<Y;w++)de=re[w],f+=(w?"L":"M")+de.x+" "+de.y;f+=c?at.svg?"z":"x":""}return f||"M0 0"}var yn=document.documentElement.style,li="ActiveXObject"in window,qe=li&&!document.addEventListener,bn="msLaunchUri"in navigator&&!("documentMode"in document),Bn=Mn("webkit"),kr=Mn("android"),Zr=Mn("android 2")||Mn("android 3"),h0=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Vs=kr&&Mn("Google")&&h0<537&&!("AudioNode"in window),An=!!window.opera,Ua=!bn&&Mn("chrome"),yo=Mn("gecko")&&!Bn&&!An&&!li,Bs=!Ua&&Mn("safari"),Pr=Mn("phantom"),g0="OTransition"in yn,_0=navigator.platform.indexOf("Win")===0,Us=li&&"transition"in yn,bo="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Zr,Ws="MozPerspective"in yn,v0=!window.L_DISABLE_3D&&(Us||bo||Ws)&&!g0&&!Pr,fa=typeof orientation<"u"||Mn("mobile"),dd=fa&&Bn,md=fa&&bo,js=!window.PointerEvent&&window.MSPointerEvent,Hs=!!(window.PointerEvent||js),zs="ontouchstart"in window||!!window.TouchEvent,fd=!window.L_NO_TOUCH&&(zs||Hs),pd=fa&&An,Co=fa&&yo,hd=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,gd=function(){var o=!1;try{var c=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",v,c),window.removeEventListener("testPassiveEventSupport",v,c)}catch{}return o}(),_d=function(){return!!document.createElement("canvas").getContext}(),Gs=!!(document.createElementNS&&Li("svg").createSVGRect),vd=!!Gs&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),xd=!Gs&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var c=o.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),yd=navigator.platform.indexOf("Mac")===0,bd=navigator.platform.indexOf("Linux")===0;function Mn(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var at={ie:li,ielt9:qe,edge:bn,webkit:Bn,android:kr,android23:Zr,androidStock:Vs,opera:An,chrome:Ua,gecko:yo,safari:Bs,phantom:Pr,opera12:g0,win:_0,ie3d:Us,webkit3d:bo,gecko3d:Ws,any3d:v0,mobile:fa,mobileWebkit:dd,mobileWebkit3d:md,msPointer:js,pointer:Hs,touch:fd,touchNative:zs,mobileOpera:pd,mobileGecko:Co,retina:hd,passiveEvents:gd,canvas:_d,svg:Gs,vml:xd,inlineSvg:vd,mac:yd,linux:bd},x0=at.msPointer?"MSPointerDown":"pointerdown",y0=at.msPointer?"MSPointerMove":"pointermove",k=at.msPointer?"MSPointerUp":"pointerup",W=at.msPointer?"MSPointerCancel":"pointercancel",I={touchstart:x0,touchmove:y0,touchend:k,touchcancel:W},B={touchstart:$e,touchmove:ke,touchend:ke,touchcancel:ke},U={},j=!1;function ae(o,c,f){return c==="touchstart"&&Me(),B[c]?(f=B[c].bind(this,f),o.addEventListener(I[c],f,!1),f):(console.warn("wrong event specified:",c),v)}function he(o,c,f){if(!I[c]){console.warn("wrong event specified:",c);return}o.removeEventListener(I[c],f,!1)}function se(o){U[o.pointerId]=o}function oe(o){U[o.pointerId]&&(U[o.pointerId]=o)}function ce(o){delete U[o.pointerId]}function Me(){j||(document.addEventListener(x0,se,!0),document.addEventListener(y0,oe,!0),document.addEventListener(k,ce,!0),document.addEventListener(W,ce,!0),j=!0)}function ke(o,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var f in U)c.touches.push(U[f]);c.changedTouches=[c],o(c)}}function $e(o,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&rn(c),ke(o,c)}function De(o){var c={},f,_;for(_ in o)f=o[_],c[_]=f&&f.bind?f.bind(o):f;return o=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var Ve=200;function ct(o,c){o.addEventListener("dblclick",c);var f=0,_;function w(P){if(P.detail!==1){_=P.detail;return}if(!(P.pointerType==="mouse"||P.sourceCapabilities&&!P.sourceCapabilities.firesTouchEvents)){var Y=pp(P);if(!(Y.some(function(de){return de instanceof HTMLLabelElement&&de.attributes.for})&&!Y.some(function(de){return de instanceof HTMLInputElement||de instanceof HTMLSelectElement}))){var re=Date.now();re-f<=Ve?(_++,_===2&&c(De(P))):_=1,f=re}}}return o.addEventListener("click",w),{dblclick:c,simDblclick:w}}function ui(o,c){o.removeEventListener("dblclick",c.dblclick),o.removeEventListener("click",c.simDblclick)}var Yi=C0(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),fi=C0(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),fn=fi==="webkitTransition"||fi==="OTransition"?fi+"End":"transitionend";function pa(o){return typeof o=="string"?document.getElementById(o):o}function pr(o,c){var f=o.style[c]||o.currentStyle&&o.currentStyle[c];if((!f||f==="auto")&&document.defaultView){var _=document.defaultView.getComputedStyle(o,null);f=_?_[c]:null}return f==="auto"?null:f}function yt(o,c,f){var _=document.createElement(o);return _.className=c||"",f&&f.appendChild(_),_}function ci(o){var c=o.parentNode;c&&c.removeChild(o)}function Fn(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function wo(o){var c=o.parentNode;c&&c.lastChild!==o&&c.appendChild(o)}function So(o){var c=o.parentNode;c&&c.firstChild!==o&&c.insertBefore(o,c.firstChild)}function Cd(o,c){if(o.classList!==void 0)return o.classList.contains(c);var f=b0(o);return f.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(f)}function bt(o,c){if(o.classList!==void 0)for(var f=E(c),_=0,w=f.length;_<w;_++)o.classList.add(f[_]);else if(!Cd(o,c)){var P=b0(o);wd(o,(P?P+" ":"")+c)}}function Di(o,c){o.classList!==void 0?o.classList.remove(c):wd(o,M((" "+b0(o)+" ").replace(" "+c+" "," ")))}function wd(o,c){o.className.baseVal===void 0?o.className=c:o.className.baseVal=c}function b0(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function ir(o,c){"opacity"in o.style?o.style.opacity=c:"filter"in o.style&&L2(o,c)}function L2(o,c){var f=!1,_="DXImageTransform.Microsoft.Alpha";try{f=o.filters.item(_)}catch{if(c===1)return}c=Math.round(c*100),f?(f.Enabled=c!==100,f.Opacity=c):o.style.filter+=" progid:"+_+"(opacity="+c+")"}function C0(o){for(var c=document.documentElement.style,f=0;f<o.length;f++)if(o[f]in c)return o[f];return!1}function Wa(o,c,f){var _=c||new Je(0,0);o.style[Yi]=(at.ie3d?"translate("+_.x+"px,"+_.y+"px)":"translate3d("+_.x+"px,"+_.y+"px,0)")+(f?" scale("+f+")":"")}function Ri(o,c){o._leaflet_pos=c,at.any3d?Wa(o,c):(o.style.left=c.x+"px",o.style.top=c.y+"px")}function ja(o){return o._leaflet_pos||new Je(0,0)}var $s,Zs,Sd;if("onselectstart"in document)$s=function(){ht(window,"selectstart",rn)},Zs=function(){pi(window,"selectstart",rn)};else{var qs=C0(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);$s=function(){if(qs){var o=document.documentElement.style;Sd=o[qs],o[qs]="none"}},Zs=function(){qs&&(document.documentElement.style[qs]=Sd,Sd=void 0)}}function Td(){ht(window,"dragstart",rn)}function Ed(){pi(window,"dragstart",rn)}var w0,Ad;function Md(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(S0(),w0=o,Ad=o.style.outlineStyle,o.style.outlineStyle="none",ht(window,"keydown",S0))}function S0(){w0&&(w0.style.outlineStyle=Ad,w0=void 0,Ad=void 0,pi(window,"keydown",S0))}function mp(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function Fd(o){var c=o.getBoundingClientRect();return{x:c.width/o.offsetWidth||1,y:c.height/o.offsetHeight||1,boundingClientRect:c}}var R2={__proto__:null,TRANSFORM:Yi,TRANSITION:fi,TRANSITION_END:fn,get:pa,getStyle:pr,create:yt,remove:ci,empty:Fn,toFront:wo,toBack:So,hasClass:Cd,addClass:bt,removeClass:Di,setClass:wd,getClass:b0,setOpacity:ir,testProp:C0,setTransform:Wa,setPosition:Ri,getPosition:ja,get disableTextSelection(){return $s},get enableTextSelection(){return Zs},disableImageDrag:Td,enableImageDrag:Ed,preventOutline:Md,restoreOutline:S0,getSizedParentNode:mp,getScale:Fd};function ht(o,c,f,_){if(c&&typeof c=="object")for(var w in c)Pd(o,w,c[w],f);else{c=E(c);for(var P=0,Y=c.length;P<Y;P++)Pd(o,c[P],f,_)}return this}var Dr="_leaflet_events";function pi(o,c,f,_){if(arguments.length===1)fp(o),delete o[Dr];else if(c&&typeof c=="object")for(var w in c)Dd(o,w,c[w],f);else if(c=E(c),arguments.length===2)fp(o,function(re){return ie(c,re)!==-1});else for(var P=0,Y=c.length;P<Y;P++)Dd(o,c[P],f,_);return this}function fp(o,c){for(var f in o[Dr]){var _=f.split(/\d/)[0];(!c||c(_))&&Dd(o,_,null,null,f)}}var kd={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Pd(o,c,f,_){var w=c+u(f)+(_?"_"+u(_):"");if(o[Dr]&&o[Dr][w])return this;var P=function(re){return f.call(_||o,re||window.event)},Y=P;!at.touchNative&&at.pointer&&c.indexOf("touch")===0?P=ae(o,c,P):at.touch&&c==="dblclick"?P=ct(o,P):"addEventListener"in o?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?o.addEventListener(kd[c]||c,P,at.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(P=function(re){re=re||window.event,Od(o,re)&&Y(re)},o.addEventListener(kd[c],P,!1)):o.addEventListener(c,Y,!1):o.attachEvent("on"+c,P),o[Dr]=o[Dr]||{},o[Dr][w]=P}function Dd(o,c,f,_,w){w=w||c+u(f)+(_?"_"+u(_):"");var P=o[Dr]&&o[Dr][w];if(!P)return this;!at.touchNative&&at.pointer&&c.indexOf("touch")===0?he(o,c,P):at.touch&&c==="dblclick"?ui(o,P):"removeEventListener"in o?o.removeEventListener(kd[c]||c,P,!1):o.detachEvent("on"+c,P),o[Dr][w]=null}function Ha(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function Id(o){return Pd(o,"wheel",Ha),this}function Ys(o){return ht(o,"mousedown touchstart dblclick contextmenu",Ha),o._leaflet_disable_click=!0,this}function rn(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function za(o){return rn(o),Ha(o),this}function pp(o){if(o.composedPath)return o.composedPath();for(var c=[],f=o.target;f;)c.push(f),f=f.parentNode;return c}function hp(o,c){if(!c)return new Je(o.clientX,o.clientY);var f=Fd(c),_=f.boundingClientRect;return new Je((o.clientX-_.left)/f.x-c.clientLeft,(o.clientY-_.top)/f.y-c.clientTop)}var N2=at.linux&&at.chrome?window.devicePixelRatio:at.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function gp(o){return at.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/N2:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function Od(o,c){var f=c.relatedTarget;if(!f)return!0;try{for(;f&&f!==o;)f=f.parentNode}catch{return!1}return f!==o}var V2={__proto__:null,on:ht,off:pi,stopPropagation:Ha,disableScrollPropagation:Id,disableClickPropagation:Ys,preventDefault:rn,stop:za,getPropagationPath:pp,getMousePosition:hp,getWheelDelta:gp,isExternalTarget:Od,addListener:ht,removeListener:pi},_p=it.extend({run:function(o,c,f,_){this.stop(),this._el=o,this._inProgress=!0,this._duration=f||.25,this._easeOutPower=1/Math.max(_||.5,.2),this._startPos=ja(o),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=me(this._animate,this),this._step()},_step:function(o){var c=+new Date-this._startTime,f=this._duration*1e3;c<f?this._runFrame(this._easeOut(c/f),o):(this._runFrame(1),this._complete())},_runFrame:function(o,c){var f=this._startPos.add(this._offset.multiplyBy(o));c&&f._round(),Ri(this._el,f),this.fire("step")},_complete:function(){_e(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),Vt=it.extend({options:{crs:jt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,c){c=A(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(K(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=fi&&at.any3d&&!at.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ht(this._proxy,fn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,c,f){if(c=c===void 0?this._zoom:this._limitZoom(c),o=this._limitCenter(K(o),c,this.options.maxBounds),f=f||{},this._stop(),this._loaded&&!f.reset&&f!==!0){f.animate!==void 0&&(f.zoom=e({animate:f.animate},f.zoom),f.pan=e({animate:f.animate,duration:f.duration},f.pan));var _=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,c,f.zoom):this._tryAnimatedPan(o,f.pan);if(_)return clearTimeout(this._sizeTimer),this}return this._resetView(o,c,f.pan&&f.pan.noMoveStart),this},setZoom:function(o,c){return this._loaded?this.setView(this.getCenter(),o,{zoom:c}):(this._zoom=o,this)},zoomIn:function(o,c){return o=o||(at.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,c)},zoomOut:function(o,c){return o=o||(at.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,c)},setZoomAround:function(o,c,f){var _=this.getZoomScale(c),w=this.getSize().divideBy(2),P=o instanceof Je?o:this.latLngToContainerPoint(o),Y=P.subtract(w).multiplyBy(1-1/_),re=this.containerPointToLatLng(w.add(Y));return this.setView(re,c,{zoom:f})},_getBoundsCenterZoom:function(o,c){c=c||{},o=o.getBounds?o.getBounds():X(o);var f=nt(c.paddingTopLeft||c.padding||[0,0]),_=nt(c.paddingBottomRight||c.padding||[0,0]),w=this.getBoundsZoom(o,!1,f.add(_));if(w=typeof c.maxZoom=="number"?Math.min(c.maxZoom,w):w,w===1/0)return{center:o.getCenter(),zoom:w};var P=_.subtract(f).divideBy(2),Y=this.project(o.getSouthWest(),w),re=this.project(o.getNorthEast(),w),de=this.unproject(Y.add(re).divideBy(2).add(P),w);return{center:de,zoom:w}},fitBounds:function(o,c){if(o=X(o),!o.isValid())throw new Error("Bounds are not valid.");var f=this._getBoundsCenterZoom(o,c);return this.setView(f.center,f.zoom,c)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,c){return this.setView(o,this._zoom,{pan:c})},panBy:function(o,c){if(o=nt(o).round(),c=c||{},!o.x&&!o.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new _p,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){bt(this._mapPane,"leaflet-pan-anim");var f=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,f,c.duration||.25,c.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,c,f){if(f=f||{},f.animate===!1||!at.any3d)return this.setView(o,c,f);this._stop();var _=this.project(this.getCenter()),w=this.project(o),P=this.getSize(),Y=this._zoom;o=K(o),c=c===void 0?Y:c;var re=Math.max(P.x,P.y),de=re*this.getZoomScale(Y,c),Se=w.distanceTo(_)||1,He=1.42,lt=He*He;function Et(Ni){var R0=Ni?-1:1,Ev=Ni?de:re,Av=de*de-re*re+R0*lt*lt*Se*Se,Mv=2*Ev*lt*Se,Gd=Av/Mv,Kp=Math.sqrt(Gd*Gd+1)-Gd,Fv=Kp<1e-9?-18:Math.log(Kp);return Fv}function Cn(Ni){return(Math.exp(Ni)-Math.exp(-Ni))/2}function Xi(Ni){return(Math.exp(Ni)+Math.exp(-Ni))/2}function rr(Ni){return Cn(Ni)/Xi(Ni)}var kn=Et(0);function ko(Ni){return re*(Xi(kn)/Xi(kn+He*Ni))}function Cv(Ni){return re*(Xi(kn)*rr(kn+He*Ni)-Cn(kn))/lt}function wv(Ni){return 1-Math.pow(1-Ni,1.5)}var Sv=Date.now(),Yp=(Et(1)-kn)/He,Tv=f.duration?1e3*f.duration:1e3*Yp*.8;function Xp(){var Ni=(Date.now()-Sv)/Tv,R0=wv(Ni)*Yp;Ni<=1?(this._flyToFrame=me(Xp,this),this._move(this.unproject(_.add(w.subtract(_).multiplyBy(Cv(R0)/Se)),Y),this.getScaleZoom(re/ko(R0),Y),{flyTo:!0})):this._move(o,c)._moveEnd(!0)}return this._moveStart(!0,f.noMoveStart),Xp.call(this),this},flyToBounds:function(o,c){var f=this._getBoundsCenterZoom(o,c);return this.flyTo(f.center,f.zoom,c)},setMaxBounds:function(o){return o=X(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var c=this.options.minZoom;return this.options.minZoom=o,this._loaded&&c!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var c=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&c!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,c){this._enforcingBounds=!0;var f=this.getCenter(),_=this._limitCenter(f,this._zoom,X(o));return f.equals(_)||this.panTo(_,c),this._enforcingBounds=!1,this},panInside:function(o,c){c=c||{};var f=nt(c.paddingTopLeft||c.padding||[0,0]),_=nt(c.paddingBottomRight||c.padding||[0,0]),w=this.project(this.getCenter()),P=this.project(o),Y=this.getPixelBounds(),re=Wt([Y.min.add(f),Y.max.subtract(_)]),de=re.getSize();if(!re.contains(P)){this._enforcingBounds=!0;var Se=P.subtract(re.getCenter()),He=re.extend(P).getSize().subtract(de);w.x+=Se.x<0?-He.x:He.x,w.y+=Se.y<0?-He.y:He.y,this.panTo(this.unproject(w),c),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=e({animate:!1,pan:!0},o===!0?{animate:!0}:o);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var f=this.getSize(),_=c.divideBy(2).round(),w=f.divideBy(2).round(),P=_.subtract(w);return!P.x&&!P.y?this:(o.animate&&o.pan?this.panBy(P):(o.pan&&this._rawPanBy(P),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:f}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=e({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=r(this._handleGeolocationResponse,this),f=r(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,f,o):navigator.geolocation.getCurrentPosition(c,f,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var c=o.code,f=o.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+f+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var c=o.coords.latitude,f=o.coords.longitude,_=new ue(c,f),w=_.toBounds(o.coords.accuracy*2),P=this._locateOptions;if(P.setView){var Y=this.getBoundsZoom(w);this.setView(_,P.maxZoom?Math.min(Y,P.maxZoom):Y)}var re={latlng:_,bounds:w,timestamp:o.timestamp};for(var de in o.coords)typeof o.coords[de]=="number"&&(re[de]=o.coords[de]);this.fire("locationfound",re)}},addHandler:function(o,c){if(!c)return this;var f=this[o]=new c(this);return this._handlers.push(f),this.options[o]&&f.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ci(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(_e(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)ci(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,c){var f="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),_=yt("div",f,c||this._mapPane);return o&&(this._panes[o]=_),_},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),c=this.unproject(o.getBottomLeft()),f=this.unproject(o.getTopRight());return new Jt(c,f)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,c,f){o=X(o),f=nt(f||[0,0]);var _=this.getZoom()||0,w=this.getMinZoom(),P=this.getMaxZoom(),Y=o.getNorthWest(),re=o.getSouthEast(),de=this.getSize().subtract(f),Se=Wt(this.project(re,_),this.project(Y,_)).getSize(),He=at.any3d?this.options.zoomSnap:1,lt=de.x/Se.x,Et=de.y/Se.y,Cn=c?Math.max(lt,Et):Math.min(lt,Et);return _=this.getScaleZoom(Cn,_),He&&(_=Math.round(_/(He/100))*(He/100),_=c?Math.ceil(_/He)*He:Math.floor(_/He)*He),Math.max(w,Math.min(P,_))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Je(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,c){var f=this._getTopLeftPoint(o,c);return new St(f,f.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,c){var f=this.options.crs;return c=c===void 0?this._zoom:c,f.scale(o)/f.scale(c)},getScaleZoom:function(o,c){var f=this.options.crs;c=c===void 0?this._zoom:c;var _=f.zoom(o*f.scale(c));return isNaN(_)?1/0:_},project:function(o,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(K(o),c)},unproject:function(o,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(nt(o),c)},layerPointToLatLng:function(o){var c=nt(o).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(o){var c=this.project(K(o))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(K(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(X(o))},distance:function(o,c){return this.options.crs.distance(K(o),K(c))},containerPointToLayerPoint:function(o){return nt(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return nt(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var c=this.containerPointToLayerPoint(nt(o));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(K(o)))},mouseEventToContainerPoint:function(o){return hp(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var c=this._container=pa(o);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ht(c,"scroll",this._onScroll,this),this._containerId=u(c)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&at.any3d,bt(o,"leaflet-container"+(at.touch?" leaflet-touch":"")+(at.retina?" leaflet-retina":"")+(at.ielt9?" leaflet-oldie":"")+(at.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=pr(o,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ri(this._mapPane,new Je(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(bt(o.markerPane,"leaflet-zoom-hide"),bt(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,c,f){Ri(this._mapPane,new Je(0,0));var _=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var w=this._zoom!==c;this._moveStart(w,f)._move(o,c)._moveEnd(w),this.fire("viewreset"),_&&this.fire("load")},_moveStart:function(o,c){return o&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(o,c,f,_){c===void 0&&(c=this._zoom);var w=this._zoom!==c;return this._zoom=c,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),_?f&&f.pinch&&this.fire("zoom",f):((w||f&&f.pinch)&&this.fire("zoom",f),this.fire("move",f)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return _e(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){Ri(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[u(this._container)]=this;var c=o?pi:ht;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),at.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){_e(this._resizeRequest),this._resizeRequest=me(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,c){for(var f=[],_,w=c==="mouseout"||c==="mouseover",P=o.target||o.srcElement,Y=!1;P;){if(_=this._targets[u(P)],_&&(c==="click"||c==="preclick")&&this._draggableMoved(_)){Y=!0;break}if(_&&_.listens(c,!0)&&(w&&!Od(P,o)||(f.push(_),w))||P===this._container)break;P=P.parentNode}return!f.length&&!Y&&!w&&this.listens(c,!0)&&(f=[this]),f},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var c=o.target||o.srcElement;if(!(!this._loaded||c._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(c))){var f=o.type;f==="mousedown"&&Md(c),this._fireDOMEvent(o,f)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,c,f){if(o.type==="click"){var _=e({},o);_.type="preclick",this._fireDOMEvent(_,_.type,f)}var w=this._findEventTargets(o,c);if(f){for(var P=[],Y=0;Y<f.length;Y++)f[Y].listens(c,!0)&&P.push(f[Y]);w=P.concat(w)}if(w.length){c==="contextmenu"&&rn(o);var re=w[0],de={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var Se=re.getLatLng&&(!re._radius||re._radius<=10);de.containerPoint=Se?this.latLngToContainerPoint(re.getLatLng()):this.mouseEventToContainerPoint(o),de.layerPoint=this.containerPointToLayerPoint(de.containerPoint),de.latlng=Se?re.getLatLng():this.layerPointToLatLng(de.layerPoint)}for(Y=0;Y<w.length;Y++)if(w[Y].fire(c,de,!0),de.originalEvent._stopped||w[Y].options.bubblingMouseEvents===!1&&ie(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,c=this._handlers.length;o<c;o++)this._handlers[o].disable()},whenReady:function(o,c){return this._loaded?o.call(c||this,{target:this}):this.on("load",o,c),this},_getMapPanePos:function(){return ja(this._mapPane)||new Je(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,c){var f=o&&c!==void 0?this._getNewPixelOrigin(o,c):this.getPixelOrigin();return f.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,c){var f=this.getSize()._divideBy(2);return this.project(o,c)._subtract(f)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,c,f){var _=this._getNewPixelOrigin(f,c);return this.project(o,c)._subtract(_)},_latLngBoundsToNewLayerBounds:function(o,c,f){var _=this._getNewPixelOrigin(f,c);return Wt([this.project(o.getSouthWest(),c)._subtract(_),this.project(o.getNorthWest(),c)._subtract(_),this.project(o.getSouthEast(),c)._subtract(_),this.project(o.getNorthEast(),c)._subtract(_)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,c,f){if(!f)return o;var _=this.project(o,c),w=this.getSize().divideBy(2),P=new St(_.subtract(w),_.add(w)),Y=this._getBoundsOffset(P,f,c);return Math.abs(Y.x)<=1&&Math.abs(Y.y)<=1?o:this.unproject(_.add(Y),c)},_limitOffset:function(o,c){if(!c)return o;var f=this.getPixelBounds(),_=new St(f.min.add(o),f.max.add(o));return o.add(this._getBoundsOffset(_,c))},_getBoundsOffset:function(o,c,f){var _=Wt(this.project(c.getNorthEast(),f),this.project(c.getSouthWest(),f)),w=_.min.subtract(o.min),P=_.max.subtract(o.max),Y=this._rebound(w.x,-P.x),re=this._rebound(w.y,-P.y);return new Je(Y,re)},_rebound:function(o,c){return o+c>0?Math.round(o-c)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(c))},_limitZoom:function(o){var c=this.getMinZoom(),f=this.getMaxZoom(),_=at.any3d?this.options.zoomSnap:1;return _&&(o=Math.round(o/_)*_),Math.max(c,Math.min(f,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Di(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,c){var f=this._getCenterOffset(o)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(f)?!1:(this.panBy(f,c),!0)},_createAnimProxy:function(){var o=this._proxy=yt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(c){var f=Yi,_=this._proxy.style[f];Wa(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),_===this._proxy.style[f]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ci(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),c=this.getZoom();Wa(this._proxy,this.project(o,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,c,f){if(this._animatingZoom)return!0;if(f=f||{},!this._zoomAnimated||f.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var _=this.getZoomScale(c),w=this._getCenterOffset(o)._divideBy(1-1/_);return f.animate!==!0&&!this.getSize().contains(w)?!1:(me(function(){this._moveStart(!0,f.noMoveStart||!1)._animateZoom(o,c,!0)},this),!0)},_animateZoom:function(o,c,f,_){this._mapPane&&(f&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=c,bt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:c,noUpdate:_}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Di(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function B2(o,c){return new Vt(o,c)}var hr=we.extend({options:{position:"topright"},initialize:function(o){A(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var c=this._map;return c&&c.removeControl(this),this.options.position=o,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var c=this._container=this.onAdd(o),f=this.getPosition(),_=o._controlCorners[f];return bt(c,"leaflet-control"),f.indexOf("bottom")!==-1?_.insertBefore(c,_.firstChild):_.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ci(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),Xs=function(o){return new hr(o)};Vt.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},c="leaflet-",f=this._controlContainer=yt("div",c+"control-container",this._container);function _(w,P){var Y=c+w+" "+c+P;o[w+P]=yt("div",Y,f)}_("top","left"),_("top","right"),_("bottom","left"),_("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)ci(this._controlCorners[o]);ci(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var vp=hr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,c,f,_){return f<_?-1:_<f?1:0}},initialize:function(o,c,f){A(this,f),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var _ in o)this._addLayer(o[_],_);for(_ in c)this._addLayer(c[_],_,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return hr.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,c){return this._addLayer(o,c),this._map?this._update():this},addOverlay:function(o,c){return this._addLayer(o,c,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var c=this._getLayer(u(o));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){bt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(bt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):Di(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Di(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",c=this._container=yt("div",o),f=this.options.collapsed;c.setAttribute("aria-haspopup",!0),Ys(c),Id(c);var _=this._section=yt("section",o+"-list");f&&(this._map.on("click",this.collapse,this),ht(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var w=this._layersLink=yt("a",o+"-toggle",c);w.href="#",w.title="Layers",w.setAttribute("role","button"),ht(w,{keydown:function(P){P.keyCode===13&&this._expandSafely()},click:function(P){rn(P),this._expandSafely()}},this),f||this.expand(),this._baseLayersList=yt("div",o+"-base",_),this._separator=yt("div",o+"-separator",_),this._overlaysList=yt("div",o+"-overlays",_),c.appendChild(_)},_getLayer:function(o){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&u(this._layers[c].layer)===o)return this._layers[c]},_addLayer:function(o,c,f){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:c,overlay:f}),this.options.sortLayers&&this._layers.sort(r(function(_,w){return this.options.sortFunction(_.layer,w.layer,_.name,w.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Fn(this._baseLayersList),Fn(this._overlaysList),this._layerControlInputs=[];var o,c,f,_,w=0;for(f=0;f<this._layers.length;f++)_=this._layers[f],this._addItem(_),c=c||_.overlay,o=o||!_.overlay,w+=_.overlay?0:1;return this.options.hideSingleBase&&(o=o&&w>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=c&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var c=this._getLayer(u(o.target)),f=c.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;f&&this._map.fire(f,c)},_createRadioElement:function(o,c){var f='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(c?' checked="checked"':"")+"/>",_=document.createElement("div");return _.innerHTML=f,_.firstChild},_addItem:function(o){var c=document.createElement("label"),f=this._map.hasLayer(o.layer),_;o.overlay?(_=document.createElement("input"),_.type="checkbox",_.className="leaflet-control-layers-selector",_.defaultChecked=f):_=this._createRadioElement("leaflet-base-layers_"+u(this),f),this._layerControlInputs.push(_),_.layerId=u(o.layer),ht(_,"click",this._onInputClick,this);var w=document.createElement("span");w.innerHTML=" "+o.name;var P=document.createElement("span");c.appendChild(P),P.appendChild(_),P.appendChild(w);var Y=o.overlay?this._overlaysList:this._baseLayersList;return Y.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,c,f,_=[],w=[];this._handlingClick=!0;for(var P=o.length-1;P>=0;P--)c=o[P],f=this._getLayer(c.layerId).layer,c.checked?_.push(f):c.checked||w.push(f);for(P=0;P<w.length;P++)this._map.hasLayer(w[P])&&this._map.removeLayer(w[P]);for(P=0;P<_.length;P++)this._map.hasLayer(_[P])||this._map.addLayer(_[P]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,c,f,_=this._map.getZoom(),w=o.length-1;w>=0;w--)c=o[w],f=this._getLayer(c.layerId).layer,c.disabled=f.options.minZoom!==void 0&&_<f.options.minZoom||f.options.maxZoom!==void 0&&_>f.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,ht(o,"click",rn),this.expand();var c=this;setTimeout(function(){pi(o,"click",rn),c._preventClick=!1})}}),U2=function(o,c,f){return new vp(o,c,f)},Ld=hr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var c="leaflet-control-zoom",f=yt("div",c+" leaflet-bar"),_=this.options;return this._zoomInButton=this._createButton(_.zoomInText,_.zoomInTitle,c+"-in",f,this._zoomIn),this._zoomOutButton=this._createButton(_.zoomOutText,_.zoomOutTitle,c+"-out",f,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),f},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,c,f,_,w){var P=yt("a",f,_);return P.innerHTML=o,P.href="#",P.title=c,P.setAttribute("role","button"),P.setAttribute("aria-label",c),Ys(P),ht(P,"click",za),ht(P,"click",w,this),ht(P,"click",this._refocusOnMap,this),P},_updateDisabled:function(){var o=this._map,c="leaflet-disabled";Di(this._zoomInButton,c),Di(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(bt(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(bt(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});Vt.mergeOptions({zoomControl:!0}),Vt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ld,this.addControl(this.zoomControl))});var W2=function(o){return new Ld(o)},xp=hr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var c="leaflet-control-scale",f=yt("div",c),_=this.options;return this._addScales(_,c+"-line",f),o.on(_.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),f},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,c,f){o.metric&&(this._mScale=yt("div",c,f)),o.imperial&&(this._iScale=yt("div",c,f))},_update:function(){var o=this._map,c=o.getSize().y/2,f=o.distance(o.containerPointToLatLng([0,c]),o.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(f)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var c=this._getRoundNum(o),f=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,f,c/o)},_updateImperial:function(o){var c=o*3.2808399,f,_,w;c>5280?(f=c/5280,_=this._getRoundNum(f),this._updateScale(this._iScale,_+" mi",_/f)):(w=this._getRoundNum(c),this._updateScale(this._iScale,w+" ft",w/c))},_updateScale:function(o,c,f){o.style.width=Math.round(this.options.maxWidth*f)+"px",o.innerHTML=c},_getRoundNum:function(o){var c=Math.pow(10,(Math.floor(o)+"").length-1),f=o/c;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:1,c*f}}),j2=function(o){return new xp(o)},H2='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Rd=hr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(at.inlineSvg?H2+" ":"")+"Leaflet</a>"},initialize:function(o){A(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=yt("div","leaflet-control-attribution"),Ys(this._container);for(var c in o._layers)o._layers[c].getAttribution&&this.addAttribution(o._layers[c].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var c in this._attributions)this._attributions[c]&&o.push(c);var f=[];this.options.prefix&&f.push(this.options.prefix),o.length&&f.push(o.join(", ")),this._container.innerHTML=f.join(' <span aria-hidden="true">|</span> ')}}});Vt.mergeOptions({attributionControl:!0}),Vt.addInitHook(function(){this.options.attributionControl&&new Rd().addTo(this)});var z2=function(o){return new Rd(o)};hr.Layers=vp,hr.Zoom=Ld,hr.Scale=xp,hr.Attribution=Rd,Xs.layers=U2,Xs.zoom=W2,Xs.scale=j2,Xs.attribution=z2;var Ir=we.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ir.addTo=function(o,c){return o.addHandler(c,this),this};var G2={Events:mt},yp=at.touch?"touchstart mousedown":"mousedown",ha=it.extend({options:{clickTolerance:3},initialize:function(o,c,f,_){A(this,_),this._element=o,this._dragStartTarget=c||o,this._preventOutline=f},enable:function(){this._enabled||(ht(this._dragStartTarget,yp,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ha._dragging===this&&this.finishDrag(!0),pi(this._dragStartTarget,yp,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!Cd(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){ha._dragging===this&&this.finishDrag();return}if(!(ha._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(ha._dragging=this,this._preventOutline&&Md(this._element),Td(),$s(),!this._moving)){this.fire("down");var c=o.touches?o.touches[0]:o,f=mp(this._element);this._startPoint=new Je(c.clientX,c.clientY),this._startPos=ja(this._element),this._parentScale=Fd(f);var _=o.type==="mousedown";ht(document,_?"mousemove":"touchmove",this._onMove,this),ht(document,_?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var c=o.touches&&o.touches.length===1?o.touches[0]:o,f=new Je(c.clientX,c.clientY)._subtract(this._startPoint);!f.x&&!f.y||Math.abs(f.x)+Math.abs(f.y)<this.options.clickTolerance||(f.x/=this._parentScale.x,f.y/=this._parentScale.y,rn(o),this._moved||(this.fire("dragstart"),this._moved=!0,bt(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),bt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),Ri(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){Di(document.body,"leaflet-dragging"),this._lastTarget&&(Di(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),pi(document,"mousemove touchmove",this._onMove,this),pi(document,"mouseup touchend touchcancel",this._onUp,this),Ed(),Zs();var c=this._moved&&this._moving;this._moving=!1,ha._dragging=!1,c&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function bp(o,c,f){var _,w=[1,4,2,8],P,Y,re,de,Se,He,lt,Et;for(P=0,He=o.length;P<He;P++)o[P]._code=Ga(o[P],c);for(re=0;re<4;re++){for(lt=w[re],_=[],P=0,He=o.length,Y=He-1;P<He;Y=P++)de=o[P],Se=o[Y],de._code&lt?Se._code&lt||(Et=T0(Se,de,lt,c,f),Et._code=Ga(Et,c),_.push(Et)):(Se._code&lt&&(Et=T0(Se,de,lt,c,f),Et._code=Ga(Et,c),_.push(Et)),_.push(de));o=_}return o}function Cp(o,c){var f,_,w,P,Y,re,de,Se,He;if(!o||o.length===0)throw new Error("latlngs not passed");nr(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var lt=K([0,0]),Et=X(o),Cn=Et.getNorthWest().distanceTo(Et.getSouthWest())*Et.getNorthEast().distanceTo(Et.getNorthWest());Cn<1700&&(lt=Nd(o));var Xi=o.length,rr=[];for(f=0;f<Xi;f++){var kn=K(o[f]);rr.push(c.project(K([kn.lat-lt.lat,kn.lng-lt.lng])))}for(re=de=Se=0,f=0,_=Xi-1;f<Xi;_=f++)w=rr[f],P=rr[_],Y=w.y*P.x-P.y*w.x,de+=(w.x+P.x)*Y,Se+=(w.y+P.y)*Y,re+=Y*3;re===0?He=rr[0]:He=[de/re,Se/re];var ko=c.unproject(nt(He));return K([ko.lat+lt.lat,ko.lng+lt.lng])}function Nd(o){for(var c=0,f=0,_=0,w=0;w<o.length;w++){var P=K(o[w]);c+=P.lat,f+=P.lng,_++}return K([c/_,f/_])}var $2={__proto__:null,clipPolygon:bp,polygonCenter:Cp,centroid:Nd};function wp(o,c){if(!c||!o.length)return o.slice();var f=c*c;return o=Y2(o,f),o=q2(o,f),o}function Sp(o,c,f){return Math.sqrt(Ks(o,c,f,!0))}function Z2(o,c,f){return Ks(o,c,f)}function q2(o,c){var f=o.length,_=typeof Uint8Array<"u"?Uint8Array:Array,w=new _(f);w[0]=w[f-1]=1,Vd(o,w,c,0,f-1);var P,Y=[];for(P=0;P<f;P++)w[P]&&Y.push(o[P]);return Y}function Vd(o,c,f,_,w){var P=0,Y,re,de;for(re=_+1;re<=w-1;re++)de=Ks(o[re],o[_],o[w],!0),de>P&&(Y=re,P=de);P>f&&(c[Y]=1,Vd(o,c,f,_,Y),Vd(o,c,f,Y,w))}function Y2(o,c){for(var f=[o[0]],_=1,w=0,P=o.length;_<P;_++)X2(o[_],o[w])>c&&(f.push(o[_]),w=_);return w<P-1&&f.push(o[P-1]),f}var Tp;function Ep(o,c,f,_,w){var P=_?Tp:Ga(o,f),Y=Ga(c,f),re,de,Se;for(Tp=Y;;){if(!(P|Y))return[o,c];if(P&Y)return!1;re=P||Y,de=T0(o,c,re,f,w),Se=Ga(de,f),re===P?(o=de,P=Se):(c=de,Y=Se)}}function T0(o,c,f,_,w){var P=c.x-o.x,Y=c.y-o.y,re=_.min,de=_.max,Se,He;return f&8?(Se=o.x+P*(de.y-o.y)/Y,He=de.y):f&4?(Se=o.x+P*(re.y-o.y)/Y,He=re.y):f&2?(Se=de.x,He=o.y+Y*(de.x-o.x)/P):f&1&&(Se=re.x,He=o.y+Y*(re.x-o.x)/P),new Je(Se,He,w)}function Ga(o,c){var f=0;return o.x<c.min.x?f|=1:o.x>c.max.x&&(f|=2),o.y<c.min.y?f|=4:o.y>c.max.y&&(f|=8),f}function X2(o,c){var f=c.x-o.x,_=c.y-o.y;return f*f+_*_}function Ks(o,c,f,_){var w=c.x,P=c.y,Y=f.x-w,re=f.y-P,de=Y*Y+re*re,Se;return de>0&&(Se=((o.x-w)*Y+(o.y-P)*re)/de,Se>1?(w=f.x,P=f.y):Se>0&&(w+=Y*Se,P+=re*Se)),Y=o.x-w,re=o.y-P,_?Y*Y+re*re:new Je(w,P)}function nr(o){return!ee(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function Ap(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),nr(o)}function Mp(o,c){var f,_,w,P,Y,re,de,Se;if(!o||o.length===0)throw new Error("latlngs not passed");nr(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var He=K([0,0]),lt=X(o),Et=lt.getNorthWest().distanceTo(lt.getSouthWest())*lt.getNorthEast().distanceTo(lt.getNorthWest());Et<1700&&(He=Nd(o));var Cn=o.length,Xi=[];for(f=0;f<Cn;f++){var rr=K(o[f]);Xi.push(c.project(K([rr.lat-He.lat,rr.lng-He.lng])))}for(f=0,_=0;f<Cn-1;f++)_+=Xi[f].distanceTo(Xi[f+1])/2;if(_===0)Se=Xi[0];else for(f=0,P=0;f<Cn-1;f++)if(Y=Xi[f],re=Xi[f+1],w=Y.distanceTo(re),P+=w,P>_){de=(P-_)/w,Se=[re.x-de*(re.x-Y.x),re.y-de*(re.y-Y.y)];break}var kn=c.unproject(nt(Se));return K([kn.lat+He.lat,kn.lng+He.lng])}var K2={__proto__:null,simplify:wp,pointToSegmentDistance:Sp,closestPointOnSegment:Z2,clipSegment:Ep,_getEdgeIntersection:T0,_getBitCode:Ga,_sqClosestPointOnSegment:Ks,isFlat:nr,_flat:Ap,polylineCenter:Mp},Bd={project:function(o){return new Je(o.lng,o.lat)},unproject:function(o){return new ue(o.y,o.x)},bounds:new St([-180,-90],[180,90])},Ud={R:6378137,R_MINOR:6356752314245179e-9,bounds:new St([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var c=Math.PI/180,f=this.R,_=o.lat*c,w=this.R_MINOR/f,P=Math.sqrt(1-w*w),Y=P*Math.sin(_),re=Math.tan(Math.PI/4-_/2)/Math.pow((1-Y)/(1+Y),P/2);return _=-f*Math.log(Math.max(re,1e-10)),new Je(o.lng*c*f,_)},unproject:function(o){for(var c=180/Math.PI,f=this.R,_=this.R_MINOR/f,w=Math.sqrt(1-_*_),P=Math.exp(-o.y/f),Y=Math.PI/2-2*Math.atan(P),re=0,de=.1,Se;re<15&&Math.abs(de)>1e-7;re++)Se=w*Math.sin(Y),Se=Math.pow((1-Se)/(1+Se),w/2),de=Math.PI/2-2*Math.atan(P*Se)-Y,Y+=de;return new ue(Y*c,o.x*c/f)}},J2={__proto__:null,LonLat:Bd,Mercator:Ud,SphericalMercator:st},Q2=e({},ye,{code:"EPSG:3395",projection:Ud,transformation:function(){var o=.5/(Math.PI*Ud.R);return Fe(o,.5,-o,.5)}()}),Fp=e({},ye,{code:"EPSG:4326",projection:Bd,transformation:Fe(1/180,1,-1/180,.5)}),ev=e({},J,{projection:Bd,transformation:Fe(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,c){var f=c.lng-o.lng,_=c.lat-o.lat;return Math.sqrt(f*f+_*_)},infinite:!0});J.Earth=ye,J.EPSG3395=Q2,J.EPSG3857=jt,J.EPSG900913=Dt,J.EPSG4326=Fp,J.Simple=ev;var gr=it.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[u(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[u(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var c=o.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var f=this.getEvents();c.on(f,this),this.once("remove",function(){c.off(f,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});Vt.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var c=u(o);return this._layers[c]?this:(this._layers[c]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var c=u(o);return this._layers[c]?(this._loaded&&o.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return u(o)in this._layers},eachLayer:function(o,c){for(var f in this._layers)o.call(c,this._layers[f]);return this},_addLayers:function(o){o=o?ee(o)?o:[o]:[];for(var c=0,f=o.length;c<f;c++)this.addLayer(o[c])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[u(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var c=u(o);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,c=-1/0,f=this._getZoomSpan();for(var _ in this._zoomBoundLayers){var w=this._zoomBoundLayers[_].options;o=w.minZoom===void 0?o:Math.min(o,w.minZoom),c=w.maxZoom===void 0?c:Math.max(c,w.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=o===1/0?void 0:o,f!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var To=gr.extend({initialize:function(o,c){A(this,c),this._layers={};var f,_;if(o)for(f=0,_=o.length;f<_;f++)this.addLayer(o[f])},addLayer:function(o){var c=this.getLayerId(o);return this._layers[c]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var c=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(o){var c=typeof o=="number"?o:this.getLayerId(o);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var c=Array.prototype.slice.call(arguments,1),f,_;for(f in this._layers)_=this._layers[f],_[o]&&_[o].apply(_,c);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,c){for(var f in this._layers)o.call(c,this._layers[f]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return u(o)}}),tv=function(o,c){return new To(o,c)},qr=To.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),To.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),To.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new Jt;for(var c in this._layers){var f=this._layers[c];o.extend(f.getBounds?f.getBounds():f.getLatLng())}return o}}),iv=function(o,c){return new qr(o,c)},Eo=we.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){A(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,c){var f=this._getIconUrl(o);if(!f){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var _=this._createImg(f,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(_,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),_},_setIconStyles:function(o,c){var f=this.options,_=f[c+"Size"];typeof _=="number"&&(_=[_,_]);var w=nt(_),P=nt(c==="shadow"&&f.shadowAnchor||f.iconAnchor||w&&w.divideBy(2,!0));o.className="leaflet-marker-"+c+" "+(f.className||""),P&&(o.style.marginLeft=-P.x+"px",o.style.marginTop=-P.y+"px"),w&&(o.style.width=w.x+"px",o.style.height=w.y+"px")},_createImg:function(o,c){return c=c||document.createElement("img"),c.src=o,c},_getIconUrl:function(o){return at.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function nv(o){return new Eo(o)}var Js=Eo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof Js.imagePath!="string"&&(Js.imagePath=this._detectIconPath()),(this.options.imagePath||Js.imagePath)+Eo.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var c=function(f,_,w){var P=_.exec(f);return P&&P[w]};return o=c(o,/^url\((['"])?(.+)\1\)$/,2),o&&c(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=yt("div","leaflet-default-icon-path",document.body),c=pr(o,"background-image")||pr(o,"backgroundImage");if(document.body.removeChild(o),c=this._stripUrl(c),c)return c;var f=document.querySelector('link[href$="leaflet.css"]');return f?f.href.substring(0,f.href.length-11-1):""}}),kp=Ir.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new ha(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),bt(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Di(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var c=this._marker,f=c._map,_=this._marker.options.autoPanSpeed,w=this._marker.options.autoPanPadding,P=ja(c._icon),Y=f.getPixelBounds(),re=f.getPixelOrigin(),de=Wt(Y.min._subtract(re).add(w),Y.max._subtract(re).subtract(w));if(!de.contains(P)){var Se=nt((Math.max(de.max.x,P.x)-de.max.x)/(Y.max.x-de.max.x)-(Math.min(de.min.x,P.x)-de.min.x)/(Y.min.x-de.min.x),(Math.max(de.max.y,P.y)-de.max.y)/(Y.max.y-de.max.y)-(Math.min(de.min.y,P.y)-de.min.y)/(Y.min.y-de.min.y)).multiplyBy(_);f.panBy(Se,{animate:!1}),this._draggable._newPos._add(Se),this._draggable._startPos._add(Se),Ri(c._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=me(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(_e(this._panRequest),this._panRequest=me(this._adjustPan.bind(this,o)))},_onDrag:function(o){var c=this._marker,f=c._shadow,_=ja(c._icon),w=c._map.layerPointToLatLng(_);f&&Ri(f,_),c._latlng=w,o.latlng=w,o.oldLatLng=this._oldLatLng,c.fire("move",o).fire("drag",o)},_onDragEnd:function(o){_e(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),E0=gr.extend({options:{icon:new Js,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,c){A(this,c),this._latlng=K(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var c=this._latlng;return this._latlng=K(o),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),f=o.icon.createIcon(this._icon),_=!1;f!==this._icon&&(this._icon&&this._removeIcon(),_=!0,o.title&&(f.title=o.title),f.tagName==="IMG"&&(f.alt=o.alt||"")),bt(f,c),o.keyboard&&(f.tabIndex="0",f.setAttribute("role","button")),this._icon=f,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ht(f,"focus",this._panOnFocus,this);var w=o.icon.createShadow(this._shadow),P=!1;w!==this._shadow&&(this._removeShadow(),P=!0),w&&(bt(w,c),w.alt=""),this._shadow=w,o.opacity<1&&this._updateOpacity(),_&&this.getPane().appendChild(this._icon),this._initInteraction(),w&&P&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&pi(this._icon,"focus",this._panOnFocus,this),ci(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ci(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&Ri(this._icon,o),this._shadow&&Ri(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(bt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),kp)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new kp(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&ir(this._icon,o),this._shadow&&ir(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var c=this.options.icon.options,f=c.iconSize?nt(c.iconSize):nt(0,0),_=c.iconAnchor?nt(c.iconAnchor):nt(0,0);o.panInside(this._latlng,{paddingTopLeft:_,paddingBottomRight:f.subtract(_)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function rv(o,c){return new E0(o,c)}var ga=gr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return A(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),A0=ga.extend({options:{fill:!0,radius:10},initialize:function(o,c){A(this,c),this._latlng=K(o),this._radius=this.options.radius},setLatLng:function(o){var c=this._latlng;return this._latlng=K(o),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var c=o&&o.radius||this._radius;return ga.prototype.setStyle.call(this,o),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,c=this._radiusY||o,f=this._clickTolerance(),_=[o+f,c+f];this._pxBounds=new St(this._point.subtract(_),this._point.add(_))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function av(o,c){return new A0(o,c)}var Wd=A0.extend({initialize:function(o,c,f){if(typeof c=="number"&&(c=e({},f,{radius:c})),A(this,c),this._latlng=K(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new Jt(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:ga.prototype.setStyle,_project:function(){var o=this._latlng.lng,c=this._latlng.lat,f=this._map,_=f.options.crs;if(_.distance===ye.distance){var w=Math.PI/180,P=this._mRadius/ye.R/w,Y=f.project([c+P,o]),re=f.project([c-P,o]),de=Y.add(re).divideBy(2),Se=f.unproject(de).lat,He=Math.acos((Math.cos(P*w)-Math.sin(c*w)*Math.sin(Se*w))/(Math.cos(c*w)*Math.cos(Se*w)))/w;(isNaN(He)||He===0)&&(He=P/Math.cos(Math.PI/180*c)),this._point=de.subtract(f.getPixelOrigin()),this._radius=isNaN(He)?0:de.x-f.project([Se,o-He]).x,this._radiusY=de.y-Y.y}else{var lt=_.unproject(_.project(this._latlng).subtract([this._mRadius,0]));this._point=f.latLngToLayerPoint(this._latlng),this._radius=this._point.x-f.latLngToLayerPoint(lt).x}this._updateBounds()}});function ov(o,c,f){return new Wd(o,c,f)}var Yr=ga.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,c){A(this,c),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var c=1/0,f=null,_=Ks,w,P,Y=0,re=this._parts.length;Y<re;Y++)for(var de=this._parts[Y],Se=1,He=de.length;Se<He;Se++){w=de[Se-1],P=de[Se];var lt=_(o,w,P,!0);lt<c&&(c=lt,f=_(o,w,P))}return f&&(f.distance=Math.sqrt(c)),f},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Mp(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,c){return c=c||this._defaultShape(),o=K(o),c.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new Jt,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return nr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var c=[],f=nr(o),_=0,w=o.length;_<w;_++)f?(c[_]=K(o[_]),this._bounds.extend(c[_])):c[_]=this._convertLatLngs(o[_]);return c},_project:function(){var o=new St;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),c=new Je(o,o);this._rawPxBounds&&(this._pxBounds=new St([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(o,c,f){var _=o[0]instanceof ue,w=o.length,P,Y;if(_){for(Y=[],P=0;P<w;P++)Y[P]=this._map.latLngToLayerPoint(o[P]),f.extend(Y[P]);c.push(Y)}else for(P=0;P<w;P++)this._projectLatlngs(o[P],c,f)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,f,_,w,P,Y,re,de;for(f=0,w=0,P=this._rings.length;f<P;f++)for(de=this._rings[f],_=0,Y=de.length;_<Y-1;_++)re=Ep(de[_],de[_+1],o,_,!0),re&&(c[w]=c[w]||[],c[w].push(re[0]),(re[1]!==de[_+1]||_===Y-2)&&(c[w].push(re[1]),w++))}},_simplifyPoints:function(){for(var o=this._parts,c=this.options.smoothFactor,f=0,_=o.length;f<_;f++)o[f]=wp(o[f],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,c){var f,_,w,P,Y,re,de=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(f=0,P=this._parts.length;f<P;f++)for(re=this._parts[f],_=0,Y=re.length,w=Y-1;_<Y;w=_++)if(!(!c&&_===0)&&Sp(o,re[w],re[_])<=de)return!0;return!1}});function sv(o,c){return new Yr(o,c)}Yr._flat=Ap;var Ao=Yr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Cp(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var c=Yr.prototype._convertLatLngs.call(this,o),f=c.length;return f>=2&&c[0]instanceof ue&&c[0].equals(c[f-1])&&c.pop(),c},_setLatLngs:function(o){Yr.prototype._setLatLngs.call(this,o),nr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return nr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,c=this.options.weight,f=new Je(c,c);if(o=new St(o.min.subtract(f),o.max.add(f)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var _=0,w=this._rings.length,P;_<w;_++)P=bp(this._rings[_],o,!0),P.length&&this._parts.push(P)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var c=!1,f,_,w,P,Y,re,de,Se;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(P=0,de=this._parts.length;P<de;P++)for(f=this._parts[P],Y=0,Se=f.length,re=Se-1;Y<Se;re=Y++)_=f[Y],w=f[re],_.y>o.y!=w.y>o.y&&o.x<(w.x-_.x)*(o.y-_.y)/(w.y-_.y)+_.x&&(c=!c);return c||Yr.prototype._containsPoint.call(this,o,!0)}});function lv(o,c){return new Ao(o,c)}var Xr=qr.extend({initialize:function(o,c){A(this,c),this._layers={},o&&this.addData(o)},addData:function(o){var c=ee(o)?o:o.features,f,_,w;if(c){for(f=0,_=c.length;f<_;f++)w=c[f],(w.geometries||w.geometry||w.features||w.coordinates)&&this.addData(w);return this}var P=this.options;if(P.filter&&!P.filter(o))return this;var Y=M0(o,P);return Y?(Y.feature=P0(o),Y.defaultOptions=Y.options,this.resetStyle(Y),P.onEachFeature&&P.onEachFeature(o,Y),this.addLayer(Y)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=e({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(c){this._setLayerStyle(c,o)},this)},_setLayerStyle:function(o,c){o.setStyle&&(typeof c=="function"&&(c=c(o.feature)),o.setStyle(c))}});function M0(o,c){var f=o.type==="Feature"?o.geometry:o,_=f?f.coordinates:null,w=[],P=c&&c.pointToLayer,Y=c&&c.coordsToLatLng||jd,re,de,Se,He;if(!_&&!f)return null;switch(f.type){case"Point":return re=Y(_),Pp(P,o,re,c);case"MultiPoint":for(Se=0,He=_.length;Se<He;Se++)re=Y(_[Se]),w.push(Pp(P,o,re,c));return new qr(w);case"LineString":case"MultiLineString":return de=F0(_,f.type==="LineString"?0:1,Y),new Yr(de,c);case"Polygon":case"MultiPolygon":return de=F0(_,f.type==="Polygon"?1:2,Y),new Ao(de,c);case"GeometryCollection":for(Se=0,He=f.geometries.length;Se<He;Se++){var lt=M0({geometry:f.geometries[Se],type:"Feature",properties:o.properties},c);lt&&w.push(lt)}return new qr(w);case"FeatureCollection":for(Se=0,He=f.features.length;Se<He;Se++){var Et=M0(f.features[Se],c);Et&&w.push(Et)}return new qr(w);default:throw new Error("Invalid GeoJSON object.")}}function Pp(o,c,f,_){return o?o(c,f):new E0(f,_&&_.markersInheritOptions&&_)}function jd(o){return new ue(o[1],o[0],o[2])}function F0(o,c,f){for(var _=[],w=0,P=o.length,Y;w<P;w++)Y=c?F0(o[w],c-1,f):(f||jd)(o[w]),_.push(Y);return _}function Hd(o,c){return o=K(o),o.alt!==void 0?[y(o.lng,c),y(o.lat,c),y(o.alt,c)]:[y(o.lng,c),y(o.lat,c)]}function k0(o,c,f,_){for(var w=[],P=0,Y=o.length;P<Y;P++)w.push(c?k0(o[P],nr(o[P])?0:c-1,f,_):Hd(o[P],_));return!c&&f&&w.length>0&&w.push(w[0].slice()),w}function Mo(o,c){return o.feature?e({},o.feature,{geometry:c}):P0(c)}function P0(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var zd={toGeoJSON:function(o){return Mo(this,{type:"Point",coordinates:Hd(this.getLatLng(),o)})}};E0.include(zd),Wd.include(zd),A0.include(zd),Yr.include({toGeoJSON:function(o){var c=!nr(this._latlngs),f=k0(this._latlngs,c?1:0,!1,o);return Mo(this,{type:(c?"Multi":"")+"LineString",coordinates:f})}}),Ao.include({toGeoJSON:function(o){var c=!nr(this._latlngs),f=c&&!nr(this._latlngs[0]),_=k0(this._latlngs,f?2:c?1:0,!0,o);return c||(_=[_]),Mo(this,{type:(f?"Multi":"")+"Polygon",coordinates:_})}}),To.include({toMultiPoint:function(o){var c=[];return this.eachLayer(function(f){c.push(f.toGeoJSON(o).geometry.coordinates)}),Mo(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(o){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(o);var f=c==="GeometryCollection",_=[];return this.eachLayer(function(w){if(w.toGeoJSON){var P=w.toGeoJSON(o);if(f)_.push(P.geometry);else{var Y=P0(P);Y.type==="FeatureCollection"?_.push.apply(_,Y.features):_.push(Y)}}}),f?Mo(this,{geometries:_,type:"GeometryCollection"}):{type:"FeatureCollection",features:_}}});function Dp(o,c){return new Xr(o,c)}var uv=Dp,D0=gr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,c,f){this._url=o,this._bounds=X(c),A(this,f)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(bt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ci(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&wo(this._image),this},bringToBack:function(){return this._map&&So(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=X(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",c=this._image=o?this._url:yt("img");if(bt(c,"leaflet-image-layer"),this._zoomAnimated&&bt(c,"leaflet-zoom-animated"),this.options.className&&bt(c,this.options.className),c.onselectstart=v,c.onmousemove=v,c.onload=r(this.fire,this,"load"),c.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(o){var c=this._map.getZoomScale(o.zoom),f=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;Wa(this._image,f,c)},_reset:function(){var o=this._image,c=new St(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),f=c.getSize();Ri(o,c.min),o.style.width=f.x+"px",o.style.height=f.y+"px"},_updateOpacity:function(){ir(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),cv=function(o,c,f){return new D0(o,c,f)},Ip=D0.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",c=this._image=o?this._url:yt("video");if(bt(c,"leaflet-image-layer"),this._zoomAnimated&&bt(c,"leaflet-zoom-animated"),this.options.className&&bt(c,this.options.className),c.onselectstart=v,c.onmousemove=v,c.onloadeddata=r(this.fire,this,"load"),o){for(var f=c.getElementsByTagName("source"),_=[],w=0;w<f.length;w++)_.push(f[w].src);this._url=f.length>0?_:[c.src];return}ee(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var P=0;P<this._url.length;P++){var Y=yt("source");Y.src=this._url[P],c.appendChild(Y)}}});function dv(o,c,f){return new Ip(o,c,f)}var Op=D0.extend({_initImage:function(){var o=this._image=this._url;bt(o,"leaflet-image-layer"),this._zoomAnimated&&bt(o,"leaflet-zoom-animated"),this.options.className&&bt(o,this.options.className),o.onselectstart=v,o.onmousemove=v}});function mv(o,c,f){return new Op(o,c,f)}var Or=gr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,c){o&&(o instanceof ue||ee(o))?(this._latlng=K(o),A(this,c)):(A(this,o),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&ir(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&ir(this._container,1),this.bringToFront(),this.options.interactive&&(bt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(ir(this._container,0),this._removeTimeout=setTimeout(r(ci,void 0,this._container),200)):ci(this._container),this.options.interactive&&(Di(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=K(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&wo(this._container),this},bringToBack:function(){return this._map&&So(this._container),this},_prepareOpen:function(o){var c=this._source;if(!c._map)return!1;if(c instanceof qr){c=null;var f=this._source._layers;for(var _ in f)if(f[_]._map){c=f[_];break}if(!c)return!1;this._source=c}if(!o)if(c.getCenter)o=c.getCenter();else if(c.getLatLng)o=c.getLatLng();else if(c.getBounds)o=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")o.innerHTML=c;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),c=nt(this.options.offset),f=this._getAnchor();this._zoomAnimated?Ri(this._container,o.add(f)):c=c.add(o).add(f);var _=this._containerBottom=-c.y,w=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=_+"px",this._container.style.left=w+"px"}},_getAnchor:function(){return[0,0]}});Vt.include({_initOverlay:function(o,c,f,_){var w=c;return w instanceof o||(w=new o(_).setContent(c)),f&&w.setLatLng(f),w}}),gr.include({_initOverlay:function(o,c,f,_){var w=f;return w instanceof o?(A(w,_),w._source=this):(w=c&&!_?c:new o(_,this),w.setContent(f)),w}});var I0=Or.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,Or.prototype.openOn.call(this,o)},onAdd:function(o){Or.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ga||this._source.on("preclick",Ha))},onRemove:function(o){Or.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ga||this._source.off("preclick",Ha))},getEvents:function(){var o=Or.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",c=this._container=yt("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),f=this._wrapper=yt("div",o+"-content-wrapper",c);if(this._contentNode=yt("div",o+"-content",f),Ys(c),Id(this._contentNode),ht(c,"contextmenu",Ha),this._tipContainer=yt("div",o+"-tip-container",c),this._tip=yt("div",o+"-tip",this._tipContainer),this.options.closeButton){var _=this._closeButton=yt("a",o+"-close-button",c);_.setAttribute("role","button"),_.setAttribute("aria-label","Close popup"),_.href="#close",_.innerHTML='<span aria-hidden="true">&#215;</span>',ht(_,"click",function(w){rn(w),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,c=o.style;c.width="",c.whiteSpace="nowrap";var f=o.offsetWidth;f=Math.min(f,this.options.maxWidth),f=Math.max(f,this.options.minWidth),c.width=f+1+"px",c.whiteSpace="",c.height="";var _=o.offsetHeight,w=this.options.maxHeight,P="leaflet-popup-scrolled";w&&_>w?(c.height=w+"px",bt(o,P)):Di(o,P),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),f=this._getAnchor();Ri(this._container,c.add(f))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,c=parseInt(pr(this._container,"marginBottom"),10)||0,f=this._container.offsetHeight+c,_=this._containerWidth,w=new Je(this._containerLeft,-f-this._containerBottom);w._add(ja(this._container));var P=o.layerPointToContainerPoint(w),Y=nt(this.options.autoPanPadding),re=nt(this.options.autoPanPaddingTopLeft||Y),de=nt(this.options.autoPanPaddingBottomRight||Y),Se=o.getSize(),He=0,lt=0;P.x+_+de.x>Se.x&&(He=P.x+_-Se.x+de.x),P.x-He-re.x<0&&(He=P.x-re.x),P.y+f+de.y>Se.y&&(lt=P.y+f-Se.y+de.y),P.y-lt-re.y<0&&(lt=P.y-re.y),(He||lt)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([He,lt]))}},_getAnchor:function(){return nt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),fv=function(o,c){return new I0(o,c)};Vt.mergeOptions({closePopupOnClick:!0}),Vt.include({openPopup:function(o,c,f){return this._initOverlay(I0,o,c,f).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),gr.include({bindPopup:function(o,c){return this._popup=this._initOverlay(I0,this._popup,o,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof qr||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){za(o);var c=o.layer||o.target;if(this._popup._source===c&&!(c instanceof ga)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=c,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var O0=Or.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){Or.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){Or.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=Or.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",c=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=yt("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var c,f,_=this._map,w=this._container,P=_.latLngToContainerPoint(_.getCenter()),Y=_.layerPointToContainerPoint(o),re=this.options.direction,de=w.offsetWidth,Se=w.offsetHeight,He=nt(this.options.offset),lt=this._getAnchor();re==="top"?(c=de/2,f=Se):re==="bottom"?(c=de/2,f=0):re==="center"?(c=de/2,f=Se/2):re==="right"?(c=0,f=Se/2):re==="left"?(c=de,f=Se/2):Y.x<P.x?(re="right",c=0,f=Se/2):(re="left",c=de+(He.x+lt.x)*2,f=Se/2),o=o.subtract(nt(c,f,!0)).add(He).add(lt),Di(w,"leaflet-tooltip-right"),Di(w,"leaflet-tooltip-left"),Di(w,"leaflet-tooltip-top"),Di(w,"leaflet-tooltip-bottom"),bt(w,"leaflet-tooltip-"+re),Ri(w,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&ir(this._container,o)},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(c)},_getAnchor:function(){return nt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),pv=function(o,c){return new O0(o,c)};Vt.include({openTooltip:function(o,c,f){return this._initOverlay(O0,o,c,f).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),gr.include({bindTooltip:function(o,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(O0,this._tooltip,o,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var c=o?"off":"on",f={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?f.add=this._openTooltip:(f.mouseover=this._openTooltip,f.mouseout=this.closeTooltip,f.click=this._openTooltip,this._map?this._addFocusListeners():f.add=this._addFocusListeners),this._tooltip.options.sticky&&(f.mousemove=this._moveTooltip),this[c](f),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof qr||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var c=typeof o.getElement=="function"&&o.getElement();c&&(ht(c,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),ht(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var c=typeof o.getElement=="function"&&o.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var c=o.latlng,f,_;this._tooltip.options.sticky&&o.originalEvent&&(f=this._map.mouseEventToContainerPoint(o.originalEvent),_=this._map.containerPointToLayerPoint(f),c=this._map.layerPointToLatLng(_)),this._tooltip.setLatLng(c)}});var Lp=Eo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var c=o&&o.tagName==="DIV"?o:document.createElement("div"),f=this.options;if(f.html instanceof Element?(Fn(c),c.appendChild(f.html)):c.innerHTML=f.html!==!1?f.html:"",f.bgPos){var _=nt(f.bgPos);c.style.backgroundPosition=-_.x+"px "+-_.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function hv(o){return new Lp(o)}Eo.Default=Js;var Qs=gr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:at.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){A(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),ci(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(wo(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(So(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof Je?o:new Je(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var c=this.getPane().children,f=-o(-1/0,1/0),_=0,w=c.length,P;_<w;_++)P=c[_].style.zIndex,c[_]!==this._container&&P&&(f=o(f,+P));isFinite(f)&&(this.options.zIndex=f+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!at.ielt9){ir(this._container,this.options.opacity);var o=+new Date,c=!1,f=!1;for(var _ in this._tiles){var w=this._tiles[_];if(!(!w.current||!w.loaded)){var P=Math.min(1,(o-w.loaded)/200);ir(w.el,P),P<1?c=!0:(w.active?f=!0:this._onOpaqueTile(w),w.active=!0)}}f&&!this._noPrune&&this._pruneTiles(),c&&(_e(this._fadeFrame),this._fadeFrame=me(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=yt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,c=this.options.maxZoom;if(o!==void 0){for(var f in this._levels)f=Number(f),this._levels[f].el.children.length||f===o?(this._levels[f].el.style.zIndex=c-Math.abs(o-f),this._onUpdateLevel(f)):(ci(this._levels[f].el),this._removeTilesAtZoom(f),this._onRemoveLevel(f),delete this._levels[f]);var _=this._levels[o],w=this._map;return _||(_=this._levels[o]={},_.el=yt("div","leaflet-tile-container leaflet-zoom-animated",this._container),_.el.style.zIndex=c,_.origin=w.project(w.unproject(w.getPixelOrigin()),o).round(),_.zoom=o,this._setZoomTransform(_,w.getCenter(),w.getZoom()),v(_.el.offsetWidth),this._onCreateLevel(_)),this._level=_,_}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var o,c,f=this._map.getZoom();if(f>this.options.maxZoom||f<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)c=this._tiles[o],c.retain=c.current;for(o in this._tiles)if(c=this._tiles[o],c.current&&!c.active){var _=c.coords;this._retainParent(_.x,_.y,_.z,_.z-5)||this._retainChildren(_.x,_.y,_.z,_.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var c in this._tiles)this._tiles[c].coords.z===o&&this._removeTile(c)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)ci(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,c,f,_){var w=Math.floor(o/2),P=Math.floor(c/2),Y=f-1,re=new Je(+w,+P);re.z=+Y;var de=this._tileCoordsToKey(re),Se=this._tiles[de];return Se&&Se.active?(Se.retain=!0,!0):(Se&&Se.loaded&&(Se.retain=!0),Y>_?this._retainParent(w,P,Y,_):!1)},_retainChildren:function(o,c,f,_){for(var w=2*o;w<2*o+2;w++)for(var P=2*c;P<2*c+2;P++){var Y=new Je(w,P);Y.z=f+1;var re=this._tileCoordsToKey(Y),de=this._tiles[re];if(de&&de.active){de.retain=!0;continue}else de&&de.loaded&&(de.retain=!0);f+1<_&&this._retainChildren(w,P,f+1,_)}},_resetView:function(o){var c=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var c=this.options;return c.minNativeZoom!==void 0&&o<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<o?c.maxNativeZoom:o},_setView:function(o,c,f,_){var w=Math.round(c);this.options.maxZoom!==void 0&&w>this.options.maxZoom||this.options.minZoom!==void 0&&w<this.options.minZoom?w=void 0:w=this._clampZoom(w);var P=this.options.updateWhenZooming&&w!==this._tileZoom;(!_||P)&&(this._tileZoom=w,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),w!==void 0&&this._update(o),f||this._pruneTiles(),this._noPrune=!!f),this._setZoomTransforms(o,c)},_setZoomTransforms:function(o,c){for(var f in this._levels)this._setZoomTransform(this._levels[f],o,c)},_setZoomTransform:function(o,c,f){var _=this._map.getZoomScale(f,o.zoom),w=o.origin.multiplyBy(_).subtract(this._map._getNewPixelOrigin(c,f)).round();at.any3d?Wa(o.el,w,_):Ri(o.el,w)},_resetGrid:function(){var o=this._map,c=o.options.crs,f=this._tileSize=this.getTileSize(),_=this._tileZoom,w=this._map.getPixelWorldBounds(this._tileZoom);w&&(this._globalTileRange=this._pxBoundsToTileRange(w)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,c.wrapLng[0]],_).x/f.x),Math.ceil(o.project([0,c.wrapLng[1]],_).x/f.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([c.wrapLat[0],0],_).y/f.x),Math.ceil(o.project([c.wrapLat[1],0],_).y/f.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var c=this._map,f=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),_=c.getZoomScale(f,this._tileZoom),w=c.project(o,this._tileZoom).floor(),P=c.getSize().divideBy(_*2);return new St(w.subtract(P),w.add(P))},_update:function(o){var c=this._map;if(c){var f=this._clampZoom(c.getZoom());if(o===void 0&&(o=c.getCenter()),this._tileZoom!==void 0){var _=this._getTiledPixelBounds(o),w=this._pxBoundsToTileRange(_),P=w.getCenter(),Y=[],re=this.options.keepBuffer,de=new St(w.getBottomLeft().subtract([re,-re]),w.getTopRight().add([re,-re]));if(!(isFinite(w.min.x)&&isFinite(w.min.y)&&isFinite(w.max.x)&&isFinite(w.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Se in this._tiles){var He=this._tiles[Se].coords;(He.z!==this._tileZoom||!de.contains(new Je(He.x,He.y)))&&(this._tiles[Se].current=!1)}if(Math.abs(f-this._tileZoom)>1){this._setView(o,f);return}for(var lt=w.min.y;lt<=w.max.y;lt++)for(var Et=w.min.x;Et<=w.max.x;Et++){var Cn=new Je(Et,lt);if(Cn.z=this._tileZoom,!!this._isValidTile(Cn)){var Xi=this._tiles[this._tileCoordsToKey(Cn)];Xi?Xi.current=!0:Y.push(Cn)}}if(Y.sort(function(kn,ko){return kn.distanceTo(P)-ko.distanceTo(P)}),Y.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var rr=document.createDocumentFragment();for(Et=0;Et<Y.length;Et++)this._addTile(Y[Et],rr);this._level.el.appendChild(rr)}}}},_isValidTile:function(o){var c=this._map.options.crs;if(!c.infinite){var f=this._globalTileRange;if(!c.wrapLng&&(o.x<f.min.x||o.x>f.max.x)||!c.wrapLat&&(o.y<f.min.y||o.y>f.max.y))return!1}if(!this.options.bounds)return!0;var _=this._tileCoordsToBounds(o);return X(this.options.bounds).overlaps(_)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var c=this._map,f=this.getTileSize(),_=o.scaleBy(f),w=_.add(f),P=c.unproject(_,o.z),Y=c.unproject(w,o.z);return[P,Y]},_tileCoordsToBounds:function(o){var c=this._tileCoordsToNwSe(o),f=new Jt(c[0],c[1]);return this.options.noWrap||(f=this._map.wrapLatLngBounds(f)),f},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var c=o.split(":"),f=new Je(+c[0],+c[1]);return f.z=+c[2],f},_removeTile:function(o){var c=this._tiles[o];c&&(ci(c.el),delete this._tiles[o],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){bt(o,"leaflet-tile");var c=this.getTileSize();o.style.width=c.x+"px",o.style.height=c.y+"px",o.onselectstart=v,o.onmousemove=v,at.ielt9&&this.options.opacity<1&&ir(o,this.options.opacity)},_addTile:function(o,c){var f=this._getTilePos(o),_=this._tileCoordsToKey(o),w=this.createTile(this._wrapCoords(o),r(this._tileReady,this,o));this._initTile(w),this.createTile.length<2&&me(r(this._tileReady,this,o,null,w)),Ri(w,f),this._tiles[_]={el:w,coords:o,current:!0},c.appendChild(w),this.fire("tileloadstart",{tile:w,coords:o})},_tileReady:function(o,c,f){c&&this.fire("tileerror",{error:c,tile:f,coords:o});var _=this._tileCoordsToKey(o);f=this._tiles[_],f&&(f.loaded=+new Date,this._map._fadeAnimated?(ir(f.el,0),_e(this._fadeFrame),this._fadeFrame=me(this._updateOpacity,this)):(f.active=!0,this._pruneTiles()),c||(bt(f.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:f.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),at.ielt9||!this._map._fadeAnimated?me(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var c=new Je(this._wrapX?g(o.x,this._wrapX):o.x,this._wrapY?g(o.y,this._wrapY):o.y);return c.z=o.z,c},_pxBoundsToTileRange:function(o){var c=this.getTileSize();return new St(o.min.unscaleBy(c).floor(),o.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function gv(o){return new Qs(o)}var Fo=Qs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,c){this._url=o,c=A(this,c),c.detectRetina&&at.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,c){return this._url===o&&c===void 0&&(c=!0),this._url=o,c||this.redraw(),this},createTile:function(o,c){var f=document.createElement("img");return ht(f,"load",r(this._tileOnLoad,this,c,f)),ht(f,"error",r(this._tileOnError,this,c,f)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(f.referrerPolicy=this.options.referrerPolicy),f.alt="",f.src=this.getTileUrl(o),f},getTileUrl:function(o){var c={r:at.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var f=this._globalTileRange.max.y-o.y;this.options.tms&&(c.y=f),c["-y"]=f}return D(this._url,e(c,this.options))},_tileOnLoad:function(o,c){at.ielt9?setTimeout(r(o,this,null,c),0):o(null,c)},_tileOnError:function(o,c,f){var _=this.options.errorTileUrl;_&&c.getAttribute("src")!==_&&(c.src=_),o(f,c)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,c=this.options.maxZoom,f=this.options.zoomReverse,_=this.options.zoomOffset;return f&&(o=c-o),o+_},_getSubdomain:function(o){var c=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var o,c;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(c=this._tiles[o].el,c.onload=v,c.onerror=v,!c.complete)){c.src=te;var f=this._tiles[o].coords;ci(c),delete this._tiles[o],this.fire("tileabort",{tile:c,coords:f})}},_removeTile:function(o){var c=this._tiles[o];if(c)return c.el.setAttribute("src",te),Qs.prototype._removeTile.call(this,o)},_tileReady:function(o,c,f){if(!(!this._map||f&&f.getAttribute("src")===te))return Qs.prototype._tileReady.call(this,o,c,f)}});function Rp(o,c){return new Fo(o,c)}var Np=Fo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,c){this._url=o;var f=e({},this.defaultWmsParams);for(var _ in c)_ in this.options||(f[_]=c[_]);c=A(this,c);var w=c.detectRetina&&at.retina?2:1,P=this.getTileSize();f.width=P.x*w,f.height=P.y*w,this.wmsParams=f},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Fo.prototype.onAdd.call(this,o)},getTileUrl:function(o){var c=this._tileCoordsToNwSe(o),f=this._crs,_=Wt(f.project(c[0]),f.project(c[1])),w=_.min,P=_.max,Y=(this._wmsVersion>=1.3&&this._crs===Fp?[w.y,w.x,P.y,P.x]:[w.x,w.y,P.x,P.y]).join(","),re=Fo.prototype.getTileUrl.call(this,o);return re+O(this.wmsParams,re,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Y},setParams:function(o,c){return e(this.wmsParams,o),c||this.redraw(),this}});function _v(o,c){return new Np(o,c)}Fo.WMS=Np,Rp.wms=_v;var Kr=gr.extend({options:{padding:.1},initialize:function(o){A(this,o),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),bt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,c){var f=this._map.getZoomScale(c,this._zoom),_=this._map.getSize().multiplyBy(.5+this.options.padding),w=this._map.project(this._center,c),P=_.multiplyBy(-f).add(w).subtract(this._map._getNewPixelOrigin(o,c));at.any3d?Wa(this._container,P,f):Ri(this._container,P)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,c=this._map.getSize(),f=this._map.containerPointToLayerPoint(c.multiplyBy(-o)).round();this._bounds=new St(f,f.add(c.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Vp=Kr.extend({options:{tolerance:0},getEvents:function(){var o=Kr.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Kr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");ht(o,"mousemove",this._onMouseMove,this),ht(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ht(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){_e(this._redrawRequest),delete this._ctx,ci(this._container),pi(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var c in this._layers)o=this._layers[c],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Kr.prototype._update.call(this);var o=this._bounds,c=this._container,f=o.getSize(),_=at.retina?2:1;Ri(c,o.min),c.width=_*f.x,c.height=_*f.y,c.style.width=f.x+"px",c.style.height=f.y+"px",at.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){Kr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[u(o)]=o;var c=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var c=o._order,f=c.next,_=c.prev;f?f.prev=_:this._drawLast=_,_?_.next=f:this._drawFirst=f,delete o._order,delete this._layers[u(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var c=o.options.dashArray.split(/[, ]+/),f=[],_,w;for(w=0;w<c.length;w++){if(_=Number(c[w]),isNaN(_))return;f.push(_)}o.options._dashArray=f}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||me(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var c=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new St,this._redrawBounds.extend(o._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(o._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var c=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,c=this._redrawBounds;if(this._ctx.save(),c){var f=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,f.x,f.y),this._ctx.clip()}this._drawing=!0;for(var _=this._drawFirst;_;_=_.next)o=_.layer,(!c||o._pxBounds&&o._pxBounds.intersects(c))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,c){if(this._drawing){var f,_,w,P,Y=o._parts,re=Y.length,de=this._ctx;if(re){for(de.beginPath(),f=0;f<re;f++){for(_=0,w=Y[f].length;_<w;_++)P=Y[f][_],de[_?"lineTo":"moveTo"](P.x,P.y);c&&de.closePath()}this._fillStroke(de,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var c=o._point,f=this._ctx,_=Math.max(Math.round(o._radius),1),w=(Math.max(Math.round(o._radiusY),1)||_)/_;w!==1&&(f.save(),f.scale(1,w)),f.beginPath(),f.arc(c.x,c.y/w,_,0,Math.PI*2,!1),w!==1&&f.restore(),this._fillStroke(f,o)}},_fillStroke:function(o,c){var f=c.options;f.fill&&(o.globalAlpha=f.fillOpacity,o.fillStyle=f.fillColor||f.color,o.fill(f.fillRule||"evenodd")),f.stroke&&f.weight!==0&&(o.setLineDash&&o.setLineDash(c.options&&c.options._dashArray||[]),o.globalAlpha=f.opacity,o.lineWidth=f.weight,o.strokeStyle=f.color,o.lineCap=f.lineCap,o.lineJoin=f.lineJoin,o.stroke())},_onClick:function(o){for(var c=this._map.mouseEventToLayerPoint(o),f,_,w=this._drawFirst;w;w=w.next)f=w.layer,f.options.interactive&&f._containsPoint(c)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(f))&&(_=f);this._fireEvent(_?[_]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,c)}},_handleMouseOut:function(o){var c=this._hoveredLayer;c&&(Di(this._container,"leaflet-interactive"),this._fireEvent([c],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,c){if(!this._mouseHoverThrottled){for(var f,_,w=this._drawFirst;w;w=w.next)f=w.layer,f.options.interactive&&f._containsPoint(c)&&(_=f);_!==this._hoveredLayer&&(this._handleMouseOut(o),_&&(bt(this._container,"leaflet-interactive"),this._fireEvent([_],o,"mouseover"),this._hoveredLayer=_)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,c,f){this._map._fireDOMEvent(c,f||c.type,o)},_bringToFront:function(o){var c=o._order;if(c){var f=c.next,_=c.prev;if(f)f.prev=_;else return;_?_.next=f:f&&(this._drawFirst=f),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(o)}},_bringToBack:function(o){var c=o._order;if(c){var f=c.next,_=c.prev;if(_)_.next=f;else return;f?f.prev=_:_&&(this._drawLast=_),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(o)}}});function Bp(o){return at.canvas?new Vp(o):null}var el=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),vv={_initContainer:function(){this._container=yt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Kr.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var c=o._container=el("shape");bt(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",o._path=el("path"),c.appendChild(o._path),this._updateStyle(o),this._layers[u(o)]=o},_addPath:function(o){var c=o._container;this._container.appendChild(c),o.options.interactive&&o.addInteractiveTarget(c)},_removePath:function(o){var c=o._container;ci(c),o.removeInteractiveTarget(c),delete this._layers[u(o)]},_updateStyle:function(o){var c=o._stroke,f=o._fill,_=o.options,w=o._container;w.stroked=!!_.stroke,w.filled=!!_.fill,_.stroke?(c||(c=o._stroke=el("stroke")),w.appendChild(c),c.weight=_.weight+"px",c.color=_.color,c.opacity=_.opacity,_.dashArray?c.dashStyle=ee(_.dashArray)?_.dashArray.join(" "):_.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=_.lineCap.replace("butt","flat"),c.joinstyle=_.lineJoin):c&&(w.removeChild(c),o._stroke=null),_.fill?(f||(f=o._fill=el("fill")),w.appendChild(f),f.color=_.fillColor||_.color,f.opacity=_.fillOpacity):f&&(w.removeChild(f),o._fill=null)},_updateCircle:function(o){var c=o._point.round(),f=Math.round(o._radius),_=Math.round(o._radiusY||f);this._setPath(o,o._empty()?"M0 0":"AL "+c.x+","+c.y+" "+f+","+_+" 0,"+65535*360)},_setPath:function(o,c){o._path.v=c},_bringToFront:function(o){wo(o._container)},_bringToBack:function(o){So(o._container)}},L0=at.vml?el:Li,tl=Kr.extend({_initContainer:function(){this._container=L0("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=L0("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ci(this._container),pi(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Kr.prototype._update.call(this);var o=this._bounds,c=o.getSize(),f=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,f.setAttribute("width",c.x),f.setAttribute("height",c.y)),Ri(f,o.min),f.setAttribute("viewBox",[o.min.x,o.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(o){var c=o._path=L0("path");o.options.className&&bt(c,o.options.className),o.options.interactive&&bt(c,"leaflet-interactive"),this._updateStyle(o),this._layers[u(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){ci(o._path),o.removeInteractiveTarget(o._path),delete this._layers[u(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var c=o._path,f=o.options;c&&(f.stroke?(c.setAttribute("stroke",f.color),c.setAttribute("stroke-opacity",f.opacity),c.setAttribute("stroke-width",f.weight),c.setAttribute("stroke-linecap",f.lineCap),c.setAttribute("stroke-linejoin",f.lineJoin),f.dashArray?c.setAttribute("stroke-dasharray",f.dashArray):c.removeAttribute("stroke-dasharray"),f.dashOffset?c.setAttribute("stroke-dashoffset",f.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),f.fill?(c.setAttribute("fill",f.fillColor||f.color),c.setAttribute("fill-opacity",f.fillOpacity),c.setAttribute("fill-rule",f.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(o,c){this._setPath(o,Rt(o._parts,c))},_updateCircle:function(o){var c=o._point,f=Math.max(Math.round(o._radius),1),_=Math.max(Math.round(o._radiusY),1)||f,w="a"+f+","+_+" 0 1,0 ",P=o._empty()?"M0 0":"M"+(c.x-f)+","+c.y+w+f*2+",0 "+w+-f*2+",0 ";this._setPath(o,P)},_setPath:function(o,c){o._path.setAttribute("d",c)},_bringToFront:function(o){wo(o._path)},_bringToBack:function(o){So(o._path)}});at.vml&&tl.include(vv);function Up(o){return at.svg||at.vml?new tl(o):null}Vt.include({getRenderer:function(o){var c=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var c=this._paneRenderers[o];return c===void 0&&(c=this._createRenderer({pane:o}),this._paneRenderers[o]=c),c},_createRenderer:function(o){return this.options.preferCanvas&&Bp(o)||Up(o)}});var Wp=Ao.extend({initialize:function(o,c){Ao.prototype.initialize.call(this,this._boundsToLatLngs(o),c)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=X(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function xv(o,c){return new Wp(o,c)}tl.create=L0,tl.pointsToPath=Rt,Xr.geometryToLayer=M0,Xr.coordsToLatLng=jd,Xr.coordsToLatLngs=F0,Xr.latLngToCoords=Hd,Xr.latLngsToCoords=k0,Xr.getFeature=Mo,Xr.asFeature=P0,Vt.mergeOptions({boxZoom:!0});var jp=Ir.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){ht(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){pi(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ci(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),$s(),Td(),this._startPoint=this._map.mouseEventToContainerPoint(o),ht(document,{contextmenu:za,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=yt("div","leaflet-zoom-box",this._container),bt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var c=new St(this._point,this._startPoint),f=c.getSize();Ri(this._box,c.min),this._box.style.width=f.x+"px",this._box.style.height=f.y+"px"},_finish:function(){this._moved&&(ci(this._box),Di(this._container,"leaflet-crosshair")),Zs(),Ed(),pi(document,{contextmenu:za,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var c=new Jt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Vt.addInitHook("addHandler","boxZoom",jp),Vt.mergeOptions({doubleClickZoom:!0});var Hp=Ir.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var c=this._map,f=c.getZoom(),_=c.options.zoomDelta,w=o.originalEvent.shiftKey?f-_:f+_;c.options.doubleClickZoom==="center"?c.setZoom(w):c.setZoomAround(o.containerPoint,w)}});Vt.addInitHook("addHandler","doubleClickZoom",Hp),Vt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var zp=Ir.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new ha(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}bt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Di(this._map._container,"leaflet-grab"),Di(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=X(this._map.options.maxBounds);this._offsetLimit=Wt(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var c=this._lastTime=+new Date,f=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(f),this._times.push(c),this._prunePositions(c)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,c){return o-(o-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;o.x<c.min.x&&(o.x=this._viscousLimit(o.x,c.min.x)),o.y<c.min.y&&(o.y=this._viscousLimit(o.y,c.min.y)),o.x>c.max.x&&(o.x=this._viscousLimit(o.x,c.max.x)),o.y>c.max.y&&(o.y=this._viscousLimit(o.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,c=Math.round(o/2),f=this._initialWorldOffset,_=this._draggable._newPos.x,w=(_-c+f)%o+c-f,P=(_+c+f)%o-c-f,Y=Math.abs(w+f)<Math.abs(P+f)?w:P;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Y},_onDragEnd:function(o){var c=this._map,f=c.options,_=!f.inertia||o.noInertia||this._times.length<2;if(c.fire("dragend",o),_)c.fire("moveend");else{this._prunePositions(+new Date);var w=this._lastPos.subtract(this._positions[0]),P=(this._lastTime-this._times[0])/1e3,Y=f.easeLinearity,re=w.multiplyBy(Y/P),de=re.distanceTo([0,0]),Se=Math.min(f.inertiaMaxSpeed,de),He=re.multiplyBy(Se/de),lt=Se/(f.inertiaDeceleration*Y),Et=He.multiplyBy(-lt/2).round();!Et.x&&!Et.y?c.fire("moveend"):(Et=c._limitOffset(Et,c.options.maxBounds),me(function(){c.panBy(Et,{duration:lt,easeLinearity:Y,noMoveStart:!0,animate:!0})}))}}});Vt.addInitHook("addHandler","dragging",zp),Vt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Gp=Ir.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),ht(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),pi(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,c=document.documentElement,f=o.scrollTop||c.scrollTop,_=o.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(_,f)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var c=this._panKeys={},f=this.keyCodes,_,w;for(_=0,w=f.left.length;_<w;_++)c[f.left[_]]=[-1*o,0];for(_=0,w=f.right.length;_<w;_++)c[f.right[_]]=[o,0];for(_=0,w=f.down.length;_<w;_++)c[f.down[_]]=[0,o];for(_=0,w=f.up.length;_<w;_++)c[f.up[_]]=[0,-1*o]},_setZoomDelta:function(o){var c=this._zoomKeys={},f=this.keyCodes,_,w;for(_=0,w=f.zoomIn.length;_<w;_++)c[f.zoomIn[_]]=o;for(_=0,w=f.zoomOut.length;_<w;_++)c[f.zoomOut[_]]=-o},_addHooks:function(){ht(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){pi(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var c=o.keyCode,f=this._map,_;if(c in this._panKeys){if(!f._panAnim||!f._panAnim._inProgress)if(_=this._panKeys[c],o.shiftKey&&(_=nt(_).multiplyBy(3)),f.options.maxBounds&&(_=f._limitOffset(nt(_),f.options.maxBounds)),f.options.worldCopyJump){var w=f.wrapLatLng(f.unproject(f.project(f.getCenter()).add(_)));f.panTo(w)}else f.panBy(_)}else if(c in this._zoomKeys)f.setZoom(f.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&f._popup&&f._popup.options.closeOnEscapeKey)f.closePopup();else return;za(o)}}});Vt.addInitHook("addHandler","keyboard",Gp),Vt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var $p=Ir.extend({addHooks:function(){ht(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){pi(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var c=gp(o),f=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var _=Math.max(f-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),_),za(o)},_performZoom:function(){var o=this._map,c=o.getZoom(),f=this._map.options.zoomSnap||0;o._stop();var _=this._delta/(this._map.options.wheelPxPerZoomLevel*4),w=4*Math.log(2/(1+Math.exp(-Math.abs(_))))/Math.LN2,P=f?Math.ceil(w/f)*f:w,Y=o._limitZoom(c+(this._delta>0?P:-P))-c;this._delta=0,this._startTime=null,Y&&(o.options.scrollWheelZoom==="center"?o.setZoom(c+Y):o.setZoomAround(this._lastMousePos,c+Y))}});Vt.addInitHook("addHandler","scrollWheelZoom",$p);var yv=600;Vt.mergeOptions({tapHold:at.touchNative&&at.safari&&at.mobile,tapTolerance:15});var Zp=Ir.extend({addHooks:function(){ht(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){pi(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var c=o.touches[0];this._startPos=this._newPos=new Je(c.clientX,c.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(ht(document,"touchend",rn),ht(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),yv),ht(document,"touchend touchcancel contextmenu",this._cancel,this),ht(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){pi(document,"touchend",rn),pi(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),pi(document,"touchend touchcancel contextmenu",this._cancel,this),pi(document,"touchmove",this._onMove,this)},_onMove:function(o){var c=o.touches[0];this._newPos=new Je(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,c){var f=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});f._simulated=!0,c.target.dispatchEvent(f)}});Vt.addInitHook("addHandler","tapHold",Zp),Vt.mergeOptions({touchZoom:at.touch,bounceAtZoomLimits:!0});var qp=Ir.extend({addHooks:function(){bt(this._map._container,"leaflet-touch-zoom"),ht(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Di(this._map._container,"leaflet-touch-zoom"),pi(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var c=this._map;if(!(!o.touches||o.touches.length!==2||c._animatingZoom||this._zooming)){var f=c.mouseEventToContainerPoint(o.touches[0]),_=c.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(f.add(_)._divideBy(2))),this._startDist=f.distanceTo(_),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),ht(document,"touchmove",this._onTouchMove,this),ht(document,"touchend touchcancel",this._onTouchEnd,this),rn(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var c=this._map,f=c.mouseEventToContainerPoint(o.touches[0]),_=c.mouseEventToContainerPoint(o.touches[1]),w=f.distanceTo(_)/this._startDist;if(this._zoom=c.getScaleZoom(w,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&w<1||this._zoom>c.getMaxZoom()&&w>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,w===1)return}else{var P=f._add(_)._divideBy(2)._subtract(this._centerPoint);if(w===1&&P.x===0&&P.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(P),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),_e(this._animRequest);var Y=r(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=me(Y,this,!0),rn(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,_e(this._animRequest),pi(document,"touchmove",this._onTouchMove,this),pi(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Vt.addInitHook("addHandler","touchZoom",qp),Vt.BoxZoom=jp,Vt.DoubleClickZoom=Hp,Vt.Drag=zp,Vt.Keyboard=Gp,Vt.ScrollWheelZoom=$p,Vt.TapHold=Zp,Vt.TouchZoom=qp,i.Bounds=St,i.Browser=at,i.CRS=J,i.Canvas=Vp,i.Circle=Wd,i.CircleMarker=A0,i.Class=we,i.Control=hr,i.DivIcon=Lp,i.DivOverlay=Or,i.DomEvent=V2,i.DomUtil=R2,i.Draggable=ha,i.Evented=it,i.FeatureGroup=qr,i.GeoJSON=Xr,i.GridLayer=Qs,i.Handler=Ir,i.Icon=Eo,i.ImageOverlay=D0,i.LatLng=ue,i.LatLngBounds=Jt,i.Layer=gr,i.LayerGroup=To,i.LineUtil=K2,i.Map=Vt,i.Marker=E0,i.Mixin=G2,i.Path=ga,i.Point=Je,i.PolyUtil=$2,i.Polygon=Ao,i.Polyline=Yr,i.Popup=I0,i.PosAnimation=_p,i.Projection=J2,i.Rectangle=Wp,i.Renderer=Kr,i.SVG=tl,i.SVGOverlay=Op,i.TileLayer=Fo,i.Tooltip=O0,i.Transformation=Ge,i.Util=Ae,i.VideoOverlay=Ip,i.bind=r,i.bounds=Wt,i.canvas=Bp,i.circle=ov,i.circleMarker=av,i.control=Xs,i.divIcon=hv,i.extend=e,i.featureGroup=iv,i.geoJSON=Dp,i.geoJson=uv,i.gridLayer=gv,i.icon=nv,i.imageOverlay=cv,i.latLng=K,i.latLngBounds=X,i.layerGroup=tv,i.map=B2,i.marker=rv,i.point=nt,i.polygon=lv,i.polyline=sv,i.popup=fv,i.rectangle=xv,i.setOptions=A,i.stamp=u,i.svg=Up,i.svgOverlay=mv,i.tileLayer=Rp,i.tooltip=pv,i.transformation=Fe,i.version=t,i.videoOverlay=dv;var bv=window.L;i.noConflict=function(){return window.L=bv,this},window.L=i})});var Bi=new Tt("");var Bh=null;function lr(){return Bh}function mm(i){Bh??=i}var al=class{},fm=(()=>{class i{historyGo(e){throw new Error("")}static \u0275fac=function(n){return new(n||i)};static \u0275prov=Pe({token:i,factory:()=>Ne(Uh),providedIn:"platform"})}return i})();var Uh=(()=>{class i extends fm{_location;_history;_doc=Ne(Bi);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return lr().getBaseHref(this._doc)}onPopState(e){let n=lr().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){let n=lr().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,n,r){this._history.pushState(e,n,r)}replaceState(e,n,r){this._history.replaceState(e,n,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(n){return new(n||i)};static \u0275prov=Pe({token:i,factory:()=>new i,providedIn:"platform"})}return i})();function Wh(i,t){return i?t?i.endsWith("/")?t.startsWith("/")?i+t.slice(1):i+t:t.startsWith("/")?i+t:`${i}/${t}`:i:t}function Nh(i){let t=i.search(/#|\?|$/);return i[t-1]==="/"?i.slice(0,t-1)+i.slice(t):i}function Ca(i){return i&&i[0]!=="?"?`?${i}`:i}var Vo=(()=>{class i{historyGo(e){throw new Error("")}static \u0275fac=function(n){return new(n||i)};static \u0275prov=Pe({token:i,factory:()=>Ne(Hh),providedIn:"root"})}return i})(),jh=new Tt(""),Hh=(()=>{class i extends Vo{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,n){super(),this._platformLocation=e,this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??Ne(Bi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Wh(this._baseHref,e)}path(e=!1){let n=this._platformLocation.pathname+Ca(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${n}${r}`:n}pushState(e,n,r,a){let u=this.prepareExternalUrl(r+Ca(a));this._platformLocation.pushState(e,n,u)}replaceState(e,n,r,a){let u=this.prepareExternalUrl(r+Ca(a));this._platformLocation.replaceState(e,n,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(n){return new(n||i)(Ue(fm),Ue(jh,8))};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Bo=(()=>{class i{_subject=new Vi;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let n=this._locationStrategy.getBaseHref();this._basePath=Iv(Nh(Vh(n))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+Ca(n))}normalize(e){return i.stripTrailingSlash(Dv(this._basePath,Vh(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,n="",r=null){this._locationStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ca(n)),r)}replaceState(e,n="",r=null){this._locationStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ca(n)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)}),()=>{let n=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(n,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(r=>r(e,n))}subscribe(e,n,r){return this._subject.subscribe({next:e,error:n??void 0,complete:r??void 0})}static normalizeQueryParams=Ca;static joinWithSlash=Wh;static stripTrailingSlash=Nh;static \u0275fac=function(n){return new(n||i)(Ue(Vo))};static \u0275prov=Pe({token:i,factory:()=>Pv(),providedIn:"root"})}return i})();function Pv(){return new Bo(Ue(Vo))}function Dv(i,t){if(!i||!t.startsWith(i))return t;let e=t.substring(i.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function Vh(i){return i.replace(/\/index.html$/,"")}function Iv(i){if(new RegExp("^(https?:)?//").test(i)){let[,e]=i.split(/\/\/[^\/]+/);return e}return i}var Cm=function(i){return i[i.Decimal=0]="Decimal",i[i.Percent=1]="Percent",i[i.Currency=2]="Currency",i[i.Scientific=3]="Scientific",i}(Cm||{});var _n=function(i){return i[i.Format=0]="Format",i[i.Standalone=1]="Standalone",i}(_n||{}),ri=function(i){return i[i.Narrow=0]="Narrow",i[i.Abbreviated=1]="Abbreviated",i[i.Wide=2]="Wide",i[i.Short=3]="Short",i}(ri||{}),Dn=function(i){return i[i.Short=0]="Short",i[i.Medium=1]="Medium",i[i.Long=2]="Long",i[i.Full=3]="Full",i}(Dn||{}),In={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Yh(i){return zn(i)[Ii.LocaleId]}function Xh(i,t,e){let n=zn(i),r=[n[Ii.DayPeriodsFormat],n[Ii.DayPeriodsStandalone]],a=ur(r,t);return ur(a,e)}function Kh(i,t,e){let n=zn(i),r=[n[Ii.DaysFormat],n[Ii.DaysStandalone]],a=ur(r,t);return ur(a,e)}function Jh(i,t,e){let n=zn(i),r=[n[Ii.MonthsFormat],n[Ii.MonthsStandalone]],a=ur(r,t);return ur(a,e)}function Qh(i,t){let n=zn(i)[Ii.Eras];return ur(n,t)}function ol(i,t){let e=zn(i);return ur(e[Ii.DateFormat],t)}function sl(i,t){let e=zn(i);return ur(e[Ii.TimeFormat],t)}function ll(i,t){let n=zn(i)[Ii.DateTimeFormat];return ur(n,t)}function Nr(i,t){let e=zn(i),n=e[Ii.NumberSymbols][t];if(typeof n>"u"){if(t===In.CurrencyDecimal)return e[Ii.NumberSymbols][In.Decimal];if(t===In.CurrencyGroup)return e[Ii.NumberSymbols][In.Group]}return n}function eg(i,t){return zn(i)[Ii.NumberFormats][t]}function tg(i){if(!i[Ii.ExtraData])throw new Error(`Missing extra locale data for the locale "${i[Ii.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function ig(i){let t=zn(i);return tg(t),(t[Ii.ExtraData][2]||[]).map(n=>typeof n=="string"?pm(n):[pm(n[0]),pm(n[1])])}function ng(i,t,e){let n=zn(i);tg(n);let r=[n[Ii.ExtraData][0],n[Ii.ExtraData][1]],a=ur(r,t)||[];return ur(a,e)||[]}function ur(i,t){for(let e=t;e>-1;e--)if(typeof i[e]<"u")return i[e];throw new Error("Locale data API: locale data undefined")}function pm(i){let[t,e]=i.split(":");return{hours:+t,minutes:+e}}var Ov=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,z0={},Lv=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function rg(i,t,e,n){let r=zv(i);t=ia(e,t)||t;let u=[],p;for(;t;)if(p=Lv.exec(t),p){u=u.concat(p.slice(1));let y=u.pop();if(!y)break;t=y}else{u.push(t);break}let g=r.getTimezoneOffset();n&&(g=og(n,g),r=Hv(r,n));let v="";return u.forEach(y=>{let M=Wv(y);v+=M?M(r,e,g):y==="''"?"'":y.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),v}function Y0(i,t,e){let n=new Date(0);return n.setFullYear(i,t,e),n.setHours(0,0,0),n}function ia(i,t){let e=Yh(i);if(z0[e]??={},z0[e][t])return z0[e][t];let n="";switch(t){case"shortDate":n=ol(i,Dn.Short);break;case"mediumDate":n=ol(i,Dn.Medium);break;case"longDate":n=ol(i,Dn.Long);break;case"fullDate":n=ol(i,Dn.Full);break;case"shortTime":n=sl(i,Dn.Short);break;case"mediumTime":n=sl(i,Dn.Medium);break;case"longTime":n=sl(i,Dn.Long);break;case"fullTime":n=sl(i,Dn.Full);break;case"short":let r=ia(i,"shortTime"),a=ia(i,"shortDate");n=G0(ll(i,Dn.Short),[r,a]);break;case"medium":let u=ia(i,"mediumTime"),p=ia(i,"mediumDate");n=G0(ll(i,Dn.Medium),[u,p]);break;case"long":let g=ia(i,"longTime"),v=ia(i,"longDate");n=G0(ll(i,Dn.Long),[g,v]);break;case"full":let y=ia(i,"fullTime"),M=ia(i,"fullDate");n=G0(ll(i,Dn.Full),[y,M]);break}return n&&(z0[e][t]=n),n}function G0(i,t){return t&&(i=i.replace(/\{([^}]+)}/g,function(e,n){return t!=null&&n in t?t[n]:e})),i}function br(i,t,e="-",n,r){let a="";(i<0||r&&i<=0)&&(r?i=-i+1:(i=-i,a=e));let u=String(i);for(;u.length<t;)u="0"+u;return n&&(u=u.slice(u.length-t)),a+u}function Rv(i,t){return br(i,3).substring(0,t)}function Ui(i,t,e=0,n=!1,r=!1){return function(a,u){let p=Nv(i,a);if((e>0||p>-e)&&(p+=e),i===3)p===0&&e===-12&&(p=12);else if(i===6)return Rv(p,t);let g=Nr(u,In.MinusSign);return br(p,t,g,n,r)}}function Nv(i,t){switch(i){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();case 3:return t.getHours();case 4:return t.getMinutes();case 5:return t.getSeconds();case 6:return t.getMilliseconds();case 7:return t.getDay();default:throw new Error(`Unknown DateType value "${i}".`)}}function hi(i,t,e=_n.Format,n=!1){return function(r,a){return Vv(r,a,i,t,e,n)}}function Vv(i,t,e,n,r,a){switch(e){case 2:return Jh(t,r,n)[i.getMonth()];case 1:return Kh(t,r,n)[i.getDay()];case 0:let u=i.getHours(),p=i.getMinutes();if(a){let v=ig(t),y=ng(t,r,n),M=v.findIndex(E=>{if(Array.isArray(E)){let[A,O]=E,F=u>=A.hours&&p>=A.minutes,D=u<O.hours||u===O.hours&&p<O.minutes;if(A.hours<O.hours){if(F&&D)return!0}else if(F||D)return!0}else if(E.hours===u&&E.minutes===p)return!0;return!1});if(M!==-1)return y[M]}return Xh(t,r,n)[u<12?0:1];case 3:return Qh(t,n)[i.getFullYear()<=0?0:1];default:let g=e;throw new Error(`unexpected translation type ${g}`)}}function $0(i){return function(t,e,n){let r=-1*n,a=Nr(e,In.MinusSign),u=r>0?Math.floor(r/60):Math.ceil(r/60);switch(i){case 0:return(r>=0?"+":"")+br(u,2,a)+br(Math.abs(r%60),2,a);case 1:return"GMT"+(r>=0?"+":"")+br(u,1,a);case 2:return"GMT"+(r>=0?"+":"")+br(u,2,a)+":"+br(Math.abs(r%60),2,a);case 3:return n===0?"Z":(r>=0?"+":"")+br(u,2,a)+":"+br(Math.abs(r%60),2,a);default:throw new Error(`Unknown zone width "${i}"`)}}}var Bv=0,q0=4;function Uv(i){let t=Y0(i,Bv,1).getDay();return Y0(i,0,1+(t<=q0?q0:q0+7)-t)}function ag(i){let t=i.getDay(),e=t===0?-3:q0-t;return Y0(i.getFullYear(),i.getMonth(),i.getDate()+e)}function hm(i,t=!1){return function(e,n){let r;if(t){let a=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,u=e.getDate();r=1+Math.floor((u+a)/7)}else{let a=ag(e),u=Uv(a.getFullYear()),p=a.getTime()-u.getTime();r=1+Math.round(p/6048e5)}return br(r,i,Nr(n,In.MinusSign))}}function Z0(i,t=!1){return function(e,n){let a=ag(e).getFullYear();return br(a,i,Nr(n,In.MinusSign),t)}}var gm={};function Wv(i){if(gm[i])return gm[i];let t;switch(i){case"G":case"GG":case"GGG":t=hi(3,ri.Abbreviated);break;case"GGGG":t=hi(3,ri.Wide);break;case"GGGGG":t=hi(3,ri.Narrow);break;case"y":t=Ui(0,1,0,!1,!0);break;case"yy":t=Ui(0,2,0,!0,!0);break;case"yyy":t=Ui(0,3,0,!1,!0);break;case"yyyy":t=Ui(0,4,0,!1,!0);break;case"Y":t=Z0(1);break;case"YY":t=Z0(2,!0);break;case"YYY":t=Z0(3);break;case"YYYY":t=Z0(4);break;case"M":case"L":t=Ui(1,1,1);break;case"MM":case"LL":t=Ui(1,2,1);break;case"MMM":t=hi(2,ri.Abbreviated);break;case"MMMM":t=hi(2,ri.Wide);break;case"MMMMM":t=hi(2,ri.Narrow);break;case"LLL":t=hi(2,ri.Abbreviated,_n.Standalone);break;case"LLLL":t=hi(2,ri.Wide,_n.Standalone);break;case"LLLLL":t=hi(2,ri.Narrow,_n.Standalone);break;case"w":t=hm(1);break;case"ww":t=hm(2);break;case"W":t=hm(1,!0);break;case"d":t=Ui(2,1);break;case"dd":t=Ui(2,2);break;case"c":case"cc":t=Ui(7,1);break;case"ccc":t=hi(1,ri.Abbreviated,_n.Standalone);break;case"cccc":t=hi(1,ri.Wide,_n.Standalone);break;case"ccccc":t=hi(1,ri.Narrow,_n.Standalone);break;case"cccccc":t=hi(1,ri.Short,_n.Standalone);break;case"E":case"EE":case"EEE":t=hi(1,ri.Abbreviated);break;case"EEEE":t=hi(1,ri.Wide);break;case"EEEEE":t=hi(1,ri.Narrow);break;case"EEEEEE":t=hi(1,ri.Short);break;case"a":case"aa":case"aaa":t=hi(0,ri.Abbreviated);break;case"aaaa":t=hi(0,ri.Wide);break;case"aaaaa":t=hi(0,ri.Narrow);break;case"b":case"bb":case"bbb":t=hi(0,ri.Abbreviated,_n.Standalone,!0);break;case"bbbb":t=hi(0,ri.Wide,_n.Standalone,!0);break;case"bbbbb":t=hi(0,ri.Narrow,_n.Standalone,!0);break;case"B":case"BB":case"BBB":t=hi(0,ri.Abbreviated,_n.Format,!0);break;case"BBBB":t=hi(0,ri.Wide,_n.Format,!0);break;case"BBBBB":t=hi(0,ri.Narrow,_n.Format,!0);break;case"h":t=Ui(3,1,-12);break;case"hh":t=Ui(3,2,-12);break;case"H":t=Ui(3,1);break;case"HH":t=Ui(3,2);break;case"m":t=Ui(4,1);break;case"mm":t=Ui(4,2);break;case"s":t=Ui(5,1);break;case"ss":t=Ui(5,2);break;case"S":t=Ui(6,1);break;case"SS":t=Ui(6,2);break;case"SSS":t=Ui(6,3);break;case"Z":case"ZZ":case"ZZZ":t=$0(0);break;case"ZZZZZ":t=$0(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=$0(1);break;case"OOOO":case"ZZZZ":case"zzzz":t=$0(2);break;default:return null}return gm[i]=t,t}function og(i,t){i=i.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+i)/6e4;return isNaN(e)?t:e}function jv(i,t){return i=new Date(i.getTime()),i.setMinutes(i.getMinutes()+t),i}function Hv(i,t,e){let r=i.getTimezoneOffset(),a=og(t,r);return jv(i,-1*(a-r))}function zv(i){if(zh(i))return i;if(typeof i=="number"&&!isNaN(i))return new Date(i);if(typeof i=="string"){if(i=i.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(i)){let[r,a=1,u=1]=i.split("-").map(p=>+p);return Y0(r,a-1,u)}let e=parseFloat(i);if(!isNaN(i-e))return new Date(e);let n;if(n=i.match(Ov))return Gv(n)}let t=new Date(i);if(!zh(t))throw new Error(`Unable to convert "${i}" into a date`);return t}function Gv(i){let t=new Date(0),e=0,n=0,r=i[8]?t.setUTCFullYear:t.setFullYear,a=i[8]?t.setUTCHours:t.setHours;i[9]&&(e=Number(i[9]+i[10]),n=Number(i[9]+i[11])),r.call(t,Number(i[1]),Number(i[2])-1,Number(i[3]));let u=Number(i[4]||0)-e,p=Number(i[5]||0)-n,g=Number(i[6]||0),v=Math.floor(parseFloat("0."+(i[7]||0))*1e3);return a.call(t,u,p,g,v),t}function zh(i){return i instanceof Date&&!isNaN(i.valueOf())}var $v=/^(\d+)?\.((\d+)(-(\d+))?)?$/,Gh=22,X0=".",ul="0",Zv=";",qv=",",_m="#";function Yv(i,t,e,n,r,a,u=!1){let p="",g=!1;if(!isFinite(i))p=Nr(e,In.Infinity);else{let v=Jv(i);u&&(v=Kv(v));let y=t.minInt,M=t.minFrac,E=t.maxFrac;if(a){let ie=a.match($v);if(ie===null)throw new Error(`${a} is not a valid digit info`);let te=ie[1],pe=ie[3],Ce=ie[5];te!=null&&(y=vm(te)),pe!=null&&(M=vm(pe)),Ce!=null?E=vm(Ce):pe!=null&&M>E&&(E=M)}Qv(v,M,E);let A=v.digits,O=v.integerLen,F=v.exponent,D=[];for(g=A.every(ie=>!ie);O<y;O++)A.unshift(0);for(;O<0;O++)A.unshift(0);O>0?D=A.splice(O,A.length):(D=A,A=[0]);let ee=[];for(A.length>=t.lgSize&&ee.unshift(A.splice(-t.lgSize,A.length).join(""));A.length>t.gSize;)ee.unshift(A.splice(-t.gSize,A.length).join(""));A.length&&ee.unshift(A.join("")),p=ee.join(Nr(e,n)),D.length&&(p+=Nr(e,r)+D.join("")),F&&(p+=Nr(e,In.Exponential)+"+"+F)}return i<0&&!g?p=t.negPre+p+t.negSuf:p=t.posPre+p+t.posSuf,p}function sg(i,t,e){let n=eg(t,Cm.Decimal),r=Xv(n,Nr(t,In.MinusSign));return Yv(i,r,t,In.Group,In.Decimal,e)}function Xv(i,t="-"){let e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},n=i.split(Zv),r=n[0],a=n[1],u=r.indexOf(X0)!==-1?r.split(X0):[r.substring(0,r.lastIndexOf(ul)+1),r.substring(r.lastIndexOf(ul)+1)],p=u[0],g=u[1]||"";e.posPre=p.substring(0,p.indexOf(_m));for(let y=0;y<g.length;y++){let M=g.charAt(y);M===ul?e.minFrac=e.maxFrac=y+1:M===_m?e.maxFrac=y+1:e.posSuf+=M}let v=p.split(qv);if(e.gSize=v[1]?v[1].length:0,e.lgSize=v[2]||v[1]?(v[2]||v[1]).length:0,a){let y=r.length-e.posPre.length-e.posSuf.length,M=a.indexOf(_m);e.negPre=a.substring(0,M).replace(/'/g,""),e.negSuf=a.slice(M+y).replace(/'/g,"")}else e.negPre=t+e.posPre,e.negSuf=e.posSuf;return e}function Kv(i){if(i.digits[0]===0)return i;let t=i.digits.length-i.integerLen;return i.exponent?i.exponent+=2:(t===0?i.digits.push(0,0):t===1&&i.digits.push(0),i.integerLen+=2),i}function Jv(i){let t=Math.abs(i)+"",e=0,n,r,a,u,p;for((r=t.indexOf(X0))>-1&&(t=t.replace(X0,"")),(a=t.search(/e/i))>0?(r<0&&(r=a),r+=+t.slice(a+1),t=t.substring(0,a)):r<0&&(r=t.length),a=0;t.charAt(a)===ul;a++);if(a===(p=t.length))n=[0],r=1;else{for(p--;t.charAt(p)===ul;)p--;for(r-=a,n=[],u=0;a<=p;a++,u++)n[u]=Number(t.charAt(a))}return r>Gh&&(n=n.splice(0,Gh-1),e=r-1,r=1),{digits:n,exponent:e,integerLen:r}}function Qv(i,t,e){if(t>e)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${e}).`);let n=i.digits,r=n.length-i.integerLen,a=Math.min(Math.max(t,r),e),u=a+i.integerLen,p=n[u];if(u>0){n.splice(Math.max(i.integerLen,u));for(let M=u;M<n.length;M++)n[M]=0}else{r=Math.max(0,r),i.integerLen=1,n.length=Math.max(1,u=a+1),n[0]=0;for(let M=1;M<u;M++)n[M]=0}if(p>=5)if(u-1<0){for(let M=0;M>u;M--)n.unshift(0),i.integerLen++;n.unshift(1),i.integerLen++}else n[u-1]++;for(;r<Math.max(0,a);r++)n.push(0);let g=a!==0,v=t+i.integerLen,y=n.reduceRight(function(M,E,A,O){return E=E+M,O[A]=E<10?E:E-10,g&&(O[A]===0&&A>=v?O.pop():g=!1),E>=10?1:0},0);y&&(n.unshift(y),i.integerLen++)}function vm(i){let t=parseInt(i);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+i);return t}var xm=/\s+/,$h=[],Ft=(()=>{class i{_ngEl;_renderer;initialClasses=$h;rawClass;stateMap=new Map;constructor(e,n){this._ngEl=e,this._renderer=n}set klass(e){this.initialClasses=e!=null?e.trim().split(xm):$h}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(xm):e}ngDoCheck(){for(let n of this.initialClasses)this._updateState(n,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let n of e)this._updateState(n,!0);else if(e!=null)for(let n of Object.keys(e))this._updateState(n,!!e[n]);this._applyStateDiff()}_updateState(e,n){let r=this.stateMap.get(e);r!==void 0?(r.enabled!==n&&(r.changed=!0,r.enabled=n),r.touched=!0):this.stateMap.set(e,{enabled:n,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let n=e[0],r=e[1];r.changed?(this._toggleClass(n,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(n,!1),this.stateMap.delete(n)),r.touched=!1}}_toggleClass(e,n){e=e.trim(),e.length>0&&e.split(xm).forEach(r=>{n?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(n){return new(n||i)(G(or),G(sr))};static \u0275dir=zt({type:i,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return i})();var K0=class{$implicit;ngForOf;index;count;constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ai=(()=>{class i{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,n,r){this._viewContainer=e,this._template=n,this._differs=r}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let n=this._viewContainer;e.forEachOperation((r,a,u)=>{if(r.previousIndex==null)n.createEmbeddedView(this._template,new K0(r.item,this._ngForOf,-1,-1),u===null?void 0:u);else if(u==null)n.remove(a===null?void 0:a);else if(a!==null){let p=n.get(a);n.move(p,u),Zh(p,r)}});for(let r=0,a=n.length;r<a;r++){let p=n.get(r).context;p.index=r,p.count=a,p.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{let a=n.get(r.currentIndex);Zh(a,r)})}static ngTemplateContextGuard(e,n){return!0}static \u0275fac=function(n){return new(n||i)(G(rl),G(sm),G(Oh))};static \u0275dir=zt({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return i})();function Zh(i,t){i.context.$implicit=t.item}var kt=(()=>{class i{_viewContainer;_context=new J0;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,n){this._viewContainer=e,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){qh(e,!1),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){qh(e,!1),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,n){return!0}static \u0275fac=function(n){return new(n||i)(G(rl),G(sm))};static \u0275dir=zt({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return i})(),J0=class{$implicit=null;ngIf=null};function qh(i,t){if(i&&!i.createEmbeddedView)throw new Mt(2020,!1)}var na=(()=>{class i{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(e,n,r){this._ngEl=e,this._differs=n,this._renderer=r}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){let e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,n){let[r,a]=e.split("."),u=r.indexOf("-")===-1?void 0:qa.DashCase;n!=null?this._renderer.setStyle(this._ngEl.nativeElement,r,a?`${n}${a}`:n,u):this._renderer.removeStyle(this._ngEl.nativeElement,r,u)}_applyChanges(e){e.forEachRemovedItem(n=>this._setStyle(n.key,null)),e.forEachAddedItem(n=>this._setStyle(n.key,n.currentValue)),e.forEachChangedItem(n=>this._setStyle(n.key,n.currentValue))}static \u0275fac=function(n){return new(n||i)(G(or),G(Lh),G(sr))};static \u0275dir=zt({type:i,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return i})();function wm(i,t){return new Mt(2100,!1)}var ym=class{createSubscription(t,e){return yr(()=>t.subscribe({next:e,error:n=>{throw n}}))}dispose(t){yr(()=>t.unsubscribe())}},bm=class{createSubscription(t,e){return t.then(n=>e?.(n),n=>{throw n}),{unsubscribe:()=>{e=null}}}dispose(t){t.unsubscribe()}},e4=new bm,t4=new ym,Sm=(()=>{class i{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(e){this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){if(!this._obj){if(e)try{this.markForCheckOnValueUpdate=!1,this._subscribe(e)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,n=>this._updateLatestValue(e,n))}_selectStrategy(e){if(Ro(e))return e4;if(wh(e))return t4;throw wm(i,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,n){e===this._obj&&(this._latestValue=n,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(n){return new(n||i)(G(ba,16))};static \u0275pipe=U0({name:"async",type:i,pure:!1})}return i})();var i4="mediumDate",lg=new Tt(""),ug=new Tt(""),cl=(()=>{class i{locale;defaultTimezone;defaultOptions;constructor(e,n,r){this.locale=e,this.defaultTimezone=n,this.defaultOptions=r}transform(e,n,r,a){if(e==null||e===""||e!==e)return null;try{let u=n??this.defaultOptions?.dateFormat??i4,p=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return rg(e,u,a||this.locale,p)}catch(u){throw wm(i,u.message)}}static \u0275fac=function(n){return new(n||i)(G(dm,16),G(lg,24),G(ug,24))};static \u0275pipe=U0({name:"date",type:i,pure:!0})}return i})();var wn=(()=>{class i{_locale;constructor(e){this._locale=e}transform(e,n,r){if(!n4(e))return null;r||=this._locale;try{let a=r4(e);return sg(a,r,n)}catch(a){throw wm(i,a.message)}}static \u0275fac=function(n){return new(n||i)(G(dm,16))};static \u0275pipe=U0({name:"number",type:i,pure:!0})}return i})();function n4(i){return!(i==null||i===""||i!==i)}function r4(i){if(typeof i=="string"&&!isNaN(Number(i)-parseFloat(i)))return Number(i);if(typeof i!="number")throw new Error(`${i} is not a number`);return i}var Le=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=ta({type:i});static \u0275inj=Qr({})}return i})();function dl(i,t){t=encodeURIComponent(t);for(let e of i.split(";")){let n=e.indexOf("="),[r,a]=n==-1?[e,""]:[e.slice(0,n),e.slice(n+1)];if(r.trim()===t)return decodeURIComponent(a)}return null}var Tm="browser",cg="server";function Q0(i){return i===cg}var Ka=class{};var iu=new Tt(""),Fm=(()=>{class i{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,n){this._zone=n,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,n,r,a){return this._findPluginFor(n).addEventListener(e,n,r,a)}getZone(){return this._zone}_findPluginFor(e){let n=this._eventNameToPlugin.get(e);if(n)return n;if(n=this._plugins.find(a=>a.supports(e)),!n)throw new Mt(5101,!1);return this._eventNameToPlugin.set(e,n),n}static \u0275fac=function(n){return new(n||i)(Ue(iu),Ue(ea))};static \u0275prov=Pe({token:i,factory:i.\u0275fac})}return i})(),ml=class{_doc;constructor(t){this._doc=t}manager},eu="ng-app-id";function dg(i){for(let t of i)t.remove()}function mg(i,t){let e=t.createElement("style");return e.textContent=i,e}function o4(i,t,e,n){let r=i.head?.querySelectorAll(`style[${eu}="${t}"],link[${eu}="${t}"]`);if(r)for(let a of r)a.removeAttribute(eu),a instanceof HTMLLinkElement?n.set(a.href.slice(a.href.lastIndexOf("/")+1),{usage:0,elements:[a]}):a.textContent&&e.set(a.textContent,{usage:0,elements:[a]})}function Am(i,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",i),e}var km=(()=>{class i{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,n,r,a={}){this.doc=e,this.appId=n,this.nonce=r,this.isServer=Q0(a),o4(e,n,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,n){for(let r of e)this.addUsage(r,this.inline,mg);n?.forEach(r=>this.addUsage(r,this.external,Am))}removeStyles(e,n){for(let r of e)this.removeUsage(r,this.inline);n?.forEach(r=>this.removeUsage(r,this.external))}addUsage(e,n,r){let a=n.get(e);a?a.usage++:n.set(e,{usage:1,elements:[...this.hosts].map(u=>this.addElement(u,r(e,this.doc)))})}removeUsage(e,n){let r=n.get(e);r&&(r.usage--,r.usage<=0&&(dg(r.elements),n.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])dg(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[n,{elements:r}]of this.inline)r.push(this.addElement(e,mg(n,this.doc)));for(let[n,{elements:r}]of this.external)r.push(this.addElement(e,Am(n,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,n){return this.nonce&&n.setAttribute("nonce",this.nonce),this.isServer&&n.setAttribute(eu,this.appId),e.appendChild(n)}static \u0275fac=function(n){return new(n||i)(Ue(Bi),Ue(rm),Ue(am,8),Ue(il))};static \u0275prov=Pe({token:i,factory:i.\u0275fac})}return i})(),Em={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Pm=/%COMP%/g;var pg="%COMP%",s4=`_nghost-${pg}`,l4=`_ngcontent-${pg}`,u4=!0,c4=new Tt("",{providedIn:"root",factory:()=>u4});function d4(i){return l4.replace(Pm,i)}function m4(i){return s4.replace(Pm,i)}function hg(i,t){return t.map(e=>e.replace(Pm,i))}var hl=(()=>{class i{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,n,r,a,u,p,g,v=null,y=null){this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.removeStylesOnCompDestroy=a,this.doc=u,this.platformId=p,this.ngZone=g,this.nonce=v,this.tracingService=y,this.platformIsServer=Q0(p),this.defaultRenderer=new fl(e,u,g,this.platformIsServer,this.tracingService)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;this.platformIsServer&&n.encapsulation===nl.ShadowDom&&(n=Qe(ve({},n),{encapsulation:nl.Emulated}));let r=this.getOrCreateRenderer(e,n);return r instanceof tu?r.applyToHost(e):r instanceof pl&&r.applyStyles(),r}getOrCreateRenderer(e,n){let r=this.rendererByCompId,a=r.get(n.id);if(!a){let u=this.doc,p=this.ngZone,g=this.eventManager,v=this.sharedStylesHost,y=this.removeStylesOnCompDestroy,M=this.platformIsServer,E=this.tracingService;switch(n.encapsulation){case nl.Emulated:a=new tu(g,v,n,this.appId,y,u,p,M,E);break;case nl.ShadowDom:return new Mm(g,v,e,n,u,p,this.nonce,M,E);default:a=new pl(g,v,n,y,u,p,M,E);break}r.set(n.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(n){return new(n||i)(Ue(Fm),Ue(km),Ue(rm),Ue(c4),Ue(Bi),Ue(il),Ue(ea),Ue(am),Ue(_h,8))};static \u0275prov=Pe({token:i,factory:i.\u0275fac})}return i})(),fl=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,n,r,a){this.eventManager=t,this.doc=e,this.ngZone=n,this.platformIsServer=r,this.tracingService=a}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(Em[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(fg(t)?t.content:t).appendChild(e)}insertBefore(t,e,n){t&&(fg(t)?t.content:t).insertBefore(e,n)}removeChild(t,e){e.remove()}selectRootElement(t,e){let n=typeof t=="string"?this.doc.querySelector(t):t;if(!n)throw new Mt(-5104,!1);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;let a=Em[r];a?t.setAttributeNS(a,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){let r=Em[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(qa.DashCase|qa.Important)?t.style.setProperty(e,n,r&qa.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&qa.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t!=null&&(t[e]=n)}setValue(t,e){t.nodeValue=e}listen(t,e,n,r){if(typeof t=="string"&&(t=lr().getGlobalEventTarget(this.doc,t),!t))throw new Mt(5102,!1);let a=this.decoratePreventDefault(n);return this.tracingService?.wrapEventListener&&(a=this.tracingService.wrapEventListener(t,e,a)),this.eventManager.addEventListener(t,e,a,r)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function fg(i){return i.tagName==="TEMPLATE"&&i.content!==void 0}var Mm=class extends fl{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,n,r,a,u,p,g,v){super(t,a,u,g,v),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let y=r.styles;y=hg(r.id,y);for(let E of y){let A=document.createElement("style");p&&A.setAttribute("nonce",p),A.textContent=E,this.shadowRoot.appendChild(A)}let M=r.getExternalStyles?.();if(M)for(let E of M){let A=Am(E,a);p&&A.setAttribute("nonce",p),this.shadowRoot.appendChild(A)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},pl=class extends fl{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,n,r,a,u,p,g,v){super(t,a,u,p,g),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r;let y=n.styles;this.styles=v?hg(v,y):y,this.styleUrls=n.getExternalStyles?.(v)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},tu=class extends pl{contentAttr;hostAttr;constructor(t,e,n,r,a,u,p,g,v){let y=r+"-"+n.id;super(t,e,n,a,u,p,g,v,y),this.contentAttr=d4(y),this.hostAttr=m4(y)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}};var nu=class i extends al{supportsDOMEvents=!0;static makeCurrent(){mm(new i)}onAndCancel(t,e,n,r){return t.addEventListener(e,n,r),()=>{t.removeEventListener(e,n,r)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=f4();return e==null?null:p4(e)}resetBaseElement(){gl=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return dl(document.cookie,t)}},gl=null;function f4(){return gl=gl||document.head.querySelector("base"),gl?gl.getAttribute("href"):null}function p4(i){return new URL(i,document.baseURI).pathname}var h4=(()=>{class i{build(){return new XMLHttpRequest}static \u0275fac=function(n){return new(n||i)};static \u0275prov=Pe({token:i,factory:i.\u0275fac})}return i})(),_g=(()=>{class i extends ml{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,r,a){return e.addEventListener(n,r,a),()=>this.removeEventListener(e,n,r,a)}removeEventListener(e,n,r,a){return e.removeEventListener(n,r,a)}static \u0275fac=function(n){return new(n||i)(Ue(Bi))};static \u0275prov=Pe({token:i,factory:i.\u0275fac})}return i})(),gg=["alt","control","meta","shift"],g4={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_4={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey},vg=(()=>{class i extends ml{constructor(e){super(e)}supports(e){return i.parseEventName(e)!=null}addEventListener(e,n,r,a){let u=i.parseEventName(n),p=i.eventCallback(u.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>lr().onAndCancel(e,u.domEventName,p,a))}static parseEventName(e){let n=e.toLowerCase().split("."),r=n.shift();if(n.length===0||!(r==="keydown"||r==="keyup"))return null;let a=i._normalizeKey(n.pop()),u="",p=n.indexOf("code");if(p>-1&&(n.splice(p,1),u="code."),gg.forEach(v=>{let y=n.indexOf(v);y>-1&&(n.splice(y,1),u+=v+".")}),u+=a,n.length!=0||a.length===0)return null;let g={};return g.domEventName=r,g.fullKey=u,g}static matchEventFullKeyCode(e,n){let r=g4[e.key]||e.key,a="";return n.indexOf("code.")>-1&&(r=e.code,a="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),gg.forEach(u=>{if(u!==r){let p=_4[u];p(e)&&(a+=u+".")}}),a+=r,a===n)}static eventCallback(e,n,r){return a=>{i.matchEventFullKeyCode(a,e)&&r.runGuarded(()=>n(a))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(n){return new(n||i)(Ue(Bi))};static \u0275prov=Pe({token:i,factory:i.\u0275fac})}return i})();function Dm(i,t,e){return Rh(ve({rootComponent:i,platformRef:e?.platformRef},v4(t)))}function v4(i){return{appProviders:[...w4,...i?.providers??[]],platformProviders:C4}}function x4(){nu.makeCurrent()}function y4(){return new nm}function b4(){return ph(document),document}var C4=[{provide:il,useValue:Tm},{provide:hh,useValue:x4,multi:!0},{provide:Bi,useFactory:b4}];var w4=[{provide:dh,useValue:"root"},{provide:nm,useFactory:y4},{provide:iu,useClass:_g,multi:!0,deps:[Bi]},{provide:iu,useClass:vg,multi:!0,deps:[Bi]},hl,km,Fm,{provide:B0,useExisting:hl},{provide:Ka,useClass:h4},[]];var Wo=class{},_l=class{},wa=class i{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let n=e.indexOf(":");if(n>0){let r=e.slice(0,n),a=e.slice(n+1).trim();this.addHeaderEntry(r,a)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,n)=>{this.addHeaderEntry(n,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,n])=>{this.setHeaderEntries(e,n)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof i?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new i;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof i?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if(typeof n=="string"&&(n=[n]),n.length===0)return;this.maybeSetNormalizedName(t.name,e);let r=(t.op==="a"?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":let a=t.value;if(!a)this.headers.delete(e),this.normalizedNames.delete(e);else{let u=this.headers.get(e);if(!u)return;u=u.filter(p=>a.indexOf(p)===-1),u.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,u)}break}}addHeaderEntry(t,e){let n=t.toLowerCase();this.maybeSetNormalizedName(t,n),this.headers.has(n)?this.headers.get(n).push(e):this.headers.set(n,[e])}setHeaderEntries(t,e){let n=(Array.isArray(e)?e:[e]).map(a=>a.toString()),r=t.toLowerCase();this.headers.set(r,n),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var au=class{encodeKey(t){return xg(t)}encodeValue(t){return xg(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function S4(i,t){let e=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{let a=r.indexOf("="),[u,p]=a==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,a)),t.decodeValue(r.slice(a+1))],g=e.get(u)||[];g.push(p),e.set(u,g)}),e}var T4=/%(\d[a-f0-9])/gi,E4={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function xg(i){return encodeURIComponent(i).replace(T4,(t,e)=>E4[e]??t)}function ru(i){return`${i}`}var Ki=class i{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new au,t.fromString){if(t.fromObject)throw new Mt(2805,!1);this.map=S4(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let n=t.fromObject[e],r=Array.isArray(n)?n.map(ru):[ru(n)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(n=>{let r=t[n];Array.isArray(r)?r.forEach(a=>{e.push({param:n,value:a,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(n=>e+"="+this.encoder.encodeValue(n)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new i({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(ru(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let n=this.map.get(t.param)||[],r=n.indexOf(ru(t.value));r!==-1&&n.splice(r,1),n.length>0?this.map.set(t.param,n):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var ou=class{map=new Map;set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function A4(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function yg(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function bg(i){return typeof Blob<"u"&&i instanceof Blob}function Cg(i){return typeof FormData<"u"&&i instanceof FormData}function M4(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}var wg="Content-Type",Sg="Accept",Tg="X-Request-URL",Eg="text/plain",Ag="application/json",F4=`${Ag}, ${Eg}, */*`,Uo=class i{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(t,e,n,r){this.url=e,this.method=t.toUpperCase();let a;if(A4(this.method)||r?(this.body=n!==void 0?n:null,a=r):a=n,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params),this.transferCache=a.transferCache),this.headers??=new wa,this.context??=new ou,!this.params)this.params=new Ki,this.urlWithParams=e;else{let u=this.params.toString();if(u.length===0)this.urlWithParams=e;else{let p=e.indexOf("?"),g=p===-1?"?":p<e.length-1?"&":"";this.urlWithParams=e+g+u}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||yg(this.body)||bg(this.body)||Cg(this.body)||M4(this.body)?this.body:this.body instanceof Ki?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Cg(this.body)?null:bg(this.body)?this.body.type||null:yg(this.body)?null:typeof this.body=="string"?Eg:this.body instanceof Ki?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?Ag:null}clone(t={}){let e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,a=t.transferCache??this.transferCache,u=t.body!==void 0?t.body:this.body,p=t.withCredentials??this.withCredentials,g=t.reportProgress??this.reportProgress,v=t.headers||this.headers,y=t.params||this.params,M=t.context??this.context;return t.setHeaders!==void 0&&(v=Object.keys(t.setHeaders).reduce((E,A)=>E.set(A,t.setHeaders[A]),v)),t.setParams&&(y=Object.keys(t.setParams).reduce((E,A)=>E.set(A,t.setParams[A]),y)),new i(e,n,u,{params:y,headers:v,context:M,reportProgress:g,responseType:r,withCredentials:p,transferCache:a})}},Ja=function(i){return i[i.Sent=0]="Sent",i[i.UploadProgress=1]="UploadProgress",i[i.ResponseHeader=2]="ResponseHeader",i[i.DownloadProgress=3]="DownloadProgress",i[i.Response=4]="Response",i[i.User=5]="User",i}(Ja||{}),jo=class{headers;status;statusText;url;ok;type;constructor(t,e=200,n="OK"){this.headers=t.headers||new wa,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},su=class i extends jo{constructor(t={}){super(t)}type=Ja.ResponseHeader;clone(t={}){return new i({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Qa=class i extends jo{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=Ja.Response;clone(t={}){return new i({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},vl=class extends jo{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},k4=200,P4=204;function Im(i,t){return{body:t,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials,transferCache:i.transferCache}}var It=(()=>{class i{handler;constructor(e){this.handler=e}request(e,n,r={}){let a;if(e instanceof Uo)a=e;else{let g;r.headers instanceof wa?g=r.headers:g=new wa(r.headers);let v;r.params&&(r.params instanceof Ki?v=r.params:v=new Ki({fromObject:r.params})),a=new Uo(e,n,r.body!==void 0?r.body:null,{headers:g,context:r.context,params:v,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let u=ut(a).pipe(_a(g=>this.handler.handle(g)));if(e instanceof Uo||r.observe==="events")return u;let p=u.pipe(Wn(g=>g instanceof Qa));switch(r.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return p.pipe(Be(g=>{if(g.body!==null&&!(g.body instanceof ArrayBuffer))throw new Mt(2806,!1);return g.body}));case"blob":return p.pipe(Be(g=>{if(g.body!==null&&!(g.body instanceof Blob))throw new Mt(2807,!1);return g.body}));case"text":return p.pipe(Be(g=>{if(g.body!==null&&typeof g.body!="string")throw new Mt(2808,!1);return g.body}));case"json":default:return p.pipe(Be(g=>g.body))}case"response":return p;default:throw new Mt(2809,!1)}}delete(e,n={}){return this.request("DELETE",e,n)}get(e,n={}){return this.request("GET",e,n)}head(e,n={}){return this.request("HEAD",e,n)}jsonp(e,n){return this.request("JSONP",e,{params:new Ki().append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,n={}){return this.request("OPTIONS",e,n)}patch(e,n,r={}){return this.request("PATCH",e,Im(r,n))}post(e,n,r={}){return this.request("POST",e,Im(r,n))}put(e,n,r={}){return this.request("PUT",e,Im(r,n))}static \u0275fac=function(n){return new(n||i)(Ue(Wo))};static \u0275prov=Pe({token:i,factory:i.\u0275fac})}return i})();var D4=new Tt("");function I4(i,t){return t(i)}function O4(i,t,e){return(n,r)=>_r(e,()=>t(n,a=>i(a,r)))}var Lm=new Tt(""),Mg=new Tt(""),Fg=new Tt("",{providedIn:"root",factory:()=>!0});var lu=(()=>{class i extends Wo{backend;injector;chain=null;pendingTasks=Ne(V0);contributeToStability=Ne(Fg);constructor(e,n){super(),this.backend=e,this.injector=n}handle(e){if(this.chain===null){let n=Array.from(new Set([...this.injector.get(Lm),...this.injector.get(Mg,[])]));this.chain=n.reduceRight((r,a)=>O4(r,a,this.injector),I4)}if(this.contributeToStability){let n=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(Do(()=>this.pendingTasks.remove(n)))}else return this.chain(e,n=>this.backend.handle(n))}static \u0275fac=function(n){return new(n||i)(Ue(_l),Ue($a))};static \u0275prov=Pe({token:i,factory:i.\u0275fac})}return i})();var L4=/^\)\]\}',?\n/,R4=RegExp(`^${Tg}:`,"m");function N4(i){return"responseURL"in i&&i.responseURL?i.responseURL:R4.test(i.getAllResponseHeaders())?i.getResponseHeader(Tg):null}var Om=(()=>{class i{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new Mt(-2800,!1);let n=this.xhrFactory;return(n.\u0275loadImpl?an(n.\u0275loadImpl()):ut(null)).pipe(ar(()=>new N0(a=>{let u=n.build();if(u.open(e.method,e.urlWithParams),e.withCredentials&&(u.withCredentials=!0),e.headers.forEach((F,D)=>u.setRequestHeader(F,D.join(","))),e.headers.has(Sg)||u.setRequestHeader(Sg,F4),!e.headers.has(wg)){let F=e.detectContentTypeHeader();F!==null&&u.setRequestHeader(wg,F)}if(e.responseType){let F=e.responseType.toLowerCase();u.responseType=F!=="json"?F:"text"}let p=e.serializeBody(),g=null,v=()=>{if(g!==null)return g;let F=u.statusText||"OK",D=new wa(u.getAllResponseHeaders()),ee=N4(u)||e.url;return g=new su({headers:D,status:u.status,statusText:F,url:ee}),g},y=()=>{let{headers:F,status:D,statusText:ee,url:ie}=v(),te=null;D!==P4&&(te=typeof u.response>"u"?u.responseText:u.response),D===0&&(D=te?k4:0);let pe=D>=200&&D<300;if(e.responseType==="json"&&typeof te=="string"){let Ce=te;te=te.replace(L4,"");try{te=te!==""?JSON.parse(te):null}catch(ze){te=Ce,pe&&(pe=!1,te={error:ze,text:te})}}pe?(a.next(new Qa({body:te,headers:F,status:D,statusText:ee,url:ie||void 0})),a.complete()):a.error(new vl({error:te,headers:F,status:D,statusText:ee,url:ie||void 0}))},M=F=>{let{url:D}=v(),ee=new vl({error:F,status:u.status||0,statusText:u.statusText||"Unknown Error",url:D||void 0});a.error(ee)},E=!1,A=F=>{E||(a.next(v()),E=!0);let D={type:Ja.DownloadProgress,loaded:F.loaded};F.lengthComputable&&(D.total=F.total),e.responseType==="text"&&u.responseText&&(D.partialText=u.responseText),a.next(D)},O=F=>{let D={type:Ja.UploadProgress,loaded:F.loaded};F.lengthComputable&&(D.total=F.total),a.next(D)};return u.addEventListener("load",y),u.addEventListener("error",M),u.addEventListener("timeout",M),u.addEventListener("abort",M),e.reportProgress&&(u.addEventListener("progress",A),p!==null&&u.upload&&u.upload.addEventListener("progress",O)),u.send(p),a.next({type:Ja.Sent}),()=>{u.removeEventListener("error",M),u.removeEventListener("abort",M),u.removeEventListener("load",y),u.removeEventListener("timeout",M),e.reportProgress&&(u.removeEventListener("progress",A),p!==null&&u.upload&&u.upload.removeEventListener("progress",O)),u.readyState!==u.DONE&&u.abort()}})))}static \u0275fac=function(n){return new(n||i)(Ue(Ka))};static \u0275prov=Pe({token:i,factory:i.\u0275fac})}return i})(),kg=new Tt(""),V4="XSRF-TOKEN",B4=new Tt("",{providedIn:"root",factory:()=>V4}),U4="X-XSRF-TOKEN",W4=new Tt("",{providedIn:"root",factory:()=>U4}),xl=class{},j4=(()=>{class i{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,n){this.doc=e,this.cookieName=n}getToken(){let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=dl(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(n){return new(n||i)(Ue(Bi),Ue(B4))};static \u0275prov=Pe({token:i,factory:i.\u0275fac})}return i})();function H4(i,t){let e=i.url.toLowerCase();if(!Ne(kg)||i.method==="GET"||i.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(i);let n=Ne(xl).getToken(),r=Ne(W4);return n!=null&&!i.headers.has(r)&&(i=i.clone({headers:i.headers.set(r,n)})),t(i)}var Rm=function(i){return i[i.Interceptors=0]="Interceptors",i[i.LegacyInterceptors=1]="LegacyInterceptors",i[i.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",i[i.NoXsrfProtection=3]="NoXsrfProtection",i[i.JsonpSupport=4]="JsonpSupport",i[i.RequestsMadeViaParent=5]="RequestsMadeViaParent",i[i.Fetch=6]="Fetch",i}(Rm||{});function z4(i,t){return{\u0275kind:i,\u0275providers:t}}function Nm(...i){let t=[It,Om,lu,{provide:Wo,useExisting:lu},{provide:_l,useFactory:()=>Ne(D4,{optional:!0})??Ne(Om)},{provide:Lm,useValue:H4,multi:!0},{provide:kg,useValue:!0},{provide:xl,useClass:j4}];for(let e of i)t.push(...e.\u0275providers);return Oo(t)}function Vm(i){return z4(Rm.Interceptors,i.map(t=>({provide:Lm,useValue:t,multi:!0})))}var Pg=(()=>{class i{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(n){return new(n||i)(Ue(Bi))};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var _t="primary",Il=Symbol("RouteTitle"),Hm=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function io(i){return new Hm(i)}function Bg(i,t,e){let n=e.path.split("/");if(n.length>i.length||e.pathMatch==="full"&&(t.hasChildren()||n.length<i.length))return null;let r={};for(let a=0;a<n.length;a++){let u=n[a],p=i[a];if(u[0]===":")r[u.substring(1)]=p;else if(u!==p.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function $4(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(!Vr(i[e],t[e]))return!1;return!0}function Vr(i,t){let e=i?zm(i):void 0,n=t?zm(t):void 0;if(!e||!n||e.length!=n.length)return!1;let r;for(let a=0;a<e.length;a++)if(r=e[a],!Ug(i[r],t[r]))return!1;return!0}function zm(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}function Ug(i,t){if(Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return!1;let e=[...i].sort(),n=[...t].sort();return e.every((r,a)=>n[a]===r)}else return i===t}function Wg(i){return i.length>0?i[i.length-1]:null}function Ea(i){return th(i)?i:Ro(i)?an(Promise.resolve(i)):ut(i)}var Z4={exact:Hg,subset:zg},jg={exact:q4,subset:Y4,ignored:()=>!0};function Dg(i,t,e){return Z4[e.paths](i.root,t.root,e.matrixParams)&&jg[e.queryParams](i.queryParams,t.queryParams)&&!(e.fragment==="exact"&&i.fragment!==t.fragment)}function q4(i,t){return Vr(i,t)}function Hg(i,t,e){if(!eo(i.segments,t.segments)||!du(i.segments,t.segments,e)||i.numberOfChildren!==t.numberOfChildren)return!1;for(let n in t.children)if(!i.children[n]||!Hg(i.children[n],t.children[n],e))return!1;return!0}function Y4(i,t){return Object.keys(t).length<=Object.keys(i).length&&Object.keys(t).every(e=>Ug(i[e],t[e]))}function zg(i,t,e){return Gg(i,t,t.segments,e)}function Gg(i,t,e,n){if(i.segments.length>e.length){let r=i.segments.slice(0,e.length);return!(!eo(r,e)||t.hasChildren()||!du(r,e,n))}else if(i.segments.length===e.length){if(!eo(i.segments,e)||!du(i.segments,e,n))return!1;for(let r in t.children)if(!i.children[r]||!zg(i.children[r],t.children[r],n))return!1;return!0}else{let r=e.slice(0,i.segments.length),a=e.slice(i.segments.length);return!eo(i.segments,r)||!du(i.segments,r,n)||!i.children[_t]?!1:Gg(i.children[_t],t,a,n)}}function du(i,t,e){return t.every((n,r)=>jg[e](i[r].parameters,n.parameters))}var Ur=class{root;queryParams;fragment;_queryParamMap;constructor(t=new Gt([],{}),e={},n=null){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap??=io(this.queryParams),this._queryParamMap}toString(){return J4.serialize(this)}},Gt=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return mu(this)}},Sa=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=io(this.parameters),this._parameterMap}toString(){return Zg(this)}};function X4(i,t){return eo(i,t)&&i.every((e,n)=>Vr(e.parameters,t[n].parameters))}function eo(i,t){return i.length!==t.length?!1:i.every((e,n)=>e.path===t[n].path)}function K4(i,t){let e=[];return Object.entries(i.children).forEach(([n,r])=>{n===_t&&(e=e.concat(t(r,n)))}),Object.entries(i.children).forEach(([n,r])=>{n!==_t&&(e=e.concat(t(r,n)))}),e}var Ol=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275prov=Pe({token:i,factory:()=>new no,providedIn:"root"})}return i})(),no=class{parse(t){let e=new $m(t);return new Ur(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${yl(t.root,!0)}`,n=tx(t.queryParams),r=typeof t.fragment=="string"?`#${Q4(t.fragment)}`:"";return`${e}${n}${r}`}},J4=new no;function mu(i){return i.segments.map(t=>Zg(t)).join("/")}function yl(i,t){if(!i.hasChildren())return mu(i);if(t){let e=i.children[_t]?yl(i.children[_t],!1):"",n=[];return Object.entries(i.children).forEach(([r,a])=>{r!==_t&&n.push(`${r}:${yl(a,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}else{let e=K4(i,(n,r)=>r===_t?[yl(i.children[_t],!1)]:[`${r}:${yl(n,!1)}`]);return Object.keys(i.children).length===1&&i.children[_t]!=null?`${mu(i)}/${e[0]}`:`${mu(i)}/(${e.join("//")})`}}function $g(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function uu(i){return $g(i).replace(/%3B/gi,";")}function Q4(i){return encodeURI(i)}function Gm(i){return $g(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fu(i){return decodeURIComponent(i)}function Ig(i){return fu(i.replace(/\+/g,"%20"))}function Zg(i){return`${Gm(i.path)}${ex(i.parameters)}`}function ex(i){return Object.entries(i).map(([t,e])=>`;${Gm(t)}=${Gm(e)}`).join("")}function tx(i){let t=Object.entries(i).map(([e,n])=>Array.isArray(n)?n.map(r=>`${uu(e)}=${uu(r)}`).join("&"):`${uu(e)}=${uu(n)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var ix=/^[^\/()?;#]+/;function Bm(i){let t=i.match(ix);return t?t[0]:""}var nx=/^[^\/()?;=#]+/;function rx(i){let t=i.match(nx);return t?t[0]:""}var ax=/^[^=?&#]+/;function ox(i){let t=i.match(ax);return t?t[0]:""}var sx=/^[^&#]+/;function lx(i){let t=i.match(sx);return t?t[0]:""}var $m=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Gt([],{}):new Gt([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[_t]=new Gt(t,e)),n}parseSegment(){let t=Bm(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new Mt(4009,!1);return this.capture(t),new Sa(fu(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=rx(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){let r=Bm(this.remaining);r&&(n=r,this.capture(n))}t[fu(e)]=fu(n)}parseQueryParam(t){let e=ox(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){let u=lx(this.remaining);u&&(n=u,this.capture(n))}let r=Ig(e),a=Ig(n);if(t.hasOwnProperty(r)){let u=t[r];Array.isArray(u)||(u=[u],t[r]=u),u.push(a)}else t[r]=a}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=Bm(this.remaining),r=this.remaining[n.length];if(r!=="/"&&r!==")"&&r!==";")throw new Mt(4010,!1);let a;n.indexOf(":")>-1?(a=n.slice(0,n.indexOf(":")),this.capture(a),this.capture(":")):t&&(a=_t);let u=this.parseChildren();e[a]=Object.keys(u).length===1?u[_t]:new Gt([],u),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new Mt(4011,!1)}};function qg(i){return i.segments.length>0?new Gt([],{[_t]:i}):i}function Yg(i){let t={};for(let[n,r]of Object.entries(i.children)){let a=Yg(r);if(n===_t&&a.segments.length===0&&a.hasChildren())for(let[u,p]of Object.entries(a.children))t[u]=p;else(a.segments.length>0||a.hasChildren())&&(t[n]=a)}let e=new Gt(i.segments,t);return ux(e)}function ux(i){if(i.numberOfChildren===1&&i.children[_t]){let t=i.children[_t];return new Gt(i.segments.concat(t.segments),t.children)}return i}function Ta(i){return i instanceof Ur}function Xg(i,t,e=null,n=null){let r=Kg(i);return Jg(r,t,e,n)}function Kg(i){let t;function e(a){let u={};for(let g of a.children){let v=e(g);u[g.outlet]=v}let p=new Gt(a.url,u);return a===i&&(t=p),p}let n=e(i.root),r=qg(n);return t??r}function Jg(i,t,e,n){let r=i;for(;r.parent;)r=r.parent;if(t.length===0)return Um(r,r,r,e,n);let a=cx(t);if(a.toRoot())return Um(r,r,new Gt([],{}),e,n);let u=dx(a,r,i),p=u.processChildren?Cl(u.segmentGroup,u.index,a.commands):e1(u.segmentGroup,u.index,a.commands);return Um(r,u.segmentGroup,p,e,n)}function hu(i){return typeof i=="object"&&i!=null&&!i.outlets&&!i.segmentPath}function Sl(i){return typeof i=="object"&&i!=null&&i.outlets}function Um(i,t,e,n,r){let a={};n&&Object.entries(n).forEach(([g,v])=>{a[g]=Array.isArray(v)?v.map(y=>`${y}`):`${v}`});let u;i===t?u=e:u=Qg(i,t,e);let p=qg(Yg(u));return new Ur(p,a,r)}function Qg(i,t,e){let n={};return Object.entries(i.children).forEach(([r,a])=>{a===t?n[r]=e:n[r]=Qg(a,t,e)}),new Gt(i.segments,n)}var gu=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&hu(n[0]))throw new Mt(4003,!1);let r=n.find(Sl);if(r&&r!==Wg(n))throw new Mt(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function cx(i){if(typeof i[0]=="string"&&i.length===1&&i[0]==="/")return new gu(!0,0,i);let t=0,e=!1,n=i.reduce((r,a,u)=>{if(typeof a=="object"&&a!=null){if(a.outlets){let p={};return Object.entries(a.outlets).forEach(([g,v])=>{p[g]=typeof v=="string"?v.split("/"):v}),[...r,{outlets:p}]}if(a.segmentPath)return[...r,a.segmentPath]}return typeof a!="string"?[...r,a]:u===0?(a.split("/").forEach((p,g)=>{g==0&&p==="."||(g==0&&p===""?e=!0:p===".."?t++:p!=""&&r.push(p))}),r):[...r,a]},[]);return new gu(e,t,n)}var Go=class{segmentGroup;processChildren;index;constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}};function dx(i,t,e){if(i.isAbsolute)return new Go(t,!0,0);if(!e)return new Go(t,!1,NaN);if(e.parent===null)return new Go(e,!0,0);let n=hu(i.commands[0])?0:1,r=e.segments.length-1+n;return mx(e,r,i.numberOfDoubleDots)}function mx(i,t,e){let n=i,r=t,a=e;for(;a>r;){if(a-=r,n=n.parent,!n)throw new Mt(4005,!1);r=n.segments.length}return new Go(n,!1,r-a)}function fx(i){return Sl(i[0])?i[0].outlets:{[_t]:i}}function e1(i,t,e){if(i??=new Gt([],{}),i.segments.length===0&&i.hasChildren())return Cl(i,t,e);let n=px(i,t,e),r=e.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){let a=new Gt(i.segments.slice(0,n.pathIndex),{});return a.children[_t]=new Gt(i.segments.slice(n.pathIndex),i.children),Cl(a,0,r)}else return n.match&&r.length===0?new Gt(i.segments,{}):n.match&&!i.hasChildren()?Zm(i,t,e):n.match?Cl(i,0,r):Zm(i,t,e)}function Cl(i,t,e){if(e.length===0)return new Gt(i.segments,{});{let n=fx(e),r={};if(Object.keys(n).some(a=>a!==_t)&&i.children[_t]&&i.numberOfChildren===1&&i.children[_t].segments.length===0){let a=Cl(i.children[_t],t,e);return new Gt(i.segments,a.children)}return Object.entries(n).forEach(([a,u])=>{typeof u=="string"&&(u=[u]),u!==null&&(r[a]=e1(i.children[a],t,u))}),Object.entries(i.children).forEach(([a,u])=>{n[a]===void 0&&(r[a]=u)}),new Gt(i.segments,r)}}function px(i,t,e){let n=0,r=t,a={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=e.length)return a;let u=i.segments[r],p=e[n];if(Sl(p))break;let g=`${p}`,v=n<e.length-1?e[n+1]:null;if(r>0&&g===void 0)break;if(g&&v&&typeof v=="object"&&v.outlets===void 0){if(!Lg(g,v,u))return a;n+=2}else{if(!Lg(g,{},u))return a;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}function Zm(i,t,e){let n=i.segments.slice(0,t),r=0;for(;r<e.length;){let a=e[r];if(Sl(a)){let g=hx(a.outlets);return new Gt(n,g)}if(r===0&&hu(e[0])){let g=i.segments[t];n.push(new Sa(g.path,Og(e[0]))),r++;continue}let u=Sl(a)?a.outlets[_t]:`${a}`,p=r<e.length-1?e[r+1]:null;u&&p&&hu(p)?(n.push(new Sa(u,Og(p))),r+=2):(n.push(new Sa(u,{})),r++)}return new Gt(n,{})}function hx(i){let t={};return Object.entries(i).forEach(([e,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(t[e]=Zm(new Gt([],{}),0,n))}),t}function Og(i){let t={};return Object.entries(i).forEach(([e,n])=>t[e]=`${n}`),t}function Lg(i,t,e){return i==e.path&&Vr(t,e.parameters)}var pu="imperative",Ji=function(i){return i[i.NavigationStart=0]="NavigationStart",i[i.NavigationEnd=1]="NavigationEnd",i[i.NavigationCancel=2]="NavigationCancel",i[i.NavigationError=3]="NavigationError",i[i.RoutesRecognized=4]="RoutesRecognized",i[i.ResolveStart=5]="ResolveStart",i[i.ResolveEnd=6]="ResolveEnd",i[i.GuardsCheckStart=7]="GuardsCheckStart",i[i.GuardsCheckEnd=8]="GuardsCheckEnd",i[i.RouteConfigLoadStart=9]="RouteConfigLoadStart",i[i.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",i[i.ChildActivationStart=11]="ChildActivationStart",i[i.ChildActivationEnd=12]="ChildActivationEnd",i[i.ActivationStart=13]="ActivationStart",i[i.ActivationEnd=14]="ActivationEnd",i[i.Scroll=15]="Scroll",i[i.NavigationSkipped=16]="NavigationSkipped",i}(Ji||{}),Zn=class{id;url;constructor(t,e){this.id=t,this.url=e}},ro=class extends Zn{type=Ji.NavigationStart;navigationTrigger;restoredState;constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},qn=class extends Zn{urlAfterRedirects;type=Ji.NavigationEnd;constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},On=function(i){return i[i.Redirect=0]="Redirect",i[i.SupersededByNewNavigation=1]="SupersededByNewNavigation",i[i.NoDataFromResolver=2]="NoDataFromResolver",i[i.GuardRejected=3]="GuardRejected",i}(On||{}),Tl=function(i){return i[i.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",i[i.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",i}(Tl||{}),Br=class extends Zn{reason;code;type=Ji.NavigationCancel;constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ra=class extends Zn{reason;code;type=Ji.NavigationSkipped;constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r}},Zo=class extends Zn{error;target;type=Ji.NavigationError;constructor(t,e,n,r){super(t,e),this.error=n,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},El=class extends Zn{urlAfterRedirects;state;type=Ji.RoutesRecognized;constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_u=class extends Zn{urlAfterRedirects;state;type=Ji.GuardsCheckStart;constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vu=class extends Zn{urlAfterRedirects;state;shouldActivate;type=Ji.GuardsCheckEnd;constructor(t,e,n,r,a){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},xu=class extends Zn{urlAfterRedirects;state;type=Ji.ResolveStart;constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yu=class extends Zn{urlAfterRedirects;state;type=Ji.ResolveEnd;constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bu=class{route;type=Ji.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Cu=class{route;type=Ji.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},wu=class{snapshot;type=Ji.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Su=class{snapshot;type=Ji.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tu=class{snapshot;type=Ji.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Eu=class{snapshot;type=Ji.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Al=class{},qo=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function gx(i,t){return i.providers&&!i._injector&&(i._injector=um(i.providers,t,`Route: ${i.path}`)),i._injector??t}function Cr(i){return i.outlet||_t}function _x(i,t){let e=i.filter(n=>Cr(n)===t);return e.push(...i.filter(n=>Cr(n)!==t)),e}function Ll(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let t=i.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Au=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ll(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Ko(this.rootInjector)}},Ko=(()=>{class i{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,n){let r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){let n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new Au(this.rootInjector),this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(n){return new(n||i)(Ue($a))};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Mu=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=qm(t,this._root);return e?e.children.map(n=>n.value):[]}firstChild(t){let e=qm(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Ym(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return Ym(t,this._root).map(e=>e.value)}};function qm(i,t){if(i===t.value)return t;for(let e of t.children){let n=qm(i,e);if(n)return n}return null}function Ym(i,t){if(i===t.value)return[t];for(let e of t.children){let n=Ym(i,e);if(n.length)return n.unshift(t),n}return[]}var $n=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function zo(i){let t={};return i&&i.children.forEach(e=>t[e.value.outlet]=e),t}var Ml=class extends Mu{snapshot;constructor(t,e){super(t),this.snapshot=e,rf(this,t)}toString(){return this.snapshot.toString()}};function t1(i){let t=vx(i),e=new Gi([new Sa("",{})]),n=new Gi({}),r=new Gi({}),a=new Gi({}),u=new Gi(""),p=new Ai(e,n,a,u,r,_t,i,t.root);return p.snapshot=t.root,new Ml(new $n(p,[]),t)}function vx(i){let t={},e={},n={},r="",a=new to([],t,n,r,e,_t,i,null,{});return new Fl("",new $n(a,[]))}var Ai=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,n,r,a,u,p,g){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=n,this.fragmentSubject=r,this.dataSubject=a,this.outlet=u,this.component=p,this._futureSnapshot=g,this.title=this.dataSubject?.pipe(Be(v=>v[Il]))??ut(void 0),this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Be(t=>io(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Be(t=>io(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Fu(i,t,e="emptyOnly"){let n,{routeConfig:r}=i;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?n={params:ve(ve({},t.params),i.params),data:ve(ve({},t.data),i.data),resolve:ve(ve(ve(ve({},i.data),t.data),r?.data),i._resolvedData)}:n={params:ve({},i.params),data:ve({},i.data),resolve:ve(ve({},i.data),i._resolvedData??{})},r&&n1(r)&&(n.resolve[Il]=r.title),n}var to=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Il]}constructor(t,e,n,r,a,u,p,g,v){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=a,this.outlet=u,this.component=p,this.routeConfig=g,this._resolve=v}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=io(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=io(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(n=>n.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Fl=class extends Mu{url;constructor(t,e){super(e),this.url=t,rf(this,e)}toString(){return i1(this._root)}};function rf(i,t){t.value._routerState=i,t.children.forEach(e=>rf(i,e))}function i1(i){let t=i.children.length>0?` { ${i.children.map(i1).join(", ")} } `:"";return`${i.value}${t}`}function Wm(i){if(i.snapshot){let t=i.snapshot,e=i._futureSnapshot;i.snapshot=e,Vr(t.queryParams,e.queryParams)||i.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&i.fragmentSubject.next(e.fragment),Vr(t.params,e.params)||i.paramsSubject.next(e.params),$4(t.url,e.url)||i.urlSubject.next(e.url),Vr(t.data,e.data)||i.dataSubject.next(e.data)}else i.snapshot=i._futureSnapshot,i.dataSubject.next(i._futureSnapshot.data)}function Xm(i,t){let e=Vr(i.params,t.params)&&X4(i.url,t.url),n=!i.parent!=!t.parent;return e&&!n&&(!i.parent||Xm(i.parent,t.parent))}function n1(i){return typeof i.title=="string"||i.title===null}var r1=new Tt(""),Rl=(()=>{class i{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=_t;activateEvents=new di;deactivateEvents=new di;attachEvents=new di;detachEvents=new di;routerOutletData=xa(void 0);parentContexts=Ne(Ko);location=Ne(rl);changeDetector=Ne(ba);inputBinder=Ne(Iu,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:n,previousValue:r}=e.name;if(n)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Mt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Mt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Mt(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new Mt(4013,!1);this._activatedRoute=e;let r=this.location,u=e.snapshot.component,p=this.parentContexts.getOrCreateContext(this.name).children,g=new Km(e,p,r.injector,this.routerOutletData);this.activated=r.createComponent(u,{index:r.length,injector:g,environmentInjector:n}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(n){return new(n||i)};static \u0275dir=zt({type:i,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[vr]})}return i})(),Km=class{route;childContexts;parent;outletData;constructor(t,e,n,r){this.route=t,this.childContexts=e,this.parent=n,this.outletData=r}get(t,e){return t===Ai?this.route:t===Ko?this.childContexts:t===r1?this.outletData:this.parent.get(t,e)}},Iu=new Tt("");var af=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275cmp=Oe({type:i,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(n,r){n&1&&x(0,"router-outlet")},dependencies:[Rl],encapsulation:2})}return i})();function of(i){let t=i.children&&i.children.map(of),e=t?Qe(ve({},i),{children:t}):ve({},i);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==_t&&(e.component=af),e}function xx(i,t,e){let n=kl(i,t._root,e?e._root:void 0);return new Ml(n,t)}function kl(i,t,e){if(e&&i.shouldReuseRoute(t.value,e.value.snapshot)){let n=e.value;n._futureSnapshot=t.value;let r=yx(i,t,e);return new $n(n,r)}else{if(i.shouldAttach(t.value)){let a=i.retrieve(t.value);if(a!==null){let u=a.route;return u.value._futureSnapshot=t.value,u.children=t.children.map(p=>kl(i,p)),u}}let n=bx(t.value),r=t.children.map(a=>kl(i,a));return new $n(n,r)}}function yx(i,t,e){return t.children.map(n=>{for(let r of e.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return kl(i,n,r);return kl(i,n)})}function bx(i){return new Ai(new Gi(i.url),new Gi(i.params),new Gi(i.queryParams),new Gi(i.fragment),new Gi(i.data),i.outlet,i.component,i)}var Yo=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},a1="ngNavigationCancelingError";function ku(i,t){let{redirectTo:e,navigationBehaviorOptions:n}=Ta(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=o1(!1,On.Redirect);return r.url=e,r.navigationBehaviorOptions=n,r}function o1(i,t){let e=new Error(`NavigationCancelingError: ${i||""}`);return e[a1]=!0,e.cancellationCode=t,e}function Cx(i){return s1(i)&&Ta(i.url)}function s1(i){return!!i&&i[a1]}var wx=(i,t,e,n)=>Be(r=>(new Jm(t,r.targetRouterState,r.currentRouterState,e,n).activate(i),r)),Jm=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,n,r,a){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r,this.inputBindingEnabled=a}activate(t){let e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Wm(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){let r=zo(e);t.children.forEach(a=>{let u=a.value.outlet;this.deactivateRoutes(a,r[u],n),delete r[u]}),Object.values(r).forEach(a=>{this.deactivateRouteAndItsChildren(a,n)})}deactivateRoutes(t,e,n){let r=t.value,a=e?e.value:null;if(r===a)if(r.component){let u=n.getContext(r.outlet);u&&this.deactivateChildRoutes(t,e,u.children)}else this.deactivateChildRoutes(t,e,n);else a&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,a=zo(t);for(let u of Object.values(a))this.deactivateRouteAndItsChildren(u,r);if(n&&n.outlet){let u=n.outlet.detach(),p=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:u,route:t,contexts:p})}}deactivateRouteAndOutlet(t,e){let n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,a=zo(t);for(let u of Object.values(a))this.deactivateRouteAndItsChildren(u,r);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(t,e,n){let r=zo(e);t.children.forEach(a=>{this.activateRoutes(a,r[a.value.outlet],n),this.forwardEvent(new Eu(a.value.snapshot))}),t.children.length&&this.forwardEvent(new Su(t.value.snapshot))}activateRoutes(t,e,n){let r=t.value,a=e?e.value:null;if(Wm(r),r===a)if(r.component){let u=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,u.children)}else this.activateChildRoutes(t,e,n);else if(r.component){let u=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let p=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),u.children.onOutletReAttached(p.contexts),u.attachRef=p.componentRef,u.route=p.route.value,u.outlet&&u.outlet.attach(p.componentRef,p.route.value),Wm(p.route.value),this.activateChildRoutes(t,null,u.children)}else u.attachRef=null,u.route=r,u.outlet&&u.outlet.activateWith(r,u.injector),this.activateChildRoutes(t,null,u.children)}else this.activateChildRoutes(t,null,n)}},Pu=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},$o=class{component;route;constructor(t,e){this.component=t,this.route=e}};function Sx(i,t,e){let n=i._root,r=t?t._root:null;return bl(n,r,e,[n.value])}function Tx(i){let t=i.routeConfig?i.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:i,guards:t}}function Jo(i,t){let e=Symbol(),n=t.get(i,e);return n===e?typeof i=="function"&&!ch(i)?i:t.get(i):n}function bl(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let a=zo(t);return i.children.forEach(u=>{Ex(u,a[u.value.outlet],e,n.concat([u.value]),r),delete a[u.value.outlet]}),Object.entries(a).forEach(([u,p])=>wl(p,e.getContext(u),r)),r}function Ex(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let a=i.value,u=t?t.value:null,p=e?e.getContext(i.value.outlet):null;if(u&&a.routeConfig===u.routeConfig){let g=Ax(u,a,a.routeConfig.runGuardsAndResolvers);g?r.canActivateChecks.push(new Pu(n)):(a.data=u.data,a._resolvedData=u._resolvedData),a.component?bl(i,t,p?p.children:null,n,r):bl(i,t,e,n,r),g&&p&&p.outlet&&p.outlet.isActivated&&r.canDeactivateChecks.push(new $o(p.outlet.component,u))}else u&&wl(t,p,r),r.canActivateChecks.push(new Pu(n)),a.component?bl(i,null,p?p.children:null,n,r):bl(i,null,e,n,r);return r}function Ax(i,t,e){if(typeof e=="function")return e(i,t);switch(e){case"pathParamsChange":return!eo(i.url,t.url);case"pathParamsOrQueryParamsChange":return!eo(i.url,t.url)||!Vr(i.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Xm(i,t)||!Vr(i.queryParams,t.queryParams);case"paramsChange":default:return!Xm(i,t)}}function wl(i,t,e){let n=zo(i),r=i.value;Object.entries(n).forEach(([a,u])=>{r.component?t?wl(u,t.children.getContext(a),e):wl(u,null,e):wl(u,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new $o(t.outlet.component,r)):e.canDeactivateChecks.push(new $o(null,r)):e.canDeactivateChecks.push(new $o(null,r))}function Nl(i){return typeof i=="function"}function Mx(i){return typeof i=="boolean"}function Fx(i){return i&&Nl(i.canLoad)}function kx(i){return i&&Nl(i.canActivate)}function Px(i){return i&&Nl(i.canActivateChild)}function Dx(i){return i&&Nl(i.canDeactivate)}function Ix(i){return i&&Nl(i.canMatch)}function l1(i){return i instanceof ih||i?.name==="EmptyError"}var cu=Symbol("INITIAL_VALUE");function Xo(){return ar(i=>qd(i.map(t=>t.pipe(Po(1),uh(cu)))).pipe(Be(t=>{for(let e of t)if(e!==!0){if(e===cu)return cu;if(e===!1||Ox(e))return e}return!0}),Wn(t=>t!==cu),Po(1)))}function Ox(i){return Ta(i)||i instanceof Yo}function Lx(i,t){return Un(e=>{let{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:a,canDeactivateChecks:u}}=e;return u.length===0&&a.length===0?ut(Qe(ve({},e),{guardsResult:!0})):Rx(u,n,r,i).pipe(Un(p=>p&&Mx(p)?Nx(n,a,i,t):ut(p)),Be(p=>Qe(ve({},e),{guardsResult:p})))})}function Rx(i,t,e,n){return an(i).pipe(Un(r=>jx(r.component,r.route,e,t,n)),va(r=>r!==!0,!0))}function Nx(i,t,e,n){return an(t).pipe(_a(r=>nh(Bx(r.route.parent,n),Vx(r.route,n),Wx(i,r.path,e),Ux(i,r.route,e))),va(r=>r!==!0,!0))}function Vx(i,t){return i!==null&&t&&t(new Tu(i)),ut(!0)}function Bx(i,t){return i!==null&&t&&t(new wu(i)),ut(!0)}function Ux(i,t,e){let n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||n.length===0)return ut(!0);let r=n.map(a=>Xd(()=>{let u=Ll(t)??e,p=Jo(a,u),g=kx(p)?p.canActivate(t,i):_r(u,()=>p(t,i));return Ea(g).pipe(va())}));return ut(r).pipe(Xo())}function Wx(i,t,e){let n=t[t.length-1],a=t.slice(0,t.length-1).reverse().map(u=>Tx(u)).filter(u=>u!==null).map(u=>Xd(()=>{let p=u.guards.map(g=>{let v=Ll(u.node)??e,y=Jo(g,v),M=Px(y)?y.canActivateChild(n,i):_r(v,()=>y(n,i));return Ea(M).pipe(va())});return ut(p).pipe(Xo())}));return ut(a).pipe(Xo())}function jx(i,t,e,n,r){let a=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!a||a.length===0)return ut(!0);let u=a.map(p=>{let g=Ll(t)??r,v=Jo(p,g),y=Dx(v)?v.canDeactivate(i,t,e,n):_r(g,()=>v(i,t,e,n));return Ea(y).pipe(va())});return ut(u).pipe(Xo())}function Hx(i,t,e,n){let r=t.canLoad;if(r===void 0||r.length===0)return ut(!0);let a=r.map(u=>{let p=Jo(u,i),g=Fx(p)?p.canLoad(t,e):_r(i,()=>p(t,e));return Ea(g)});return ut(a).pipe(Xo(),u1(n))}function u1(i){return eh(gi(t=>{if(typeof t!="boolean")throw ku(i,t)}),Be(t=>t===!0))}function zx(i,t,e,n){let r=t.canMatch;if(!r||r.length===0)return ut(!0);let a=r.map(u=>{let p=Jo(u,i),g=Ix(p)?p.canMatch(t,e):_r(i,()=>p(t,e));return Ea(g)});return ut(a).pipe(Xo(),u1(n))}var Pl=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},Dl=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function Ho(i){return pn(new Pl(i))}function Gx(i){return pn(new Mt(4e3,!1))}function $x(i){return pn(o1(!1,On.GuardRejected))}var Qm=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),r.numberOfChildren===0)return ut(n);if(r.numberOfChildren>1||!r.children[_t])return Gx(`${t.redirectTo}`);r=r.children[_t]}}applyRedirectCommands(t,e,n,r,a){if(typeof e!="string"){let p=e,{queryParams:g,fragment:v,routeConfig:y,url:M,outlet:E,params:A,data:O,title:F}=r,D=_r(a,()=>p({params:A,data:O,queryParams:g,fragment:v,routeConfig:y,url:M,outlet:E,title:F}));if(D instanceof Ur)throw new Dl(D);e=D}let u=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,n);if(e[0]==="/")throw new Dl(u);return u}applyRedirectCreateUrlTree(t,e,n,r){let a=this.createSegmentGroup(t,e.root,n,r);return new Ur(a,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let n={};return Object.entries(t).forEach(([r,a])=>{if(typeof a=="string"&&a[0]===":"){let p=a.substring(1);n[r]=e[p]}else n[r]=a}),n}createSegmentGroup(t,e,n,r){let a=this.createSegments(t,e.segments,n,r),u={};return Object.entries(e.children).forEach(([p,g])=>{u[p]=this.createSegmentGroup(t,g,n,r)}),new Gt(a,u)}createSegments(t,e,n,r){return e.map(a=>a.path[0]===":"?this.findPosParam(t,a,r):this.findOrReturn(a,n))}findPosParam(t,e,n){let r=n[e.path.substring(1)];if(!r)throw new Mt(4001,!1);return r}findOrReturn(t,e){let n=0;for(let r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}},ef={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Zx(i,t,e,n,r){let a=c1(i,t,e);return a.matched?(n=gx(t,n),zx(n,t,e,r).pipe(Be(u=>u===!0?a:ve({},ef)))):ut(a)}function c1(i,t,e){if(t.path==="**")return qx(e);if(t.path==="")return t.pathMatch==="full"&&(i.hasChildren()||e.length>0)?ve({},ef):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||Bg)(e,i,t);if(!r)return ve({},ef);let a={};Object.entries(r.posParams??{}).forEach(([p,g])=>{a[p]=g.path});let u=r.consumed.length>0?ve(ve({},a),r.consumed[r.consumed.length-1].parameters):a;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:u,positionalParamSegments:r.posParams??{}}}function qx(i){return{matched:!0,parameters:i.length>0?Wg(i).parameters:{},consumedSegments:i,remainingSegments:[],positionalParamSegments:{}}}function Rg(i,t,e,n){return e.length>0&&Kx(i,e,n)?{segmentGroup:new Gt(t,Xx(n,new Gt(e,i.children))),slicedSegments:[]}:e.length===0&&Jx(i,e,n)?{segmentGroup:new Gt(i.segments,Yx(i,e,n,i.children)),slicedSegments:e}:{segmentGroup:new Gt(i.segments,i.children),slicedSegments:e}}function Yx(i,t,e,n){let r={};for(let a of e)if(Ou(i,t,a)&&!n[Cr(a)]){let u=new Gt([],{});r[Cr(a)]=u}return ve(ve({},n),r)}function Xx(i,t){let e={};e[_t]=t;for(let n of i)if(n.path===""&&Cr(n)!==_t){let r=new Gt([],{});e[Cr(n)]=r}return e}function Kx(i,t,e){return e.some(n=>Ou(i,t,n)&&Cr(n)!==_t)}function Jx(i,t,e){return e.some(n=>Ou(i,t,n))}function Ou(i,t,e){return(i.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function Qx(i,t,e){return t.length===0&&!i.children[e]}var tf=class{};function ey(i,t,e,n,r,a,u="emptyOnly"){return new nf(i,t,e,n,r,u,a).recognize()}var ty=31,nf=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,n,r,a,u,p){this.injector=t,this.configLoader=e,this.rootComponentType=n,this.config=r,this.urlTree=a,this.paramsInheritanceStrategy=u,this.urlSerializer=p,this.applyRedirects=new Qm(this.urlSerializer,this.urlTree)}noMatchError(t){return new Mt(4002,`'${t.segmentGroup}'`)}recognize(){let t=Rg(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Be(({children:e,rootSnapshot:n})=>{let r=new $n(n,e),a=new Fl("",r),u=Xg(n,[],this.urlTree.queryParams,this.urlTree.fragment);return u.queryParams=this.urlTree.queryParams,a.url=this.urlSerializer.serialize(u),{state:a,tree:u}}))}match(t){let e=new to([],Object.freeze({}),Object.freeze(ve({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),_t,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,_t,e).pipe(Be(n=>({children:n,rootSnapshot:e})),wi(n=>{if(n instanceof Dl)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof Pl?this.noMatchError(n):n}))}processSegmentGroup(t,e,n,r,a){return n.segments.length===0&&n.hasChildren()?this.processChildren(t,e,n,a):this.processSegment(t,e,n,n.segments,r,!0,a).pipe(Be(u=>u instanceof $n?[u]:[]))}processChildren(t,e,n,r){let a=[];for(let u of Object.keys(n.children))u==="primary"?a.unshift(u):a.push(u);return an(a).pipe(_a(u=>{let p=n.children[u],g=_x(e,u);return this.processSegmentGroup(t,g,p,u,r)}),lh((u,p)=>(u.push(...p),u)),Kd(null),sh(),Un(u=>{if(u===null)return Ho(n);let p=d1(u);return iy(p),ut(p)}))}processSegment(t,e,n,r,a,u,p){return an(e).pipe(_a(g=>this.processSegmentAgainstRoute(g._injector??t,e,g,n,r,a,u,p).pipe(wi(v=>{if(v instanceof Pl)return ut(null);throw v}))),va(g=>!!g),wi(g=>{if(l1(g))return Qx(n,r,a)?ut(new tf):Ho(n);throw g}))}processSegmentAgainstRoute(t,e,n,r,a,u,p,g){return Cr(n)!==u&&(u===_t||!Ou(r,a,n))?Ho(r):n.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,n,a,u,g):this.allowRedirects&&p?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,n,a,u,g):Ho(r)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,a,u,p){let{matched:g,parameters:v,consumedSegments:y,positionalParamSegments:M,remainingSegments:E}=c1(e,r,a);if(!g)return Ho(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>ty&&(this.allowRedirects=!1));let A=new to(a,v,Object.freeze(ve({},this.urlTree.queryParams)),this.urlTree.fragment,Ng(r),Cr(r),r.component??r._loadedComponent??null,r,Vg(r)),O=Fu(A,p,this.paramsInheritanceStrategy);A.params=Object.freeze(O.params),A.data=Object.freeze(O.data);let F=this.applyRedirects.applyRedirectCommands(y,r.redirectTo,M,A,t);return this.applyRedirects.lineralizeSegments(r,F).pipe(Un(D=>this.processSegment(t,n,e,D.concat(E),u,!1,p)))}matchSegmentAgainstRoute(t,e,n,r,a,u){let p=Zx(e,n,r,t,this.urlSerializer);return n.path==="**"&&(e.children={}),p.pipe(ar(g=>g.matched?(t=n._injector??t,this.getChildConfig(t,n,r).pipe(ar(({routes:v})=>{let y=n._loadedInjector??t,{parameters:M,consumedSegments:E,remainingSegments:A}=g,O=new to(E,M,Object.freeze(ve({},this.urlTree.queryParams)),this.urlTree.fragment,Ng(n),Cr(n),n.component??n._loadedComponent??null,n,Vg(n)),F=Fu(O,u,this.paramsInheritanceStrategy);O.params=Object.freeze(F.params),O.data=Object.freeze(F.data);let{segmentGroup:D,slicedSegments:ee}=Rg(e,E,A,v);if(ee.length===0&&D.hasChildren())return this.processChildren(y,v,D,O).pipe(Be(te=>new $n(O,te)));if(v.length===0&&ee.length===0)return ut(new $n(O,[]));let ie=Cr(n)===a;return this.processSegment(y,v,D,ee,ie?_t:a,!0,O).pipe(Be(te=>new $n(O,te instanceof $n?[te]:[])))}))):Ho(e)))}getChildConfig(t,e,n){return e.children?ut({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?ut({routes:e._loadedRoutes,injector:e._loadedInjector}):Hx(t,e,n,this.urlSerializer).pipe(Un(r=>r?this.configLoader.loadChildren(t,e).pipe(gi(a=>{e._loadedRoutes=a.routes,e._loadedInjector=a.injector})):$x(e))):ut({routes:[],injector:t})}};function iy(i){i.sort((t,e)=>t.value.outlet===_t?-1:e.value.outlet===_t?1:t.value.outlet.localeCompare(e.value.outlet))}function ny(i){let t=i.value.routeConfig;return t&&t.path===""}function d1(i){let t=[],e=new Set;for(let n of i){if(!ny(n)){t.push(n);continue}let r=t.find(a=>n.value.routeConfig===a.value.routeConfig);r!==void 0?(r.children.push(...n.children),e.add(r)):t.push(n)}for(let n of e){let r=d1(n.children);t.push(new $n(n.value,r))}return t.filter(n=>!e.has(n))}function Ng(i){return i.data||{}}function Vg(i){return i.resolve||{}}function ry(i,t,e,n,r,a){return Un(u=>ey(i,t,e,n,u.extractedUrl,r,a).pipe(Be(({state:p,tree:g})=>Qe(ve({},u),{targetSnapshot:p,urlAfterRedirects:g}))))}function ay(i,t){return Un(e=>{let{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return ut(e);let a=new Set(r.map(g=>g.route)),u=new Set;for(let g of a)if(!u.has(g))for(let v of m1(g))u.add(v);let p=0;return an(u).pipe(_a(g=>a.has(g)?oy(g,n,i,t):(g.data=Fu(g,g.parent,i).resolve,ut(void 0))),gi(()=>p++),Jd(1),Un(g=>p===u.size?ut(e):Jr))})}function m1(i){let t=i.children.map(e=>m1(e)).flat();return[i,...t]}function oy(i,t,e,n){let r=i.routeConfig,a=i._resolve;return r?.title!==void 0&&!n1(r)&&(a[Il]=r.title),sy(a,i,t,n).pipe(Be(u=>(i._resolvedData=u,i.data=Fu(i,i.parent,e).resolve,null)))}function sy(i,t,e,n){let r=zm(i);if(r.length===0)return ut({});let a={};return an(r).pipe(Un(u=>ly(i[u],t,e,n).pipe(va(),gi(p=>{if(p instanceof Yo)throw ku(new no,p);a[u]=p}))),Jd(1),Be(()=>a),wi(u=>l1(u)?Jr:pn(u)))}function ly(i,t,e,n){let r=Ll(t)??n,a=Jo(i,r),u=a.resolve?a.resolve(t,e):_r(r,()=>a(t,e));return Ea(u)}function jm(i){return ar(t=>{let e=i(t);return e?an(e).pipe(Be(()=>t)):ut(t)})}var sf=(()=>{class i{buildTitle(e){let n,r=e.root;for(;r!==void 0;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(a=>a.outlet===_t);return n}getResolvedTitleForRoute(e){return e.data[Il]}static \u0275fac=function(n){return new(n||i)};static \u0275prov=Pe({token:i,factory:()=>Ne(f1),providedIn:"root"})}return i})(),f1=(()=>{class i extends sf{title;constructor(e){super(),this.title=e}updateTitle(e){let n=this.buildTitle(e);n!==void 0&&this.title.setTitle(n)}static \u0275fac=function(n){return new(n||i)(Ue(Pg))};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Vl=new Tt("",{providedIn:"root",factory:()=>({})}),Bl=new Tt(""),p1=(()=>{class i{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=Ne(Dh);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return ut(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let n=Ea(e.loadComponent()).pipe(Be(g1),gi(a=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=a}),Do(()=>{this.componentLoaders.delete(e)})),r=new Zd(n,()=>new Vi).pipe($d());return this.componentLoaders.set(e,r),r}loadChildren(e,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return ut({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);let a=h1(n,this.compiler,e,this.onLoadEndListener).pipe(Do(()=>{this.childrenLoaders.delete(n)})),u=new Zd(a,()=>new Vi).pipe($d());return this.childrenLoaders.set(n,u),u}static \u0275fac=function(n){return new(n||i)};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function h1(i,t,e,n){return Ea(i.loadChildren()).pipe(Be(g1),Un(r=>r instanceof bh||Array.isArray(r)?ut(r):an(t.compileModuleAsync(r))),Be(r=>{n&&n(i);let a,u,p=!1;return Array.isArray(r)?(u=r,p=!0):(a=r.create(e).injector,u=a.get(Bl,[],{optional:!0,self:!0}).flat()),{routes:u.map(of),injector:a}}))}function uy(i){return i&&typeof i=="object"&&"default"in i}function g1(i){return uy(i)?i.default:i}var Lu=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275prov=Pe({token:i,factory:()=>Ne(cy),providedIn:"root"})}return i})(),cy=(()=>{class i{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}static \u0275fac=function(n){return new(n||i)};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),_1=new Tt("");var v1=new Tt(""),x1=(()=>{class i{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Vi;transitionAbortSubject=new Vi;configLoader=Ne(p1);environmentInjector=Ne($a);destroyRef=Ne(im);urlSerializer=Ne(Ol);rootContexts=Ne(Ko);location=Ne(Bo);inputBindingEnabled=Ne(Iu,{optional:!0})!==null;titleStrategy=Ne(sf);options=Ne(Vl,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=Ne(Lu);createViewTransition=Ne(_1,{optional:!0});navigationErrorHandler=Ne(v1,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ut(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=r=>this.events.next(new bu(r)),n=r=>this.events.next(new Cu(r));this.configLoader.onLoadEndListener=n,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let n=++this.navigationId;this.transitions?.next(Qe(ve({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:n}))}setupNavigations(e){return this.transitions=new Gi(null),this.transitions.pipe(Wn(n=>n!==null),ar(n=>{let r=!1,a=!1;return ut(n).pipe(ar(u=>{if(this.navigationId>n.id)return this.cancelNavigationTransition(n,"",On.SupersededByNewNavigation),Jr;this.currentTransition=n,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?Qe(ve({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let p=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),g=u.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!p&&g!=="reload"){let v="";return this.events.next(new ra(u.id,this.urlSerializer.serialize(u.rawUrl),v,Tl.IgnoredSameUrlNavigation)),u.resolve(!1),Jr}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return ut(u).pipe(ar(v=>(this.events.next(new ro(v.id,this.urlSerializer.serialize(v.extractedUrl),v.source,v.restoredState)),v.id!==this.navigationId?Jr:Promise.resolve(v))),ry(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),gi(v=>{n.targetSnapshot=v.targetSnapshot,n.urlAfterRedirects=v.urlAfterRedirects,this.currentNavigation=Qe(ve({},this.currentNavigation),{finalUrl:v.urlAfterRedirects});let y=new El(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(y)}));if(p&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:v,extractedUrl:y,source:M,restoredState:E,extras:A}=u,O=new ro(v,this.urlSerializer.serialize(y),M,E);this.events.next(O);let F=t1(this.rootComponentType).snapshot;return this.currentTransition=n=Qe(ve({},u),{targetSnapshot:F,urlAfterRedirects:y,extras:Qe(ve({},A),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,ut(n)}else{let v="";return this.events.next(new ra(u.id,this.urlSerializer.serialize(u.extractedUrl),v,Tl.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Jr}}),gi(u=>{let p=new _u(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(p)}),Be(u=>(this.currentTransition=n=Qe(ve({},u),{guards:Sx(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),n)),Lx(this.environmentInjector,u=>this.events.next(u)),gi(u=>{if(n.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw ku(this.urlSerializer,u.guardsResult);let p=new vu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(p)}),Wn(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",On.GuardRejected),!1)),jm(u=>{if(u.guards.canActivateChecks.length!==0)return ut(u).pipe(gi(p=>{let g=new xu(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(g)}),ar(p=>{let g=!1;return ut(p).pipe(ay(this.paramsInheritanceStrategy,this.environmentInjector),gi({next:()=>g=!0,complete:()=>{g||this.cancelNavigationTransition(p,"",On.NoDataFromResolver)}}))}),gi(p=>{let g=new yu(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(g)}))}),jm(u=>{let p=g=>{let v=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&v.push(this.configLoader.loadComponent(g.routeConfig).pipe(gi(y=>{g.component=y}),Be(()=>{})));for(let y of g.children)v.push(...p(y));return v};return qd(p(u.targetSnapshot.root)).pipe(Kd(null),Po(1))}),jm(()=>this.afterPreactivation()),ar(()=>{let{currentSnapshot:u,targetSnapshot:p}=n,g=this.createViewTransition?.(this.environmentInjector,u.root,p.root);return g?an(g).pipe(Be(()=>n)):ut(n)}),Be(u=>{let p=xx(e.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=n=Qe(ve({},u),{targetRouterState:p}),this.currentNavigation.targetRouterState=p,n}),gi(()=>{this.events.next(new Al)}),wx(this.rootContexts,e.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Po(1),gi({next:u=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new qn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{r=!0}}),Io(this.transitionAbortSubject.pipe(gi(u=>{throw u}))),Do(()=>{!r&&!a&&this.cancelNavigationTransition(n,"",On.SupersededByNewNavigation),this.currentTransition?.id===n.id&&(this.currentNavigation=null,this.currentTransition=null)}),wi(u=>{if(this.destroyed)return n.resolve(!1),Jr;if(a=!0,s1(u))this.events.next(new Br(n.id,this.urlSerializer.serialize(n.extractedUrl),u.message,u.cancellationCode)),Cx(u)?this.events.next(new qo(u.url,u.navigationBehaviorOptions)):n.resolve(!1);else{let p=new Zo(n.id,this.urlSerializer.serialize(n.extractedUrl),u,n.targetSnapshot??void 0);try{let g=_r(this.environmentInjector,()=>this.navigationErrorHandler?.(p));if(g instanceof Yo){let{message:v,cancellationCode:y}=ku(this.urlSerializer,g);this.events.next(new Br(n.id,this.urlSerializer.serialize(n.extractedUrl),v,y)),this.events.next(new qo(g.redirectTo,g.navigationBehaviorOptions))}else throw this.events.next(p),u}catch(g){this.options.resolveNavigationPromiseOnError?n.resolve(!1):n.reject(g)}}return Jr}))}))}cancelNavigationTransition(e,n,r){let a=new Br(e.id,this.urlSerializer.serialize(e.extractedUrl),n,r);this.events.next(a),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),n=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==n?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(n){return new(n||i)};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function dy(i){return i!==pu}var y1=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275prov=Pe({token:i,factory:()=>Ne(my),providedIn:"root"})}return i})(),Du=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},my=(()=>{class i extends Du{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Hn(i)))(r||i)}})();static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),b1=(()=>{class i{urlSerializer=Ne(Ol);options=Ne(Vl,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=Ne(Bo);urlHandlingStrategy=Ne(Lu);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Ur;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:n,targetBrowserUrl:r}){let a=e!==void 0?this.urlHandlingStrategy.merge(e,n):n,u=r??a;return u instanceof Ur?this.urlSerializer.serialize(u):u}commitTransition({targetRouterState:e,finalUrl:n,initialUrl:r}){n&&e?(this.currentUrlTree=n,this.rawUrlTree=this.urlHandlingStrategy.merge(n,r),this.routerState=e):this.rawUrlTree=r}routerState=t1(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=Pe({token:i,factory:()=>Ne(fy),providedIn:"root"})}return i})(),fy=(()=>{class i extends b1{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(n=>{n.type==="popstate"&&setTimeout(()=>{e(n.url,n.state,"popstate")})})}handleRouterEvent(e,n){e instanceof ro?this.updateStateMemento():e instanceof ra?this.commitTransition(n):e instanceof El?this.urlUpdateStrategy==="eager"&&(n.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(n),n)):e instanceof Al?(this.commitTransition(n),this.urlUpdateStrategy==="deferred"&&!n.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(n),n)):e instanceof Br&&(e.code===On.GuardRejected||e.code===On.NoDataFromResolver)?this.restoreHistory(n):e instanceof Zo?this.restoreHistory(n,!0):e instanceof qn&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:n,id:r}){let{replaceUrl:a,state:u}=n;if(this.location.isCurrentPathEqualTo(e)||a){let p=this.browserPageId,g=ve(ve({},u),this.generateNgRouterState(r,p));this.location.replaceState(e,"",g)}else{let p=ve(ve({},u),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(e,"",p)}}restoreHistory(e,n=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,a=this.currentPageId-r;a!==0?this.location.historyGo(a):this.getCurrentUrlTree()===e.finalUrl&&a===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(n&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,n){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Hn(i)))(r||i)}})();static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function lf(i,t){i.events.pipe(Wn(e=>e instanceof qn||e instanceof Br||e instanceof Zo||e instanceof ra),Be(e=>e instanceof qn||e instanceof ra?0:(e instanceof Br?e.code===On.Redirect||e.code===On.SupersededByNewNavigation:!1)?2:1),Wn(e=>e!==2),Po(1)).subscribe(()=>{t()})}var py={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hy={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Xe=(()=>{class i{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=Ne(Ch);stateManager=Ne(b1);options=Ne(Vl,{optional:!0})||{};pendingTasks=Ne(V0);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=Ne(x1);urlSerializer=Ne(Ol);location=Ne(Bo);urlHandlingStrategy=Ne(Lu);_events=new Vi;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=Ne(y1);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=Ne(Bl,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!Ne(Iu,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Qp;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(n=>{try{let r=this.navigationTransitions.currentTransition,a=this.navigationTransitions.currentNavigation;if(r!==null&&a!==null){if(this.stateManager.handleRouterEvent(n,a),n instanceof Br&&n.code!==On.Redirect&&n.code!==On.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof qn)this.navigated=!0;else if(n instanceof qo){let u=n.navigationBehaviorOptions,p=this.urlHandlingStrategy.merge(n.url,r.currentRawUrl),g=ve({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||dy(r.source)},u);this.scheduleNavigation(p,pu,null,g,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}_y(n)&&this._events.next(n)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),pu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,n,r)=>{this.navigateToSyncWithBrowser(e,r,n)})}navigateToSyncWithBrowser(e,n,r){let a={replaceUrl:!0},u=r?.navigationId?r:null;if(r){let g=ve({},r);delete g.navigationId,delete g.\u0275routerPageId,Object.keys(g).length!==0&&(a.state=g)}let p=this.parseUrl(e);this.scheduleNavigation(p,n,u,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(of),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,n={}){let{relativeTo:r,queryParams:a,fragment:u,queryParamsHandling:p,preserveFragment:g}=n,v=g?this.currentUrlTree.fragment:u,y=null;switch(p??this.options.defaultQueryParamsHandling){case"merge":y=ve(ve({},this.currentUrlTree.queryParams),a);break;case"preserve":y=this.currentUrlTree.queryParams;break;default:y=a||null}y!==null&&(y=this.removeEmptyProps(y));let M;try{let E=r?r.snapshot:this.routerState.snapshot.root;M=Kg(E)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),M=this.currentUrlTree.root}return Jg(M,e,y,v??null)}navigateByUrl(e,n={skipLocationChange:!1}){let r=Ta(e)?e:this.parseUrl(e),a=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(a,pu,null,n)}navigate(e,n={skipLocationChange:!1}){return gy(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,n){let r;if(n===!0?r=ve({},py):n===!1?r=ve({},hy):r=n,Ta(e))return Dg(this.currentUrlTree,e,r);let a=this.parseUrl(e);return Dg(this.currentUrlTree,a,r)}removeEmptyProps(e){return Object.entries(e).reduce((n,[r,a])=>(a!=null&&(n[r]=a),n),{})}scheduleNavigation(e,n,r,a,u){if(this.disposed)return Promise.resolve(!1);let p,g,v;u?(p=u.resolve,g=u.reject,v=u.promise):v=new Promise((M,E)=>{p=M,g=E});let y=this.pendingTasks.add();return lf(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(y))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:a,resolve:p,reject:g,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(M=>Promise.reject(M))}static \u0275fac=function(n){return new(n||i)};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function gy(i){for(let t=0;t<i.length;t++)if(i[t]==null)throw new Mt(4008,!1)}function _y(i){return!(i instanceof Al)&&!(i instanceof qo)}var Aa=(()=>{class i{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Vi;constructor(e,n,r,a,u,p){this.router=e,this.route=n,this.tabIndexAttribute=r,this.renderer=a,this.el=u,this.locationStrategy=p;let g=u.nativeElement.tagName?.toLowerCase();this.isAnchorElement=g==="a"||g==="area",this.isAnchorElement?this.subscription=e.events.subscribe(v=>{v instanceof qn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ta(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,n,r,a,u){let p=this.urlTree;if(p===null||this.isAnchorElement&&(e!==0||n||r||a||u||typeof this.target=="string"&&this.target!="_self"))return!0;let g={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(p,g),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let n=this.href===null?null:xh(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(e,n){let r=this.renderer,a=this.el.nativeElement;n!==null?r.setAttribute(a,e,n):r.removeAttribute(a,e)}get urlTree(){return this.routerLinkInput===null?null:Ta(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(n){return new(n||i)(G(Xe),G(Ai),tm("tabindex"),G(sr),G(or),G(Vo))};static \u0275dir=zt({type:i,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(n,r){n&1&&T("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),n&2&&Pn("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Xa],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Xa],replaceUrl:[2,"replaceUrl","replaceUrl",Xa],routerLink:"routerLink"},features:[vr]})}return i})(),uf=(()=>{class i{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new di;constructor(e,n,r,a,u){this.router=e,this.element=n,this.renderer=r,this.cdr=a,this.link=u,this.routerEventsSubscription=e.events.subscribe(p=>{p instanceof qn&&this.update()})}ngAfterContentInit(){ut(this.links.changes,ut(null)).pipe(Yd()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let e=[...this.links.toArray(),this.link].filter(n=>!!n).map(n=>n.onChanges);this.linkInputChangesSubscription=an(e).pipe(Yd()).subscribe(n=>{this._isActive!==this.isLinkActive(this.router)(n)&&this.update()})}set routerLinkActive(e){let n=Array.isArray(e)?e:e.split(" ");this.classes=n.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let e=this.hasActiveLinks();this.classes.forEach(n=>{e?this.renderer.addClass(this.element.nativeElement,n):this.renderer.removeClass(this.element.nativeElement,n)}),e&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.isActiveChange.emit(e))})}isLinkActive(e){let n=xy(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>{let a=r.urlTree;return a?e.isActive(a,n):!1}}hasActiveLinks(){let e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static \u0275fac=function(n){return new(n||i)(G(Xe),G(or),G(sr),G(ba),G(Aa,8))};static \u0275dir=zt({type:i,selectors:[["","routerLinkActive",""]],contentQueries:function(n,r,a){if(n&1&&Ah(a,Aa,5),n&2){let u;W0(u=j0())&&(r.links=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[vr]})}return i})();function xy(i){return!!i.paths}var yy=new Tt("");function cf(i,...t){return Oo([{provide:Bl,multi:!0,useValue:i},[],{provide:Ai,useFactory:by,deps:[Xe]},{provide:Sh,multi:!0,useFactory:Cy},t.map(e=>e.\u0275providers)])}function by(i){return i.routerState.root}function Cy(){let i=Ne(Za);return t=>{let e=i.get(Th);if(t!==e.components[0])return;let n=i.get(Xe),r=i.get(wy);i.get(Sy)===1&&n.initialNavigation(),i.get(Ty,null,Qd.Optional)?.setUpPreloading(),i.get(yy,null,Qd.Optional)?.init(),n.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var wy=new Tt("",{factory:()=>new Vi}),Sy=new Tt("",{providedIn:"root",factory:()=>1});var Ty=new Tt("");var Ey="@",Ay=(()=>{class i{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=Ne(Za);loadingSchedulerFn=Ne(My,{optional:!0});_engine;constructor(e,n,r,a,u){this.doc=e,this.delegate=n,this.zone=r,this.animationType=a,this.moduleImpl=u}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-ZNQPWLIU.js").then(r=>r),n;return this.loadingSchedulerFn?n=this.loadingSchedulerFn(e):n=e(),n.catch(r=>{throw new Mt(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:a})=>{this._engine=r(this.animationType,this.doc);let u=new a(this.delegate,this._engine,this.zone);return this.delegate=u,u})}createRenderer(e,n){let r=this.delegate.createRenderer(e,n);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let a=new df(r);return n?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(u=>{let p=u.createRenderer(e,n);a.use(p),this.scheduler??=this.injector.get(fh,null,{optional:!0}),this.scheduler?.notify(10)}).catch(u=>{a.use(r)}),a}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}componentReplaced(e){this._engine?.flush(),this.delegate.componentReplaced?.(e)}static \u0275fac=function(n){lm()};static \u0275prov=Pe({token:i,factory:i.\u0275fac})}return i})(),df=class{delegate;replay=[];\u0275type=1;constructor(t){this.delegate=t}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,n,r){this.delegate.insertBefore(t,e,n,r)}removeChild(t,e,n){this.delegate.removeChild(t,e,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){this.shouldReplay(e)&&this.replay.push(r=>r.setProperty(t,e,n)),this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n,r){return this.shouldReplay(e)&&this.replay.push(a=>a.listen(t,e,n,r)),this.delegate.listen(t,e,n,r)}shouldReplay(t){return this.replay!==null&&t.startsWith(Ey)}},My=new Tt("");function C1(i="animations"){return om("NgAsyncAnimations"),Oo([{provide:B0,useFactory:(t,e,n)=>new Ay(t,e,n,i),deps:[Bi,hl,ea]},{provide:gh,useValue:i==="noop"?"NoopAnimations":"BrowserAnimations"}])}var xt={production:!1,apiUrl:"http://localhost:8000",apiVersion:"v1",get apiEndpoint(){return`${this.apiUrl}`},jwt:{tokenKey:"ambulance_auth_token",refreshTokenKey:"ambulance_refresh_token",tokenExpiryKey:"ambulance_token_expiry"},upload:{maxFileSize:5242880,allowedImageTypes:["image/jpeg","image/png","image/jpg"],allowedDocTypes:["application/pdf","image/jpeg","image/png"]},app:{name:"\u0646\u0638\u0627\u0645 \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0625\u0633\u0639\u0627\u0641",version:"1.0.0",defaultLanguage:"ar",itemsPerPage:10,autoRefreshInterval:3e4},features:{realTimeUpdates:!1,notifications:!1,fileUpload:!1}};var Ru=class i{constructor(t){this.http=t}API_URL=`${xt.apiEndpoint}/dashboard`;getDashboardStats(){return this.http.get(this.API_URL)}getStatistics(t=!0,e=5){let n={cache:t.toString(),cacheMinutes:e.toString()};return this.http.get(`${xt.apiEndpoint}/statistics`,{params:n})}static \u0275fac=function(e){return new(e||i)(Ue(It))};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})};var Ye=class i{toastSubject=new Vi;toast$=this.toastSubject.asObservable();success(t,e=3e3){this.toastSubject.next({message:t,type:"success",duration:e})}error(t,e=3e3){this.toastSubject.next({message:t,type:"error",duration:e})}warning(t,e=3e3){this.toastSubject.next({message:t,type:"warning",duration:e})}info(t,e=3e3){this.toastSubject.next({message:t,type:"info",duration:e})}static \u0275fac=function(e){return new(e||i)};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})};var ft=class i{constructor(){}globalHeader=new Gi("\u0644\u0648\u062D\u0629 \u0627\u0644\u062A\u062D\u0643\u0645");globalHeader$=this.globalHeader.asObservable();usersImgSubject=new Gi("/assets/default-avatar.png");usersImg$=this.usersImgSubject.asObservable();setGlobalHeader(t){this.globalHeader.next(t)}getGlobalHeader(){return this.globalHeader.getValue()}getCurrrentIMG(){let t=this.usersImgSubject.getValue();return t===""||t==="/assets/default-avatar.png"?"person-placeholder.jpg":t}currentImgPath$=this.usersImgSubject.asObservable().pipe(Be(t=>t===""||t==="/assets/default-avatar.png"?"person-placeholder.jpg":t));setCurrentIMG(t){this.usersImgSubject.next(t)}driversList=[{id:"d1",name:"\u0625\u0644\u064A\u0627\u0646\u0648\u0631 \u0628\u064A\u0646\u0627"},{id:"d2",name:"\u0643\u0627\u0645\u064A\u0631\u0648\u0646 \u0648\u064A\u0644\u064A\u0627\u0645\u0633\u0648\u0646"},{id:"d3",name:"\u062C\u0627\u0643\u0648\u0628 \u062C\u0648\u0646\u0632"},{id:"d4",name:"\u0648\u064A\u062F \u0648\u0627\u0631\u064A\u0646"}];static \u0275fac=function(e){return new(e||i)};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})};var Pt=class i{constructor(t,e){this.http=t;this.router=e;this.initializeAuth()}API_URL=xt.apiEndpoint;TOKEN_KEY=xt.jwt.tokenKey;REFRESH_TOKEN_KEY=xt.jwt.refreshTokenKey;currentUser=Z(this.getUserFromStorage());isAuthenticated=We(()=>this.currentUser()!==null);userRole=We(()=>this.currentUser()?.role||null);isAdmin=We(()=>this.userRole()==="admin");isDriver=We(()=>this.userRole()==="driver");isParamedic=We(()=>this.userRole()==="paramedic");initializeAuth(){let t=this.getUserFromStorage();t&&this.currentUser.set(t)}login(t){return this.http.post(`${this.API_URL}/auth/login`,t).pipe(gi(e=>{this.handleLoginSuccess(e)}),wi(this.handleError))}logout(){return this.getAccessToken()?this.http.post(`${this.API_URL}/auth/logout`,{}).pipe(gi(()=>{this.clearAuthData(),this.router.navigate(["/login"])}),wi(()=>(this.clearAuthData(),this.router.navigate(["/login"]),pn(()=>new Error("Logout failed"))))):(this.clearAuthData(),this.router.navigate(["/login"]),new N0(e=>{e.next(),e.complete()}))}logoutLocal(){this.clearAuthData()}refreshToken(){let t=this.getRefreshToken();return t?this.http.post(`${this.API_URL}/auth/refresh`,{refreshToken:t}).pipe(gi(e=>{this.handleLoginSuccess(e)}),wi(e=>(this.clearAuthData(),pn(()=>e)))):pn(()=>new Error("No refresh token available"))}getCurrentUser(){return this.http.get(`${this.API_URL}/auth/me`).pipe(gi(t=>{this.setUser(t)}),wi(this.handleError))}changePassword(t,e){return this.http.put(`${this.API_URL}/auth/change-password`,{oldPassword:t,newPassword:e}).pipe(wi(this.handleError))}forgotPassword(t){return this.http.post(`${this.API_URL}/auth/forgot-password`,{email:t}).pipe(wi(this.handleError))}resetPassword(t,e){return this.http.post(`${this.API_URL}/auth/reset-password`,{token:t,newPassword:e}).pipe(wi(this.handleError))}hasRole(t){return this.userRole()===t}hasAnyRole(t){let e=this.userRole();return e!==null&&t.includes(e)}getAccessToken(){return localStorage.getItem(this.TOKEN_KEY)}getRefreshToken(){return localStorage.getItem(this.REFRESH_TOKEN_KEY)}isTokenExpired(){let t=this.getAccessToken();if(!t)return!0;try{let n=this.decodeToken(t).exp*1e3;return Date.now()>=n}catch{return!0}}decodeToken(t){let n=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(n).split("").map(a=>"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(r)}handleLoginSuccess(t){localStorage.setItem(this.TOKEN_KEY,t.accessToken),localStorage.setItem(this.REFRESH_TOKEN_KEY,t.refreshToken),localStorage.setItem("ambulance_user",JSON.stringify(t.user)),this.setUser(t.user)}setUser(t){this.currentUser.set(t),localStorage.setItem("ambulance_user",JSON.stringify(t))}getUserFromStorage(){try{let t=localStorage.getItem("ambulance_user");if(t)return JSON.parse(t)}catch(t){console.error("Error parsing user from storage",t)}return null}clearAuthData(){localStorage.removeItem(this.TOKEN_KEY),localStorage.removeItem(this.REFRESH_TOKEN_KEY),localStorage.removeItem("ambulance_user"),this.currentUser.set(null)}handleError(t){let e=t.message||"\u062D\u062F\u062B \u062E\u0637\u0623 \u063A\u064A\u0631 \u0645\u062A\u0648\u0642\u0639";return console.log(t,"handling error in AuthService"),t.error instanceof ErrorEvent?e=`\u062E\u0637\u0623: ${t.error.message}`:t.status===401?e=t.message||"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u0623\u0648 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u063A\u064A\u0631 \u0635\u062D\u064A\u062D\u0629":t.status===403?e="\u0644\u064A\u0633 \u0644\u062F\u064A\u0643 \u0635\u0644\u0627\u062D\u064A\u0629 \u0644\u0644\u0648\u0635\u0648\u0644":t.status===404?e="\u0627\u0644\u0645\u0648\u0631\u062F \u0627\u0644\u0645\u0637\u0644\u0648\u0628 \u063A\u064A\u0631 \u0645\u0648\u062C\u0648\u062F":t.status===500?e="\u062E\u0637\u0623 \u0641\u064A \u0627\u0644\u062E\u0627\u062F\u0645":t.error?.message&&(e=t.error.message),pn(()=>new Error(e))}static \u0275fac=function(e){return new(e||i)(Ue(It),Ue(Xe))};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})};var w1=()=>["/admin/trips"],ky=(i,t)=>t.id;function Py(i,t){i&1&&(s(0,"div",2)(1,"div",3)(2,"span",4),d(3,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),l()()())}function Dy(i,t){if(i&1&&(s(0,"small",29),x(1,"i",90),d(2),gt(3,"number"),l()),i&2){let e=h(2);m(2),q(" \u062F\u064A\u0646 \u0644\u0644\u0645\u0627\u0644\u0643: \u20AA",Bt(3,1,e.dashboardStats().financial.companyDebtToOwner,"1.0-2")," ")}}function Iy(i,t){if(i&1&&(s(0,"div",91)(1,"div",92),x(2,"i"),l(),s(3,"div",93)(4,"div",94)(5,"h6",95),d(6),l(),s(7,"span",96),d(8),l()(),s(9,"div",97),x(10,"i",98),s(11,"span",99),d(12),l(),x(13,"i",100),s(14,"span"),d(15),l()()(),s(16,"div",101)(17,"small",102),d(18),l()()()),i&2){let e=t.$implicit,n=h(3);S("routerLink",Ei(19,w1)),m(),dt("width",48,"px")("height",48,"px")("background-color",n.getRecentTripColor(e.transferStatus)+"1A")("color",n.getRecentTripColor(e.transferStatus)),m(),_i("fa-solid ",n.getRecentTripIcon(e.transferStatus)," fs-5"),m(4),z(e.patientName),m(),dt("background-color",n.getRecentTripColor(e.transferStatus)),m(),q(" ",e.transferStatus," "),m(4),q("\u0625\u0644\u0649: ",e.transferTo,""),m(3),z(e.driver||"---"),m(3),q(" ",n.formatTripDate(e.tripDate)," ")}}function Oy(i,t){if(i&1&&(s(0,"div",59),Te(1,Iy,19,20,"div",91,ky),l()),i&2){let e=h(2);m(),Ee(e.dashboardStats().recentTrips.slice(0,5))}}function Ly(i,t){i&1&&(s(0,"div",60)(1,"div",103),x(2,"i",104),l(),s(3,"p",105),d(4,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0631\u062D\u0644\u0627\u062A \u062D\u062F\u064A\u062B\u0629"),l()())}function Ry(i,t){if(i&1&&(s(0,"div",64)(1,"span",29),x(2,"i",106),d(3,"\u0627\u062C\u0645\u0639 \u0645\u0646 \u0627\u0644\u0633\u0627\u0626\u0642\u064A\u0646"),l(),s(4,"span",107),d(5),gt(6,"number"),l()()),i&2){let e=h(2);m(5),q("\u20AA",Bt(6,1,e.dashboardStats().financial.netDriverPosition,"1.2-2"),"")}}function Ny(i,t){if(i&1&&(s(0,"div",64)(1,"span",108),x(2,"i",109),d(3,"\u0627\u062F\u0641\u0639 \u0644\u0644\u0633\u0627\u0626\u0642\u064A\u0646"),l(),s(4,"span",70),d(5),gt(6,"number"),l()()),i&2){let e=h(2);m(5),q("\u20AA",Bt(6,1,e.dashboardStats().financial.netDriverPosition*-1,"1.2-2"),"")}}function Vy(i,t){i&1&&(s(0,"div",64)(1,"span",110),x(2,"i",111),d(3,"\u0627\u0644\u0633\u0627\u0626\u0642\u064A\u0646 - \u0645\u062D\u0633\u0648\u0628"),l(),s(4,"span",112),d(5,"\u20AA0.00"),l()())}function By(i,t){if(i&1&&(s(0,"div",75)(1,"span",29),x(2,"i",106),d(3,"\u0627\u062C\u0645\u0639 \u0645\u0646 \u0627\u0644\u0645\u0633\u0639\u0641\u064A\u0646"),l(),s(4,"span",107),d(5),gt(6,"number"),l()()),i&2){let e=h(2);m(5),q("\u20AA",Bt(6,1,e.dashboardStats().financial.netParamedicPosition,"1.2-2"),"")}}function Uy(i,t){if(i&1&&(s(0,"div",75)(1,"span",108),x(2,"i",109),d(3,"\u0627\u062F\u0641\u0639 \u0644\u0644\u0645\u0633\u0639\u0641\u064A\u0646"),l(),s(4,"span",70),d(5),gt(6,"number"),l()()),i&2){let e=h(2);m(5),q("\u20AA",Bt(6,1,e.dashboardStats().financial.netParamedicPosition*-1,"1.2-2"),"")}}function Wy(i,t){i&1&&(s(0,"div",75)(1,"span",110),x(2,"i",111),d(3,"\u0627\u0644\u0645\u0633\u0639\u0641\u064A\u0646 - \u0645\u062D\u0633\u0648\u0628"),l(),s(4,"span",112),d(5,"\u20AA0.00"),l()())}function jy(i,t){if(i&1){let e=Q();s(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div")(5,"p",9),d(6,"\u0639\u0645\u0644\u064A\u0627\u062A \u0627\u0644\u0646\u0642\u0644 \u0627\u0644\u064A\u0648\u0645"),l(),s(7,"h2",10),d(8),l()(),s(9,"div",11),x(10,"i",12),l()()()(),s(11,"div",6)(12,"div",7)(13,"div",8)(14,"div")(15,"p",9),d(16,"\u0627\u0644\u0633\u0627\u0626\u0642\u0648\u0646 \u0627\u0644\u0646\u0634\u0637\u0648\u0646"),l(),s(17,"h2",10),d(18),s(19,"span",13),d(20),l()()(),s(21,"div",14),x(22,"i",15),l()()()(),s(23,"div",6)(24,"div",7)(25,"div",8)(26,"div")(27,"p",9),d(28,"\u0627\u0644\u0625\u064A\u0631\u0627\u062F\u0627\u062A \u0627\u0644\u0634\u0647\u0631\u064A\u0629"),l(),s(29,"h2",16),d(30),gt(31,"number"),l()(),s(32,"div",17),x(33,"i",18),l()()()(),s(34,"div",6)(35,"div",7)(36,"div",8)(37,"div")(38,"p",9),d(39,"\u062A\u0643\u0627\u0644\u064A\u0641 \u0627\u0644\u0648\u0642\u0648\u062F"),l(),s(40,"h2",19),d(41),gt(42,"number"),l()(),s(43,"div",20),x(44,"i",21),l()()()()(),s(45,"div",5)(46,"div",22)(47,"div",23)(48,"div",24)(49,"div",25)(50,"h6",26),d(51,"\u0631\u0635\u064A\u062F \u0627\u0644\u0634\u0631\u0643\u0629"),l(),s(52,"div",17),x(53,"i",27),l()(),s(54,"h3",28),d(55),gt(56,"number"),l(),H(57,Dy,4,4,"small",29),l()()(),s(58,"div",22)(59,"div",30)(60,"div",24)(61,"div",25)(62,"h6",26),d(63,"\u0631\u0635\u064A\u062F \u0627\u0644\u0645\u0627\u0644\u0643"),l(),s(64,"div",14),x(65,"i",31),l()(),s(66,"h3",32),d(67),gt(68,"number"),l()()()()(),s(69,"div",5)(70,"div",33)(71,"div",34)(72,"div",35)(73,"span",36),d(74,"\u0631\u062D\u0644\u0627\u062A \u0627\u0644\u0634\u0647\u0631"),l(),s(75,"span",37),d(76),l()()()(),s(77,"div",33)(78,"div",38)(79,"div",35)(80,"span",36),d(81,"\u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A \u0627\u0644\u0645\u062A\u0627\u062D\u0629"),l(),s(82,"span",37),d(83),l()()()(),s(84,"div",33)(85,"div",39)(86,"div",35)(87,"span",36),d(88,"\u0637\u0644\u0628\u0627\u062A \u0645\u0639\u0644\u0642\u0629"),l(),s(89,"span",37),d(90),l()()()(),s(91,"div",33)(92,"div",40)(93,"div",35)(94,"span",36),d(95,"\u0635\u064A\u0627\u0646\u0629 \u0645\u062C\u062F\u0648\u0644\u0629"),l(),s(96,"span",37),d(97),l()()()()(),s(98,"div",41)(99,"div",42)(100,"div",43)(101,"div",24)(102,"h5",44),d(103,"\u0625\u062C\u0631\u0627\u0621\u0627\u062A \u0633\u0631\u064A\u0639\u0629"),l(),s(104,"div",45)(105,"div",46)(106,"button",47),T("click",function(){b(e);let r=h();return C(r.navigateToTrips())}),x(107,"i",48),s(108,"span",49),d(109,"\u0625\u0636\u0627\u0641\u0629 \u0646\u0642\u0644 \u062C\u062F\u064A\u062F"),l()()(),s(110,"div",46)(111,"button",50),T("click",function(){b(e);let r=h();return C(r.navigateToVehicleMap())}),x(112,"i",51),s(113,"span",49),d(114,"\u062E\u0631\u064A\u0637\u0629 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A"),l()()(),s(115,"div",46)(116,"button",52),T("click",function(){b(e);let r=h();return C(r.navigateToDrivers())}),x(117,"i",53),s(118,"span",49),d(119,"\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0633\u0627\u0626\u0642\u064A\u0646"),l()()()()()(),s(120,"div",54)(121,"div",55)(122,"h5",56),d(123,"\u0627\u0644\u0631\u062D\u0644\u0627\u062A \u0627\u0644\u0623\u062E\u064A\u0631\u0629"),l(),s(124,"a",57),d(125,"\u0639\u0631\u0636 \u0627\u0644\u0643\u0644"),l()(),s(126,"div",58),H(127,Oy,3,0,"div",59)(128,Ly,5,0,"div",60),l()()(),s(129,"div",61)(130,"div",62)(131,"div",24)(132,"h6",63),d(133,"\u062A\u0648\u0632\u064A\u0639 \u0627\u0644\u0625\u064A\u0631\u0627\u062F\u0627\u062A"),l(),s(134,"div",64)(135,"span",65),x(136,"i",66),d(137,"\u062D\u0635\u0629 \u0627\u0644\u0633\u0627\u0626\u0642\u064A\u0646"),l(),s(138,"span",67),d(139),gt(140,"number"),l()(),s(141,"div",64)(142,"span",65),x(143,"i",68),d(144,"\u062D\u0635\u0629 \u0627\u0644\u0645\u0633\u0639\u0641\u064A\u0646"),l(),s(145,"span",67),d(146),gt(147,"number"),l()(),s(148,"div",64)(149,"span",65),x(150,"i",69),d(151,"\u062D\u0635\u0629 \u0627\u0644\u0634\u0631\u0643\u0629"),l(),s(152,"span",70),d(153),gt(154,"number"),l()(),s(155,"div",71)(156,"span",72),x(157,"i",73),d(158,"\u062D\u0635\u0629 \u0627\u0644\u0645\u0627\u0644\u0643"),l(),s(159,"span",74),d(160),gt(161,"number"),l()()()(),s(162,"div",62)(163,"div",24)(164,"h6",63),d(165,"\u0635\u0627\u0641\u064A \u0627\u0644\u0645\u0633\u062A\u062D\u0642\u0627\u062A"),l(),H(166,Ry,7,4,"div",64)(167,Ny,7,4,"div",64)(168,Vy,6,0,"div",64)(169,By,7,4,"div",75)(170,Uy,7,4,"div",75)(171,Wy,6,0,"div",75),l()(),s(172,"div",62)(173,"div",24)(174,"h6",76),d(175,"\u0645\u0644\u062E\u0635 \u0627\u0644\u0648\u0642\u0648\u062F"),l(),s(176,"div",77)(177,"div",78)(178,"div",79)(179,"small",80),d(180,"\u0639\u062F\u062F \u0627\u0644\u062A\u0639\u0628\u0626\u0627\u062A"),l(),s(181,"span",49),d(182),l()()(),s(183,"div",78)(184,"div",79)(185,"small",80),d(186,"\u0627\u0644\u0643\u0645\u064A\u0629 (\u0644\u062A\u0631)"),l(),s(187,"span",49),d(188),gt(189,"number"),l()()()()()(),s(190,"div",81)(191,"div",24)(192,"h6",76),d(193,"\u062D\u0627\u0644\u0629 \u0627\u0644\u0635\u064A\u0627\u0646\u0629"),l(),x(194,"div",82),s(195,"div",83)(196,"span",84),d(197,"\u0645\u0643\u062A\u0645\u0644\u0629"),l(),s(198,"span",49),d(199),l()(),s(200,"div",85)(201,"span",86),d(202,"\u0642\u064A\u062F \u0627\u0644\u062A\u0646\u0641\u064A\u0630"),l(),s(203,"span",49),d(204),l()(),s(205,"div",87)(206,"div",75)(207,"span",88),d(208,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u062A\u0643\u0644\u0641\u0629"),l(),s(209,"span",89),d(210),gt(211,"number"),l()()()()()()()}if(i&2){let e,n=h();m(8),z(n.dashboardStats().trips.today),m(10),q(" ",n.dashboardStats().drivers.available," "),m(2),q("/ ",n.dashboardStats().drivers.total,""),m(10),q("\u20AA",Bt(31,26,n.dashboardStats().financial.totalRevenue,"1.0-0"),""),m(11),q("\u20AA",Bt(42,29,n.dashboardStats().fuel.totalCost,"1.0-0"),""),m(14),q("\u20AA",Bt(56,32,n.dashboardStats().financial.companyBalance,"1.0-2"),""),m(2),le(n.dashboardStats().financial.companyDebtToOwner>0?57:-1),m(10),q("\u20AA",Bt(68,35,n.dashboardStats().financial.ownerBalance,"1.0-2"),""),m(9),z(n.dashboardStats().trips.thisMonth),m(7),vt("",n.dashboardStats().vehicles.available," / ",n.dashboardStats().vehicles.total,""),m(7),z(n.dashboardStats().pendingTrips.total),m(7),z(n.dashboardStats().maintenance.scheduled),m(27),S("routerLink",Ei(56,w1)),m(3),le(!((e=n.dashboardStats())==null||e.recentTrips==null)&&e.recentTrips.length?127:128),m(12),q("\u20AA",Bt(140,38,n.dashboardStats().financial.totalDriverShare,"1.0-0"),""),m(7),q("\u20AA",Bt(147,41,n.dashboardStats().financial.totalParamedicShare,"1.0-0"),""),m(7),q("\u20AA",Bt(154,44,n.dashboardStats().financial.totalCompanyShare,"1.0-0"),""),m(7),q("\u20AA",Bt(161,47,n.dashboardStats().financial.totalOwnerShare,"1.0-0"),""),m(6),le(n.dashboardStats().financial.netDriverPosition>0?166:n.dashboardStats().financial.netDriverPosition<0?167:168),m(3),le(n.dashboardStats().financial.netParamedicPosition>0?169:n.dashboardStats().financial.netParamedicPosition<0?170:171),m(13),z(n.dashboardStats().fuel.recordsCount),m(6),z(Bt(189,50,n.dashboardStats().fuel.totalAmount,"1.0-0")),m(11),z(n.dashboardStats().maintenance.completed),m(5),z(n.dashboardStats().maintenance.inProgress),m(6),q("\u20AA",Bt(211,53,n.dashboardStats().maintenance.totalCost,"1.0-0"),"")}}var Nu=class i{constructor(t,e,n,r,a){this.dashboardService=t;this.toastService=e;this.globalVars=n;this.router=r;this.authService=a;this.globalVars.setGlobalHeader("\u0644\u0648\u062D\u0629 \u0627\u0644\u062A\u062D\u0643\u0645")}isLoading=Z(!1);dashboardStats=Z(null);ngOnInit(){this.loadDashboardData()}loadDashboardData(){this.isLoading.set(!0),this.dashboardService.getDashboardStats().subscribe({next:t=>{this.dashboardStats.set(t),this.isLoading.set(!1)},error:t=>{console.error("Error loading dashboard stats:",t),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0625\u062D\u0635\u0627\u0626\u064A\u0627\u062A \u0644\u0648\u062D\u0629 \u0627\u0644\u062A\u062D\u0643\u0645"),this.isLoading.set(!1)}})}navigateToTrips(){this.router.navigate(["/admin/trips"])}navigateToDrivers(){this.router.navigate(["/admin/drivers-list"])}navigateToVehicleMap(){this.router.navigate(["/admin/vehicle-map"])}switchToDriverView(){this.router.navigate(["/user/driver-dashboard"])}getRecentTripIcon(t){switch(t){case"\u062A\u0645 \u0627\u0644\u0646\u0642\u0644":return"fa-check";case"\u064A\u0646\u0642\u0644":return"fa-clock";case"\u0628\u0644\u0627\u063A \u0643\u0627\u0630\u0628":case"\u0631\u0641\u0636 \u0627\u0644\u0646\u0642\u0644":return"fa-times";default:return"fa-ambulance"}}getRecentTripColor(t){switch(t){case"\u062A\u0645 \u0627\u0644\u0646\u0642\u0644":return"#28A745";case"\u064A\u0646\u0642\u0644":return"#FFC107";case"\u0628\u0644\u0627\u063A \u0643\u0627\u0630\u0628":case"\u0631\u0641\u0636 \u0627\u0644\u0646\u0642\u0644":return"#DC3545";default:return"#6C757D"}}formatTripDate(t){let e=new Date(t),r=new Date().getTime()-e.getTime(),a=Math.floor(r/6e4),u=Math.floor(r/36e5),p=Math.floor(r/864e5);return a<1?"\u0627\u0644\u0622\u0646":a<60?`\u0645\u0646\u0630 ${a} \u062F\u0642\u064A\u0642\u0629`:u<24?`\u0645\u0646\u0630 ${u} \u0633\u0627\u0639\u0629`:`\u0645\u0646\u0630 ${p} \u064A\u0648\u0645`}static \u0275fac=function(e){return new(e||i)(G(Ru),G(Ye),G(ft),G(Xe),G(Pt))};static \u0275cmp=Oe({type:i,selectors:[["app-admin-dashboard"]],decls:4,vars:2,consts:[["dir","rtl",1,"container-fluid","bg-light","min-vh-100","font-inter"],[1,"container","py-4"],[1,"d-flex","justify-content-center","align-items-center",2,"min-height","400px"],["role","status",1,"spinner-border","text-primary",2,"width","3rem","height","3rem"],[1,"visually-hidden"],[1,"row","g-3","mb-4"],[1,"col-12","col-sm-6","col-xl-3"],[1,"card","border-0","shadow-sm","rounded-4","h-100","stat-card"],[1,"card-body","p-4","d-flex","align-items-center","justify-content-between"],[1,"text-muted","small","fw-bold","text-uppercase","mb-2"],[1,"fw-bolder","text-dark","mb-0","display-6"],[1,"icon-box","bg-primary-subtle","text-primary","rounded-circle"],[1,"fa-solid","fa-route","fs-4"],[1,"fs-6","text-muted"],[1,"icon-box","bg-info-subtle","text-info","rounded-circle"],[1,"fa-solid","fa-id-card","fs-4"],[1,"fw-bolder","text-success","mb-0","display-6"],[1,"icon-box","bg-success-subtle","text-success","rounded-circle"],[1,"fa-solid","fa-sack-dollar","fs-4"],[1,"fw-bolder","text-danger","mb-0","display-6"],[1,"icon-box","bg-danger-subtle","text-danger","rounded-circle"],[1,"fa-solid","fa-gas-pump","fs-4"],[1,"col-12","col-sm-6"],[1,"card","border-0","shadow-sm","rounded-4","h-100","stat-card","border-success"],[1,"card-body","p-4"],[1,"d-flex","align-items-center","justify-content-between","mb-3"],[1,"text-muted","fw-bold","mb-0"],[1,"fa-solid","fa-building","fs-5"],[1,"fw-bolder","text-success","mb-2"],[1,"text-danger"],[1,"card","border-0","shadow-sm","rounded-4","h-100","stat-card","border-info"],[1,"fa-solid","fa-user-tie","fs-5"],[1,"fw-bolder","text-info","mb-0"],[1,"col-6","col-md-3"],[1,"card","border-0","shadow-sm","rounded-4","p-3","h-100","border-start-custom","border-primary"],[1,"d-flex","flex-column"],[1,"text-muted","small","fw-bold"],[1,"h3","fw-bold","mt-2","mb-0"],[1,"card","border-0","shadow-sm","rounded-4","p-3","h-100","border-start-custom","border-info"],[1,"card","border-0","shadow-sm","rounded-4","p-3","h-100","border-start-custom","border-warning"],[1,"card","border-0","shadow-sm","rounded-4","p-3","h-100","border-start-custom","border-secondary"],[1,"row","g-4"],[1,"col-lg-8"],[1,"card","border-0","shadow-sm","rounded-4","mb-4"],[1,"fw-bold","mb-3"],[1,"row","g-3"],[1,"col-md-4"],[1,"btn","w-100","p-3","rounded-3","shadow-sm","d-flex","align-items-center","justify-content-center","gap-2","action-btn","green-c",3,"click"],[1,"fa-solid","fa-plus-circle","fs-5"],[1,"fw-bold"],[1,"btn","text-white","w-100","p-3","rounded-3","shadow-sm","d-flex","align-items-center","justify-content-center","gap-2","action-btn","blue-c",3,"click"],[1,"fa-solid","fa-map-location-dot","fs-5"],[1,"btn","w-100","p-3","rounded-3","shadow-sm","d-flex","align-items-center","justify-content-center","gap-2","action-btn","yellow-c",3,"click"],[1,"fa-solid","fa-users","fs-5"],[1,"card","border-0","shadow-sm","rounded-4","overflow-hidden"],[1,"card-header","bg-white","border-0","p-4","pb-0","d-flex","justify-content-between","align-items-center"],[1,"fw-bold","mb-0"],[1,"text-decoration-none","small","fw-bold",3,"routerLink"],[1,"card-body","p-0"],[1,"list-group","list-group-flush"],[1,"text-center","py-5","text-muted"],[1,"col-lg-4"],[1,"card","border-0","shadow-sm","rounded-4","mb-3"],[1,"text-uppercase","text-muted","fw-bold","small","mb-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3","pb-3","border-bottom","border-light"],[1,"text-secondary"],[1,"fa-solid","fa-user-tie","ms-2","opacity-50"],[1,"fw-bold","font-monospace"],[1,"fa-solid","fa-user-nurse","ms-2","opacity-50"],[1,"fa-solid","fa-building","ms-2","opacity-50"],[1,"fw-bold","font-monospace","text-success"],[1,"d-flex","justify-content-between","align-items-center","p-3","bg-info-subtle","rounded-3"],[1,"text-info","fw-bold"],[1,"fa-solid","fa-user-tie","ms-2"],[1,"fw-bolder","text-info","h5","mb-0"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-uppercase","text-muted","fw-bold","small","mb-3"],[1,"row","g-2","text-center"],[1,"col-6"],[1,"p-2","bg-light","rounded-3"],[1,"d-block","text-muted","mb-1"],[1,"card","border-0","shadow-sm","rounded-4"],[1,"progress-stacked","mb-3",2,"height","10px"],[1,"d-flex","justify-content-between","mb-2"],[1,"badge","bg-success","bg-opacity-10","text-success","border","border-success","border-opacity-10"],[1,"d-flex","justify-content-between","mb-3"],[1,"badge","bg-warning","bg-opacity-10","text-warning","border","border-warning","border-opacity-10"],[1,"pt-2","border-top"],[1,"small","text-muted"],[1,"text-danger","fw-bold"],[1,"fa-solid","fa-exclamation-triangle","me-1"],[1,"list-group-item","border-0","border-bottom","py-3","px-4","list-group-item-action","d-flex","align-items-center","gap-3",2,"cursor","pointer",3,"routerLink"],[1,"rounded-circle","d-flex","align-items-center","justify-content-center","flex-shrink-0"],[1,"flex-grow-1"],[1,"d-flex","justify-content-between","align-items-start","mb-1"],[1,"fw-bold","mb-0","text-dark"],[1,"badge","rounded-pill","fw-normal"],[1,"d-flex","align-items-center","text-muted","small"],[1,"fa-solid","fa-location-dot","me-1","ms-1","text-primary-subtle"],[1,"me-3"],[1,"fa-regular","fa-id-badge","me-1","ms-1","text-primary-subtle"],[1,"text-end","ps-2","border-end"],[1,"text-muted","fw-bold","d-block","w-100",2,"min-width","80px"],[1,"mb-3"],[1,"fas","fa-inbox","fa-3x","opacity-25"],[1,"mb-0","fw-medium"],[1,"fa-solid","fa-hand-holding-dollar","ms-2"],[1,"fw-bold","font-monospace","text-danger"],[1,"text-success"],[1,"fa-solid","fa-money-bill-transfer","ms-2"],[1,"text-muted"],[1,"fa-solid","fa-check-circle","ms-2"],[1,"fw-bold","font-monospace","text-muted"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1),H(2,Py,4,0,"div",2)(3,jy,212,57),l()()),e&2&&(m(2),le(n.isLoading()?2:-1),m(),le(n.dashboardStats()?3:-1))},dependencies:[Le,wn,Aa],styles:[".font-inter[_ngcontent-%COMP%]{font-family:Inter,system-ui,-apple-system,sans-serif}.min-vh-100[_ngcontent-%COMP%]{background-color:#f7f9fc!important}.card[_ngcontent-%COMP%]{transition:transform .3s cubic-bezier(.25,.46,.45,.94),box-shadow .3s cubic-bezier(.25,.46,.45,.94);border:none!important;border-radius:1.25rem!important;background-color:#fff;box-shadow:0 4px 12px #0000000a,0 2px 4px #00000005}.stat-card[_ngcontent-%COMP%]{height:100%}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-7px);box-shadow:0 10px 30px #00000014,0 4px 10px #0000000a!important}.card-body[_ngcontent-%COMP%]   p.mb-2[_ngcontent-%COMP%]{font-size:.8rem;letter-spacing:.05em;font-weight:600;color:#6c757d!important}.card-body[_ngcontent-%COMP%]   h2.display-6[_ngcontent-%COMP%]{font-size:2.25rem;font-weight:800}.icon-box[_ngcontent-%COMP%]{width:64px;height:64px;display:flex;align-items:center;justify-content:center;border-radius:50%!important;transition:all .3s ease;flex-shrink:0}.bg-primary-subtle[_ngcontent-%COMP%]{background-color:#e0f2ff!important}.bg-info-subtle[_ngcontent-%COMP%]{background-color:#e2f7ff!important}.bg-success-subtle[_ngcontent-%COMP%]{background-color:#d1f7e0!important}.bg-danger-subtle[_ngcontent-%COMP%]{background-color:#ffeaea!important}.green-c[_ngcontent-%COMP%]{background-color:#10b981!important;color:#fff!important;transition:background-color .3s ease}.green-c[_ngcontent-%COMP%]:hover{background-color:#0c946a!important;color:#fff!important}.blue-c[_ngcontent-%COMP%]{background-color:#0d6efd!important;color:#fff!important;transition:background-color .3s ease}.blue-c[_ngcontent-%COMP%]:hover{background-color:#0a58bd!important;color:#fff!important}.yellow-c[_ngcontent-%COMP%]{background-color:#f9a200!important;color:#fff!important;transition:background-color .3s ease}.yellow-c[_ngcontent-%COMP%]:hover{background-color:#e0a800!important;color:#fff!important}.border-start-custom[_ngcontent-%COMP%]   .small[_ngcontent-%COMP%]{font-weight:600!important;color:#495057!important}.border-start-custom[_ngcontent-%COMP%]   .h3[_ngcontent-%COMP%]{font-weight:800!important;margin-top:.5rem!important}.action-btn[_ngcontent-%COMP%]{transition:all .3s ease;font-size:1rem;font-weight:700;border-radius:.75rem!important;box-shadow:0 2px 8px #0000000d}.action-btn[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 6px 16px #0000001a!important}.action-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.list-group-item[_ngcontent-%COMP%]{border-right:none!important;border-left:none!important;border-color:#e9ecef!important;padding:1rem 1.5rem!important}.list-group-item[_ngcontent-%COMP%]:first-child{border-top:none!important}.list-group-item[_ngcontent-%COMP%]:last-child{border-bottom:none!important}.list-group-item-action[_ngcontent-%COMP%]:hover{background-color:#f0f3f8!important}.p-3.bg-success-subtle.rounded-3[_ngcontent-%COMP%]{padding:1rem!important;border-radius:.75rem!important;background-color:#d1f7e0!important}.badge[_ngcontent-%COMP%]{font-size:.85rem;padding:.4em .8em}h5.fw-bold[_ngcontent-%COMP%], h6.fw-bold[_ngcontent-%COMP%]{color:#212529}.text-muted.small.fw-bold[_ngcontent-%COMP%]{color:#adb5bd!important}@media (max-width: 768px){.display-6[_ngcontent-%COMP%]{font-size:1.75rem!important}.icon-box[_ngcontent-%COMP%]{width:50px;height:50px}.icon-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem!important}.border-start-custom[_ngcontent-%COMP%]{padding:1rem!important}.action-btn[_ngcontent-%COMP%]{padding:.8rem!important;font-size:.9rem}}"]})};var D1=(()=>{class i{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,n){this._renderer=e,this._elementRef=n}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(n){return new(n||i)(G(sr),G(or))};static \u0275dir=zt({type:i})}return i})(),ns=(()=>{class i extends D1{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Hn(i)))(r||i)}})();static \u0275dir=zt({type:i,features:[hn]})}return i})(),ao=new Tt(""),Hy={provide:ao,useExisting:jn(()=>Xn),multi:!0},Xn=(()=>{class i extends ns{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Hn(i)))(r||i)}})();static \u0275dir=zt({type:i,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(n,r){n&1&&T("change",function(u){return r.onChange(u.target.checked)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Gn([Hy]),hn]})}return i})(),zy={provide:ao,useExisting:jn(()=>et),multi:!0};function Gy(){let i=lr()?lr().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var $y=new Tt(""),et=(()=>{class i extends D1{_compositionMode;_composing=!1;constructor(e,n,r){super(e,n),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!Gy())}writeValue(e){let n=e??"";this.setProperty("value",n)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(n){return new(n||i)(G(sr),G(or),G($y,8))};static \u0275dir=zt({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){n&1&&T("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},standalone:!1,features:[Gn([zy]),hn]})}return i})();function I1(i){return i==null||Zy(i)===0}function Zy(i){return i==null?null:Array.isArray(i)||typeof i=="string"?i.length:i instanceof Set?i.size:null}var rs=new Tt(""),O1=new Tt("");function qy(i){return t=>{if(t.value==null||i==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e<i?{min:{min:i,actual:t.value}}:null}}function Yy(i){return t=>{if(t.value==null||i==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e>i?{max:{max:i,actual:t.value}}:null}}function Xy(i){return I1(i.value)?{required:!0}:null}function Ky(i){if(!i)return mf;let t,e;return typeof i=="string"?(e="",i.charAt(0)!=="^"&&(e+="^"),e+=i,i.charAt(i.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=i.toString(),t=i),n=>{if(I1(n.value))return null;let r=n.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function mf(i){return null}function L1(i){return i!=null}function R1(i){return Ro(i)?an(i):i}function N1(i){let t={};return i.forEach(e=>{t=e!=null?ve(ve({},t),e):t}),Object.keys(t).length===0?null:t}function V1(i,t){return t.map(e=>e(i))}function Jy(i){return!i.validate}function B1(i){return i.map(t=>Jy(t)?t:e=>t.validate(e))}function Qy(i){if(!i)return null;let t=i.filter(L1);return t.length==0?null:function(e){return N1(V1(e,t))}}function gf(i){return i!=null?Qy(B1(i)):null}function eb(i){if(!i)return null;let t=i.filter(L1);return t.length==0?null:function(e){let n=V1(e,t).map(R1);return rh(n).pipe(Be(N1))}}function _f(i){return i!=null?eb(B1(i)):null}function S1(i,t){return i===null?[t]:Array.isArray(i)?[...i,t]:[i,t]}function tb(i){return i._rawValidators}function ib(i){return i._rawAsyncValidators}function ff(i){return i?Array.isArray(i)?i:[i]:[]}function Bu(i,t){return Array.isArray(i)?i.includes(t):i===t}function T1(i,t){let e=ff(t);return ff(i).forEach(r=>{Bu(e,r)||e.push(r)}),e}function E1(i,t){return ff(t).filter(e=>!Bu(i,e))}var Uu=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=gf(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=_f(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},ts=class extends Uu{name;get formDirective(){return null}get path(){return null}},is=class extends Uu{_parent=null;name=null;valueAccessor=null},Wu=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},nb={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},_N=Qe(ve({},nb),{"[class.ng-submitted]":"isSubmitted"}),ot=(()=>{class i extends Wu{constructor(e){super(e)}static \u0275fac=function(n){return new(n||i)(G(is,2))};static \u0275dir=zt({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){n&2&&fe("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[hn]})}return i})(),Xt=(()=>{class i extends Wu{constructor(e){super(e)}static \u0275fac=function(n){return new(n||i)(G(ts,10))};static \u0275dir=zt({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,r){n&2&&fe("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[hn]})}return i})();var Ul="VALID",Vu="INVALID",Qo="PENDING",Wl="DISABLED",Ma=class{},ju=class extends Ma{value;source;constructor(t,e){super(),this.value=t,this.source=e}},Hl=class extends Ma{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},zl=class extends Ma{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},es=class extends Ma{status;source;constructor(t,e){super(),this.status=t,this.source=e}},pf=class extends Ma{source;constructor(t){super(),this.source=t}},hf=class extends Ma{source;constructor(t){super(),this.source=t}};function U1(i){return(Gu(i)?i.validators:i)||null}function rb(i){return Array.isArray(i)?gf(i):i||null}function W1(i,t){return(Gu(t)?t.asyncValidators:i)||null}function ab(i){return Array.isArray(i)?_f(i):i||null}function Gu(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}function ob(i,t,e){let n=i.controls;if(!(t?Object.keys(n):n).length)throw new Mt(1e3,"");if(!n[e])throw new Mt(1001,"")}function sb(i,t,e){i._forEachChild((n,r)=>{if(e[r]===void 0)throw new Mt(1002,"")})}var Hu=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return yr(this.statusReactive)}set status(t){yr(()=>this.statusReactive.set(t))}_status=We(()=>this.statusReactive());statusReactive=Z(void 0);get valid(){return this.status===Ul}get invalid(){return this.status===Vu}get pending(){return this.status==Qo}get disabled(){return this.status===Wl}get enabled(){return this.status!==Wl}errors;get pristine(){return yr(this.pristineReactive)}set pristine(t){yr(()=>this.pristineReactive.set(t))}_pristine=We(()=>this.pristineReactive());pristineReactive=Z(!0);get dirty(){return!this.pristine}get touched(){return yr(this.touchedReactive)}set touched(t){yr(()=>this.touchedReactive.set(t))}_touched=We(()=>this.touchedReactive());touchedReactive=Z(!1);get untouched(){return!this.touched}_events=new Vi;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(T1(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(T1(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(E1(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(E1(t,this._rawAsyncValidators))}hasValidator(t){return Bu(this._rawValidators,t)}hasAsyncValidator(t){return Bu(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let n=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(Qe(ve({},t),{sourceControl:n})),e&&t.emitEvent!==!1&&this._events.next(new zl(!0,n))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let n=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:n})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n),e&&t.emitEvent!==!1&&this._events.next(new zl(!1,n))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let n=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(Qe(ve({},t),{sourceControl:n})),e&&t.emitEvent!==!1&&this._events.next(new Hl(!1,n))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let n=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),e&&t.emitEvent!==!1&&this._events.next(new Hl(!0,n))}markAsPending(t={}){this.status=Qo;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new es(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(Qe(ve({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Wl,this.errors=null,this._forEachChild(r=>{r.disable(Qe(ve({},t),{onlySelf:!0}))}),this._updateValue();let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new ju(this.value,n)),this._events.next(new es(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Qe(ve({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Ul,this._forEachChild(n=>{n.enable(Qe(ve({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Qe(ve({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ul||this.status===Qo)&&this._runAsyncValidator(n,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new ju(this.value,e)),this._events.next(new es(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(Qe(ve({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Wl:Ul}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=Qo,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let n=R1(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((n,r)=>n&&n._find(r),this)}getError(t,e){let n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,n){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||n)&&this._events.next(new es(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,n)}_initObservables(){this.valueChanges=new di,this.statusChanges=new di}_calculateStatus(){return this._allControlsDisabled()?Wl:this.errors?Vu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Qo)?Qo:this._anyControlsHaveStatus(Vu)?Vu:Ul}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let n=!this._anyControlsDirty(),r=this.pristine!==n;this.pristine=n,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new Hl(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new zl(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Gu(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=rb(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=ab(this._rawAsyncValidators)}},zu=class extends Hu{constructor(t,e,n){super(U1(e),W1(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){sb(this,!0,t),Object.keys(t).forEach(n=>{ob(this,!0,n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(n=>{let r=this.controls[n];r&&r.patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,n)=>n._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,n]of Object.entries(this.controls))if(this.contains(e)&&t(n))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,n,r)=>((n.enabled||this.disabled)&&(e[r]=n.value),e))}_reduceChildren(t,e){let n=t;return this._forEachChild((r,a)=>{n=e(n,r,a)}),n}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var $u=new Tt("",{providedIn:"root",factory:()=>Zu}),Zu="always";function lb(i,t){return[...t.path,i]}function j1(i,t,e=Zu){H1(i,t),t.valueAccessor.writeValue(i.value),(i.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(i.disabled),cb(i,t),mb(i,t),db(i,t),ub(i,t)}function A1(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function ub(i,t){if(t.valueAccessor.setDisabledState){let e=n=>{t.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}function H1(i,t){let e=tb(i);t.validator!==null?i.setValidators(S1(e,t.validator)):typeof e=="function"&&i.setValidators([e]);let n=ib(i);t.asyncValidator!==null?i.setAsyncValidators(S1(n,t.asyncValidator)):typeof n=="function"&&i.setAsyncValidators([n]);let r=()=>i.updateValueAndValidity();A1(t._rawValidators,r),A1(t._rawAsyncValidators,r)}function cb(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&z1(i,t)})}function db(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&z1(i,t),i.updateOn!=="submit"&&i.markAsTouched()})}function z1(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function mb(i,t){let e=(n,r)=>{t.valueAccessor.writeValue(n),r&&t.viewToModelUpdate(n)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}function fb(i,t){i==null,H1(i,t)}function pb(i,t){if(!i.hasOwnProperty("model"))return!1;let e=i.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function hb(i){return Object.getPrototypeOf(i.constructor)===ns}function gb(i,t){i._syncPendingControls(),t.forEach(e=>{let n=e.control;n.updateOn==="submit"&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function _b(i,t){if(!t)return null;Array.isArray(t);let e,n,r;return t.forEach(a=>{a.constructor===et?e=a:hb(a)?n=a:r=a}),r||n||e||null}var vb={provide:ts,useExisting:jn(()=>$t)},jl=Promise.resolve(),$t=(()=>{class i extends ts{callSetDisabledState;get submitted(){return yr(this.submittedReactive)}_submitted=We(()=>this.submittedReactive());submittedReactive=Z(!1);_directives=new Set;form;ngSubmit=new di;options;constructor(e,n,r){super(),this.callSetDisabledState=r,this.form=new zu({},gf(e),_f(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){jl.then(()=>{let n=this._findContainer(e.path);e.control=n.registerControl(e.name,e.control),j1(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){jl.then(()=>{let n=this._findContainer(e.path);n&&n.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){jl.then(()=>{let n=this._findContainer(e.path),r=new zu({});fb(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){jl.then(()=>{let n=this._findContainer(e.path);n&&n.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,n){jl.then(()=>{this.form.get(e.path).setValue(n)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),gb(this.form,this._directives),this.ngSubmit.emit(e),this.form._events.next(new pf(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1),this.form._events.next(new hf(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(n){return new(n||i)(G(rs,10),G(O1,10),G($u,8))};static \u0275dir=zt({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,r){n&1&&T("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Gn([vb]),hn]})}return i})();function M1(i,t){let e=i.indexOf(t);e>-1&&i.splice(e,1)}function F1(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var xb=class extends Hu{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,n){super(U1(e),W1(n,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Gu(e)&&(e.nonNullable||e.initialValueIsDefault)&&(F1(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){M1(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){M1(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){F1(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var yb={provide:is,useExisting:jn(()=>rt)},k1=Promise.resolve(),rt=(()=>{class i extends is{_changeDetectorRef;callSetDisabledState;control=new xb;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new di;constructor(e,n,r,a,u,p){super(),this._changeDetectorRef=u,this.callSetDisabledState=p,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=_b(this,a)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),pb(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){j1(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){k1.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let n=e.isDisabled.currentValue,r=n!==0&&Xa(n);k1.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?lb(e,this._parent):[e]}static \u0275fac=function(n){return new(n||i)(G(ts,9),G(rs,10),G(O1,10),G(ao,10),G(ba,8),G($u,8))};static \u0275dir=zt({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Gn([yb]),hn,vr]})}return i})();var Kt=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275dir=zt({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return i})(),bb={provide:ao,useExisting:jn(()=>vi),multi:!0},vi=(()=>{class i extends ns{writeValue(e){let n=e??"";this.setProperty("value",n)}registerOnChange(e){this.onChange=n=>{e(n==""?null:parseFloat(n))}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Hn(i)))(r||i)}})();static \u0275dir=zt({type:i,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(n,r){n&1&&T("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Gn([bb]),hn]})}return i})(),Cb={provide:ao,useExisting:jn(()=>Gl),multi:!0};var wb=(()=>{class i{_accessors=[];add(e,n){this._accessors.push([e,n])}remove(e){for(let n=this._accessors.length-1;n>=0;--n)if(this._accessors[n][1]===e){this._accessors.splice(n,1);return}}select(e){this._accessors.forEach(n=>{this._isSameGroup(n,e)&&n[1]!==e&&n[1].fireUncheck(e.value)})}_isSameGroup(e,n){return e[0].control?e[0]._parent===n._control._parent&&e[1].name===n.name:!1}static \u0275fac=function(n){return new(n||i)};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Gl=(()=>{class i extends ns{_registry;_injector;_state;_control;_fn;setDisabledStateFired=!1;onChange=()=>{};name;formControlName;value;callSetDisabledState=Ne($u,{optional:!0})??Zu;constructor(e,n,r,a){super(e,n),this._registry=r,this._injector=a}ngOnInit(){this._control=this._injector.get(is),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this.setProperty("checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}setDisabledState(e){(this.setDisabledStateFired||e||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",e),this.setDisabledStateFired=!0}fireUncheck(e){this.writeValue(e)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static \u0275fac=function(n){return new(n||i)(G(sr),G(or),G(wb),G(Za))};static \u0275dir=zt({type:i,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(n,r){n&1&&T("change",function(){return r.onChange()})("blur",function(){return r.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},standalone:!1,features:[Gn([Cb]),hn]})}return i})();var Sb={provide:ao,useExisting:jn(()=>At),multi:!0};function G1(i,t){return i==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${i}: ${t}`.slice(0,50))}function Tb(i){return i.split(":")[0]}var At=(()=>{class i extends ns{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let n=this._getOptionId(e),r=G1(n,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=n=>{this.value=this._getOptionValue(n),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n),e))return n;return null}_getOptionValue(e){let n=Tb(e);return this._optionMap.has(n)?this._optionMap.get(n):e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Hn(i)))(r||i)}})();static \u0275dir=zt({type:i,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,r){n&1&&T("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Gn([Sb]),hn]})}return i})(),Ot=(()=>{class i{_element;_renderer;_select;id;constructor(e,n,r){this._element=e,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(G1(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(n){return new(n||i)(G(or),G(sr),G(At,9))};static \u0275dir=zt({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return i})(),Eb={provide:ao,useExisting:jn(()=>$1),multi:!0};function P1(i,t){return i==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${i}: ${t}`.slice(0,50))}function Ab(i){return i.split(":")[0]}var $1=(()=>{class i extends ns{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let n;if(Array.isArray(e)){let r=e.map(a=>this._getOptionId(a));n=(a,u)=>{a._setSelected(r.indexOf(u.toString())>-1)}}else n=(r,a)=>{r._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(e){this.onChange=n=>{let r=[],a=n.selectedOptions;if(a!==void 0){let u=a;for(let p=0;p<u.length;p++){let g=u[p],v=this._getOptionValue(g.value);r.push(v)}}else{let u=n.options;for(let p=0;p<u.length;p++){let g=u[p];if(g.selected){let v=this._getOptionValue(g.value);r.push(v)}}}this.value=r,e(r)}}_registerOption(e){let n=(this._idCounter++).toString();return this._optionMap.set(n,e),n}_getOptionId(e){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n)._value,e))return n;return null}_getOptionValue(e){let n=Ab(e);return this._optionMap.has(n)?this._optionMap.get(n)._value:e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Hn(i)))(r||i)}})();static \u0275dir=zt({type:i,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,r){n&1&&T("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Gn([Eb]),hn]})}return i})(),Lt=(()=>{class i{_element;_renderer;_select;id;_value;constructor(e,n,r){this._element=e,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(P1(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(P1(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(n){return new(n||i)(G(or),G(sr),G($1,9))};static \u0275dir=zt({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return i})();function Z1(i){return typeof i=="number"?i:parseFloat(i)}var qu=(()=>{class i{_validator=mf;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let n=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):mf,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(n){return new(n||i)};static \u0275dir=zt({type:i,features:[vr]})}return i})(),Mb={provide:rs,useExisting:jn(()=>aa),multi:!0},aa=(()=>{class i extends qu{max;inputName="max";normalizeInput=e=>Z1(e);createValidator=e=>Yy(e);static \u0275fac=(()=>{let e;return function(r){return(e||(e=Hn(i)))(r||i)}})();static \u0275dir=zt({type:i,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(n,r){n&2&&Pn("max",r._enabled?r.max:null)},inputs:{max:"max"},standalone:!1,features:[Gn([Mb]),hn]})}return i})(),Fb={provide:rs,useExisting:jn(()=>xi),multi:!0},xi=(()=>{class i extends qu{min;inputName="min";normalizeInput=e=>Z1(e);createValidator=e=>qy(e);static \u0275fac=(()=>{let e;return function(r){return(e||(e=Hn(i)))(r||i)}})();static \u0275dir=zt({type:i,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(n,r){n&2&&Pn("min",r._enabled?r.min:null)},inputs:{min:"min"},standalone:!1,features:[Gn([Fb]),hn]})}return i})(),kb={provide:rs,useExisting:jn(()=>Zt),multi:!0};var Zt=(()=>{class i extends qu{required;inputName="required";normalizeInput=Xa;createValidator=e=>Xy;enabled(e){return e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Hn(i)))(r||i)}})();static \u0275dir=zt({type:i,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(n,r){n&2&&Pn("required",r._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Gn([kb]),hn]})}return i})();var Pb={provide:rs,useExisting:jn(()=>vf),multi:!0},vf=(()=>{class i extends qu{pattern;inputName="pattern";normalizeInput=e=>e;createValidator=e=>Ky(e);static \u0275fac=(()=>{let e;return function(r){return(e||(e=Hn(i)))(r||i)}})();static \u0275dir=zt({type:i,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(n,r){n&2&&Pn("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},standalone:!1,features:[Gn([Pb]),hn]})}return i})();var Db=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=ta({type:i});static \u0275inj=Qr({})}return i})();var tt=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:$u,useValue:e.callSetDisabledState??Zu}]}}static \u0275fac=function(n){return new(n||i)};static \u0275mod=ta({type:i});static \u0275inj=Qr({imports:[Db]})}return i})();function Ib(i,t){if(i&1){let e=Q();s(0,"button",12),T("click",function(){b(e);let r=h();return C(r.goToPage(1))}),d(1," 1 "),l(),s(2,"span",13),d(3,"..."),l()}}function Ob(i,t){if(i&1){let e=Q();s(0,"button",12),T("click",function(){let r=b(e).$implicit,a=h();return C(a.goToPage(r))}),d(1),l()}if(i&2){let e=t.$implicit,n=h();fe("active",e===n.currentPageValue),m(),q(" ",e," ")}}function Lb(i,t){if(i&1){let e=Q();s(0,"span",13),d(1,"..."),l(),s(2,"button",12),T("click",function(){b(e);let r=h();return C(r.goToPage(r.totalPages()))}),d(3),l()}if(i&2){let e=h();m(3),q(" ",e.totalPages()," ")}}var Mi=class i{set currentPage(t){this._currentPage.set(t)}set totalItems(t){this._totalItems.set(t)}set itemsPerPage(t){this._itemsPerPage.set(t)}maxVisiblePages=5;pageChange=new di;itemsPerPageChange=new di;_currentPage=Z(1);_totalItems=Z(0);_itemsPerPage=Z(10);totalPages=We(()=>Math.ceil(this._totalItems()/this._itemsPerPage())||1);visiblePages=We(()=>{let t=this._currentPage(),e=this.totalPages(),n=this.maxVisiblePages,r=[];if(e<=n)for(let a=1;a<=e;a++)r.push(a);else{let a=Math.floor(n/2),u=Math.max(1,t-a),p=Math.min(e,u+n-1);p-u<n-1&&(u=Math.max(1,p-n+1));for(let g=u;g<=p;g++)r.push(g)}return r});showFirstPage=We(()=>this._currentPage()>Math.floor(this.maxVisiblePages/2)+1&&this.totalPages()>this.maxVisiblePages);showLastPage=We(()=>{let t=this._currentPage(),e=this.totalPages();return t<e-Math.floor(this.maxVisiblePages/2)&&e>this.maxVisiblePages});canGoPrevious=We(()=>this._currentPage()>1);canGoNext=We(()=>this._currentPage()<this.totalPages());startItem=We(()=>(this._currentPage()-1)*this._itemsPerPage()+1);endItem=We(()=>Math.min(this._currentPage()*this._itemsPerPage(),this._totalItems()));goToPage(t){t>=1&&t<=this.totalPages()&&t!==this._currentPage()&&(this._currentPage.set(t),this.pageChange.emit(t))}nextPage(){this.canGoNext()&&this.goToPage(this._currentPage()+1)}previousPage(){this.canGoPrevious()&&this.goToPage(this._currentPage()-1)}firstPage(){this.goToPage(1)}lastPage(){this.goToPage(this.totalPages())}changeItemsPerPage(t){this._itemsPerPage.set(t),this._currentPage.set(1),this.itemsPerPageChange.emit(t),this.pageChange.emit(1)}get currentPageValue(){return this._currentPage()}get totalItemsValue(){return this._totalItems()}get itemsPerPageValue(){return this._itemsPerPage()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Oe({type:i,selectors:[["app-pagination"]],inputs:{currentPage:"currentPage",totalItems:"totalItems",itemsPerPage:"itemsPerPage",maxVisiblePages:"maxVisiblePages"},outputs:{pageChange:"pageChange",itemsPerPageChange:"itemsPerPageChange"},decls:31,vars:15,consts:[[1,"pagination-container"],[1,"pagination-info"],[1,"pagination-controls"],["type","button","title","\u0627\u0644\u0635\u0641\u062D\u0629 \u0627\u0644\u0623\u0648\u0644\u0649",1,"pagination-btn",3,"click","disabled"],["type","button","title","\u0627\u0644\u0633\u0627\u0628\u0642",1,"pagination-btn",3,"click","disabled"],["type","button",1,"pagination-btn",3,"active"],["type","button","title","\u0627\u0644\u062A\u0627\u0644\u064A",1,"pagination-btn",3,"click","disabled"],["type","button","title","\u0627\u0644\u0635\u0641\u062D\u0629 \u0627\u0644\u0623\u062E\u064A\u0631\u0629",1,"pagination-btn",3,"click","disabled"],[1,"pagination-size"],["for","itemsPerPage"],["id","itemsPerPage",1,"pagination-select",3,"change","value"],[3,"value"],["type","button",1,"pagination-btn",3,"click"],[1,"pagination-ellipsis"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"span"),d(3),l()(),s(4,"div",2)(5,"button",3),T("click",function(){return n.firstPage()}),d(6," \xAB "),l(),s(7,"button",4),T("click",function(){return n.previousPage()}),d(8," \u2039 "),l(),H(9,Ib,4,0),Te(10,Ob,2,3,"button",5,pt),H(12,Lb,4,1),s(13,"button",6),T("click",function(){return n.nextPage()}),d(14," \u203A "),l(),s(15,"button",7),T("click",function(){return n.lastPage()}),d(16," \xBB "),l()(),s(17,"div",8)(18,"label",9),d(19,"\u0639\u062F\u062F \u0627\u0644\u0639\u0646\u0627\u0635\u0631:"),l(),s(20,"select",10),T("change",function(a){return n.changeItemsPerPage(+a.target.value)}),s(21,"option",11),d(22,"5"),l(),s(23,"option",11),d(24,"10"),l(),s(25,"option",11),d(26,"20"),l(),s(27,"option",11),d(28,"50"),l(),s(29,"option",11),d(30,"100"),l()()()()),e&2&&(m(3),ya(" \u0639\u0631\u0636 ",n.startItem()," - ",n.endItem()," \u0645\u0646 ",n.totalItemsValue," \u0639\u0646\u0635\u0631 "),m(2),S("disabled",!n.canGoPrevious()),m(2),S("disabled",!n.canGoPrevious()),m(2),le(n.showFirstPage()?9:-1),m(),Ee(n.visiblePages()),m(2),le(n.showLastPage()?12:-1),m(),S("disabled",!n.canGoNext()),m(2),S("disabled",!n.canGoNext()),m(5),S("value",n.itemsPerPageValue),m(),S("value",5),m(2),S("value",10),m(2),S("value",20),m(2),S("value",50),m(2),S("value",100))},dependencies:[Le],styles:[".pagination-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:20px;padding:15px 0;flex-wrap:wrap}.pagination-info[_ngcontent-%COMP%]{color:#666;font-size:14px}.pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.pagination-btn[_ngcontent-%COMP%]{min-width:36px;height:36px;padding:0 12px;border:1px solid #dee2e6;background-color:#fff;color:#495057;border-radius:4px;cursor:pointer;transition:all .2s;font-size:14px;font-weight:500}.pagination-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#e9ecef;border-color:#adb5bd}.pagination-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;background-color:#f8f9fa}.pagination-btn.active[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border-color:#007bff}.pagination-btn.active[_ngcontent-%COMP%]:hover{background-color:#0056b3;border-color:#0056b3}.pagination-ellipsis[_ngcontent-%COMP%]{padding:0 8px;color:#6c757d}.pagination-size[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-size:14px}.pagination-size[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#666;white-space:nowrap}.pagination-select[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid #dee2e6;border-radius:4px;background-color:#fff;color:#495057;cursor:pointer;font-size:14px;min-width:70px}.pagination-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}@media (max-width: 768px){.pagination-container[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.pagination-info[_ngcontent-%COMP%], .pagination-size[_ngcontent-%COMP%]{justify-content:center;text-align:center}.pagination-controls[_ngcontent-%COMP%]{justify-content:center;flex-wrap:wrap}.pagination-btn[_ngcontent-%COMP%]{min-width:32px;height:32px;padding:0 8px;font-size:13px}}[dir=rtl][_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]{direction:rtl}"]})};var Fa={FIELD:"\u0645\u064A\u062F\u0627\u0646\u064A",COMPLETED:"\u062A\u0645 \u0627\u0644\u0646\u0642\u0644",FALSE_REPORT:"\u0628\u0644\u0627\u063A \u0643\u0627\u0630\u0628",IN_TRANSFER:"\u064A\u0646\u0642\u0644",NOT_COMPLETED:"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0646\u0642\u0644",MAINTENANCE:"\u0635\u064A\u0627\u0646\u0629",REFUSED:"\u0631\u0641\u0636 \u0627\u0644\u0646\u0642\u0644",OTHER:"\u0627\u062E\u0631\u0649"},Rb={[Fa.COMPLETED]:"#28A745",[Fa.FIELD]:"#17A2B8",[Fa.IN_TRANSFER]:"#FFC107",[Fa.FALSE_REPORT]:"#DC3545",[Fa.NOT_COMPLETED]:"#DC3545",[Fa.REFUSED]:"#DC3545",[Fa.MAINTENANCE]:"#6C757D",[Fa.OTHER]:"#6C757D"},oo={AVAILABLE:"\u0645\u062A\u0627\u062D\u0629",ON_WAY_TO_PATIENT:"\u0641\u064A \u0627\u0644\u0637\u0631\u064A\u0642 \u0644\u0644\u0645\u0631\u064A\u0636",AT_LOCATION:"\u0641\u064A \u0627\u0644\u0645\u0648\u0642\u0639",ON_WAY_TO_HOSPITAL:"\u0641\u064A \u0627\u0644\u0637\u0631\u064A\u0642 \u0644\u0644\u0645\u0633\u062A\u0634\u0641\u0649",AT_DESTINATION:"\u0641\u064A \u0627\u0644\u0648\u062C\u0647\u0629",OUT_OF_SERVICE:"\u062E\u0627\u0631\u062C \u0627\u0644\u062E\u062F\u0645\u0629",END_SERVICE:"\u0625\u0646\u0647\u0627\u0621 \u0627\u0644\u062E\u062F\u0645\u0629"},Nb={[oo.AVAILABLE]:"#28A745",[oo.ON_WAY_TO_PATIENT]:"#FFC107",[oo.AT_LOCATION]:"#17A2B8",[oo.ON_WAY_TO_HOSPITAL]:"#007BFF",[oo.AT_DESTINATION]:"#6F42C1",[oo.OUT_OF_SERVICE]:"#DC3545",[oo.END_SERVICE]:"#6C757D"},xf={AVAILABLE:"\u0645\u062A\u0627\u062D",ON_TRIP:"\u0641\u064A \u0631\u062D\u0644\u0629",OFFLINE:"\u063A\u064A\u0631 \u0645\u062A\u0635\u0644"},Vb={[xf.AVAILABLE]:"#10B981",[xf.ON_TRIP]:"#3B82F6",[xf.OFFLINE]:"#6B7280"},Yu={AVAILABLE:"\u0645\u062A\u0627\u062D\u0629",ON_TRIP:"\u0641\u064A \u0631\u062D\u0644\u0629",OFFLINE:"\u063A\u064A\u0631 \u0645\u062A\u0635\u0644",ON_LEAVE:"\u0641\u064A \u0625\u062C\u0627\u0632\u0629"},Bb={[Yu.AVAILABLE]:"#10B981",[Yu.ON_TRIP]:"#3B82F6",[Yu.OFFLINE]:"#6B7280",[Yu.ON_LEAVE]:"#F59E0B"},yf={COMPLETED:"\u0645\u0643\u062A\u0645\u0644\u0629",SCHEDULED:"\u0645\u062C\u062F\u0648\u0644\u0629",IN_PROGRESS:"\u0642\u064A\u062F \u0627\u0644\u062A\u0646\u0641\u064A\u0630"},Ub={[yf.COMPLETED]:"#34C759",[yf.SCHEDULED]:"#007AFF",[yf.IN_PROGRESS]:"#FF9500"},bf={COMPLETED:"\u0645\u0643\u062A\u0645\u0644",PENDING:"\u0645\u0639\u0644\u0642",FAILED:"\u0641\u0627\u0634\u0644"},AN={[bf.COMPLETED]:"bg-success",[bf.PENDING]:"bg-warning",[bf.FAILED]:"bg-danger"};var Cf={NORMAL:"\u0639\u0627\u062F\u064A",URGENT:"\u0639\u0627\u062C\u0644",EMERGENCY:"\u0637\u0627\u0631\u0626"},MN={[Cf.NORMAL]:"bg-secondary",[Cf.URGENT]:"bg-warning",[Cf.EMERGENCY]:"bg-danger"};function q1(i,t){switch(t){case"transfer":return Rb[i]||"#6C757D";case"vehicle":return Nb[i]||"#6C757D";case"driver":return Vb[i]||"#6B7280";case"paramedic":return Bb[i]||"#6B7280";case"maintenance":return Ub[i]||"#6C757D";default:return"#6C757D"}}var Wr=class i{set status(t){this._status.set(t)}set type(t){this._type.set(t)}size="medium";_status=Z("");_type=Z("transfer");statusColor=We(()=>q1(this._status(),this._type()));get statusValue(){return this._status()}get sizeClass(){return`badge-${this.size}`}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Oe({type:i,selectors:[["app-status-badge"]],inputs:{status:"status",type:"type",size:"size"},decls:2,vars:5,consts:[[1,"status-badge"]],template:function(e,n){e&1&&(s(0,"span",0),d(1),l()),e&2&&(gn(n.sizeClass),dt("background-color",n.statusColor()),m(),q(" ",n.statusValue,`
`))},dependencies:[Le],styles:[".status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:12px;color:#fff;font-weight:500;text-align:center;white-space:nowrap;transition:all .2s}.badge-small[_ngcontent-%COMP%]{font-size:11px;padding:2px 8px;border-radius:8px}.badge-medium[_ngcontent-%COMP%]{font-size:13px;padding:4px 12px;border-radius:12px}.badge-large[_ngcontent-%COMP%]{font-size:15px;padding:6px 16px;border-radius:16px}.status-badge[_ngcontent-%COMP%]:hover{opacity:.9;transform:translateY(-1px);box-shadow:0 2px 4px #0000001a}"]})};function Wb(i,t){if(i&1){let e=Q();x(0,"div",0),s(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),d(6),l(),s(7,"button",6),T("click",function(){b(e);let r=h();return C(r.onCancel())}),x(8,"i",7),l()(),s(9,"div",8),x(10,"p",9),s(11,"div",10)(12,"button",11),T("click",function(){b(e);let r=h();return C(r.onCancel())}),d(13),l(),s(14,"button",12),T("click",function(){b(e);let r=h();return C(r.onConfirm())}),d(15),l()()()()()()}if(i&2){let e=h();m(4),S("ngClass",e.getHeaderClass()),m(2),z(e.config().title),m(),dt("color",e.config().type==="warning"?"black":"white"),m(3),S("innerHTML",e.getMessageWithHighlight(),vh),m(3),z(e.config().cancelButtonText),m(),S("ngClass",e.getConfirmButtonClass()),m(),z(e.config().confirmButtonText)}}var Wi=class i{isOpen=xa.required();config=xa.required();confirmed=Lo();cancelled=Lo();onConfirm(){this.confirmed.emit()}onCancel(){this.cancelled.emit()}getHeaderClass(){switch(this.config().type){case"delete":return"bg-danger text-white";case"warning":return"bg-warning text-dark";case"info":return"bg-info text-white";case"success":return"bg-success text-white";default:return"bg-secondary text-white"}}getConfirmButtonClass(){switch(this.config().type){case"delete":return"btn-danger";case"warning":return"btn-warning";case"info":return"btn-info";case"success":return"btn-success";default:return"btn-secondary"}}getHighlightClass(){switch(this.config().type){case"delete":return"fw-bold text-danger";case"warning":return"fw-bold text-warning";case"info":return"fw-bold text-info";case"success":return"fw-bold text-success";default:return"fw-bold"}}getMessageWithHighlight(){let t=this.config();if(t.highlightedText){let e=this.getHighlightClass();return t.message.replace(t.highlightedText,`<span class="${e}">${t.highlightedText}</span>`)}return t.message}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Oe({type:i,selectors:[["app-confirmation-modal"]],inputs:{isOpen:[1,"isOpen"],config:[1,"config"]},outputs:{confirmed:"confirmed",cancelled:"cancelled"},decls:1,vars:1,consts:[[1,"modal-backdrop","fade","show"],["tabindex","-1","role","dialog",1,"modal","fade","show","d-block"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","rounded-xl","shadow-lg","border-0"],[1,"modal-header","rounded-top-xl","border-0","justify-content-between",3,"ngClass"],[1,"modal-title","fw-bold"],["type","button",2,"background-color","transparent","border","none",3,"click"],[1,"fa-solid","fa-xmark",2,"font-size","20px"],[1,"modal-body","text-end","p-4"],[1,"mb-4",3,"innerHTML"],[1,"d-flex","justify-content-end","gap-2"],["type","button",1,"btn","btn-outline-secondary","rounded-pill","px-4",3,"click"],["type","button",1,"btn","rounded-pill","px-4",3,"click","ngClass"]],template:function(e,n){e&1&&H(0,Wb,16,8),e&2&&le(n.isOpen()?0:-1)},dependencies:[Le,Ft],styles:["[_nghost-%COMP%]{font-family:Inter,sans-serif;direction:rtl}.rounded-xl[_ngcontent-%COMP%]{border-radius:.75rem!important}.rounded-top-xl[_ngcontent-%COMP%]{border-top-left-radius:.75rem!important;border-top-right-radius:.75rem!important}.modal[_ngcontent-%COMP%]{background-color:#00000080;--bs-modal-zindex: 9999 !important}.modal-dialog[_ngcontent-%COMP%]{max-width:90%;margin:1.75rem auto}@media (min-width: 576px){.modal-dialog[_ngcontent-%COMP%]{max-width:500px}}"],changeDetection:0})};var cr=class i{isValidEmail(t){return t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t):!1}isValidUsername(t){return t?/^[a-zA-Z0-9_-]{3,20}$/.test(t):!1}isValidPassword(t){return t&&t.length>=6}isValidPhone(t){return t?/^05\d{8}$/.test(t):!1}isValidArabicName(t){return t?/^[\u0600-\u06FF\s0-9]+$/.test(t.trim())&&t.trim().length>=2:!1}isValidEnglishName(t){return t?/^[a-zA-Z\s0-9]+$/.test(t.trim())&&t.trim().length>=2:!0}isPositiveNumber(t){return t!=null&&t>0}isNonNegativeNumber(t){return t!=null&&t>=0}isInRange(t,e,n){return t==null?!1:t>=e&&t<=n}isValidLength(t,e,n){if(!t)return!1;let r=t.trim().length;return r>=e&&r<=n}isRequired(t){return t==null?!1:typeof t=="string"?t.trim().length>0:typeof t=="number"||typeof t=="boolean"}validateDriver(t){let e=[];return this.isRequired(t.arabicName)?this.isValidArabicName(t.arabicName)||e.push("\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064A \u064A\u062C\u0628 \u0623\u0646 \u064A\u062D\u062A\u0648\u064A \u0639\u0644\u0649 \u0623\u062D\u0631\u0641 \u0639\u0631\u0628\u064A\u0629 \u0641\u0642\u0637"):e.push("\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064A \u0645\u0637\u0644\u0648\u0628"),this.isValidEnglishName(t.name)||e.push("\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0625\u0646\u062C\u0644\u064A\u0632\u064A \u064A\u062C\u0628 \u0623\u0646 \u064A\u062D\u062A\u0648\u064A \u0639\u0644\u0649 \u0623\u062D\u0631\u0641 \u0625\u0646\u062C\u0644\u064A\u0632\u064A\u0629 \u0641\u0642\u0637"),!t.username&&!t.email&&e.push("\u064A\u062C\u0628 \u0625\u062F\u062E\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u0623\u0648 \u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"),t.username&&!this.isValidUsername(t.username)&&e.push("\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u063A\u064A\u0631 \u0635\u0627\u0644\u062D (3-20 \u062D\u0631\u0641\u060C \u0623\u062D\u0631\u0641 \u0648\u0623\u0631\u0642\u0627\u0645 \u0641\u0642\u0637)"),t.email&&!this.isValidEmail(t.email)&&e.push("\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A \u063A\u064A\u0631 \u0635\u0627\u0644\u062D"),t.password&&!this.isValidPassword(t.password)&&e.push("\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u064A\u062C\u0628 \u0623\u0646 \u062A\u0643\u0648\u0646 6 \u0623\u062D\u0631\u0641 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644"),t.phoneNumber&&!this.isValidPhone(t.phoneNumber)&&e.push("\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641 \u063A\u064A\u0631 \u0635\u0627\u0644\u062D (\u064A\u062C\u0628 \u0623\u0646 \u064A\u0628\u062F\u0623 \u0628\u0640 05)"),t.tripsToday!==void 0&&!this.isNonNegativeNumber(t.tripsToday)&&e.push("\u0639\u062F\u062F \u0627\u0644\u0631\u062D\u0644\u0627\u062A \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0631\u0642\u0645 \u0645\u0648\u062C\u0628 \u0623\u0648 \u0635\u0641\u0631"),{valid:e.length===0,errors:e}}validateTrip(t){let e=[];return this.isRequired(t.from)||e.push("\u0645\u0648\u0642\u0639 \u0627\u0644\u0627\u0646\u0637\u0644\u0627\u0642 \u0645\u0637\u0644\u0648\u0628"),this.isRequired(t.to)||e.push("\u0645\u0648\u0642\u0639 \u0627\u0644\u0648\u0635\u0648\u0644 \u0645\u0637\u0644\u0648\u0628"),this.isRequired(t.driverId)||e.push("\u064A\u062C\u0628 \u0627\u062E\u062A\u064A\u0627\u0631 \u0633\u0627\u0626\u0642"),this.isRequired(t.ambulanceId)||e.push("\u064A\u062C\u0628 \u0627\u062E\u062A\u064A\u0627\u0631 \u0633\u064A\u0627\u0631\u0629 \u0625\u0633\u0639\u0627\u0641"),t.distance&&!this.isPositiveNumber(t.distance)&&e.push("\u0627\u0644\u0645\u0633\u0627\u0641\u0629 \u064A\u062C\u0628 \u0623\u0646 \u062A\u0643\u0648\u0646 \u0631\u0642\u0645 \u0645\u0648\u062C\u0628"),t.cost!==void 0&&!this.isNonNegativeNumber(t.cost)&&e.push("\u0627\u0644\u062A\u0643\u0644\u0641\u0629 \u064A\u062C\u0628 \u0623\u0646 \u062A\u0643\u0648\u0646 \u0631\u0642\u0645 \u0645\u0648\u062C\u0628 \u0623\u0648 \u0635\u0641\u0631"),{valid:e.length===0,errors:e}}validateFuelRecord(t){let e=[];return this.isRequired(t.ambulanceId)||e.push("\u064A\u062C\u0628 \u0627\u062E\u062A\u064A\u0627\u0631 \u0633\u064A\u0627\u0631\u0629 \u0625\u0633\u0639\u0627\u0641"),this.isPositiveNumber(t.liters)||e.push("\u0643\u0645\u064A\u0629 \u0627\u0644\u0648\u0642\u0648\u062F \u064A\u062C\u0628 \u0623\u0646 \u062A\u0643\u0648\u0646 \u0631\u0642\u0645 \u0645\u0648\u062C\u0628"),this.isPositiveNumber(t.cost)||e.push("\u0627\u0644\u062A\u0643\u0644\u0641\u0629 \u064A\u062C\u0628 \u0623\u0646 \u062A\u0643\u0648\u0646 \u0631\u0642\u0645 \u0645\u0648\u062C\u0628"),t.mileage!==void 0&&!this.isNonNegativeNumber(t.mileage)&&e.push("\u0639\u062F\u0627\u062F \u0627\u0644\u0643\u064A\u0644\u0648\u0645\u062A\u0631\u0627\u062A \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0631\u0642\u0645 \u0645\u0648\u062C\u0628 \u0623\u0648 \u0635\u0641\u0631"),{valid:e.length===0,errors:e}}validateMaintenanceRecord(t){let e=[];return this.isRequired(t.ambulanceId)||e.push("\u064A\u062C\u0628 \u0627\u062E\u062A\u064A\u0627\u0631 \u0633\u064A\u0627\u0631\u0629 \u0625\u0633\u0639\u0627\u0641"),this.isRequired(t.type)||e.push("\u0646\u0648\u0639 \u0627\u0644\u0635\u064A\u0627\u0646\u0629 \u0645\u0637\u0644\u0648\u0628"),this.isPositiveNumber(t.cost)||e.push("\u0627\u0644\u062A\u0643\u0644\u0641\u0629 \u064A\u062C\u0628 \u0623\u0646 \u062A\u0643\u0648\u0646 \u0631\u0642\u0645 \u0645\u0648\u062C\u0628"),this.isRequired(t.date)||(console.log(t.date,"<<"),e.push("\u0627\u0644\u062A\u0627\u0631\u064A\u062E \u0645\u0637\u0644\u0648\u0628")),{valid:e.length===0,errors:e}}validateWithdrawal(t,e){let n=[];return this.isPositiveNumber(t)?t>e&&n.push("\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0645\u0637\u0644\u0648\u0628 \u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0631\u0635\u064A\u062F \u0627\u0644\u0645\u062A\u0627\u062D"):n.push("\u0627\u0644\u0645\u0628\u0644\u063A \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0631\u0642\u0645 \u0645\u0648\u062C\u0628"),{valid:n.length===0,errors:n}}validateBalanceReduction(t,e){let n=[],r=[];if(t>e&&!(e<=0)){let a=t-e;r.push(`\u062A\u062D\u0630\u064A\u0631: \u0647\u0630\u0627 \u0627\u0644\u062F\u0641\u0639 (${t} \u20AA) \u064A\u062A\u062C\u0627\u0648\u0632 \u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0645\u0633\u062A\u062D\u0642 (${e} \u20AA). \u0633\u064A\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 \u062F\u064A\u0646 \u0628\u0645\u0628\u0644\u063A ${a} \u20AA`)}return{valid:n.length===0,errors:n,warnings:r}}static \u0275fac=function(e){return new(e||i)};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})};function Nt(i){let t=new Ki;return i&&Object.keys(i).forEach(e=>{let n=i[e];n!=null&&n!==""&&n!=="all"&&n!=="All"&&(t=t.set(e,n.toString()))}),t}var Ci=class i{constructor(t){this.http=t}API_URL=`${xt.apiEndpoint}/drivers`;injectedVars=Ne(ft);getDrivers(t){let e=Nt(t);return this.http.get(this.API_URL,{params:e})}getDriverById(t){return this.http.get(`${this.API_URL}/${t}`)}createDriver(t){return this.http.post(this.API_URL,t)}updateDriver(t,e){return this.http.put(`${this.API_URL}/${t}`,e)}deleteDriver(t){return this.http.delete(`${this.API_URL}/${t}`)}updateStatus(t,e){return this.http.patch(`${this.API_URL}/${t}/status`,{status:e})}activateDriver(t){return this.http.patch(`${this.API_URL}/${t}/activate`,{})}deactivateDriver(t){return this.http.patch(`${this.API_URL}/${t}/deactivate`,{})}recordPayment(t,e,n){return this.http.patch(`${this.API_URL}/${t}/record-payment`,{amount:e,description:n})}recordExpense(t,e,n){return this.http.patch(`${this.API_URL}/${t}/record-expense`,{amount:e,description:n})}reduceBalance(t,e){return this.http.patch(`${this.API_URL}/${t}/reduce-balance`,{amount:e})}clearBalance(t,e){return this.http.patch(`${this.API_URL}/${t}/clear-balance`,{description:e})}getDriverTrips(t,e){let n=Nt(e);return this.http.get(`${this.API_URL}/${t}/trips`,{params:n})}getDriverEarnings(t){return this.http.get(`${this.API_URL}/${t}/earnings`)}getDriverByUserId(t){return this.http.get(`${this.API_URL}/user/${t}`)}getCurrentDriver(){return this.http.get(`${this.API_URL}/me`).pipe(gi(t=>{t.profileImageUrl=t.profileImageUrl!==void 0?t.profileImageUrl:t.profile_image_url,this.injectedVars.setCurrentIMG(t.profileImageUrl||"/assets/default-avatar.png")}))}getAllDrivers(){return this.http.get(`${this.API_URL}?limit=1000`)}static \u0275fac=function(e){return new(e||i)(Ue(It))};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})};var jb=(i,t)=>({"btn-success":i,"btn-secondary":t}),Hb=(i,t)=>({"d-block":i,"d-none":t,"d-lg-block":!0}),zb=i=>({"opacity-75":i}),Gb=(i,t)=>t.id,$b=(i,t)=>t.value;function Zb(i,t){if(i&1){let e=Q();x(0,"div",29),s(1,"div",30)(2,"div",31)(3,"div",32)(4,"div",33)(5,"h5",34),d(6,"\u062A\u0633\u062C\u064A\u0644 \u062F\u0641\u0639 \u0645\u0646 \u0627\u0644\u0633\u0627\u0626\u0642"),l(),s(7,"button",35),T("click",function(){b(e);let r=h();return C(r.closePaymentModal())}),l()(),s(8,"div",36)(9,"p",13),d(10,"\u0627\u0644\u0633\u0627\u0626\u0642: "),s(11,"strong"),d(12),l()(),s(13,"div",13)(14,"label",37),d(15,"\u0627\u0644\u0645\u0628\u0644\u063A (\u20AA)"),l(),s(16,"input",38),T("ngModelChange",function(r){b(e);let a=h();return C(a.paymentAmount.set(r))}),l()(),s(17,"div",39),x(18,"i",40),d(19," \u0633\u064A\u062A\u0645 \u062E\u0635\u0645 \u0647\u0630\u0627 \u0627\u0644\u0645\u0628\u0644\u063A \u0645\u0646 \u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0645\u0633\u062A\u062D\u0642 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0626\u0642 "),l()(),s(20,"div",41)(21,"button",42),T("click",function(){b(e);let r=h();return C(r.closePaymentModal())}),d(22,"\u0625\u0644\u063A\u0627\u0621"),l(),s(23,"button",43),T("click",function(){b(e);let r=h();return C(r.confirmRecordPayment())}),x(24,"i",44),d(25," \u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062F\u0641\u0639 "),l()()()()()}if(i&2){let e=h();m(12),z(e.driverForPayment().arabicName),m(4),S("ngModel",e.paymentAmount()),m(7),S("disabled",!e.paymentAmount()||e.paymentAmount()<=0)}}function qb(i,t){if(i&1){let e=Q();x(0,"div",29),s(1,"div",30)(2,"div",31)(3,"div",32)(4,"div",45)(5,"h5",34),d(6,"\u0635\u0631\u0641 \u0645\u0628\u0644\u063A \u0644\u0644\u0633\u0627\u0626\u0642"),l(),s(7,"button",35),T("click",function(){b(e);let r=h();return C(r.closeExpenseModal())}),l()(),s(8,"div",36)(9,"p",13),d(10,"\u0627\u0644\u0633\u0627\u0626\u0642: "),s(11,"strong"),d(12),l()(),s(13,"div",13)(14,"label",46),d(15,"\u0627\u0644\u0645\u0628\u0644\u063A (\u20AA)"),l(),s(16,"input",47),T("ngModelChange",function(r){b(e);let a=h();return C(a.expenseAmount.set(r))}),l()(),s(17,"div",13)(18,"label",48),d(19," \u0627\u0644\u0648\u0635\u0641 "),s(20,"span",49),d(21,"*"),l()(),s(22,"input",50),T("ngModelChange",function(r){b(e);let a=h();return C(a.expenseDescription.set(r))}),l()(),s(23,"div",51),x(24,"i",52),d(25," \u0633\u064A\u062A\u0645 \u0635\u0631\u0641 \u0647\u0630\u0627 \u0627\u0644\u0645\u0628\u0644\u063A \u0645\u0646 \u0627\u0644\u0634\u0631\u0643\u0629 \u0644\u0644\u0633\u0627\u0626\u0642 \u0648\u062E\u0635\u0645\u0647 \u0645\u0646 \u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0645\u0633\u062A\u062D\u0642 \u0644\u0647 "),l()(),s(26,"div",41)(27,"button",42),T("click",function(){b(e);let r=h();return C(r.closeExpenseModal())}),d(28,"\u0625\u0644\u063A\u0627\u0621"),l(),s(29,"button",53),T("click",function(){b(e);let r=h();return C(r.confirmRecordExpense())}),x(30,"i",44),d(31," \u062A\u0623\u0643\u064A\u062F \u0627\u0644\u0635\u0631\u0641 "),l()()()()()}if(i&2){let e=h();m(12),z(e.driverForExpense().arabicName),m(4),S("ngModel",e.expenseAmount()),m(6),S("ngModel",e.expenseDescription()),m(7),S("disabled",!e.expenseAmount()||e.expenseAmount()<=0||!e.expenseDescription()||e.expenseDescription().trim()==="")}}function Yb(i,t){if(i&1){let e=Q();x(0,"div",29),s(1,"div",30)(2,"div",54)(3,"div",32)(4,"div",55)(5,"h5",56),d(6,"\u0625\u0636\u0627\u0641\u0629 \u0633\u0627\u0626\u0642 \u062C\u062F\u064A\u062F"),l(),s(7,"button",57),T("click",function(){b(e);let r=h();return C(r.isAddModalOpen.set(!1))}),x(8,"i",58),l()(),s(9,"div",59)(10,"form",60),T("ngSubmit",function(){b(e);let r=h();return C(r.addNewDriver())}),s(11,"div",61)(12,"div",62)(13,"h6",63),d(14,"\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629"),l()(),s(15,"div",64)(16,"label",65),d(17,"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0639\u0631\u0628\u064A \u0644\u0644\u0633\u0627\u0626\u0642 "),s(18,"span",49),d(19,"*"),l()(),s(20,"input",66),V("ngModelChange",function(r){b(e);let a=h();return N(a.newDriver.arabicName,r)||(a.newDriver.arabicName=r),C(r)}),l()(),s(21,"div",64)(22,"label",67),d(23,"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0625\u0646\u062C\u0644\u064A\u0632\u064A"),l(),s(24,"input",68),V("ngModelChange",function(r){b(e);let a=h();return N(a.newDriver.name,r)||(a.newDriver.name=r),C(r)}),l()(),s(25,"div",69)(26,"h6",63),d(27,"\u0628\u064A\u0627\u0646\u0627\u062A \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644"),l(),s(28,"small",70),x(29,"i",40),d(30," \u064A\u062C\u0628 \u0625\u062F\u062E\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u0623\u0648 \u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A (\u0623\u0648 \u0643\u0644\u064A\u0647\u0645\u0627) "),l()(),s(31,"div",64)(32,"label",71),d(33,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645"),l(),s(34,"input",72),V("ngModelChange",function(r){b(e);let a=h();return N(a.newDriver.username,r)||(a.newDriver.username=r),C(r)}),l()(),s(35,"div",64)(36,"label",73),d(37,"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"),l(),s(38,"input",74),V("ngModelChange",function(r){b(e);let a=h();return N(a.newDriver.email,r)||(a.newDriver.email=r),C(r)}),l()(),s(39,"div",62)(40,"label",75),d(41,"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u0623\u0648\u0644\u064A\u0629 "),s(42,"span",49),d(43,"*"),l()(),s(44,"input",76),V("ngModelChange",function(r){b(e);let a=h();return N(a.newDriver.password,r)||(a.newDriver.password=r),C(r)}),l()()(),s(45,"div",77)(46,"button",78),d(47," \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0633\u0627\u0626\u0642 "),l()()()()()()()}if(i&2){let e=h();m(20),R("ngModel",e.newDriver.arabicName),m(4),R("ngModel",e.newDriver.name),m(10),R("ngModel",e.newDriver.username),m(4),R("ngModel",e.newDriver.email),m(6),R("ngModel",e.newDriver.password),m(2),S("disabled",!e.isAddFormValid())}}function Xb(i,t){if(i&1){let e=Q();x(0,"img",126),s(1,"button",127),T("click",function(){b(e);let r=h(2);return C(r.removeProfileImage())}),x(2,"i",128),l()}if(i&2){let e=h(2);S("src",e.editDriver.profileImageUrl,Lr)}}function Kb(i,t){i&1&&(s(0,"div",95),x(1,"i",129),l())}function Jb(i,t){if(i&1&&(s(0,"option",105),d(1),l()),i&2){let e=t.$implicit;S("value",e.value),m(),z(e.label)}}function Qb(i,t){if(i&1&&(s(0,"option",105),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function eC(i,t){i&1&&(x(0,"i",130),d(1," \u0627\u0644\u062D\u0633\u0627\u0628 \u0646\u0634\u0637 - \u064A\u0645\u0643\u0646 \u0644\u0644\u0633\u0627\u0626\u0642 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644 "))}function tC(i,t){i&1&&(x(0,"i",131),d(1," \u0627\u0644\u062D\u0633\u0627\u0628 \u0645\u0639\u0637\u0644 - \u0644\u0627 \u064A\u0645\u0643\u0646 \u0644\u0644\u0633\u0627\u0626\u0642 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644 "))}function iC(i,t){if(i&1){let e=Q();x(0,"div",79),s(1,"div",80)(2,"div",54)(3,"div",32)(4,"div",81)(5,"h5",82),d(6,"\u062A\u0639\u062F\u064A\u0644 \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0633\u0627\u0626\u0642"),l(),s(7,"button",83),T("click",function(){b(e);let r=h();return C(r.closeEditModal())}),x(8,"i",58),l()(),s(9,"div",59)(10,"form",60),T("ngSubmit",function(){b(e);let r=h();return C(r.saveEditDriver())}),s(11,"div",61)(12,"div",62)(13,"h6",63),d(14,"\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629"),l()(),s(15,"div",64)(16,"label",84),d(17,"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0639\u0631\u0628\u064A \u0644\u0644\u0633\u0627\u0626\u0642 "),s(18,"span",49),d(19,"*"),l()(),s(20,"input",85),V("ngModelChange",function(r){b(e);let a=h();return N(a.editDriver.arabicName,r)||(a.editDriver.arabicName=r),C(r)}),l()(),s(21,"div",64)(22,"label",86),d(23,"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0625\u0646\u062C\u0644\u064A\u0632\u064A"),l(),s(24,"input",87),V("ngModelChange",function(r){b(e);let a=h();return N(a.editDriver.name,r)||(a.editDriver.name=r),C(r)}),l()(),s(25,"div",69)(26,"h6",63),d(27,"\u0628\u064A\u0627\u0646\u0627\u062A \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644"),l(),s(28,"small",70),x(29,"i",40),d(30," \u064A\u062C\u0628 \u0625\u062F\u062E\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u0623\u0648 \u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A (\u0623\u0648 \u0643\u0644\u064A\u0647\u0645\u0627) "),l()(),s(31,"div",64)(32,"label",88),d(33,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645"),l(),s(34,"input",89),V("ngModelChange",function(r){b(e);let a=h();return N(a.editDriver.username,r)||(a.editDriver.username=r),C(r)}),l()(),s(35,"div",64)(36,"label",90),d(37,"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"),l(),s(38,"input",91),V("ngModelChange",function(r){b(e);let a=h();return N(a.editDriver.email,r)||(a.editDriver.email=r),C(r)}),l()(),s(39,"div",69)(40,"h6",63),d(41,"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0648\u0638\u064A\u0641\u0629 \u0648\u0627\u0644\u0645\u0644\u0641 \u0627\u0644\u0634\u062E\u0635\u064A"),l()(),s(42,"div",62)(43,"label",92),d(44,"\u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0634\u062E\u0635\u064A\u0629"),l(),s(45,"div",93)(46,"div",94),H(47,Xb,3,1)(48,Kb,2,0,"div",95),l(),s(49,"div")(50,"input",96,0),T("change",function(r){b(e);let a=h();return C(a.onProfileImageSelected(r))}),l(),s(52,"button",97),T("click",function(){b(e);let r=Rr(51);return C(r.click())}),x(53,"i",98),d(54),l(),s(55,"small",99),d(56,"\u0627\u0644\u062D\u062F \u0627\u0644\u0623\u0642\u0635\u0649: 2 \u0645\u064A\u062C\u0627\u0628\u0627\u064A\u062A"),l()()()(),s(57,"div",64)(58,"label",100),d(59,"\u0627\u0644\u0648\u0638\u064A\u0641\u0629"),l(),s(60,"input",101),V("ngModelChange",function(r){b(e);let a=h();return N(a.editDriver.jobTitle,r)||(a.editDriver.jobTitle=r),C(r)}),l()(),s(61,"div",64)(62,"label",102),d(63,"\u0627\u0644\u0645\u0633\u062A\u0648\u0649 \u0627\u0644\u062A\u0639\u0644\u064A\u0645\u064A"),l(),s(64,"select",103),V("ngModelChange",function(r){b(e);let a=h();return N(a.editDriver.educationLevel,r)||(a.editDriver.educationLevel=r),C(r)}),s(65,"option",104),d(66,"-- \u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0633\u062A\u0648\u0649 --"),l(),Te(67,Jb,2,2,"option",105,$b),l()(),s(69,"div",64)(70,"label",106),d(71,"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641"),l(),s(72,"input",107),V("ngModelChange",function(r){b(e);let a=h();return N(a.editDriver.phoneNumber,r)||(a.editDriver.phoneNumber=r),C(r)}),l()(),s(73,"div",69)(74,"h6",63),d(75,"\u062D\u0627\u0644\u0629 \u0627\u0644\u0633\u0627\u0626\u0642"),l()(),s(76,"div",64)(77,"label",108),d(78,"\u062D\u0627\u0644\u0629 \u0627\u0644\u0633\u0627\u0626\u0642"),l(),s(79,"select",109),V("ngModelChange",function(r){b(e);let a=h();return N(a.editDriver.arabicStatus,r)||(a.editDriver.arabicStatus=r),C(r)}),Te(80,Qb,2,2,"option",105,pt),l()(),s(82,"div",64)(83,"label",110),d(84,"\u0639\u062F\u062F \u0627\u0644\u0631\u062D\u0644\u0627\u062A \u0627\u0644\u064A\u0648\u0645"),l(),s(85,"input",111),V("ngModelChange",function(r){b(e);let a=h();return N(a.editDriver.tripsToday,r)||(a.editDriver.tripsToday=r),C(r)}),l(),s(86,"small",99),x(87,"i",40),d(88," \u064A\u062A\u0645 \u062D\u0633\u0627\u0628 \u0647\u0630\u0627 \u0627\u0644\u0631\u0642\u0645 \u062A\u0644\u0642\u0627\u0626\u064A\u0627\u064B \u0645\u0646 \u0627\u0644\u0631\u062D\u0644\u0627\u062A "),l()(),s(89,"div",69)(90,"h6",63),d(91,"\u062D\u0627\u0644\u0629 \u0627\u0644\u062D\u0633\u0627\u0628"),l()(),s(92,"div",62)(93,"div",112)(94,"label",113),d(95," \u0627\u0644\u062D\u0633\u0627\u0628 \u0646\u0634\u0637 (\u064A\u0645\u0643\u0646 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644) "),l(),s(96,"input",114),V("ngModelChange",function(r){b(e);let a=h();return N(a.editDriver.isActive,r)||(a.editDriver.isActive=r),C(r)}),l()(),s(97,"small",115),H(98,eC,2,0)(99,tC,2,0),l()(),s(100,"div",69)(101,"h6",63),d(102,"\u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"),l()(),s(103,"div",62)(104,"label",116),d(105,"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u062C\u062F\u064A\u062F\u0629 (\u0627\u062E\u062A\u064A\u0627\u0631\u064A)"),l(),s(106,"input",117),V("ngModelChange",function(r){b(e);let a=h();return N(a.editDriver.newPassword,r)||(a.editDriver.newPassword=r),C(r)}),l(),s(107,"small",118),x(108,"i",40),d(109," \u064A\u0645\u0643\u0646\u0643 \u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u062F\u0648\u0646 \u0645\u0639\u0631\u0641\u0629 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u0642\u062F\u064A\u0645\u0629 "),l()()(),s(110,"div",119)(111,"div",120)(112,"button",121),x(113,"i",122),d(114," \u062D\u0641\u0638 "),l(),s(115,"button",123),T("click",function(){b(e);let r=h();return C(r.closeEditModal())}),d(116,"\u0625\u0644\u063A\u0627\u0621"),l()(),s(117,"button",124),T("click",function(){b(e);let r=h();return C(r.showDeleteConfirmation(r.driverToEdit()))}),x(118,"i",125),d(119," \u062D\u0630\u0641 "),l()()()()()()()}if(i&2){let e=h();m(20),R("ngModel",e.editDriver.arabicName),m(4),R("ngModel",e.editDriver.name),m(10),R("ngModel",e.editDriver.username),m(4),R("ngModel",e.editDriver.email),m(9),le(e.editDriver.profileImageUrl?47:48),m(7),q(" ",e.editDriver.profileImageUrl?"\u062A\u063A\u064A\u064A\u0631 \u0627\u0644\u0635\u0648\u0631\u0629":"\u0631\u0641\u0639 \u0635\u0648\u0631\u0629"," "),m(6),R("ngModel",e.editDriver.jobTitle),m(4),R("ngModel",e.editDriver.educationLevel),m(3),Ee(e.educationLevelOptions),m(5),R("ngModel",e.editDriver.phoneNumber),m(7),R("ngModel",e.editDriver.arabicStatus),m(),Ee(e.getStatusOptions()),m(5),R("ngModel",e.editDriver.tripsToday),m(11),R("ngModel",e.editDriver.isActive),m(2),le(e.editDriver.isActive?98:99),m(8),R("ngModel",e.editDriver.newPassword),m(6),S("disabled",!e.isEditFormValid())}}function nC(i,t){i&1&&(s(0,"span",138),x(1,"i",157),d(2," \u0645\u0639\u0637\u0644 "),l())}function rC(i,t){if(i&1&&(x(0,"i",158),d(1)),i&2){let e=h(2).$implicit;m(),q("",e.username," ")}}function aC(i,t){if(i&1&&(s(0,"p",146),H(1,rC,2,1),l()),i&2){let e=h().$implicit;m(),le(e.username?1:-1)}}function oC(i,t){if(i&1){let e=Q();s(0,"button",159),T("click",function(){b(e);let r=h().$implicit,a=h();return C(a.recordPayment(r))}),x(1,"i",160),d(2," \u062A\u0633\u062C\u064A\u0644 \u062F\u0641\u0639 \u0645\u0646 \u0627\u0644\u0633\u0627\u0626\u0642 "),l()}}function sC(i,t){if(i&1){let e=Q();s(0,"button",161),T("click",function(){b(e);let r=h().$implicit,a=h();return C(a.recordExpense(r))}),x(1,"i",162),d(2," \u0635\u0631\u0641 \u0644\u0644\u0633\u0627\u0626\u0642 "),l()}}function lC(i,t){i&1&&(s(0,"div",155),x(1,"i",163),d(2," \u2713 \u0645\u062D\u0633\u0648\u0628 "),l())}function uC(i,t){if(i&1){let e=Q();s(0,"button",164),T("click",function(){b(e);let r=h().$implicit,a=h();return C(a.clearIndividualBalance(r))}),x(1,"i",165),d(2," \u062A\u0635\u0641\u064A\u0629 \u0627\u0644\u062D\u0633\u0627\u0628 "),l()}}function cC(i,t){if(i&1){let e=Q();s(0,"div",24)(1,"div",132)(2,"div",133)(3,"button",134),T("click",function(){let r=b(e).$implicit,a=h();return C(a.openEditModal(r))}),x(4,"i",135),l(),s(5,"button",136),T("click",function(){let r=b(e).$implicit,a=h();return C(a.viewTransactionHistory(r))}),x(6,"i",137),l()(),H(7,nC,3,0,"span",138),s(8,"div",139)(9,"div",140),x(10,"img",141),s(11,"div",142)(12,"p",143),d(13),l(),s(14,"div",144),x(15,"app-status-badge",145),l(),H(16,aC,2,1,"p",146),l()(),s(17,"div",147)(18,"div",148)(19,"p",149),d(20,"\u0639\u062F\u062F \u0627\u0644\u0631\u062D\u0644\u0627\u062A \u0627\u0644\u064A\u0648\u0645"),l(),s(21,"p",150),d(22),l()(),s(23,"div",148),Fh(24),s(25,"p",149),d(26),l(),s(27,"p",151),d(28),l()()(),s(29,"div",152),H(30,oC,3,0,"button",153)(31,sC,3,0,"button",154)(32,lC,3,0,"div",155)(33,uC,3,0,"button",156),l()()()()}if(i&2){let e=t.$implicit;m(),S("ngClass",$i(17,zb,!e.isActive)),m(6),le(e.isActive?-1:7),m(3),S("alt",e.imageAlt)("src",e.imageUrl!=="/assets/default-avatar.png"?e.imageUrl:"person-placeholder.jpg",Lr),m(3),z(e.arabicName),m(2),S("status",e.arabicStatus)("type","driver")("size","small"),m(),le(e.email||e.username?16:-1),m(6),z(e.tripsToday);let n=h().getDriverBalanceDisplay(e);m(4),z(n.label),m(),S("ngClass",n.colorClass),m(),q(" \u20AA",n.amount.toFixed(2)," "),m(2),le(n.action==="collect"?30:-1),m(),le(n.action==="pay"?31:-1),m(),le(n.action==="settled"?32:-1),m(),le(n.action!=="settled"?33:-1)}}function dC(i,t){i&1&&(s(0,"div",25),x(1,"i",166),s(2,"p",167),d(3,"\u0644\u0627 \u064A\u0648\u062C\u062F \u0633\u0627\u0626\u0642\u0648\u0646 \u064A\u0637\u0627\u0628\u0642\u0648\u0646 \u0645\u0639\u0627\u064A\u064A\u0631 \u0627\u0644\u062A\u0635\u0641\u064A\u0629 \u0627\u0644\u0645\u062D\u062F\u062F\u0629."),l()())}function mC(i,t){if(i&1){let e=Q();s(0,"div",26)(1,"app-pagination",168),T("pageChange",function(r){b(e);let a=h();return C(a.onPageChange(r))})("itemsPerPageChange",function(r){b(e);let a=h();return C(a.onItemsPerPageChange(r))}),l()()}if(i&2){let e=h();m(),S("currentPage",e.currentPage)("totalItems",e.filteredDrivers().length)("itemsPerPage",e.itemsPerPage)("maxVisiblePages",5)}}var Xu=class i{constructor(t,e,n,r,a,u){this.globalVarsService=t;this.route=e;this.router=n;this.toastService=r;this.validationService=a;this.driverService=u;this.globalVarsService.setGlobalHeader("\u0633\u0627\u0626\u0642\u064A \u0627\u0644\u0625\u0633\u0639\u0627\u0641")}currentPage=1;itemsPerPage=10;totalRecords=0;isLoading=Z(!1);viewUserProfile(t){this.router.navigate(["/admin/profile",t.id])}viewTransactionHistory(t){this.router.navigate(["/admin/transactions",t.id],{queryParams:{type:"driver",name:t.arabicName}})}queryFilterValue=Z(null);showFiltersOnMobile=Z(!1);searchTerm=Z("");filterStatus=Z("all");isAddModalOpen=Z(!1);isEditModalOpen=Z(!1);isDeleteModalOpen=Z(!1);isPaymentModalOpen=Z(!1);isExpenseModalOpen=Z(!1);isClearBalanceModalOpen=Z(!1);driverToEdit=Z(null);driverToDelete=Z(null);driverForPayment=Z(null);driverForExpense=Z(null);driverForClearBalance=Z(null);paymentAmount=Z(0);expenseAmount=Z(0);expenseDescription=Z("");confirmationModalConfig=Z({type:"delete",title:"",message:"",confirmButtonText:"",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621"});newDriver={arabicName:"",name:"",username:"",email:"",password:""};editDriver={arabicName:"",name:"",username:"",email:"",arabicStatus:"\u0645\u062A\u0627\u062D",tripsToday:0,newPassword:"",isActive:!0,jobTitle:"",educationLevel:"",phoneNumber:"",profileImageUrl:""};educationLevelOptions=[{value:"EMI",label:"EMI - \u0637\u0648\u0627\u0631\u0626 \u0637\u0628\u064A\u0629 \u0645\u062A\u0648\u0633\u0637\u0629"},{value:"B",label:"B - \u0623\u0633\u0627\u0633\u064A"},{value:"I",label:"I - \u0645\u062A\u0648\u0633\u0637"},{value:"P",label:"P - \u0645\u0633\u0639\u0641"}];reductionAmounts={};drivers=Z([]);filteredDrivers=We(()=>this.drivers());getPaginatedDrivers(){return this.drivers()}onPageChange(t){this.currentPage=t,this.loadData()}onItemsPerPageChange(t){this.itemsPerPage=t,this.currentPage=1,this.loadData()}loadData(){this.isLoading.set(!0),this.driverService.getDrivers({page:this.currentPage,limit:this.itemsPerPage,search:this.searchTerm()||void 0,status:this.filterStatus()!=="all"?this.filterStatus():void 0}).subscribe({next:t=>{this.drivers.set(t.data),this.totalRecords=t.total,this.isLoading.set(!1)},error:t=>{console.error("Error loading drivers:",t),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0633\u0627\u0626\u0642\u064A\u0646"),this.isLoading.set(!1)}})}addNewDriver(){let t=this.validationService.validateDriver(this.newDriver);if(!t.valid){t.errors.forEach(e=>{this.toastService.error(e)});return}this.driverService.createDriver({arabicName:this.newDriver.arabicName,name:this.newDriver.name,username:this.newDriver.username||void 0,email:this.newDriver.email||void 0,password:this.newDriver.password}).subscribe({next:e=>{this.toastService.success(`\u062A\u0645\u062A \u0625\u0636\u0627\u0641\u0629 \u0633\u0627\u0626\u0642 \u062C\u062F\u064A\u062F: ${e.arabicName} (${e.name})`,3e3),this.isAddModalOpen.set(!1),this.newDriver={arabicName:"",name:"",username:"",email:"",password:""},this.loadData()},error:e=>{console.error("Error creating driver:",e),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0633\u0627\u0626\u0642")}})}openEditModal(t){this.driverToEdit.set(t),this.editDriver={arabicName:t.arabicName,name:t.name,username:t.username||"",email:t.email||"",arabicStatus:t.arabicStatus,tripsToday:t.tripsToday,newPassword:"",isActive:t.isActive,jobTitle:t.jobTitle||"",educationLevel:t.educationLevel||"",phoneNumber:t.phoneNumber||"",profileImageUrl:t.profileImageUrl||""},this.isEditModalOpen.set(!0)}closeEditModal(){this.driverToEdit.set(null),this.isEditModalOpen.set(!1),this.editDriver={arabicName:"",name:"",username:"",email:"",arabicStatus:"\u0645\u062A\u0627\u062D",tripsToday:0,newPassword:"",isActive:!0,jobTitle:"",educationLevel:"",phoneNumber:"",profileImageUrl:""}}saveEditDriver(){let t=this.driverToEdit();if(!t)return;let e=this.validationService.validateDriver(this.editDriver);if(!e.valid){e.errors.forEach(r=>{this.toastService.error(r)});return}let n={arabicName:this.editDriver.arabicName,name:this.editDriver.name,username:this.editDriver.username||void 0,email:this.editDriver.email||void 0,arabicStatus:this.editDriver.arabicStatus,tripsToday:this.editDriver.tripsToday,isActive:this.editDriver.isActive,jobTitle:this.editDriver.jobTitle||void 0,educationLevel:this.editDriver.educationLevel||void 0,phoneNumber:this.editDriver.phoneNumber||void 0,profileImageUrl:this.editDriver.profileImageUrl||void 0};this.editDriver.newPassword&&this.editDriver.newPassword.trim()!==""&&(n.password=this.editDriver.newPassword),this.driverService.updateDriver(t.id,n).subscribe({next:r=>{let a=Qe(ve(ve(ve({},t),n),r&&Object.keys(r).length>0?r:{}),{id:t.id});this.driverToEdit.set(a),this.toastService.info(`\u062A\u0645 \u062A\u0639\u062F\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0633\u0627\u0626\u0642: ${this.editDriver.arabicName} (${this.editDriver.name})`,3e3),this.editDriver.newPassword&&this.editDriver.newPassword.trim()!==""&&this.toastService.info(`\u062A\u0645 \u062A\u063A\u064A\u064A\u0631 \u0643\u0644\u0645\u0629 \u0645\u0631\u0648\u0631 \u0627\u0644\u0633\u0627\u0626\u0642: ${this.editDriver.arabicName}`,3e3),this.closeEditModal(),this.loadData()},error:r=>{console.error("Error updating driver:",r),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0633\u0627\u0626\u0642")}})}showDeleteConfirmation(t){this.driverToDelete.set(t),this.confirmationModalConfig.set({type:"delete",title:"\u062A\u0623\u0643\u064A\u062F \u062D\u0630\u0641 \u0627\u0644\u0633\u0627\u0626\u0642",message:`\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u0623\u0646\u0643 \u062A\u0631\u064A\u062F \u062D\u0630\u0641 \u062D\u0633\u0627\u0628 \u0627\u0644\u0633\u0627\u0626\u0642 ${t.arabicName}\u061F<br>\u0644\u0627 \u064A\u0645\u0643\u0646 \u0627\u0644\u062A\u0631\u0627\u062C\u0639 \u0639\u0646 \u0647\u0630\u0627 \u0627\u0644\u0625\u062C\u0631\u0627\u0621.`,confirmButtonText:"\u062D\u0630\u0641",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621",highlightedText:t.arabicName}),this.isDeleteModalOpen.set(!0)}closeDeleteConfirmation(){this.driverToDelete.set(null),this.isDeleteModalOpen.set(!1)}confirmDeleteDriver(){let t=this.driverToDelete();t&&this.driverService.deleteDriver(t.id).subscribe({next:()=>{this.toastService.success(`\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0633\u0627\u0626\u0642: ${t.arabicName} (${t.name})`,3e3),this.closeDeleteConfirmation(),this.loadData()},error:e=>{console.error("Error deleting driver:",e),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u062D\u0630\u0641 \u0627\u0644\u0633\u0627\u0626\u0642")}}),this.isEditModalOpen.set(!1)}toggleDriverStatus(t){let e=!t.isActive;(e?this.driverService.activateDriver(t.id):this.driverService.deactivateDriver(t.id)).subscribe({next:()=>{this.toastService.info(`\u062A\u0645 ${e?"\u062A\u0641\u0639\u064A\u0644":"\u062A\u0639\u0637\u064A\u0644"} \u062D\u0633\u0627\u0628 \u0627\u0644\u0633\u0627\u0626\u0642: ${t.arabicName}`,3e3),this.loadData()},error:r=>{console.error("Error toggling driver status:",r),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u062A\u063A\u064A\u064A\u0631 \u062D\u0627\u0644\u0629 \u0627\u0644\u0633\u0627\u0626\u0642")}})}ngOnInit(){this.route.queryParams.subscribe(t=>{t.filterValue&&(this.queryFilterValue.set(t.filterValue),this.searchTerm.set(this.queryFilterValue()||""))}),this.loadData()}reduceBalance(t,e){let r=this.getDriverBalanceDisplay(t).amount,a=this.validationService.validateBalanceReduction(e,r);if(!a.valid){a.errors.forEach(u=>{this.toastService.error(u)});return}a.warnings&&a.warnings.length>0&&a.warnings.forEach(u=>{this.toastService.warning(u,5e3)}),this.driverService.reduceBalance(t.id,e).subscribe({next:()=>{delete this.reductionAmounts[t.id];let u;if(e>r){let p=e-r;u=`\u062A\u0645 \u0627\u0644\u062F\u0641\u0639 \u0648\u062A\u0633\u062C\u064A\u0644 \u062F\u064A\u0646 \u0644\u0644\u0633\u0627\u0626\u0642: ${t.arabicName} (\u062F\u064A\u0646: \u20AA${p.toFixed(2)})`}else u=`\u062A\u0645 \u062E\u0635\u0645 \u20AA${e} \u0645\u0646 \u0631\u0635\u064A\u062F \u0627\u0644\u0633\u0627\u0626\u0642: ${t.arabicName}`;this.toastService.success(u,3e3),this.loadData()},error:u=>{console.error("Error reducing balance:",u),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u062E\u0635\u0645 \u0627\u0644\u0631\u0635\u064A\u062F")}})}toggleMobileFilters(){this.showFiltersOnMobile.update(t=>!t)}resetFilters(){this.searchTerm.set(""),this.filterStatus.set("all"),this.showFiltersOnMobile.set(!1),this.toastService.info("\u062A\u0645\u062A \u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 \u0627\u0644\u0641\u0644\u0627\u062A\u0631",3e3),this.currentPage=1,this.loadData()}applyFiltersOnSearch(){this.currentPage=1,this.loadData()}applyFiltersAndToggleMobile(){this.applyFiltersOnSearch(),this.toggleMobileFilters()}getStatusOptions(){return["\u0645\u062A\u0627\u062D","\u0641\u064A \u0631\u062D\u0644\u0629","\u063A\u064A\u0631 \u0645\u062A\u0635\u0644"]}isAddFormValid(){return!!(this.newDriver.arabicName&&this.newDriver.password&&(this.newDriver.username||this.newDriver.email))}isEditFormValid(){return!!(this.editDriver.arabicName&&(this.editDriver.username||this.editDriver.email))}onProfileImageSelected(t){let e=t.target;if(e.files&&e.files[0]){let n=e.files[0];if(!n.type.startsWith("image/")){this.toastService.error("\u0627\u0644\u0631\u062C\u0627\u0621 \u0627\u062E\u062A\u064A\u0627\u0631 \u0645\u0644\u0641 \u0635\u0648\u0631\u0629 \u0635\u062D\u064A\u062D");return}if(n.size>2*1024*1024){this.toastService.error("\u062D\u062C\u0645 \u0627\u0644\u0635\u0648\u0631\u0629 \u064A\u062C\u0628 \u0623\u0646 \u0644\u0627 \u064A\u062A\u062C\u0627\u0648\u0632 2 \u0645\u064A\u062C\u0627\u0628\u0627\u064A\u062A");return}let r=new FileReader;r.onload=a=>{a.target?.result&&(this.editDriver.profileImageUrl=a.target.result)},r.readAsDataURL(n)}}removeProfileImage(){this.editDriver.profileImageUrl=""}getDriverBalanceDisplay(t){let e=t.amountReceivable||0,r=(t.amountPayable||0)-e;return r>0?{amount:r,label:"\u0627\u062C\u0645\u0639 \u0645\u0646 \u0627\u0644\u0633\u0627\u0626\u0642",colorClass:"text-danger",action:"collect"}:r<0?{amount:Math.abs(r),label:"\u0627\u062F\u0641\u0639 \u0644\u0644\u0633\u0627\u0626\u0642",colorClass:"text-success",action:"pay"}:{amount:0,label:"\u0645\u062D\u0633\u0648\u0628",colorClass:"text-muted",action:"settled"}}recordPayment(t){let e=this.getDriverBalanceDisplay(t);if(e.action!=="collect"){this.toastService.error("\u0627\u0644\u0633\u0627\u0626\u0642 \u0644\u0627 \u064A\u0645\u0644\u0643 \u0645\u0628\u0644\u063A \u0645\u0633\u062A\u062D\u0642 \u0644\u0644\u0634\u0631\u0643\u0629");return}this.driverForPayment.set(t),this.paymentAmount.set(e.amount),this.isPaymentModalOpen.set(!0)}confirmRecordPayment(){let t=this.driverForPayment(),e=this.paymentAmount();if(!t||!e||e<=0){this.toastService.error("\u0627\u0644\u0631\u062C\u0627\u0621 \u0625\u062F\u062E\u0627\u0644 \u0645\u0628\u0644\u063A \u0635\u062D\u064A\u062D");return}this.driverService.recordPayment(t.id,e,"\u062F\u0641\u0639 \u0645\u0646 \u0627\u0644\u0633\u0627\u0626\u0642 \u0644\u0644\u0634\u0631\u0643\u0629").subscribe({next:()=>{this.toastService.success(`\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 \u062F\u0641\u0639 \u0645\u0646 ${t.arabicName}: \u20AA${e.toFixed(2)}`,3e3),this.closePaymentModal(),this.loadData()},error:n=>{console.error("Error recording payment:",n),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u0641\u0639")}})}closePaymentModal(){this.isPaymentModalOpen.set(!1),this.driverForPayment.set(null),this.paymentAmount.set(0)}recordExpense(t){let e=this.getDriverBalanceDisplay(t);if(e.action!=="pay"){this.toastService.error("\u0627\u0644\u0634\u0631\u0643\u0629 \u0644\u0627 \u062A\u0645\u0644\u0643 \u0645\u0628\u0644\u063A \u0645\u0633\u062A\u062D\u0642 \u0644\u0644\u0633\u0627\u0626\u0642");return}this.driverForExpense.set(t),this.expenseAmount.set(e.amount),this.expenseDescription.set(""),this.isExpenseModalOpen.set(!0)}confirmRecordExpense(){let t=this.driverForExpense(),e=this.expenseAmount(),n=this.expenseDescription();if(!t||!e||e<=0){this.toastService.error("\u0627\u0644\u0631\u062C\u0627\u0621 \u0625\u062F\u062E\u0627\u0644 \u0645\u0628\u0644\u063A \u0635\u062D\u064A\u062D");return}if(!n||n.trim()===""){this.toastService.error("\u0627\u0644\u0631\u062C\u0627\u0621 \u0625\u062F\u062E\u0627\u0644 \u0648\u0635\u0641 \u0644\u0644\u0639\u0645\u0644\u064A\u0629");return}this.driverService.recordExpense(t.id,e,n).subscribe({next:()=>{this.toastService.success(`\u062A\u0645 \u0635\u0631\u0641 \u0645\u0628\u0644\u063A \u0644\u0640 ${t.arabicName}: \u20AA${e.toFixed(2)}`,3e3),this.closeExpenseModal(),this.loadData()},error:r=>{console.error("Error recording expense:",r),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u0635\u0631\u0641 \u0627\u0644\u0645\u0628\u0644\u063A")}})}closeExpenseModal(){this.isExpenseModalOpen.set(!1),this.driverForExpense.set(null),this.expenseAmount.set(0),this.expenseDescription.set("")}clearIndividualBalance(t){this.driverForClearBalance.set(t),this.confirmationModalConfig.set({type:"warning",title:"\u062A\u0623\u0643\u064A\u062F \u062A\u0635\u0641\u064A\u0629 \u0627\u0644\u062D\u0633\u0627\u0628",message:`\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062A\u0635\u0641\u064A\u0629 \u062D\u0633\u0627\u0628 \u0627\u0644\u0633\u0627\u0626\u0642 ${t.arabicName}\u061F<br>\u0633\u064A\u062A\u0645 \u0645\u0633\u062D \u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0628\u0627\u0644\u063A \u0627\u0644\u0645\u0633\u062A\u062D\u0642\u0629 \u0648\u0627\u0644\u0645\u062F\u0641\u0648\u0639\u0627\u062A.`,confirmButtonText:"\u062A\u0635\u0641\u064A\u0629 \u0627\u0644\u062D\u0633\u0627\u0628",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621",highlightedText:t.arabicName}),this.isClearBalanceModalOpen.set(!0)}confirmClearBalance(){let t=this.driverForClearBalance();t&&this.driverService.clearBalance(t.id,"\u062A\u0635\u0641\u064A\u0629 \u062D\u0633\u0627\u0628 \u0645\u0646 \u0642\u0628\u0644 \u0627\u0644\u0645\u0633\u0624\u0648\u0644").subscribe({next:()=>{this.toastService.success(`\u062A\u0645 \u062A\u0635\u0641\u064A\u0629 \u062D\u0633\u0627\u0628 \u0627\u0644\u0633\u0627\u0626\u0642: ${t.arabicName}`,3e3),this.closeClearBalanceModal(),this.loadData()},error:e=>{console.error("Error clearing balance:",e),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u062A\u0635\u0641\u064A\u0629 \u0627\u0644\u062D\u0633\u0627\u0628")}})}closeClearBalanceModal(){this.isClearBalanceModalOpen.set(!1),this.driverForClearBalance.set(null)}static \u0275fac=function(e){return new(e||i)(G(ft),G(Ai),G(Xe),G(Ye),G(cr),G(Ci))};static \u0275cmp=Oe({type:i,selectors:[["app-drivers-list"]],decls:43,vars:20,consts:[["profileImageInput",""],[1,"d-flex","flex-column","min-vh-100","bg-light"],[3,"confirmed","cancelled","isOpen","config"],[1,"flex-grow-1","p-3","p-lg-4"],[1,"container-fluid","p-0"],[1,"d-flex","justify-content-between","mb-3","d-lg-none"],[1,"btn","rounded-pill","shadow-sm","d-flex","align-items-center","gap-2","py-2","px-3",3,"click","ngClass"],[1,"fa-solid","fa-filter","fs-6"],[1,"fw-bold"],[1,"row","g-4"],[1,"col-12","col-lg-4"],["id","filter-sidebar",1,"card","shadow-sm","rounded-xl","p-4","mt-lg-5","sticky-lg-top","awayFromTop",3,"ngClass"],[1,"fw-bold","mb-3","text-dark","border-bottom","pb-2"],[1,"mb-3"],["for","filterStatus",1,"form-label","small","fw-medium"],["id","filterStatus",1,"form-select",3,"ngModelChange","ngModel"],["value","all"],["value","\u0645\u062A\u0627\u062D"],["value","\u0641\u064A \u0631\u062D\u0644\u0629"],["value","\u063A\u064A\u0631 \u0645\u062A\u0635\u0644"],[1,"btn","btn-primary-custom","w-100","mt-4",3,"click"],[1,"btn","btn-outline-secondary","w-100","mt-2",3,"click"],[1,"col-12","col-lg-8"],[1,"row","row-cols-1","row-cols-md-2","row-cols-xl-2","g-4"],[1,"col"],[1,"col-12","text-center","text-muted","p-5"],[1,"mt-4"],["title","\u0625\u0636\u0627\u0641\u0629 \u0633\u0627\u0626\u0642 \u062C\u062F\u064A\u062F",1,"fab","shadow-lg",3,"click"],[1,"fa-solid","fa-plus","fa-lg"],[1,"modal-backdrop","fade","show"],["tabindex","-1","role","dialog",1,"modal","fade","show","d-block"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","rounded-xl","shadow-lg","border-0"],[1,"modal-header","bg-danger","rounded-top-xl","border-0","text-white"],[1,"modal-title","fw-bold"],["type","button",1,"btn-close","btn-close-white",3,"click"],[1,"modal-body","p-4","text-end"],["for","paymentAmount",1,"form-label","fw-medium"],["id","paymentAmount","type","number","min","0","step","0.01","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0644\u0645\u0628\u0644\u063A",1,"form-control",3,"ngModelChange","ngModel"],[1,"alert","alert-info"],[1,"fa-solid","fa-info-circle","me-1"],[1,"modal-footer","border-0"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click","disabled"],[1,"fa-solid","fa-check","me-1"],[1,"modal-header","bg-success","rounded-top-xl","border-0","text-white"],["for","expenseAmount",1,"form-label","fw-medium"],["id","expenseAmount","type","number","min","0","step","0.01","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0644\u0645\u0628\u0644\u063A",1,"form-control",3,"ngModelChange","ngModel"],["for","expenseDescription",1,"form-label","fw-medium"],[1,"text-danger"],["id","expenseDescription","type","text","placeholder","\u0645\u062B\u0627\u0644: \u0628\u0646\u0632\u064A\u0646\u060C \u0635\u064A\u0627\u0646\u0629\u060C \u062E\u0633\u0627\u0631\u0629",1,"form-control",3,"ngModelChange","ngModel"],[1,"alert","alert-warning"],[1,"fa-solid","fa-exclamation-triangle","me-1"],["type","button",1,"btn","btn-success",3,"click","disabled"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-header","bg-primary-custom","rounded-top-xl","border-0","justify-content-between"],[1,"modal-title","fw-bold","text-white"],["type","button",2,"background-color","transparent","border","none","color","white",3,"click"],[1,"fa-solid","fa-xmark",2,"font-size","20px"],[1,"modal-body","p-4",2,"max-height","70vh","overflow-y","auto"],[3,"ngSubmit"],[1,"row","g-3","text-end"],[1,"col-12"],[1,"fw-bold","text-dark","border-bottom","pb-2","mb-3"],[1,"col-md-6"],["for","newArabicName",1,"form-label","small","fw-medium"],["id","newArabicName","type","text","placeholder","\u0645\u062B\u0627\u0644: \u062E\u0627\u0644\u062F \u0627\u0644\u0639\u0644\u064A","name","arabicName","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","newName",1,"form-label","small","fw-medium"],["id","newName","type","text","placeholder","Example: Khalid Alali","name","name",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12","mt-4"],[1,"text-muted","d-block","mb-3"],["for","newUsername",1,"form-label","small","fw-medium"],["id","newUsername","type","text","placeholder","username","name","username",1,"form-control",3,"ngModelChange","ngModel"],["for","newEmail",1,"form-label","small","fw-medium"],["id","newEmail","type","email","placeholder","example@email.com","name","email",1,"form-control",3,"ngModelChange","ngModel"],["for","newPassword",1,"form-label","small","fw-medium"],["id","newPassword","type","password","placeholder","\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631","name","password","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-end","mt-4"],["type","submit",1,"btn","btn-primary-custom","rounded-pill","px-4","fw-bold",3,"disabled"],[1,"modal-backdrop","fade","show","reducedZIndex"],["tabindex","-1","role","dialog",1,"modal","fade","show","d-block","reducedZIndex"],[1,"modal-header","bg-warning","rounded-top-xl","border-0","justify-content-between"],[1,"modal-title","fw-bold","text-dark"],["type","button",2,"background-color","transparent","border","none",3,"click"],["for","editArabicName",1,"form-label","small","fw-medium"],["id","editArabicName","type","text","placeholder","\u0645\u062B\u0627\u0644: \u062E\u0627\u0644\u062F \u0627\u0644\u0639\u0644\u064A","name","arabicName","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","editName",1,"form-label","small","fw-medium"],["id","editName","type","text","placeholder","Example: Khalid Alali","name","name",1,"form-control",3,"ngModelChange","ngModel"],["for","editUsername",1,"form-label","small","fw-medium"],["id","editUsername","type","text","placeholder","username","name","username",1,"form-control",3,"ngModelChange","ngModel"],["for","editEmail",1,"form-label","small","fw-medium"],["id","editEmail","type","email","placeholder","example@email.com","name","email",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-label","small","fw-medium"],[1,"d-flex","align-items-center","gap-3"],[1,"position-relative"],[1,"rounded-circle","bg-secondary","d-flex","align-items-center","justify-content-center",2,"width","80px","height","80px"],["type","file","accept","image/*",1,"d-none",3,"change"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"fa-solid","fa-upload","me-1"],[1,"text-muted","d-block","mt-1"],["for","editJobTitle",1,"form-label","small","fw-medium"],["id","editJobTitle","type","text","placeholder","\u0645\u062B\u0627\u0644: \u0633\u0627\u0626\u0642 \u0625\u0633\u0639\u0627\u0641","name","jobTitle",1,"form-control",3,"ngModelChange","ngModel"],["for","editEducationLevel",1,"form-label","small","fw-medium"],["id","editEducationLevel","name","educationLevel",1,"form-select",3,"ngModelChange","ngModel"],["value",""],[3,"value"],["for","editPhoneNumber",1,"form-label","small","fw-medium"],["id","editPhoneNumber","type","tel","placeholder","05XX-XXX-XXXX","name","phoneNumber","dir","ltr",1,"form-control",3,"ngModelChange","ngModel"],["for","editStatus",1,"form-label","small","fw-medium"],["id","editStatus","name","arabicStatus","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","editTrips",1,"form-label","small","fw-medium"],["id","editTrips","type","number","min","0","name","tripsToday","readonly","","disabled","",1,"form-control",2,"background-color","#e9ecef",3,"ngModelChange","ngModel"],[1,"form-check","form-switch","d-flex","align-items-center","justify-content-start","gap-2"],["for","editIsActive",1,"form-check-label","fw-medium"],["type","checkbox","role","switch","id","editIsActive","name","isActive",1,"form-check-input",3,"ngModelChange","ngModel"],[1,"text-muted","d-block","mt-2","text-end"],["for","editNewPassword",1,"form-label","small","fw-medium"],["id","editNewPassword","type","password","placeholder","\u0627\u062A\u0631\u0643\u0647 \u0641\u0627\u0631\u063A\u064B\u0627 \u0625\u0630\u0627 \u0643\u0646\u062A \u0644\u0627 \u062A\u0631\u064A\u062F \u062A\u063A\u064A\u064A\u0631 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631","name","newPassword","suggest","off","autocomplete","off",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-muted","d-block","mt-2"],[1,"d-flex","justify-content-between","gap-2","mt-4","pt-3","border-top"],[1,"d-flex","gap-2"],["type","submit",1,"btn","btn-warning","rounded-pill","px-4","fw-bold",3,"disabled"],[1,"fa-solid","fa-floppy-disk","me-1"],["type","button",1,"btn","btn-outline-secondary","rounded-pill","px-4",3,"click"],["type","button",1,"btn","btn-danger","rounded-pill","px-4",3,"click"],[1,"fa-solid","fa-trash","me-1"],["alt","\u0635\u0648\u0631\u0629 \u0627\u0644\u0633\u0627\u0626\u0642",1,"rounded-circle","object-fit-cover","border",2,"width","80px","height","80px",3,"src"],["type","button","title","\u0625\u0632\u0627\u0644\u0629 \u0627\u0644\u0635\u0648\u0631\u0629",1,"btn","btn-danger","btn-sm","rounded-circle","position-absolute","top-0","start-0",2,"width","24px","height","24px","padding","0",3,"click"],[1,"fa-solid","fa-times",2,"font-size","12px"],[1,"fa-solid","fa-user","text-white",2,"font-size","32px"],[1,"fa-solid","fa-circle-check","text-success","me-1"],[1,"fa-solid","fa-circle-xmark","text-danger","me-1"],[1,"card","shadow-sm","rounded-xl","h-100","position-relative",3,"ngClass"],[1,"position-absolute","top-0","start-0","m-3","d-flex","gap-2"],["title","\u062A\u0639\u062F\u064A\u0644 \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0633\u0627\u0626\u0642",1,"btn","btn-sm","btn-outline-primary","rounded-circle",2,"width","32px","height","32px","padding","0",3,"click"],[1,"fa-solid","fa-pen"],["title","\u0639\u0631\u0636 \u0633\u062C\u0644 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062A",1,"btn","btn-sm","btn-outline-info","rounded-circle",2,"width","32px","height","32px","padding","0",3,"click"],[1,"fa-solid","fa-file-invoice-dollar"],[1,"badge","bg-danger","position-absolute","top-0","end-0","m-3"],[1,"card-body","p-4","d-flex","flex-column"],[1,"d-flex","align-items-center","gap-3","mb-4"],[1,"rounded-circle","object-fit-cover","flex-shrink-0",2,"width","56px","height","56px",3,"alt","src"],[1,"flex-grow-1"],[1,"h6","fw-bold","m-0","text-dark"],[1,"d-flex","align-items-center","gap-2","mt-1"],[3,"status","type","size"],[1,"small","text-muted","m-0","mt-1"],[1,"row","pt-4","border-top","border-light-subtle","g-3","mb-4"],[1,"col-6"],[1,"text-muted","small","m-0"],[1,"h5","fw-semibold","m-0","text-dark"],[1,"h5","fw-semibold","m-0",3,"ngClass"],[1,"mt-auto","pt-3"],[1,"btn","btn-danger","fw-bold","w-100","py-3","rounded-lg","mb-2","btn-lg-small"],[1,"btn","btn-success","fw-bold","w-100","py-3","rounded-lg","mb-2","btn-lg-small"],["role","alert",1,"alert","alert-success","mb-2","text-center","py-2"],[1,"btn","btn-outline-secondary","fw-bold","w-100","py-2","rounded-lg","btn-lg-small"],[1,"fa-solid","fa-ban","me-1"],[1,"fa-solid","fa-user","me-1"],[1,"btn","btn-danger","fw-bold","w-100","py-3","rounded-lg","mb-2","btn-lg-small",3,"click"],[1,"fa-solid","fa-hand-holding-dollar","me-2"],[1,"btn","btn-success","fw-bold","w-100","py-3","rounded-lg","mb-2","btn-lg-small",3,"click"],[1,"fa-solid","fa-money-bill-transfer","me-2"],[1,"fa-solid","fa-circle-check","me-1"],[1,"btn","btn-outline-secondary","fw-bold","w-100","py-2","rounded-lg","btn-lg-small",3,"click"],[1,"fa-solid","fa-eraser","me-1"],[1,"fa-solid","fa-face-frown","fs-2","mb-3"],[1,"h5"],[3,"pageChange","itemsPerPageChange","currentPage","totalItems","itemsPerPage","maxVisiblePages"]],template:function(e,n){e&1&&(s(0,"div",1)(1,"app-confirmation-modal",2),T("confirmed",function(){return n.confirmDeleteDriver()})("cancelled",function(){return n.closeDeleteConfirmation()}),l(),s(2,"app-confirmation-modal",2),T("confirmed",function(){return n.confirmClearBalance()})("cancelled",function(){return n.closeClearBalanceModal()}),l(),H(3,Zb,26,3)(4,qb,32,4)(5,Yb,48,6)(6,iC,120,15),s(7,"main",3)(8,"div",4)(9,"div",5)(10,"button",6),T("click",function(){return n.toggleMobileFilters()}),x(11,"i",7),s(12,"span",8),d(13),l()()(),s(14,"div",9)(15,"div",10)(16,"div",11)(17,"h6",12),d(18,"\u062E\u064A\u0627\u0631\u0627\u062A \u0627\u0644\u0628\u062D\u062B \u0648\u0627\u0644\u062A\u0635\u0641\u064A\u0629"),l(),s(19,"div",13)(20,"label",14),d(21,"\u062D\u0627\u0644\u0629 \u0627\u0644\u0633\u0627\u0626\u0642"),l(),s(22,"select",15),T("ngModelChange",function(a){return n.filterStatus.set(a)}),s(23,"option",16),d(24,"\u0627\u0644\u0643\u0644"),l(),s(25,"option",17),d(26,"\u0645\u062A\u0627\u062D"),l(),s(27,"option",18),d(28,"\u0641\u064A \u0631\u062D\u0644\u0629"),l(),s(29,"option",19),d(30,"\u063A\u064A\u0631 \u0645\u062A\u0635\u0644"),l()()(),s(31,"button",20),T("click",function(){return n.applyFiltersAndToggleMobile()}),d(32," \u0639\u0631\u0636 \u0627\u0644\u0646\u062A\u0627\u0626\u062C "),l(),s(33,"button",21),T("click",function(){return n.resetFilters()}),d(34," \u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 \u0627\u0644\u0641\u0644\u0627\u062A\u0631 "),l()()(),s(35,"div",22)(36,"div",23),Te(37,cC,34,19,"div",24,Gb),H(39,dC,4,0,"div",25),l(),H(40,mC,2,4,"div",26),l()()()(),s(41,"button",27),T("click",function(){return n.isAddModalOpen.set(!0)}),x(42,"i",28),l()()),e&2&&(m(),S("isOpen",n.isDeleteModalOpen())("config",n.confirmationModalConfig()),m(),S("isOpen",n.isClearBalanceModalOpen())("config",n.confirmationModalConfig()),m(),le(n.isPaymentModalOpen()&&n.driverForPayment()?3:-1),m(),le(n.isExpenseModalOpen()&&n.driverForExpense()?4:-1),m(),le(n.isAddModalOpen()?5:-1),m(),le(n.isEditModalOpen()&&n.driverToEdit()?6:-1),m(4),S("ngClass",xr(14,jb,!n.showFiltersOnMobile(),n.showFiltersOnMobile())),m(3),q(" ",n.showFiltersOnMobile()?"\u0625\u062E\u0641\u0627\u0621 \u0627\u0644\u0641\u0644\u0627\u062A\u0631":"\u0625\u0638\u0647\u0627\u0631 \u0627\u0644\u0641\u0644\u0627\u062A\u0631"," "),m(3),S("ngClass",xr(17,Hb,n.showFiltersOnMobile(),!n.showFiltersOnMobile())),m(6),S("ngModel",n.filterStatus()),m(15),Ee(n.getPaginatedDrivers()),m(2),le(n.filteredDrivers().length===0?39:-1),m(),le(n.filteredDrivers().length>0?40:-1))},dependencies:[Le,Ft,tt,Kt,Ot,Lt,et,vi,Xn,At,ot,Xt,Zt,xi,rt,$t,Mi,Wr,Wi],styles:["[_nghost-%COMP%]{display:block;font-family:Inter,sans-serif;direction:rtl}.rounded-xl[_ngcontent-%COMP%]{border-radius:.75rem!important}.rounded-lg[_ngcontent-%COMP%]{border-radius:.5rem!important}.rounded-top-xl[_ngcontent-%COMP%]{border-top-left-radius:.75rem!important;border-top-right-radius:.75rem!important}.driver-status-dot[_ngcontent-%COMP%]{width:.6rem;height:.6rem;border-radius:50%;display:inline-block;margin-left:.5rem}.btn-primary-custom[_ngcontent-%COMP%], .btn-primary-custom[_ngcontent-%COMP%]:focus{background-color:#1193d4!important;border-color:#1193d4!important;color:#fff;transition:background-color .3s ease}.btn-primary-custom[_ngcontent-%COMP%]:hover{background-color:#0c7dbf!important;border-color:#0c7dbf!important}.btn-success[_ngcontent-%COMP%]{background-color:#10b981!important;border-color:#10b981!important}.btn-outline-primary[_ngcontent-%COMP%]{border-color:#1193d4!important;color:#1193d4!important}.btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:#1193d4!important;border-color:#1193d4!important;color:#fff!important}.opacity-75[_ngcontent-%COMP%]{opacity:.75}.bg-light[_ngcontent-%COMP%]{background-color:#f6f7f8!important}.card[_ngcontent-%COMP%]{color:#1c1c1e;border:none}.text-dark[_ngcontent-%COMP%]{color:#1c1c1e!important}.modal[_ngcontent-%COMP%]{background-color:#00000080}.modal-dialog[_ngcontent-%COMP%]{max-width:90%;margin:1.75rem auto}@media (min-width: 576px){.modal-dialog[_ngcontent-%COMP%]{max-width:500px}.modal-dialog.modal-lg[_ngcontent-%COMP%]{max-width:800px}}.form-check-input[_ngcontent-%COMP%]{width:3em;height:1.5em;cursor:pointer}.form-check-input[_ngcontent-%COMP%]:checked{background-color:#10b981;border-color:#10b981}input[type=password][_ngcontent-%COMP%]{letter-spacing:.1em}@media (min-width: 992px){.container-fluid[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.sticky-lg-top[_ngcontent-%COMP%]{position:sticky;top:80px}.btn-lg-small[_ngcontent-%COMP%]{padding:.5rem 1rem!important;font-size:.875rem!important}.mt-auto[_ngcontent-%COMP%]   .mt-3[_ngcontent-%COMP%]{margin-top:.5rem!important}}.modal-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.reducedZIndex[_ngcontent-%COMP%]{z-index:1049}.fab[_ngcontent-%COMP%]{position:fixed;bottom:2rem;left:2rem;width:56px;height:56px;border-radius:50%;background-color:#1193d4;color:#fff;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;z-index:1000}.fab[_ngcontent-%COMP%]:hover{background-color:#0d7ab8;transform:scale(1.1);box-shadow:0 12px 24px #0003!important}.fab[_ngcontent-%COMP%]:active{transform:scale(.95)}@media (max-width: 768px){.fab[_ngcontent-%COMP%]{bottom:1.5rem;left:1.5rem;width:48px;height:48px}}"],changeDetection:0})};var as=class i{constructor(t){this.http=t}API_URL=`${xt.apiEndpoint}/paramedics`;getParamedics(t){let e=Nt(t);return this.http.get(this.API_URL,{params:e})}getParamedicById(t){return this.http.get(`${this.API_URL}/${t}`)}createParamedic(t){return this.http.post(this.API_URL,t)}updateParamedic(t,e){return this.http.put(`${this.API_URL}/${t}`,e)}deleteParamedic(t){return this.http.delete(`${this.API_URL}/${t}`)}updateStatus(t,e){return this.http.patch(`${this.API_URL}/${t}/status`,{status:e})}activateParamedic(t){return this.http.patch(`${this.API_URL}/${t}/activate`,{})}deactivateParamedic(t){return this.http.patch(`${this.API_URL}/${t}/deactivate`,{})}getParamedicTrips(t,e){let n=Nt(e);return this.http.get(`${this.API_URL}/${t}/trips`,{params:n})}getParamedicEarnings(t){return this.http.get(`${this.API_URL}/${t}/earnings`)}reduceBalance(t,e){return this.http.patch(`${this.API_URL}/${t}/reduce-balance`,{amount:e})}clearBalance(t){return this.http.patch(`${this.API_URL}/${t}/clear-balance`,{})}static \u0275fac=function(e){return new(e||i)(Ue(It))};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})};var fC=i=>({"opacity-75":i}),pC=(i,t)=>t.id,hC=(i,t)=>t.value;function gC(i,t){if(i&1){let e=Q();x(0,"div",13),s(1,"div",14)(2,"div",15)(3,"div",16)(4,"div",17)(5,"h5",18),d(6,"\u0625\u0636\u0627\u0641\u0629 \u0645\u0633\u0639\u0641 \u062C\u062F\u064A\u062F"),l(),s(7,"button",19),T("click",function(){b(e);let r=h();return C(r.isAddModalOpen.set(!1))}),x(8,"i",20),l()(),s(9,"div",21)(10,"form",22),T("ngSubmit",function(){b(e);let r=h();return C(r.addNewParamedic())}),s(11,"div",23)(12,"div",24)(13,"h6",25),d(14,"\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629"),l()(),s(15,"div",26)(16,"label",27),d(17,"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0639\u0631\u0628\u064A \u0644\u0644\u0645\u0633\u0639\u0641 "),s(18,"span",28),d(19,"*"),l()(),s(20,"input",29),V("ngModelChange",function(r){b(e);let a=h();return N(a.newParamedic.arabicName,r)||(a.newParamedic.arabicName=r),C(r)}),l()(),s(21,"div",26)(22,"label",30),d(23,"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0625\u0646\u062C\u0644\u064A\u0632\u064A"),l(),s(24,"input",31),V("ngModelChange",function(r){b(e);let a=h();return N(a.newParamedic.name,r)||(a.newParamedic.name=r),C(r)}),l()(),s(25,"div",32)(26,"h6",25),d(27,"\u0628\u064A\u0627\u0646\u0627\u062A \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644"),l(),s(28,"small",33),x(29,"i",34),d(30," \u064A\u062C\u0628 \u0625\u062F\u062E\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u0623\u0648 \u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A (\u0623\u0648 \u0643\u0644\u064A\u0647\u0645\u0627) "),l()(),s(31,"div",26)(32,"label",35),d(33,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645"),l(),s(34,"input",36),V("ngModelChange",function(r){b(e);let a=h();return N(a.newParamedic.username,r)||(a.newParamedic.username=r),C(r)}),l()(),s(35,"div",26)(36,"label",37),d(37,"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"),l(),s(38,"input",38),V("ngModelChange",function(r){b(e);let a=h();return N(a.newParamedic.email,r)||(a.newParamedic.email=r),C(r)}),l()(),s(39,"div",24)(40,"label",39),d(41,"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u0623\u0648\u0644\u064A\u0629 "),s(42,"span",28),d(43,"*"),l()(),s(44,"input",40),V("ngModelChange",function(r){b(e);let a=h();return N(a.newParamedic.password,r)||(a.newParamedic.password=r),C(r)}),l()(),s(45,"div",32)(46,"h6",25),d(47,"\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0645\u0627\u0644\u064A\u0629"),l()(),s(48,"div",26)(49,"label",41),d(50,"\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0645\u0633\u062A\u062D\u0642 \u0627\u0644\u0623\u0648\u0644\u064A (\u20AA)"),l(),s(51,"input",42),V("ngModelChange",function(r){b(e);let a=h();return N(a.newParamedic.amountOwed,r)||(a.newParamedic.amountOwed=r),C(r)}),l()()(),s(52,"div",43)(53,"button",44),d(54," \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0633\u0639\u0641 "),l()()()()()()()}if(i&2){let e=h();m(20),R("ngModel",e.newParamedic.arabicName),m(4),R("ngModel",e.newParamedic.name),m(10),R("ngModel",e.newParamedic.username),m(4),R("ngModel",e.newParamedic.email),m(6),R("ngModel",e.newParamedic.password),m(7),R("ngModel",e.newParamedic.amountOwed),m(2),S("disabled",!e.isAddFormValid())}}function _C(i,t){if(i&1){let e=Q();x(0,"img",94),s(1,"button",95),T("click",function(){b(e);let r=h(2);return C(r.removeProfileImage())}),x(2,"i",96),l()}if(i&2){let e=h(2);S("src",e.editParamedic.profileImageUrl,Lr)}}function vC(i,t){i&1&&(s(0,"div",61),x(1,"i",97),l())}function xC(i,t){if(i&1&&(s(0,"option",71),d(1),l()),i&2){let e=t.$implicit;S("value",e.value),m(),z(e.label)}}function yC(i,t){if(i&1&&(s(0,"option",71),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function bC(i,t){i&1&&(x(0,"i",98),d(1," \u0627\u0644\u062D\u0633\u0627\u0628 \u0646\u0634\u0637 - \u064A\u0645\u0643\u0646 \u0644\u0644\u0645\u0633\u0639\u0641 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644 "))}function CC(i,t){i&1&&(x(0,"i",99),d(1," \u0627\u0644\u062D\u0633\u0627\u0628 \u0645\u0639\u0637\u0644 - \u0644\u0627 \u064A\u0645\u0643\u0646 \u0644\u0644\u0645\u0633\u0639\u0641 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644 "))}function wC(i,t){if(i&1){let e=Q();x(0,"div",45),s(1,"div",46)(2,"div",15)(3,"div",16)(4,"div",47)(5,"h5",48),d(6,"\u062A\u0639\u062F\u064A\u0644 \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0645\u0633\u0639\u0641"),l(),s(7,"button",49),T("click",function(){b(e);let r=h();return C(r.closeEditModal())}),x(8,"i",20),l()(),s(9,"div",21)(10,"form",22),T("ngSubmit",function(){b(e);let r=h();return C(r.saveEditParamedic())}),s(11,"div",23)(12,"div",24)(13,"h6",25),d(14,"\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629"),l()(),s(15,"div",26)(16,"label",50),d(17,"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0639\u0631\u0628\u064A \u0644\u0644\u0645\u0633\u0639\u0641 "),s(18,"span",28),d(19,"*"),l()(),s(20,"input",51),V("ngModelChange",function(r){b(e);let a=h();return N(a.editParamedic.arabicName,r)||(a.editParamedic.arabicName=r),C(r)}),l()(),s(21,"div",26)(22,"label",52),d(23,"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0625\u0646\u062C\u0644\u064A\u0632\u064A"),l(),s(24,"input",53),V("ngModelChange",function(r){b(e);let a=h();return N(a.editParamedic.name,r)||(a.editParamedic.name=r),C(r)}),l()(),s(25,"div",32)(26,"h6",25),d(27,"\u0628\u064A\u0627\u0646\u0627\u062A \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644"),l(),s(28,"small",33),x(29,"i",34),d(30," \u064A\u062C\u0628 \u0625\u062F\u062E\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u0623\u0648 \u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A (\u0623\u0648 \u0643\u0644\u064A\u0647\u0645\u0627) "),l()(),s(31,"div",26)(32,"label",54),d(33,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645"),l(),s(34,"input",55),V("ngModelChange",function(r){b(e);let a=h();return N(a.editParamedic.username,r)||(a.editParamedic.username=r),C(r)}),l()(),s(35,"div",26)(36,"label",56),d(37,"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"),l(),s(38,"input",57),V("ngModelChange",function(r){b(e);let a=h();return N(a.editParamedic.email,r)||(a.editParamedic.email=r),C(r)}),l()(),s(39,"div",32)(40,"h6",25),d(41,"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0648\u0638\u064A\u0641\u0629 \u0648\u0627\u0644\u0645\u0644\u0641 \u0627\u0644\u0634\u062E\u0635\u064A"),l()(),s(42,"div",24)(43,"label",58),d(44,"\u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0634\u062E\u0635\u064A\u0629"),l(),s(45,"div",59)(46,"div",60),H(47,_C,3,1)(48,vC,2,0,"div",61),l(),s(49,"div")(50,"input",62,0),T("change",function(r){b(e);let a=h();return C(a.onProfileImageSelected(r))}),l(),s(52,"button",63),T("click",function(){b(e);let r=Rr(51);return C(r.click())}),x(53,"i",64),d(54),l(),s(55,"small",65),d(56,"\u0627\u0644\u062D\u062F \u0627\u0644\u0623\u0642\u0635\u0649: 2 \u0645\u064A\u062C\u0627\u0628\u0627\u064A\u062A"),l()()()(),s(57,"div",26)(58,"label",66),d(59,"\u0627\u0644\u0648\u0638\u064A\u0641\u0629"),l(),s(60,"input",67),V("ngModelChange",function(r){b(e);let a=h();return N(a.editParamedic.jobTitle,r)||(a.editParamedic.jobTitle=r),C(r)}),l()(),s(61,"div",26)(62,"label",68),d(63,"\u0627\u0644\u0645\u0633\u062A\u0648\u0649 \u0627\u0644\u062A\u0639\u0644\u064A\u0645\u064A"),l(),s(64,"select",69),V("ngModelChange",function(r){b(e);let a=h();return N(a.editParamedic.educationLevel,r)||(a.editParamedic.educationLevel=r),C(r)}),s(65,"option",70),d(66,"-- \u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0633\u062A\u0648\u0649 --"),l(),Te(67,xC,2,2,"option",71,hC),l()(),s(69,"div",26)(70,"label",72),d(71,"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641"),l(),s(72,"input",73),V("ngModelChange",function(r){b(e);let a=h();return N(a.editParamedic.phoneNumber,r)||(a.editParamedic.phoneNumber=r),C(r)}),l()(),s(73,"div",32)(74,"h6",25),d(75,"\u062D\u0627\u0644\u0629 \u0627\u0644\u0645\u0633\u0639\u0641"),l()(),s(76,"div",26)(77,"label",74),d(78,"\u062D\u0627\u0644\u0629 \u0627\u0644\u0645\u0633\u0639\u0641"),l(),s(79,"select",75),V("ngModelChange",function(r){b(e);let a=h();return N(a.editParamedic.arabicStatus,r)||(a.editParamedic.arabicStatus=r),C(r)}),Te(80,yC,2,2,"option",71,pt),l()(),s(82,"div",26)(83,"label",76),d(84,"\u0639\u062F\u062F \u0627\u0644\u0631\u062D\u0644\u0627\u062A \u0627\u0644\u064A\u0648\u0645"),l(),s(85,"input",77),V("ngModelChange",function(r){b(e);let a=h();return N(a.editParamedic.tripsToday,r)||(a.editParamedic.tripsToday=r),C(r)}),l(),s(86,"small",65),x(87,"i",34),d(88," \u064A\u062A\u0645 \u062D\u0633\u0627\u0628 \u0647\u0630\u0627 \u0627\u0644\u0631\u0642\u0645 \u062A\u0644\u0642\u0627\u0626\u064A\u0627\u064B \u0645\u0646 \u0627\u0644\u0631\u062D\u0644\u0627\u062A "),l()(),s(89,"div",26)(90,"label",78),d(91,"\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0645\u0633\u062A\u062D\u0642 (\u20AA)"),l(),s(92,"input",79),V("ngModelChange",function(r){b(e);let a=h();return N(a.editParamedic.amountOwed,r)||(a.editParamedic.amountOwed=r),C(r)}),l()(),s(93,"div",32)(94,"h6",25),d(95,"\u062D\u0627\u0644\u0629 \u0627\u0644\u062D\u0633\u0627\u0628"),l()(),s(96,"div",24)(97,"div",80)(98,"label",81),d(99," \u0627\u0644\u062D\u0633\u0627\u0628 \u0646\u0634\u0637 (\u064A\u0645\u0643\u0646 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644) "),l(),s(100,"input",82),V("ngModelChange",function(r){b(e);let a=h();return N(a.editParamedic.isActive,r)||(a.editParamedic.isActive=r),C(r)}),l()(),s(101,"small",83),H(102,bC,2,0)(103,CC,2,0),l()(),s(104,"div",32)(105,"h6",25),d(106,"\u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"),l()(),s(107,"div",24)(108,"label",84),d(109,"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u062C\u062F\u064A\u062F\u0629 (\u0627\u062E\u062A\u064A\u0627\u0631\u064A)"),l(),s(110,"input",85),V("ngModelChange",function(r){b(e);let a=h();return N(a.editParamedic.newPassword,r)||(a.editParamedic.newPassword=r),C(r)}),l(),s(111,"small",86),x(112,"i",34),d(113," \u064A\u0645\u0643\u0646\u0643 \u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u062F\u0648\u0646 \u0645\u0639\u0631\u0641\u0629 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u0642\u062F\u064A\u0645\u0629 "),l()()(),s(114,"div",87)(115,"div",88)(116,"button",89),x(117,"i",90),d(118," \u062D\u0641\u0638 "),l(),s(119,"button",91),T("click",function(){b(e);let r=h();return C(r.closeEditModal())}),d(120,"\u0625\u0644\u063A\u0627\u0621"),l()(),s(121,"button",92),T("click",function(){b(e);let r=h();return C(r.showDeleteConfirmation(r.paramedicToEdit()))}),x(122,"i",93),d(123," \u062D\u0630\u0641 "),l()()()()()()()}if(i&2){let e=h();m(20),R("ngModel",e.editParamedic.arabicName),m(4),R("ngModel",e.editParamedic.name),m(10),R("ngModel",e.editParamedic.username),m(4),R("ngModel",e.editParamedic.email),m(9),le(e.editParamedic.profileImageUrl?47:48),m(7),q(" ",e.editParamedic.profileImageUrl?"\u062A\u063A\u064A\u064A\u0631 \u0627\u0644\u0635\u0648\u0631\u0629":"\u0631\u0641\u0639 \u0635\u0648\u0631\u0629"," "),m(6),R("ngModel",e.editParamedic.jobTitle),m(4),R("ngModel",e.editParamedic.educationLevel),m(3),Ee(e.educationLevelOptions),m(5),R("ngModel",e.editParamedic.phoneNumber),m(7),R("ngModel",e.editParamedic.arabicStatus),m(),Ee(e.getStatusOptions()),m(5),R("ngModel",e.editParamedic.tripsToday),m(7),R("ngModel",e.editParamedic.amountOwed),m(8),R("ngModel",e.editParamedic.isActive),m(2),le(e.editParamedic.isActive?102:103),m(8),R("ngModel",e.editParamedic.newPassword),m(6),S("disabled",!e.isEditFormValid())}}function SC(i,t){i&1&&(s(0,"span",104),x(1,"i",115),d(2," \u0645\u0639\u0637\u0644 "),l())}function TC(i,t){if(i&1&&(x(0,"i",116),d(1)),i&2){let e=h(2).$implicit;m(),q("",e.username," ")}}function EC(i,t){if(i&1&&(s(0,"p",110),H(1,TC,2,1),l()),i&2){let e=h().$implicit;m(),le(e.username?1:-1)}}function AC(i,t){if(i&1){let e=Q();s(0,"div",8)(1,"div",100)(2,"div",101)(3,"button",102),T("click",function(){let r=b(e).$implicit,a=h();return C(a.openEditModal(r))}),x(4,"i",103),l()(),H(5,SC,3,0,"span",104),s(6,"div",105)(7,"div",106),x(8,"img",107),s(9,"div",108)(10,"p",109),d(11),l(),H(12,EC,2,1,"p",110),l()(),s(13,"div",111)(14,"div",112)(15,"p",113),d(16,"\u0639\u062F\u062F \u0627\u0644\u0631\u062D\u0644\u0627\u062A \u0627\u0644\u064A\u0648\u0645"),l(),s(17,"p",114),d(18),l()()()()()()}if(i&2){let e=t.$implicit;m(),S("ngClass",$i(7,fC,!e.isActive)),m(4),le(e.isActive?-1:5),m(3),S("alt",e.imageAlt)("src",e.imageUrl!=="/assets/default-avatar.png"?e.imageUrl:"person-placeholder.jpg",Lr),m(3),z(e.arabicName),m(),le(e.email||e.username?12:-1),m(6),z(e.tripsToday)}}function MC(i,t){i&1&&(s(0,"div",9),x(1,"i",117),s(2,"p",118),d(3,"\u0644\u0627 \u064A\u0648\u062C\u062F \u0645\u0633\u0639\u0641\u0648\u0646."),l()())}function FC(i,t){if(i&1){let e=Q();s(0,"div",10)(1,"app-pagination",119),T("pageChange",function(r){b(e);let a=h();return C(a.onPageChange(r))})("itemsPerPageChange",function(r){b(e);let a=h();return C(a.onItemsPerPageChange(r))}),l()()}if(i&2){let e=h();m(),S("currentPage",e.currentPage)("totalItems",e.filteredParamedics().length)("itemsPerPage",e.itemsPerPage)("maxVisiblePages",5)}}var Ku=class i{constructor(t,e,n,r,a,u){this.globalVarsService=t;this.route=e;this.router=n;this.toastService=r;this.validationService=a;this.paramedicService=u;this.globalVarsService.setGlobalHeader("\u0627\u0644\u0645\u0633\u0639\u0641\u0648\u0646")}currentPage=1;itemsPerPage=10;totalRecords=0;isLoading=Z(!1);viewUserProfile(t){this.router.navigate(["/admin/profile",t.id])}viewTransactionHistory(t){this.router.navigate(["/admin/transactions",t.id],{queryParams:{type:"paramedic",name:t.arabicName}})}showFiltersOnMobile=Z(!1);searchTerm=Z("");filterStatus=Z("all");minOwed=Z(null);maxOwed=Z(null);isAddModalOpen=Z(!1);isEditModalOpen=Z(!1);isDeleteModalOpen=Z(!1);paramedicToEdit=Z(null);paramedicToDelete=Z(null);confirmationModalConfig=Z({type:"delete",title:"",message:"",confirmButtonText:"",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621"});newParamedic={arabicName:"",name:"",username:"",email:"",password:"",amountOwed:0,tripsToday:0};editParamedic={arabicName:"",name:"",username:"",email:"",arabicStatus:"\u0645\u062A\u0627\u062D",tripsToday:0,amountOwed:0,newPassword:"",isActive:!0,jobTitle:"",educationLevel:"",phoneNumber:"",profileImageUrl:""};educationLevelOptions=[{value:"EMI",label:"EMI - \u0637\u0648\u0627\u0631\u0626 \u0637\u0628\u064A\u0629 \u0645\u062A\u0648\u0633\u0637\u0629"},{value:"B",label:"B - \u0623\u0633\u0627\u0633\u064A"},{value:"I",label:"I - \u0645\u062A\u0648\u0633\u0637"},{value:"P",label:"P - \u0645\u0633\u0639\u0641"}];reductionAmounts={};paramedics=Z([]);filteredParamedics=We(()=>this.paramedics());getPaginatedParamedics(){return this.paramedics()}onPageChange(t){this.currentPage=t,this.loadData()}onItemsPerPageChange(t){this.itemsPerPage=t,this.currentPage=1,this.loadData()}loadData(){this.isLoading.set(!0),this.paramedicService.getParamedics({page:this.currentPage,limit:this.itemsPerPage,search:this.searchTerm()||void 0,status:this.filterStatus()!=="all"?this.filterStatus():void 0,minOwed:this.minOwed()||void 0,maxOwed:this.maxOwed()||void 0}).subscribe({next:t=>{this.paramedics.set(t.data),this.totalRecords=t.total,this.isLoading.set(!1)},error:t=>{console.error("Error loading paramedics:",t),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u0633\u0639\u0641\u064A\u0646"),this.isLoading.set(!1)}})}addNewParamedic(){let t=this.validationService.validateDriver(this.newParamedic);if(!t.valid){t.errors.forEach(e=>{this.toastService.error(e)});return}this.paramedicService.createParamedic({arabicName:this.newParamedic.arabicName,name:this.newParamedic.name,username:this.newParamedic.username||void 0,email:this.newParamedic.email||void 0,password:this.newParamedic.password,amountOwed:this.newParamedic.amountOwed||0,tripsToday:this.newParamedic.tripsToday||0}).subscribe({next:e=>{this.toastService.success(`\u062A\u0645\u062A \u0625\u0636\u0627\u0641\u0629 \u0645\u0633\u0639\u0641 \u062C\u062F\u064A\u062F: ${e.arabicName} (${e.name})`,3e3),this.isAddModalOpen.set(!1),this.newParamedic={arabicName:"",name:"",username:"",email:"",password:"",amountOwed:0,tripsToday:0},this.loadData()},error:e=>{console.error("Error creating paramedic:",e),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0633\u0639\u0641")}})}openEditModal(t){this.paramedicToEdit.set(t),this.editParamedic={arabicName:t.arabicName,name:t.name,username:t.username||"",email:t.email||"",arabicStatus:t.arabicStatus,tripsToday:t.tripsToday,amountOwed:t.amountOwed,newPassword:"",isActive:t.isActive,jobTitle:t.jobTitle||"",educationLevel:t.educationLevel||"",phoneNumber:t.phoneNumber||"",profileImageUrl:t.profileImageUrl||""},this.isEditModalOpen.set(!0)}closeEditModal(){this.paramedicToEdit.set(null),this.isEditModalOpen.set(!1),this.editParamedic={arabicName:"",name:"",username:"",email:"",arabicStatus:"\u0645\u062A\u0627\u062D",tripsToday:0,amountOwed:0,newPassword:"",isActive:!0,jobTitle:"",educationLevel:"",phoneNumber:"",profileImageUrl:""}}saveEditParamedic(){let t=this.paramedicToEdit();if(!t)return;let e=this.validationService.validateDriver(this.editParamedic);if(!e.valid){e.errors.forEach(r=>{this.toastService.error(r)});return}let n={arabicName:this.editParamedic.arabicName,name:this.editParamedic.name,username:this.editParamedic.username||void 0,email:this.editParamedic.email||void 0,arabicStatus:this.editParamedic.arabicStatus,tripsToday:this.editParamedic.tripsToday,amountOwed:this.editParamedic.amountOwed,isActive:this.editParamedic.isActive,jobTitle:this.editParamedic.jobTitle||void 0,educationLevel:this.editParamedic.educationLevel||void 0,phoneNumber:this.editParamedic.phoneNumber||void 0,profileImageUrl:this.editParamedic.profileImageUrl||void 0};this.editParamedic.newPassword&&this.editParamedic.newPassword.trim()!==""&&(n.password=this.editParamedic.newPassword),this.paramedicService.updateParamedic(t.id,n).subscribe({next:r=>{let a=Qe(ve(ve(ve({},t),n),r&&Object.keys(r).length>0?r:{}),{id:t.id});this.paramedicToEdit.set(a),this.toastService.info(`\u062A\u0645 \u062A\u0639\u062F\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u0633\u0639\u0641: ${this.editParamedic.arabicName} (${this.editParamedic.name})`,3e3),this.editParamedic.newPassword&&this.editParamedic.newPassword.trim()!==""&&this.toastService.info(`\u062A\u0645 \u062A\u063A\u064A\u064A\u0631 \u0643\u0644\u0645\u0629 \u0645\u0631\u0648\u0631 \u0627\u0644\u0645\u0633\u0639\u0641: ${this.editParamedic.arabicName}`,3e3),this.closeEditModal(),this.loadData()},error:r=>{console.error("Error updating paramedic:",r),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0633\u0639\u0641")}})}showDeleteConfirmation(t){this.paramedicToDelete.set(t),this.confirmationModalConfig.set({type:"delete",title:"\u062A\u0623\u0643\u064A\u062F \u062D\u0630\u0641 \u0627\u0644\u0645\u0633\u0639\u0641",message:`\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u0623\u0646\u0643 \u062A\u0631\u064A\u062F \u062D\u0630\u0641 \u062D\u0633\u0627\u0628 \u0627\u0644\u0645\u0633\u0639\u0641 ${t.arabicName}\u061F<br>\u0644\u0627 \u064A\u0645\u0643\u0646 \u0627\u0644\u062A\u0631\u0627\u062C\u0639 \u0639\u0646 \u0647\u0630\u0627 \u0627\u0644\u0625\u062C\u0631\u0627\u0621.`,confirmButtonText:"\u062D\u0630\u0641",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621",highlightedText:t.arabicName}),this.isDeleteModalOpen.set(!0)}closeDeleteConfirmation(){this.paramedicToDelete.set(null),this.isDeleteModalOpen.set(!1)}confirmDeleteParamedic(){let t=this.paramedicToDelete();t&&this.paramedicService.deleteParamedic(t.id).subscribe({next:()=>{this.toastService.success(`\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0645\u0633\u0639\u0641: ${t.arabicName} (${t.name})`,3e3),this.closeDeleteConfirmation(),this.loadData()},error:e=>{console.error("Error deleting paramedic:",e),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u062D\u0630\u0641 \u0627\u0644\u0645\u0633\u0639\u0641")}}),this.isEditModalOpen.set(!1)}clearIndividualBalance(t){this.paramedicService.clearBalance(t.id).subscribe({next:()=>{delete this.reductionAmounts[t.id],this.toastService.success(`\u062A\u0645 \u062A\u0635\u0641\u064A\u0631 \u0627\u0644\u0631\u0635\u064A\u062F \u0644\u0644\u0645\u0633\u0639\u0641: ${t.arabicName}`,3e3),this.loadData()},error:e=>{console.error("Error clearing balance:",e),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u062A\u0635\u0641\u064A\u0631 \u0627\u0644\u0631\u0635\u064A\u062F")}})}ngOnInit(){this.route.queryParams.subscribe(t=>{t.filterValue&&this.searchTerm.set(t.filterValue)}),this.loadData()}reduceBalance(t,e){let n=this.validationService.validateBalanceReduction(e,t.amountOwed);if(!n.valid){n.errors.forEach(r=>{this.toastService.error(r)});return}n.warnings&&n.warnings.length>0&&n.warnings.forEach(r=>{this.toastService.warning(r,5e3)}),this.paramedicService.reduceBalance(t.id,e).subscribe({next:()=>{delete this.reductionAmounts[t.id];let r;if(e>t.amountOwed){let a=e-t.amountOwed;r=`\u062A\u0645 \u0627\u0644\u062F\u0641\u0639 \u0648\u062A\u0633\u062C\u064A\u0644 \u062F\u064A\u0646 \u0644\u0644\u0645\u0633\u0639\u0641: ${t.arabicName} (\u062F\u064A\u0646: \u20AA${a.toFixed(2)})`}else r=`\u062A\u0645 \u062E\u0635\u0645 \u20AA${e} \u0645\u0646 \u0631\u0635\u064A\u062F \u0627\u0644\u0645\u0633\u0639\u0641: ${t.arabicName}`;this.toastService.success(r,3e3),this.loadData()},error:r=>{console.error("Error reducing balance:",r),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u062E\u0635\u0645 \u0627\u0644\u0631\u0635\u064A\u062F")}})}toggleMobileFilters(){this.showFiltersOnMobile.update(t=>!t)}resetFilters(){this.searchTerm.set(""),this.filterStatus.set("all"),this.minOwed.set(null),this.maxOwed.set(null),this.showFiltersOnMobile.set(!1),this.toastService.info("\u062A\u0645\u062A \u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 \u0627\u0644\u0641\u0644\u0627\u062A\u0631",3e3),this.currentPage=1,this.loadData()}applyFiltersOnSearch(){this.currentPage=1,this.loadData()}getStatusOptions(){return["\u0645\u062A\u0627\u062D","\u0641\u064A \u0631\u062D\u0644\u0629","\u063A\u064A\u0631 \u0645\u062A\u0635\u0644","\u0641\u064A \u0625\u062C\u0627\u0632\u0629"]}isAddFormValid(){return!!(this.newParamedic.arabicName&&this.newParamedic.password&&(this.newParamedic.username||this.newParamedic.email))}isEditFormValid(){return!!(this.editParamedic.arabicName&&(this.editParamedic.username||this.editParamedic.email))}onProfileImageSelected(t){let e=t.target;if(e.files&&e.files[0]){let n=e.files[0];if(!n.type.startsWith("image/")){this.toastService.error("\u0627\u0644\u0631\u062C\u0627\u0621 \u0627\u062E\u062A\u064A\u0627\u0631 \u0645\u0644\u0641 \u0635\u0648\u0631\u0629 \u0635\u062D\u064A\u062D");return}if(n.size>2*1024*1024){this.toastService.error("\u062D\u062C\u0645 \u0627\u0644\u0635\u0648\u0631\u0629 \u064A\u062C\u0628 \u0623\u0646 \u0644\u0627 \u064A\u062A\u062C\u0627\u0648\u0632 2 \u0645\u064A\u062C\u0627\u0628\u0627\u064A\u062A");return}let r=new FileReader;r.onload=a=>{a.target?.result&&(this.editParamedic.profileImageUrl=a.target.result)},r.readAsDataURL(n)}}removeProfileImage(){this.editParamedic.profileImageUrl=""}getParamedicBalanceDisplay(t){let e=t.amountReceivable||0,r=(t.amountPayable||0)-e;return r>0?{amount:r,label:"\u0627\u062C\u0645\u0639 \u0645\u0646 \u0627\u0644\u0645\u0633\u0639\u0641",colorClass:"text-danger",action:"collect"}:r<0?{amount:Math.abs(r),label:"\u0627\u062F\u0641\u0639 \u0644\u0644\u0645\u0633\u0639\u0641",colorClass:"text-success",action:"pay"}:{amount:0,label:"\u0645\u062D\u0633\u0648\u0628",colorClass:"text-muted",action:"settled"}}recordPayment(t){let e=this.getParamedicBalanceDisplay(t);if(e.action!=="collect"){this.toastService.error("\u0627\u0644\u0645\u0633\u0639\u0641 \u0644\u0627 \u064A\u0645\u0644\u0643 \u0645\u0628\u0644\u063A \u0645\u0633\u062A\u062D\u0642 \u0644\u0644\u0634\u0631\u0643\u0629");return}let n=prompt(`\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0645\u0637\u0644\u0648\u0628 \u062A\u062D\u0635\u064A\u0644\u0647 \u0645\u0646 ${t.arabicName}:`,e.amount.toString());if(!n)return;let r=parseFloat(n);if(isNaN(r)||r<=0){this.toastService.error("\u0627\u0644\u0631\u062C\u0627\u0621 \u0625\u062F\u062E\u0627\u0644 \u0645\u0628\u0644\u063A \u0635\u062D\u064A\u062D");return}this.paramedicService.reduceBalance(t.id,r).subscribe({next:()=>{this.toastService.success(`\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 \u062F\u0641\u0639 \u0645\u0646 ${t.arabicName}: \u20AA${r.toFixed(2)}`,3e3),this.loadData()},error:a=>{console.error("Error recording payment:",a),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u0641\u0639")}})}recordExpense(t){let e=this.getParamedicBalanceDisplay(t);if(e.action!=="pay"){this.toastService.error("\u0627\u0644\u0634\u0631\u0643\u0629 \u0644\u0627 \u062A\u0645\u0644\u0643 \u0645\u0628\u0644\u063A \u0645\u0633\u062A\u062D\u0642 \u0644\u0644\u0645\u0633\u0639\u0641");return}let n=prompt(`\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0645\u0637\u0644\u0648\u0628 \u0635\u0631\u0641\u0647 \u0644\u0640 ${t.arabicName}:`,e.amount.toString());if(!n)return;let r=parseFloat(n);if(isNaN(r)||r<=0){this.toastService.error("\u0627\u0644\u0631\u062C\u0627\u0621 \u0625\u062F\u062E\u0627\u0644 \u0645\u0628\u0644\u063A \u0635\u062D\u064A\u062D");return}this.toastService.warning("\u0645\u064A\u0632\u0629 \u0635\u0631\u0641 \u0627\u0644\u0645\u0628\u0627\u0644\u063A \u0644\u0644\u0645\u0633\u0639\u0641\u064A\u0646 \u0642\u064A\u062F \u0627\u0644\u062A\u0637\u0648\u064A\u0631",3e3)}static \u0275fac=function(e){return new(e||i)(G(ft),G(Ai),G(Xe),G(Ye),G(cr),G(as))};static \u0275cmp=Oe({type:i,selectors:[["app-paramedics-list"]],decls:15,vars:6,consts:[["profileImageInput",""],[1,"d-flex","flex-column","min-vh-100","bg-light"],[3,"confirmed","cancelled","isOpen","config"],[1,"flex-grow-1","p-3","p-lg-4"],[1,"container-fluid","p-0"],[1,"row","g-4"],[1,"col-12","col-lg-8"],[1,"row","row-cols-1","row-cols-md-2","row-cols-xl-2","g-4"],[1,"col"],[1,"col-12","text-center","text-muted","p-5"],[1,"mt-4"],["title","\u0625\u0636\u0627\u0641\u0629 \u0645\u0633\u0639\u0641 \u062C\u062F\u064A\u062F",1,"fab","shadow-lg",3,"click"],[1,"fa-solid","fa-plus","fa-lg"],[1,"modal-backdrop","fade","show"],["tabindex","-1","role","dialog",1,"modal","fade","show","d-block"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content","rounded-xl","shadow-lg","border-0"],[1,"modal-header","bg-primary-custom","rounded-top-xl","border-0","justify-content-between"],[1,"modal-title","fw-bold","text-white"],["type","button",2,"background-color","transparent","border","none","color","white",3,"click"],[1,"fa-solid","fa-xmark",2,"font-size","20px"],[1,"modal-body","p-4",2,"max-height","70vh","overflow-y","auto"],[3,"ngSubmit"],[1,"row","g-3","text-end"],[1,"col-12"],[1,"fw-bold","text-dark","border-bottom","pb-2","mb-3"],[1,"col-md-6"],["for","newArabicName",1,"form-label","small","fw-medium"],[1,"text-danger"],["id","newArabicName","type","text","placeholder","\u0645\u062B\u0627\u0644: \u0623\u062D\u0645\u062F \u062D\u0633\u0646","name","arabicName","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","newName",1,"form-label","small","fw-medium"],["id","newName","type","text","placeholder","Example: Ahmad Hassan","name","name",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12","mt-4"],[1,"text-muted","d-block","mb-3"],[1,"fa-solid","fa-info-circle","me-1"],["for","newUsername",1,"form-label","small","fw-medium"],["id","newUsername","type","text","placeholder","username","name","username",1,"form-control",3,"ngModelChange","ngModel"],["for","newEmail",1,"form-label","small","fw-medium"],["id","newEmail","type","email","placeholder","example@email.com","name","email",1,"form-control",3,"ngModelChange","ngModel"],["for","newPassword",1,"form-label","small","fw-medium"],["id","newPassword","type","password","placeholder","\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631","name","password","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","newInitialOwed",1,"form-label","small","fw-medium"],["id","newInitialOwed","type","number","min","0","step","0.01","name","amountOwed","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-end","mt-4"],["type","submit",1,"btn","btn-primary-custom","rounded-pill","px-4","fw-bold",3,"disabled"],[1,"modal-backdrop","fade","show","reducedZIndex"],["tabindex","-1","role","dialog",1,"modal","fade","show","d-block","reducedZIndex"],[1,"modal-header","bg-warning","rounded-top-xl","border-0","justify-content-between"],[1,"modal-title","fw-bold","text-dark"],["type","button",2,"background-color","transparent","border","none",3,"click"],["for","editArabicName",1,"form-label","small","fw-medium"],["id","editArabicName","type","text","placeholder","\u0645\u062B\u0627\u0644: \u0623\u062D\u0645\u062F \u062D\u0633\u0646","name","arabicName","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","editName",1,"form-label","small","fw-medium"],["id","editName","type","text","placeholder","Example: Ahmad Hassan","name","name",1,"form-control",3,"ngModelChange","ngModel"],["for","editUsername",1,"form-label","small","fw-medium"],["id","editUsername","type","text","placeholder","username","name","username",1,"form-control",3,"ngModelChange","ngModel"],["for","editEmail",1,"form-label","small","fw-medium"],["id","editEmail","type","email","placeholder","example@email.com","name","email",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-label","small","fw-medium"],[1,"d-flex","align-items-center","gap-3"],[1,"position-relative"],[1,"rounded-circle","bg-secondary","d-flex","align-items-center","justify-content-center",2,"width","80px","height","80px"],["type","file","accept","image/*",1,"d-none",3,"change"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"fa-solid","fa-upload","me-1"],[1,"text-muted","d-block","mt-1"],["for","editJobTitle",1,"form-label","small","fw-medium"],["id","editJobTitle","type","text","placeholder","\u0645\u062B\u0627\u0644: \u0645\u0633\u0639\u0641 \u0637\u0648\u0627\u0631\u0626","name","jobTitle",1,"form-control",3,"ngModelChange","ngModel"],["for","editEducationLevel",1,"form-label","small","fw-medium"],["id","editEducationLevel","name","educationLevel",1,"form-select",3,"ngModelChange","ngModel"],["value",""],[3,"value"],["for","editPhoneNumber",1,"form-label","small","fw-medium"],["id","editPhoneNumber","type","tel","placeholder","05XX-XXX-XXXX","name","phoneNumber","dir","ltr",1,"form-control",3,"ngModelChange","ngModel"],["for","editStatus",1,"form-label","small","fw-medium"],["id","editStatus","name","arabicStatus","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","editTrips",1,"form-label","small","fw-medium"],["id","editTrips","type","number","min","0","name","tripsToday","readonly","","disabled","",1,"form-control",2,"background-color","#e9ecef",3,"ngModelChange","ngModel"],["for","editAmountOwed",1,"form-label","small","fw-medium"],["id","editAmountOwed","type","number","min","0","step","0.01","name","amountOwed","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-check","form-switch","d-flex","align-items-center","justify-content-start","gap-2"],["for","editIsActive",1,"form-check-label","fw-medium"],["type","checkbox","role","switch","id","editIsActive","name","isActive",1,"form-check-input",3,"ngModelChange","ngModel"],[1,"text-muted","d-block","mt-2","text-end"],["for","editNewPassword",1,"form-label","small","fw-medium"],["id","editNewPassword","type","password","placeholder","\u0627\u062A\u0631\u0643\u0647 \u0641\u0627\u0631\u063A\u064B\u0627 \u0625\u0630\u0627 \u0643\u0646\u062A \u0644\u0627 \u062A\u0631\u064A\u062F \u062A\u063A\u064A\u064A\u0631 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631","name","newPassword","suggest","off","autocomplete","off",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-muted","d-block","mt-2"],[1,"d-flex","justify-content-between","gap-2","mt-4","pt-3","border-top"],[1,"d-flex","gap-2"],["type","submit",1,"btn","btn-warning","rounded-pill","px-4","fw-bold",3,"disabled"],[1,"fa-solid","fa-floppy-disk","me-1"],["type","button",1,"btn","btn-outline-secondary","rounded-pill","px-4",3,"click"],["type","button",1,"btn","btn-danger","rounded-pill","px-4",3,"click"],[1,"fa-solid","fa-trash","me-1"],["alt","\u0635\u0648\u0631\u0629 \u0627\u0644\u0645\u0633\u0639\u0641",1,"rounded-circle","object-fit-cover","border",2,"width","80px","height","80px",3,"src"],["type","button","title","\u0625\u0632\u0627\u0644\u0629 \u0627\u0644\u0635\u0648\u0631\u0629",1,"btn","btn-danger","btn-sm","rounded-circle","position-absolute","top-0","start-0",2,"width","24px","height","24px","padding","0",3,"click"],[1,"fa-solid","fa-times",2,"font-size","12px"],[1,"fa-solid","fa-user","text-white",2,"font-size","32px"],[1,"fa-solid","fa-circle-check","text-success","me-1"],[1,"fa-solid","fa-circle-xmark","text-danger","me-1"],[1,"card","shadow-sm","rounded-xl","h-100","position-relative",3,"ngClass"],[1,"position-absolute","top-0","start-0","m-3","d-flex","gap-2"],["title","\u062A\u0639\u062F\u064A\u0644 \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0645\u0633\u0639\u0641",1,"btn","btn-sm","btn-outline-primary","rounded-circle",2,"width","32px","height","32px","padding","0",3,"click"],[1,"fa-solid","fa-pen"],[1,"badge","bg-danger","position-absolute","top-0","end-0","m-3"],[1,"card-body","p-4","d-flex","flex-column"],[1,"d-flex","align-items-center","gap-3","mb-4"],[1,"rounded-circle","object-fit-cover","flex-shrink-0",2,"width","56px","height","56px",3,"alt","src"],[1,"flex-grow-1"],[1,"h6","fw-bold","m-0","text-dark"],[1,"small","text-muted","m-0","mt-1"],[1,"row","pt-4","border-top","border-light-subtle","g-3","mb-4"],[1,"col-6"],[1,"text-muted","small","m-0"],[1,"h5","fw-semibold","m-0","text-dark"],[1,"fa-solid","fa-ban","me-1"],[1,"fa-solid","fa-user","me-1"],[1,"fa-solid","fa-face-frown","fs-2","mb-3"],[1,"h5"],[3,"pageChange","itemsPerPageChange","currentPage","totalItems","itemsPerPage","maxVisiblePages"]],template:function(e,n){e&1&&(s(0,"div",1)(1,"app-confirmation-modal",2),T("confirmed",function(){return n.confirmDeleteParamedic()})("cancelled",function(){return n.closeDeleteConfirmation()}),l(),H(2,gC,55,7)(3,wC,124,16),s(4,"main",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7),Te(9,AC,19,9,"div",8,pC),H(11,MC,4,0,"div",9),l(),H(12,FC,2,4,"div",10),l()()()(),s(13,"button",11),T("click",function(){return n.isAddModalOpen.set(!0)}),x(14,"i",12),l()()),e&2&&(m(),S("isOpen",n.isDeleteModalOpen())("config",n.confirmationModalConfig()),m(),le(n.isAddModalOpen()?2:-1),m(),le(n.isEditModalOpen()&&n.paramedicToEdit()?3:-1),m(6),Ee(n.getPaginatedParamedics()),m(2),le(n.filteredParamedics().length===0?11:-1),m(),le(n.filteredParamedics().length>0?12:-1))},dependencies:[Le,Ft,tt,Kt,Ot,Lt,et,vi,Xn,At,ot,Xt,Zt,xi,rt,$t,Mi,Wi],styles:["[_nghost-%COMP%]{display:block;font-family:Inter,sans-serif;direction:rtl}.rounded-xl[_ngcontent-%COMP%]{border-radius:.75rem!important}.rounded-lg[_ngcontent-%COMP%]{border-radius:.5rem!important}.rounded-top-xl[_ngcontent-%COMP%]{border-top-left-radius:.75rem!important;border-top-right-radius:.75rem!important}.driver-status-dot[_ngcontent-%COMP%]{width:.6rem;height:.6rem;border-radius:50%;display:inline-block;margin-left:.5rem}.btn-primary-custom[_ngcontent-%COMP%], .btn-primary-custom[_ngcontent-%COMP%]:focus{background-color:#1193d4!important;border-color:#1193d4!important;color:#fff;transition:background-color .3s ease}.btn-primary-custom[_ngcontent-%COMP%]:hover{background-color:#0c7dbf!important;border-color:#0c7dbf!important}.btn-success[_ngcontent-%COMP%]{background-color:#10b981!important;border-color:#10b981!important}.btn-outline-primary[_ngcontent-%COMP%]{border-color:#1193d4!important;color:#1193d4!important}.btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:#1193d4!important;border-color:#1193d4!important;color:#fff!important}.opacity-75[_ngcontent-%COMP%]{opacity:.75}.bg-light[_ngcontent-%COMP%]{background-color:#f6f7f8!important}.card[_ngcontent-%COMP%]{color:#1c1c1e;border:none}.text-dark[_ngcontent-%COMP%]{color:#1c1c1e!important}.modal[_ngcontent-%COMP%]{background-color:#00000080}.modal-dialog[_ngcontent-%COMP%]{max-width:90%;margin:1.75rem auto}@media (min-width: 576px){.modal-dialog[_ngcontent-%COMP%]{max-width:500px}.modal-dialog.modal-lg[_ngcontent-%COMP%]{max-width:800px}}.form-check-input[_ngcontent-%COMP%]{width:3em;height:1.5em;cursor:pointer}.form-check-input[_ngcontent-%COMP%]:checked{background-color:#10b981;border-color:#10b981}input[type=password][_ngcontent-%COMP%]{letter-spacing:.1em}@media (min-width: 992px){.container-fluid[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.sticky-lg-top[_ngcontent-%COMP%]{position:sticky;top:80px}.btn-lg-small[_ngcontent-%COMP%]{padding:.5rem 1rem!important;font-size:.875rem!important}.mt-auto[_ngcontent-%COMP%]   .mt-3[_ngcontent-%COMP%]{margin-top:.5rem!important}}.modal-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.reducedZIndex[_ngcontent-%COMP%]{z-index:1049}.fab[_ngcontent-%COMP%]{position:fixed;bottom:2rem;left:2rem;width:56px;height:56px;border-radius:50%;background-color:#1193d4;color:#fff;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;z-index:1000}.fab[_ngcontent-%COMP%]:hover{background-color:#0d7ab8;transform:scale(1.1);box-shadow:0 12px 24px #0003!important}.fab[_ngcontent-%COMP%]:active{transform:scale(.95)}@media (max-width: 768px){.fab[_ngcontent-%COMP%]{bottom:1.5rem;left:1.5rem;width:48px;height:48px}}"],changeDetection:0})};var os=class i{constructor(t){this.http=t}API_URL=`${xt.apiEndpoint}/locations`;getLocations(t){let e=Nt(t);return this.http.get(this.API_URL,{params:e})}getCommonLocations(){return this.http.get(`${this.API_URL}/common`).pipe(Be(t=>t.data||[]))}getCustomLocations(){return this.http.get(`${this.API_URL}/custom`).pipe(Be(t=>t.data||[]))}searchLocations(t){let e=Nt({searchTerm:t});return this.http.get(`${this.API_URL}/search`,{params:e}).pipe(Be(n=>n||[]))}getLocationById(t){return this.http.get(`${this.API_URL}/${t}`).pipe(Be(e=>e.data))}createLocation(t){return this.http.post(this.API_URL,t).pipe(Be(e=>ve({id:e.data.id},t)))}updateLocation(t,e){return this.http.put(`${this.API_URL}/${t}`,e).pipe(Be(n=>ve({id:t},e)))}deleteLocation(t){return this.http.delete(`${this.API_URL}/${t}`).pipe(Be(()=>{}))}toggleLocationStatus(t){return this.http.patch(`${this.API_URL}/${t}/toggle-status`,{}).pipe(Be(e=>({id:t})))}static \u0275fac=function(e){return new(e||i)(Ue(It))};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})};var kC=(i,t)=>t.id;function PC(i,t){i&1&&(s(0,"div",4)(1,"div",6)(2,"span",7),d(3,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),l()()())}function DC(i,t){if(i&1){let e=Q();s(0,"a",11),T("click",function(){let r=b(e).$implicit,a=h(3);return C(a.selectLocation(r))}),s(1,"span"),d(2),l(),s(3,"span",12),d(4),l()()}if(i&2){let e=t.$implicit,n=h(3);m(2),z(e.name),m(),gn(n.getLocationTypeBadgeClass(e.locationType)),m(),q(" ",n.getLocationTypeLabel(e.locationType)," ")}}function IC(i,t){if(i&1&&Te(0,DC,5,4,"a",10,kC),i&2){let e=h(2);Ee(e.filteredLocations())}}function OC(i,t){i&1&&(s(0,"div",8),d(1," \u0644\u0627 \u062A\u0648\u062C\u062F \u0646\u062A\u0627\u0626\u062C "),l())}function LC(i,t){i&1&&(s(0,"div",9),x(1,"i",13),d(2," \u0627\u0643\u062A\u0628 3 \u0623\u062D\u0631\u0641 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644 \u0644\u0644\u0628\u062D\u062B "),l())}function RC(i,t){if(i&1&&(s(0,"div",5),H(1,IC,2,0)(2,OC,2,0,"div",8)(3,LC,3,0,"div",9),l()),i&2){let e=h();m(),le(e.filteredLocations().length>0?1:-1),m(),le(e.filteredLocations().length===0&&e.searchTerm().length>=3?2:-1),m(),le(e.searchTerm().length>0&&e.searchTerm().length<3?3:-1)}}var ss=class i{constructor(t){this.locationService=t}label="\u0627\u0644\u0645\u0648\u0642\u0639";placeholder="\u0627\u0628\u062D\u062B \u0639\u0646 \u0645\u0648\u0642\u0639...";required=!1;disabled=!1;selectedLocationId="";selectedLocationName="";locationSelected=new di;searchTerm=Z("");commonLocations=Z([]);customLocations=Z([]);isDropdownOpen=Z(!1);isLoading=Z(!1);filteredLocations=We(()=>{let t=this.searchTerm().toLowerCase().trim();if(t.length<3)return[];let e=this.commonLocations().filter(r=>r.name.toLowerCase().includes(t)),n=this.customLocations().filter(r=>r.name.toLowerCase().includes(t));return[...e,...n]});ngOnInit(){this.selectedLocationName&&this.searchTerm.set(this.selectedLocationName)}onSearchChange(){let t=this.searchTerm().trim();t.length>=3?(this.performSearch(t),this.isDropdownOpen.set(!0)):this.isDropdownOpen.set(!1)}performSearch(t){this.isLoading.set(!0),this.locationService.searchLocations(t).subscribe({next:e=>{let n=e.filter(a=>a.locationType==="common"),r=e.filter(a=>a.locationType==="custom");this.commonLocations.set(n),this.customLocations.set(r),this.isLoading.set(!1)},error:e=>{console.error("Error searching locations:",e),this.isLoading.set(!1)}})}selectLocation(t){this.searchTerm.set(t.name),this.isDropdownOpen.set(!1),this.locationSelected.emit({id:t.id,name:t.name,tag:t.locationType,isNew:!1})}onFocus(){this.searchTerm().trim().length>=3&&this.filteredLocations().length>0&&this.isDropdownOpen.set(!0)}onBlur(){setTimeout(()=>{this.isDropdownOpen.set(!1);let t=this.searchTerm().trim();t&&([...this.commonLocations(),...this.customLocations()].find(r=>r.name.toLowerCase()===t.toLowerCase())||this.locationSelected.emit({id:"",name:t,tag:"custom",isNew:!0}))},200)}getLocationTypeLabel(t){return t==="common"?"\u0645\u0648\u0642\u0639 \u0634\u0627\u0626\u0639":"\u0645\u0648\u0642\u0639 \u0645\u062E\u0635\u0635"}getLocationTypeBadgeClass(t){return t==="common"?"badge bg-primary":"badge bg-secondary"}static \u0275fac=function(e){return new(e||i)(G(os))};static \u0275cmp=Oe({type:i,selectors:[["app-location-search"]],inputs:{label:"label",placeholder:"placeholder",required:"required",disabled:"disabled",selectedLocationId:"selectedLocationId",selectedLocationName:"selectedLocationName"},outputs:{locationSelected:"locationSelected"},decls:7,vars:7,consts:[[1,"location-search-container"],[1,"form-label","small","fw-medium"],[1,"position-relative"],["type","text","autocomplete","off",1,"form-control",3,"ngModelChange","focus","blur","placeholder","ngModel","required","disabled"],[1,"position-absolute","top-50","end-0","translate-middle-y","me-2"],[1,"dropdown-menu","show","w-100","mt-1","shadow-sm",2,"max-height","300px","overflow-y","auto"],["role","status",1,"spinner-border","spinner-border-sm","text-primary"],[1,"visually-hidden"],[1,"dropdown-item","text-muted","text-center"],[1,"dropdown-item","text-muted","small"],["href","javascript:void(0)",1,"dropdown-item","d-flex","justify-content-between","align-items-center"],["href","javascript:void(0)",1,"dropdown-item","d-flex","justify-content-between","align-items-center",3,"click"],[1,"badge-sm"],[1,"fa","fa-info-circle","me-1"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"label",1),d(2),l(),s(3,"div",2)(4,"input",3),V("ngModelChange",function(a){return N(n.searchTerm,a)||(n.searchTerm=a),a}),T("ngModelChange",function(){return n.onSearchChange()})("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()}),l(),H(5,PC,4,0,"div",4)(6,RC,4,3,"div",5),l()()),e&2&&(m(2),z(n.label),m(2),S("placeholder",n.placeholder),R("ngModel",n.searchTerm),S("required",n.required)("disabled",n.disabled),m(),le(n.isLoading()?5:-1),m(),le(n.isDropdownOpen()&&!n.isLoading()?6:-1))},dependencies:[Le,tt,et,ot,Zt,rt],styles:[".location-search-container[_ngcontent-%COMP%]{position:relative}.dropdown-menu[_ngcontent-%COMP%]{z-index:1050;border:1px solid #dee2e6;border-radius:.375rem}.dropdown-item[_ngcontent-%COMP%]{padding:.5rem 1rem;cursor:pointer;transition:background-color .15s ease-in-out}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.dropdown-item[_ngcontent-%COMP%]:active{background-color:#e9ecef}.badge-sm[_ngcontent-%COMP%]{font-size:.75rem;padding:.25rem .5rem}.dropdown-divider[_ngcontent-%COMP%]{margin:.25rem 0}"]})};var ls=class i{constructor(t){this.http=t}API_URL=`${xt.apiEndpoint}/transportation-types`;searchTransportationTypes(t){let e=new Ki().set("searchTerm",t);return this.http.get(`${this.API_URL}/search`,{params:e}).pipe(Be(n=>n||[]))}getTransportationTypes(t){return this.http.get(this.API_URL,{params:t})}createTransportationType(t){return this.http.post(this.API_URL,t)}updateTransportationType(t,e){return this.http.put(`${this.API_URL}/${t}`,e)}deleteTransportationType(t){return this.http.delete(`${this.API_URL}/${t}`)}toggleTransportationTypeStatus(t){return this.http.get(`${this.API_URL}/${t}`).pipe(Be(e=>{let n=e.isActive;return this.http.put(`${this.API_URL}/${t}`,{isActive:!n})}))}static \u0275fac=function(e){return new(e||i)(Ue(It))};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})};var NC=(i,t)=>t.id;function VC(i,t){if(i&1&&(s(0,"div",4)(1,"div",6)(2,"span",7),d(3),l()()()),i&2){let e=h();m(3),z(e.isCreatingNew()?"\u062C\u0627\u0631\u064A \u0627\u0644\u0625\u0636\u0627\u0641\u0629...":"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644...")}}function BC(i,t){if(i&1&&(s(0,"span",13),d(1),l()),i&2){let e=h().$implicit;m(),z(e.description)}}function UC(i,t){if(i&1){let e=Q();s(0,"a",10),T("click",function(){let r=b(e).$implicit,a=h(3);return C(a.selectType(r))}),s(1,"div",11)(2,"span",12),d(3),l(),H(4,BC,2,1,"span",13),l()()}if(i&2){let e=t.$implicit;m(3),z(e.name),m(),le(e.description?4:-1)}}function WC(i,t){if(i&1&&Te(0,UC,5,2,"a",9,NC),i&2){let e=h(2);Ee(e.filteredTypes())}}function jC(i,t){i&1&&(s(0,"div",8),d(1," \u0644\u0627 \u062A\u0648\u062C\u062F \u0646\u062A\u0627\u0626\u062C "),l())}function HC(i,t){if(i&1&&(s(0,"div",5),H(1,WC,2,0)(2,jC,2,0,"div",8),l()),i&2){let e=h();m(),le(e.filteredTypes().length>0?1:-1),m(),le(e.filteredTypes().length===0&&e.searchTerm().length>=1?2:-1)}}var us=class i{constructor(t){this.transportationTypeService=t}label="\u0627\u0644\u062A\u0634\u062E\u064A\u0635";placeholder="\u0627\u0628\u062D\u062B \u0639\u0646 \u0627\u0644\u062A\u0634\u062E\u064A\u0635...";required=!1;disabled=!1;selectedTypeName="";typeSelected=new di;searchTerm=Z("");transportationTypes=Z([]);isDropdownOpen=Z(!1);isLoading=Z(!1);isCreatingNew=Z(!1);selectedTypeId=Z("");filteredTypes=We(()=>this.searchTerm().trim().length<1?[]:this.transportationTypes());ngOnInit(){this.selectedTypeName&&(this.searchTerm.set(this.selectedTypeName),this.selectedTypeId.set("existing"))}ngOnChanges(t){t.selectedTypeName&&t.selectedTypeName.currentValue&&(this.searchTerm.set(t.selectedTypeName.currentValue),this.selectedTypeId.set("existing"))}onSearchChange(){let t=this.searchTerm().trim();t.length>=1?(this.performSearch(t),this.isDropdownOpen.set(!0)):this.isDropdownOpen.set(!1)}performSearch(t){this.isLoading.set(!0),this.transportationTypeService.searchTransportationTypes(t).subscribe({next:e=>{this.transportationTypes.set(e),this.isLoading.set(!1)},error:e=>{console.error("Error searching transportation types:",e),this.isLoading.set(!1)}})}selectType(t){this.searchTerm.set(t.name),this.selectedTypeId.set(t.id),this.isDropdownOpen.set(!1),this.typeSelected.emit({id:t.id,name:t.name})}onFocus(){this.searchTerm().trim().length>=1&&this.filteredTypes().length>0&&this.isDropdownOpen.set(!0)}onBlur(){setTimeout(()=>{let t=this.searchTerm().trim();if(t&&!this.selectedTypeId()){let e=this.transportationTypes().find(n=>n.name.toLowerCase()===t.toLowerCase());e?this.selectType(e):(this.selectedTypeId.set(""),this.typeSelected.emit({id:"",name:t,isNew:!0}))}this.isDropdownOpen.set(!1)},200)}static \u0275fac=function(e){return new(e||i)(G(ls))};static \u0275cmp=Oe({type:i,selectors:[["app-transportation-type-search"]],inputs:{label:"label",placeholder:"placeholder",required:"required",disabled:"disabled",selectedTypeName:"selectedTypeName"},outputs:{typeSelected:"typeSelected"},features:[vr],decls:7,vars:7,consts:[[1,"transportation-type-search-container"],[1,"form-label","small","fw-medium"],[1,"position-relative"],["type","text","autocomplete","off",1,"form-control",3,"ngModelChange","focus","blur","placeholder","ngModel","required","disabled"],[1,"position-absolute","top-50","end-0","translate-middle-y","me-2"],[1,"dropdown-menu","show","w-100","mt-1","shadow-sm",2,"max-height","300px","overflow-y","auto"],["role","status",1,"spinner-border","spinner-border-sm","text-primary"],[1,"visually-hidden"],[1,"dropdown-item","text-muted","text-center"],["href","javascript:void(0)",1,"dropdown-item"],["href","javascript:void(0)",1,"dropdown-item",3,"click"],[1,"d-flex","flex-column"],[1,"fw-medium"],[1,"text-muted","small"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"label",1),d(2),l(),s(3,"div",2)(4,"input",3),V("ngModelChange",function(a){return N(n.searchTerm,a)||(n.searchTerm=a),a}),T("ngModelChange",function(){return n.onSearchChange()})("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()}),l(),H(5,VC,4,1,"div",4)(6,HC,3,2,"div",5),l()()),e&2&&(m(2),z(n.label),m(2),S("placeholder",n.isCreatingNew()?"\u062C\u0627\u0631\u064A \u0627\u0644\u0625\u0636\u0627\u0641\u0629...":n.placeholder),R("ngModel",n.searchTerm),S("required",n.required)("disabled",n.disabled||n.isCreatingNew()),m(),le(n.isLoading()||n.isCreatingNew()?5:-1),m(),le(n.isDropdownOpen()&&!n.isLoading()&&!n.isCreatingNew()?6:-1))},dependencies:[Le,tt,et,ot,Zt,rt],styles:[".transportation-type-search-container[_ngcontent-%COMP%]{position:relative}.dropdown-menu[_ngcontent-%COMP%]{z-index:1050;border:1px solid #dee2e6;border-radius:.375rem}.dropdown-item[_ngcontent-%COMP%]{padding:.5rem 1rem;cursor:pointer;transition:background-color .15s ease-in-out}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.dropdown-item[_ngcontent-%COMP%]:active{background-color:#e9ecef}.dropdown-divider[_ngcontent-%COMP%]{margin:.25rem 0}"]})};var Ln=class i{constructor(t){this.http=t}API_URL=`${xt.apiEndpoint}/trips`;getTrips(t){let e=Nt(t);return this.http.get(this.API_URL,{params:e})}getTripById(t){return this.http.get(`${this.API_URL}/${t}`)}createTrip(t){return this.http.post(this.API_URL,t)}updateTrip(t,e){return this.http.put(`${this.API_URL}/${t}`,e)}deleteTrip(t){return this.http.delete(`${this.API_URL}/${t}`)}updateStatus(t,e){return this.http.patch(`${this.API_URL}/${t}/status`,{status:e})}getTripStats(){return this.http.get(`${this.API_URL}/stats`)}markLoanCollected(t,e){return this.http.patch(`${this.API_URL}/${t}/loan-collected`,{notes:e}).pipe(Be(n=>n.data))}updateLoanAmount(t,e,n){return this.http.patch(`${this.API_URL}/${t}/loan-amount`,{amount:e,notes:n}).pipe(Be(r=>r.data))}getPatientLoans(t,e){let n=Nt(e);return this.http.get(`${xt.apiEndpoint}/drivers/${t}/patient-loans`,{params:n}).pipe(Be(r=>r))}getAvailableTrips(t){return this.http.get(`${xt.apiEndpoint}/vehicles/${t}/available-trips`)}acceptTrip(t,e){return this.http.post(`${this.API_URL}/${t}/accept`,{driverId:e})}closeTrip(t,e){return this.http.post(`${this.API_URL}/${t}/close`,{transferStatus:e})}uncloseTrip(t){return this.http.post(`${this.API_URL}/${t}/unclose`,{})}createDriverTrip(t,e){return this.http.post(`${xt.apiEndpoint}/drivers/${t}/trips`,e)}getDriverActiveTrips(t){let e=Nt({driverId:t});return this.http.get(this.API_URL,{params:e}).pipe(Be(n=>n.data.filter(r=>!["\u062A\u0645 \u0627\u0644\u0646\u0642\u0644","\u0631\u0641\u0636 \u0627\u0644\u0646\u0642\u0644","\u0628\u0644\u0627\u063A \u0643\u0627\u0630\u0628"].includes(r.transferStatus))))}getDriverHistoricalTrips(t){let e=Nt({driverId:t,limit:"1000"});return this.http.get(this.API_URL,{params:e}).pipe(Be(n=>n.data.filter(r=>["\u062A\u0645 \u0627\u0644\u0646\u0642\u0644","\u0631\u0641\u0636 \u0627\u0644\u0646\u0642\u0644","\u0628\u0644\u0627\u063A \u0643\u0627\u0630\u0628"].includes(r.transferStatus))))}getVehicleHistoricalTrips(t){let e=Nt({vehicleId:t,limit:"1000"});return this.http.get(this.API_URL,{params:e}).pipe(Be(n=>n.data.filter(r=>["\u062A\u0645 \u0627\u0644\u0646\u0642\u0644","\u0631\u0641\u0636 \u0627\u0644\u0646\u0642\u0644","\u0628\u0644\u0627\u063A \u0643\u0627\u0630\u0628"].includes(r.transferStatus))))}getDriverTrips(t){let e=Nt({driverId:t,limit:"1000",sortOrder:"DESC"});return this.http.get(this.API_URL,{params:e}).pipe(Be(n=>n.data||n))}getVehicleTrips(t,e=!1){let n=e?Nt({vehicleId:t,limit:"1000",sortOrder:"DESC",pendingOnly:e}):Nt({vehicleId:t,limit:"1000",sortOrder:"DESC"});return this.http.get(this.API_URL,{params:n}).pipe(Be(r=>r.data||r))}createVehicleTrip(t,e){return this.http.post(`${xt.apiEndpoint}/vehicles/${t}/trips`,e)}getAllTripsForExport(t){let e=Qe(ve({},t),{limit:99999}),n=Nt(e);return this.http.get(this.API_URL,{params:n}).pipe(Be(r=>r.data))}static \u0275fac=function(e){return new(e||i)(Ue(It))};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})};var oi=class i{constructor(t){this.http=t}API_URL=`${xt.apiEndpoint}/vehicles`;getVehicles(t){let e=Nt(t);return this.http.get(this.API_URL,{params:e})}getVehicleById(t){return this.http.get(`${this.API_URL}/${t}`)}createVehicle(t){return this.http.post(this.API_URL,t)}updateVehicle(t,e){return this.http.put(`${this.API_URL}/${t}`,e)}deleteVehicle(t){return this.http.delete(`${this.API_URL}/${t}`)}updateStatus(t,e,n=!1){return this.http.patch(`${this.API_URL}/${t}/status`,{status:e,manualOverride:n})}assignDriver(t,e){return this.http.patch(`${this.API_URL}/${t}/assign-driver`,{driverId:e})}unassignDriver(t){return this.http.patch(`${this.API_URL}/${t}/unassign-driver`,{})}getVehicleMaintenance(t){return this.http.get(`${this.API_URL}/${t}/maintenance`)}getVehicleFuel(t){return this.http.get(`${this.API_URL}/${t}/fuel`)}updateLocation(t,e,n){return this.http.patch(`${this.API_URL}/${t}/location`,{latitude:e,longitude:n})}getAllVehicleLocations(){return this.http.get(`${this.API_URL}/locations`)}getCurrentOdometer(t){return this.http.get(`${this.API_URL}/${t}/current-odometer`).pipe(Be(e=>e))}getMaintenanceOdometers(t){return this.http.get(`${this.API_URL}/${t}/maintenance-odometers`).pipe(Be(e=>e))}static \u0275fac=function(e){return new(e||i)(Ue(It))};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})};var t0={};t0.version="0.18.5";var lo=1200,bs=1252,zC=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],GC={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},V6=function(i){zC.indexOf(i)!=-1&&(bs=GC[0]=i)};function $C(){V6(1252)}var i0=function(i){lo=i,V6(i)};function ZC(){i0(1200),$C()}function qC(i){for(var t=[],e=0;e<i.length>>1;++e)t[e]=String.fromCharCode(i.charCodeAt(2*e+1)+(i.charCodeAt(2*e)<<8));return t.join("")}var Ju=function(t){return String.fromCharCode(t)},J1=function(t){return String.fromCharCode(t)},mi;var zr=null,Zl=!0,Pa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function n0(i){for(var t="",e=0,n=0,r=0,a=0,u=0,p=0,g=0,v=0;v<i.length;)e=i.charCodeAt(v++),a=e>>2,n=i.charCodeAt(v++),u=(e&3)<<4|n>>4,r=i.charCodeAt(v++),p=(n&15)<<2|r>>6,g=r&63,isNaN(n)?p=g=64:isNaN(r)&&(g=64),t+=Pa.charAt(a)+Pa.charAt(u)+Pa.charAt(p)+Pa.charAt(g);return t}function ca(i){var t="",e=0,n=0,r=0,a=0,u=0,p=0,g=0;i=i.replace(/[^\w\+\/\=]/g,"");for(var v=0;v<i.length;)a=Pa.indexOf(i.charAt(v++)),u=Pa.indexOf(i.charAt(v++)),e=a<<2|u>>4,t+=String.fromCharCode(e),p=Pa.indexOf(i.charAt(v++)),n=(u&15)<<4|p>>2,p!==64&&(t+=String.fromCharCode(n)),g=Pa.indexOf(i.charAt(v++)),r=(p&3)<<6|g,g!==64&&(t+=String.fromCharCode(r));return t}var qt=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),ma=function(){if(typeof Buffer<"u"){var i=!Buffer.from;if(!i)try{Buffer.from("foo","utf8")}catch{i=!0}return i?function(t,e){return e?new Buffer(t,e):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function co(i){return qt?Buffer.alloc?Buffer.alloc(i):new Buffer(i):typeof Uint8Array<"u"?new Uint8Array(i):new Array(i)}function Q1(i){return qt?Buffer.allocUnsafe?Buffer.allocUnsafe(i):new Buffer(i):typeof Uint8Array<"u"?new Uint8Array(i):new Array(i)}var Er=function(t){return qt?ma(t,"binary"):t.split("").map(function(e){return e.charCodeAt(0)&255})};function yc(i){if(typeof ArrayBuffer>"u")return Er(i);for(var t=new ArrayBuffer(i.length),e=new Uint8Array(t),n=0;n!=i.length;++n)e[n]=i.charCodeAt(n)&255;return t}function l0(i){if(Array.isArray(i))return i.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],e=0;e<i.length;++e)t[e]=String.fromCharCode(i[e]);return t.join("")}function YC(i){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(i)}var un=qt?function(i){return Buffer.concat(i.map(function(t){return Buffer.isBuffer(t)?t:ma(t)}))}:function(i){if(typeof Uint8Array<"u"){var t=0,e=0;for(t=0;t<i.length;++t)e+=i[t].length;var n=new Uint8Array(e),r=0;for(t=0,e=0;t<i.length;e+=r,++t)if(r=i[t].length,i[t]instanceof Uint8Array)n.set(i[t],e);else{if(typeof i[t]=="string")throw"wtf";n.set(new Uint8Array(i[t]),e)}return n}return[].concat.apply([],i.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function XC(i){for(var t=[],e=0,n=i.length+250,r=co(i.length+255),a=0;a<i.length;++a){var u=i.charCodeAt(a);if(u<128)r[e++]=u;else if(u<2048)r[e++]=192|u>>6&31,r[e++]=128|u&63;else if(u>=55296&&u<57344){u=(u&1023)+64;var p=i.charCodeAt(++a)&1023;r[e++]=240|u>>8&7,r[e++]=128|u>>2&63,r[e++]=128|p>>6&15|(u&3)<<4,r[e++]=128|p&63}else r[e++]=224|u>>12&15,r[e++]=128|u>>6&63,r[e++]=128|u&63;e>n&&(t.push(r.slice(0,e)),e=0,r=co(65535),n=65530)}return t.push(r.slice(0,e)),un(t)}var gs=/\u0000/g,Qu=/[\u0001-\u0006]/g;function _s(i){for(var t="",e=i.length-1;e>=0;)t+=i.charAt(e--);return t}function Ar(i,t){var e=""+i;return e.length>=t?e:Fi("0",t-e.length)+e}function Lf(i,t){var e=""+i;return e.length>=t?e:Fi(" ",t-e.length)+e}function sc(i,t){var e=""+i;return e.length>=t?e:e+Fi(" ",t-e.length)}function KC(i,t){var e=""+Math.round(i);return e.length>=t?e:Fi("0",t-e.length)+e}function JC(i,t){var e=""+i;return e.length>=t?e:Fi("0",t-e.length)+e}var e6=Math.pow(2,32);function ds(i,t){if(i>e6||i<-e6)return KC(i,t);var e=Math.round(i);return JC(e,t)}function lc(i,t){return t=t||0,i.length>=7+t&&(i.charCodeAt(t)|32)===103&&(i.charCodeAt(t+1)|32)===101&&(i.charCodeAt(t+2)|32)===110&&(i.charCodeAt(t+3)|32)===101&&(i.charCodeAt(t+4)|32)===114&&(i.charCodeAt(t+5)|32)===97&&(i.charCodeAt(t+6)|32)===108}var t6=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],wf=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function QC(i){return i||(i={}),i[0]="General",i[1]="0",i[2]="0.00",i[3]="#,##0",i[4]="#,##0.00",i[9]="0%",i[10]="0.00%",i[11]="0.00E+00",i[12]="# ?/?",i[13]="# ??/??",i[14]="m/d/yy",i[15]="d-mmm-yy",i[16]="d-mmm",i[17]="mmm-yy",i[18]="h:mm AM/PM",i[19]="h:mm:ss AM/PM",i[20]="h:mm",i[21]="h:mm:ss",i[22]="m/d/yy h:mm",i[37]="#,##0 ;(#,##0)",i[38]="#,##0 ;[Red](#,##0)",i[39]="#,##0.00;(#,##0.00)",i[40]="#,##0.00;[Red](#,##0.00)",i[45]="mm:ss",i[46]="[h]:mm:ss",i[47]="mmss.0",i[48]="##0.0E+0",i[49]="@",i[56]='"\u4E0A\u5348/\u4E0B\u5348 "hh"\u6642"mm"\u5206"ss"\u79D2 "',i}var ki={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4E0A\u5348/\u4E0B\u5348 "hh"\u6642"mm"\u5206"ss"\u79D2 "'},i6={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},e3={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function uc(i,t,e){for(var n=i<0?-1:1,r=i*n,a=0,u=1,p=0,g=1,v=0,y=0,M=Math.floor(r);v<t&&(M=Math.floor(r),p=M*u+a,y=M*v+g,!(r-M<5e-8));)r=1/(r-M),a=u,u=p,g=v,v=y;if(y>t&&(v>t?(y=g,p=a):(y=v,p=u)),!e)return[0,n*p,y];var E=Math.floor(n*p/y);return[E,n*p-E*y,y]}function ec(i,t,e){if(i>2958465||i<0)return null;var n=i|0,r=Math.floor(86400*(i-n)),a=0,u=[],p={D:n,T:r,u:86400*(i-n)-r,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(p.u)<1e-6&&(p.u=0),t&&t.date1904&&(n+=1462),p.u>.9999&&(p.u=0,++r==86400&&(p.T=r=0,++n,++p.D)),n===60)u=e?[1317,10,29]:[1900,2,29],a=3;else if(n===0)u=e?[1317,8,29]:[1900,1,0],a=6;else{n>60&&--n;var g=new Date(1900,0,1);g.setDate(g.getDate()+n-1),u=[g.getFullYear(),g.getMonth()+1,g.getDate()],a=g.getDay(),n<60&&(a=(a+6)%7),e&&(a=s3(g,u))}return p.y=u[0],p.m=u[1],p.d=u[2],p.S=r%60,r=Math.floor(r/60),p.M=r%60,r=Math.floor(r/60),p.H=r,p.q=a,p}var B6=new Date(1899,11,31,0,0,0),t3=B6.getTime(),i3=new Date(1900,2,1,0,0,0);function U6(i,t){var e=i.getTime();return t?e-=1461*24*60*60*1e3:i>=i3&&(e+=24*60*60*1e3),(e-(t3+(i.getTimezoneOffset()-B6.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function Rf(i){return i.indexOf(".")==-1?i:i.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function n3(i){return i.indexOf("E")==-1?i:i.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function r3(i){var t=i<0?12:11,e=Rf(i.toFixed(12));return e.length<=t||(e=i.toPrecision(10),e.length<=t)?e:i.toExponential(5)}function a3(i){var t=Rf(i.toFixed(11));return t.length>(i<0?12:11)||t==="0"||t==="-0"?i.toPrecision(6):t}function o3(i){var t=Math.floor(Math.log(Math.abs(i))*Math.LOG10E),e;return t>=-4&&t<=-1?e=i.toPrecision(10+t):Math.abs(t)<=9?e=r3(i):t===10?e=i.toFixed(10).substr(0,12):e=a3(i),Rf(n3(e.toUpperCase()))}function Pf(i,t){switch(typeof i){case"string":return i;case"boolean":return i?"TRUE":"FALSE";case"number":return(i|0)===i?i.toString(10):o3(i);case"undefined":return"";case"object":if(i==null)return"";if(i instanceof Date)return Ia(14,U6(i,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+i)}function s3(i,t){t[0]-=581;var e=i.getDay();return i<60&&(e=(e+6)%7),e}function l3(i,t,e,n){var r="",a=0,u=0,p=e.y,g,v=0;switch(i){case 98:p=e.y+543;case 121:switch(t.length){case 1:case 2:g=p%100,v=2;break;default:g=p%1e4,v=4;break}break;case 109:switch(t.length){case 1:case 2:g=e.m,v=t.length;break;case 3:return wf[e.m-1][1];case 5:return wf[e.m-1][0];default:return wf[e.m-1][2]}break;case 100:switch(t.length){case 1:case 2:g=e.d,v=t.length;break;case 3:return t6[e.q][0];default:return t6[e.q][1]}break;case 104:switch(t.length){case 1:case 2:g=1+(e.H+11)%12,v=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:g=e.H,v=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:g=e.M,v=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return e.u===0&&(t=="s"||t=="ss")?Ar(e.S,t.length):(n>=2?u=n===3?1e3:100:u=n===1?10:1,a=Math.round(u*(e.S+e.u)),a>=60*u&&(a=0),t==="s"?a===0?"0":""+a/u:(r=Ar(a,2+n),t==="ss"?r.substr(0,2):"."+r.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":g=e.D*24+e.H;break;case"[m]":case"[mm]":g=(e.D*24+e.H)*60+e.M;break;case"[s]":case"[ss]":g=((e.D*24+e.H)*60+e.M)*60+Math.round(e.S+e.u);break;default:throw"bad abstime format: "+t}v=t.length===3?1:2;break;case 101:g=p,v=1;break}var y=v>0?Ar(g,v):"";return y}function Da(i){var t=3;if(i.length<=t)return i;for(var e=i.length%t,n=i.substr(0,e);e!=i.length;e+=t)n+=(n.length>0?",":"")+i.substr(e,t);return n}var W6=/%/g;function u3(i,t,e){var n=t.replace(W6,""),r=t.length-n.length;return sa(i,n,e*Math.pow(10,2*r))+Fi("%",r)}function c3(i,t,e){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return sa(i,t.substr(0,n),e/Math.pow(10,3*(t.length-n)))}function j6(i,t){var e,n=i.indexOf("E")-i.indexOf(".")-1;if(i.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+j6(i,-t);var r=i.indexOf(".");r===-1&&(r=i.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%r;if(a<0&&(a+=r),e=(t/Math.pow(10,a)).toPrecision(n+1+(r+a)%r),e.indexOf("e")===-1){var u=Math.floor(Math.log(t)*Math.LOG10E);for(e.indexOf(".")===-1?e=e.charAt(0)+"."+e.substr(1)+"E+"+(u-e.length+a):e+="E+"+(u-a);e.substr(0,2)==="0.";)e=e.charAt(0)+e.substr(2,r)+"."+e.substr(2+r),e=e.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");e=e.replace(/\+-/,"-")}e=e.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(p,g,v,y){return g+v+y.substr(0,(r+a)%r)+"."+y.substr(a)+"E"})}else e=t.toExponential(n);return i.match(/E\+00$/)&&e.match(/e[+-]\d$/)&&(e=e.substr(0,e.length-1)+"0"+e.charAt(e.length-1)),i.match(/E\-/)&&e.match(/e\+/)&&(e=e.replace(/e\+/,"e")),e.replace("e","E")}var H6=/# (\?+)( ?)\/( ?)(\d+)/;function d3(i,t,e){var n=parseInt(i[4],10),r=Math.round(t*n),a=Math.floor(r/n),u=r-a*n,p=n;return e+(a===0?"":""+a)+" "+(u===0?Fi(" ",i[1].length+1+i[4].length):Lf(u,i[1].length)+i[2]+"/"+i[3]+Ar(p,i[4].length))}function m3(i,t,e){return e+(t===0?"":""+t)+Fi(" ",i[1].length+2+i[4].length)}var z6=/^#*0*\.([0#]+)/,G6=/\).*[0#]/,$6=/\(###\) ###\\?-####/;function Sn(i){for(var t="",e,n=0;n!=i.length;++n)switch(e=i.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(e)}return t}function n6(i,t){var e=Math.pow(10,t);return""+Math.round(i*e)/e}function r6(i,t){var e=i-Math.floor(i),n=Math.pow(10,t);return t<(""+Math.round(e*n)).length?0:Math.round(e*n)}function f3(i,t){return t<(""+Math.round((i-Math.floor(i))*Math.pow(10,t))).length?1:0}function p3(i){return i<2147483647&&i>-2147483648?""+(i>=0?i|0:i-1|0):""+Math.floor(i)}function dr(i,t,e){if(i.charCodeAt(0)===40&&!t.match(G6)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return e>=0?dr("n",n,e):"("+dr("n",n,-e)+")"}if(t.charCodeAt(t.length-1)===44)return c3(i,t,e);if(t.indexOf("%")!==-1)return u3(i,t,e);if(t.indexOf("E")!==-1)return j6(t,e);if(t.charCodeAt(0)===36)return"$"+dr(i,t.substr(t.charAt(1)==" "?2:1),e);var r,a,u,p,g=Math.abs(e),v=e<0?"-":"";if(t.match(/^00+$/))return v+ds(g,t.length);if(t.match(/^[#?]+$/))return r=ds(e,0),r==="0"&&(r=""),r.length>t.length?r:Sn(t.substr(0,t.length-r.length))+r;if(a=t.match(H6))return d3(a,g,v);if(t.match(/^#+0+$/))return v+ds(g,t.length-t.indexOf("0"));if(a=t.match(z6))return r=n6(e,a[1].length).replace(/^([^\.]+)$/,"$1."+Sn(a[1])).replace(/\.$/,"."+Sn(a[1])).replace(/\.(\d*)$/,function(O,F){return"."+F+Fi("0",Sn(a[1]).length-F.length)}),t.indexOf("0.")!==-1?r:r.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return v+n6(g,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return v+Da(ds(g,0));if(a=t.match(/^#,##0\.([#0]*0)$/))return e<0?"-"+dr(i,t,-e):Da(""+(Math.floor(e)+f3(e,a[1].length)))+"."+Ar(r6(e,a[1].length),a[1].length);if(a=t.match(/^#,#*,#0/))return dr(i,t.replace(/^#,#*,/,""),e);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return r=_s(dr(i,t.replace(/[\\-]/g,""),e)),u=0,_s(_s(t.replace(/\\/g,"")).replace(/[0#]/g,function(O){return u<r.length?r.charAt(u++):O==="0"?"0":""}));if(t.match($6))return r=dr(i,"##########",e),"("+r.substr(0,3)+") "+r.substr(3,3)+"-"+r.substr(6);var y="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return u=Math.min(a[4].length,7),p=uc(g,Math.pow(10,u)-1,!1),r=""+v,y=sa("n",a[1],p[1]),y.charAt(y.length-1)==" "&&(y=y.substr(0,y.length-1)+"0"),r+=y+a[2]+"/"+a[3],y=sc(p[2],u),y.length<a[4].length&&(y=Sn(a[4].substr(a[4].length-y.length))+y),r+=y,r;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return u=Math.min(Math.max(a[1].length,a[4].length),7),p=uc(g,Math.pow(10,u)-1,!0),v+(p[0]||(p[1]?"":"0"))+" "+(p[1]?Lf(p[1],u)+a[2]+"/"+a[3]+sc(p[2],u):Fi(" ",2*u+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return r=ds(e,0),t.length<=r.length?r:Sn(t.substr(0,t.length-r.length))+r;if(a=t.match(/^([#0?]+)\.([#0]+)$/)){r=""+e.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),u=r.indexOf(".");var M=t.indexOf(".")-u,E=t.length-r.length-M;return Sn(t.substr(0,M)+r+t.substr(t.length-E))}if(a=t.match(/^00,000\.([#0]*0)$/))return u=r6(e,a[1].length),e<0?"-"+dr(i,t,-e):Da(p3(e)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(O){return"00,"+(O.length<3?Ar(0,3-O.length):"")+O})+"."+Ar(u,a[1].length);switch(t){case"###,##0.00":return dr(i,"#,##0.00",e);case"###,###":case"##,###":case"#,###":var A=Da(ds(g,0));return A!=="0"?v+A:"";case"###,###.00":return dr(i,"###,##0.00",e).replace(/^0\./,".");case"#,###.00":return dr(i,"#,##0.00",e).replace(/^0\./,".");default:}throw new Error("unsupported format |"+t+"|")}function h3(i,t,e){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return sa(i,t.substr(0,n),e/Math.pow(10,3*(t.length-n)))}function g3(i,t,e){var n=t.replace(W6,""),r=t.length-n.length;return sa(i,n,e*Math.pow(10,2*r))+Fi("%",r)}function Z6(i,t){var e,n=i.indexOf("E")-i.indexOf(".")-1;if(i.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Z6(i,-t);var r=i.indexOf(".");r===-1&&(r=i.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%r;if(a<0&&(a+=r),e=(t/Math.pow(10,a)).toPrecision(n+1+(r+a)%r),!e.match(/[Ee]/)){var u=Math.floor(Math.log(t)*Math.LOG10E);e.indexOf(".")===-1?e=e.charAt(0)+"."+e.substr(1)+"E+"+(u-e.length+a):e+="E+"+(u-a),e=e.replace(/\+-/,"-")}e=e.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(p,g,v,y){return g+v+y.substr(0,(r+a)%r)+"."+y.substr(a)+"E"})}else e=t.toExponential(n);return i.match(/E\+00$/)&&e.match(/e[+-]\d$/)&&(e=e.substr(0,e.length-1)+"0"+e.charAt(e.length-1)),i.match(/E\-/)&&e.match(/e\+/)&&(e=e.replace(/e\+/,"e")),e.replace("e","E")}function jr(i,t,e){if(i.charCodeAt(0)===40&&!t.match(G6)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return e>=0?jr("n",n,e):"("+jr("n",n,-e)+")"}if(t.charCodeAt(t.length-1)===44)return h3(i,t,e);if(t.indexOf("%")!==-1)return g3(i,t,e);if(t.indexOf("E")!==-1)return Z6(t,e);if(t.charCodeAt(0)===36)return"$"+jr(i,t.substr(t.charAt(1)==" "?2:1),e);var r,a,u,p,g=Math.abs(e),v=e<0?"-":"";if(t.match(/^00+$/))return v+Ar(g,t.length);if(t.match(/^[#?]+$/))return r=""+e,e===0&&(r=""),r.length>t.length?r:Sn(t.substr(0,t.length-r.length))+r;if(a=t.match(H6))return m3(a,g,v);if(t.match(/^#+0+$/))return v+Ar(g,t.length-t.indexOf("0"));if(a=t.match(z6))return r=(""+e).replace(/^([^\.]+)$/,"$1."+Sn(a[1])).replace(/\.$/,"."+Sn(a[1])),r=r.replace(/\.(\d*)$/,function(O,F){return"."+F+Fi("0",Sn(a[1]).length-F.length)}),t.indexOf("0.")!==-1?r:r.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return v+(""+g).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return v+Da(""+g);if(a=t.match(/^#,##0\.([#0]*0)$/))return e<0?"-"+jr(i,t,-e):Da(""+e)+"."+Fi("0",a[1].length);if(a=t.match(/^#,#*,#0/))return jr(i,t.replace(/^#,#*,/,""),e);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return r=_s(jr(i,t.replace(/[\\-]/g,""),e)),u=0,_s(_s(t.replace(/\\/g,"")).replace(/[0#]/g,function(O){return u<r.length?r.charAt(u++):O==="0"?"0":""}));if(t.match($6))return r=jr(i,"##########",e),"("+r.substr(0,3)+") "+r.substr(3,3)+"-"+r.substr(6);var y="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return u=Math.min(a[4].length,7),p=uc(g,Math.pow(10,u)-1,!1),r=""+v,y=sa("n",a[1],p[1]),y.charAt(y.length-1)==" "&&(y=y.substr(0,y.length-1)+"0"),r+=y+a[2]+"/"+a[3],y=sc(p[2],u),y.length<a[4].length&&(y=Sn(a[4].substr(a[4].length-y.length))+y),r+=y,r;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return u=Math.min(Math.max(a[1].length,a[4].length),7),p=uc(g,Math.pow(10,u)-1,!0),v+(p[0]||(p[1]?"":"0"))+" "+(p[1]?Lf(p[1],u)+a[2]+"/"+a[3]+sc(p[2],u):Fi(" ",2*u+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return r=""+e,t.length<=r.length?r:Sn(t.substr(0,t.length-r.length))+r;if(a=t.match(/^([#0]+)\.([#0]+)$/)){r=""+e.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),u=r.indexOf(".");var M=t.indexOf(".")-u,E=t.length-r.length-M;return Sn(t.substr(0,M)+r+t.substr(t.length-E))}if(a=t.match(/^00,000\.([#0]*0)$/))return e<0?"-"+jr(i,t,-e):Da(""+e).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(O){return"00,"+(O.length<3?Ar(0,3-O.length):"")+O})+"."+Ar(0,a[1].length);switch(t){case"###,###":case"##,###":case"#,###":var A=Da(""+g);return A!=="0"?v+A:"";default:if(t.match(/\.[0#?]*$/))return jr(i,t.slice(0,t.lastIndexOf(".")),e)+Sn(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function sa(i,t,e){return(e|0)===e?jr(i,t,e):dr(i,t,e)}function _3(i){for(var t=[],e=!1,n=0,r=0;n<i.length;++n)switch(i.charCodeAt(n)){case 34:e=!e;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=i.substr(r,n-r),r=n+1}if(t[t.length]=i.substr(r),e===!0)throw new Error("Format |"+i+"| unterminated string ");return t}var q6=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Y6(i){for(var t=0,e="",n="";t<i.length;)switch(e=i.charAt(t)){case"G":lc(i,t)&&(t+=6),t++;break;case'"':for(;i.charCodeAt(++t)!==34&&t<i.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(i.charAt(t+1)==="1"||i.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4E0A":if(i.substr(t,3).toUpperCase()==="A/P"||i.substr(t,5).toUpperCase()==="AM/PM"||i.substr(t,5).toUpperCase()==="\u4E0A\u5348/\u4E0B\u5348")return!0;++t;break;case"[":for(n=e;i.charAt(t++)!=="]"&&t<i.length;)n+=i.charAt(t);if(n.match(q6))return!0;break;case".":case"0":case"#":for(;t<i.length&&("0#?.,E+-%".indexOf(e=i.charAt(++t))>-1||e=="\\"&&i.charAt(t+1)=="-"&&"0#".indexOf(i.charAt(t+2))>-1););break;case"?":for(;i.charAt(++t)===e;);break;case"*":++t,(i.charAt(t)==" "||i.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<i.length&&"0123456789".indexOf(i.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function v3(i,t,e,n){for(var r=[],a="",u=0,p="",g="t",v,y,M,E="H";u<i.length;)switch(p=i.charAt(u)){case"G":if(!lc(i,u))throw new Error("unrecognized character "+p+" in "+i);r[r.length]={t:"G",v:"General"},u+=7;break;case'"':for(a="";(M=i.charCodeAt(++u))!==34&&u<i.length;)a+=String.fromCharCode(M);r[r.length]={t:"t",v:a},++u;break;case"\\":var A=i.charAt(++u),O=A==="("||A===")"?A:"t";r[r.length]={t:O,v:A},++u;break;case"_":r[r.length]={t:"t",v:" "},u+=2;break;case"@":r[r.length]={t:"T",v:t},++u;break;case"B":case"b":if(i.charAt(u+1)==="1"||i.charAt(u+1)==="2"){if(v==null&&(v=ec(t,e,i.charAt(u+1)==="2"),v==null))return"";r[r.length]={t:"X",v:i.substr(u,2)},g=p,u+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":p=p.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||v==null&&(v=ec(t,e),v==null))return"";for(a=p;++u<i.length&&i.charAt(u).toLowerCase()===p;)a+=p;p==="m"&&g.toLowerCase()==="h"&&(p="M"),p==="h"&&(p=E),r[r.length]={t:p,v:a},g=p;break;case"A":case"a":case"\u4E0A":var F={t:p,v:p};if(v==null&&(v=ec(t,e)),i.substr(u,3).toUpperCase()==="A/P"?(v!=null&&(F.v=v.H>=12?"P":"A"),F.t="T",E="h",u+=3):i.substr(u,5).toUpperCase()==="AM/PM"?(v!=null&&(F.v=v.H>=12?"PM":"AM"),F.t="T",u+=5,E="h"):i.substr(u,5).toUpperCase()==="\u4E0A\u5348/\u4E0B\u5348"?(v!=null&&(F.v=v.H>=12?"\u4E0B\u5348":"\u4E0A\u5348"),F.t="T",u+=5,E="h"):(F.t="t",++u),v==null&&F.t==="T")return"";r[r.length]=F,g=p;break;case"[":for(a=p;i.charAt(u++)!=="]"&&u<i.length;)a+=i.charAt(u);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(q6)){if(v==null&&(v=ec(t,e),v==null))return"";r[r.length]={t:"Z",v:a.toLowerCase()},g=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",Y6(i)||(r[r.length]={t:"t",v:a}));break;case".":if(v!=null){for(a=p;++u<i.length&&(p=i.charAt(u))==="0";)a+=p;r[r.length]={t:"s",v:a};break}case"0":case"#":for(a=p;++u<i.length&&"0#?.,E+-%".indexOf(p=i.charAt(u))>-1;)a+=p;r[r.length]={t:"n",v:a};break;case"?":for(a=p;i.charAt(++u)===p;)a+=p;r[r.length]={t:p,v:a},g=p;break;case"*":++u,(i.charAt(u)==" "||i.charAt(u)=="*")&&++u;break;case"(":case")":r[r.length]={t:n===1?"t":p,v:p},++u;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=p;u<i.length&&"0123456789".indexOf(i.charAt(++u))>-1;)a+=i.charAt(u);r[r.length]={t:"D",v:a};break;case" ":r[r.length]={t:p,v:p},++u;break;case"$":r[r.length]={t:"t",v:"$"},++u;break;default:if(",$-+/():!^&'~{}<>=\u20ACacfijklopqrtuvwxzP".indexOf(p)===-1)throw new Error("unrecognized character "+p+" in "+i);r[r.length]={t:"t",v:p},++u;break}var D=0,ee=0,ie;for(u=r.length-1,g="t";u>=0;--u)switch(r[u].t){case"h":case"H":r[u].t=E,g="h",D<1&&(D=1);break;case"s":(ie=r[u].v.match(/\.0+$/))&&(ee=Math.max(ee,ie[0].length-1)),D<3&&(D=3);case"d":case"y":case"M":case"e":g=r[u].t;break;case"m":g==="s"&&(r[u].t="M",D<2&&(D=2));break;case"X":break;case"Z":D<1&&r[u].v.match(/[Hh]/)&&(D=1),D<2&&r[u].v.match(/[Mm]/)&&(D=2),D<3&&r[u].v.match(/[Ss]/)&&(D=3)}switch(D){case 0:break;case 1:v.u>=.5&&(v.u=0,++v.S),v.S>=60&&(v.S=0,++v.M),v.M>=60&&(v.M=0,++v.H);break;case 2:v.u>=.5&&(v.u=0,++v.S),v.S>=60&&(v.S=0,++v.M);break}var te="",pe;for(u=0;u<r.length;++u)switch(r[u].t){case"t":case"T":case" ":case"D":break;case"X":r[u].v="",r[u].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":r[u].v=l3(r[u].t.charCodeAt(0),r[u].v,v,ee),r[u].t="t";break;case"n":case"?":for(pe=u+1;r[pe]!=null&&((p=r[pe].t)==="?"||p==="D"||(p===" "||p==="t")&&r[pe+1]!=null&&(r[pe+1].t==="?"||r[pe+1].t==="t"&&r[pe+1].v==="/")||r[u].t==="("&&(p===" "||p==="n"||p===")")||p==="t"&&(r[pe].v==="/"||r[pe].v===" "&&r[pe+1]!=null&&r[pe+1].t=="?"));)r[u].v+=r[pe].v,r[pe]={v:"",t:";"},++pe;te+=r[u].v,u=pe-1;break;case"G":r[u].t="t",r[u].v=Pf(t,e);break}var Ce="",ze,ne;if(te.length>0){te.charCodeAt(0)==40?(ze=t<0&&te.charCodeAt(0)===45?-t:t,ne=sa("n",te,ze)):(ze=t<0&&n>1?-t:t,ne=sa("n",te,ze),ze<0&&r[0]&&r[0].t=="t"&&(ne=ne.substr(1),r[0].v="-"+r[0].v)),pe=ne.length-1;var xe=r.length;for(u=0;u<r.length;++u)if(r[u]!=null&&r[u].t!="t"&&r[u].v.indexOf(".")>-1){xe=u;break}var me=r.length;if(xe===r.length&&ne.indexOf("E")===-1){for(u=r.length-1;u>=0;--u)r[u]==null||"n?".indexOf(r[u].t)===-1||(pe>=r[u].v.length-1?(pe-=r[u].v.length,r[u].v=ne.substr(pe+1,r[u].v.length)):pe<0?r[u].v="":(r[u].v=ne.substr(0,pe+1),pe=-1),r[u].t="t",me=u);pe>=0&&me<r.length&&(r[me].v=ne.substr(0,pe+1)+r[me].v)}else if(xe!==r.length&&ne.indexOf("E")===-1){for(pe=ne.indexOf(".")-1,u=xe;u>=0;--u)if(!(r[u]==null||"n?".indexOf(r[u].t)===-1)){for(y=r[u].v.indexOf(".")>-1&&u===xe?r[u].v.indexOf(".")-1:r[u].v.length-1,Ce=r[u].v.substr(y+1);y>=0;--y)pe>=0&&(r[u].v.charAt(y)==="0"||r[u].v.charAt(y)==="#")&&(Ce=ne.charAt(pe--)+Ce);r[u].v=Ce,r[u].t="t",me=u}for(pe>=0&&me<r.length&&(r[me].v=ne.substr(0,pe+1)+r[me].v),pe=ne.indexOf(".")+1,u=xe;u<r.length;++u)if(!(r[u]==null||"n?(".indexOf(r[u].t)===-1&&u!==xe)){for(y=r[u].v.indexOf(".")>-1&&u===xe?r[u].v.indexOf(".")+1:0,Ce=r[u].v.substr(0,y);y<r[u].v.length;++y)pe<ne.length&&(Ce+=ne.charAt(pe++));r[u].v=Ce,r[u].t="t",me=u}}}for(u=0;u<r.length;++u)r[u]!=null&&"n?".indexOf(r[u].t)>-1&&(ze=n>1&&t<0&&u>0&&r[u-1].v==="-"?-t:t,r[u].v=sa(r[u].t,r[u].v,ze),r[u].t="t");var _e="";for(u=0;u!==r.length;++u)r[u]!=null&&(_e+=r[u].v);return _e}var a6=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function o6(i,t){if(t==null)return!1;var e=parseFloat(t[2]);switch(t[1]){case"=":if(i==e)return!0;break;case">":if(i>e)return!0;break;case"<":if(i<e)return!0;break;case"<>":if(i!=e)return!0;break;case">=":if(i>=e)return!0;break;case"<=":if(i<=e)return!0;break}return!1}function x3(i,t){var e=_3(i),n=e.length,r=e[n-1].indexOf("@");if(n<4&&r>-1&&--n,e.length>4)throw new Error("cannot find right format for |"+e.join("|")+"|");if(typeof t!="number")return[4,e.length===4||r>-1?e[e.length-1]:"@"];switch(e.length){case 1:e=r>-1?["General","General","General",e[0]]:[e[0],e[0],e[0],"@"];break;case 2:e=r>-1?[e[0],e[0],e[0],e[1]]:[e[0],e[1],e[0],"@"];break;case 3:e=r>-1?[e[0],e[1],e[0],e[2]]:[e[0],e[1],e[2],"@"];break;case 4:break}var a=t>0?e[0]:t<0?e[1]:e[2];if(e[0].indexOf("[")===-1&&e[1].indexOf("[")===-1)return[n,a];if(e[0].match(/\[[=<>]/)!=null||e[1].match(/\[[=<>]/)!=null){var u=e[0].match(a6),p=e[1].match(a6);return o6(t,u)?[n,e[0]]:o6(t,p)?[n,e[1]]:[n,e[u!=null&&p!=null?2:1]]}return[n,a]}function Ia(i,t,e){e==null&&(e={});var n="";switch(typeof i){case"string":i=="m/d/yy"&&e.dateNF?n=e.dateNF:n=i;break;case"number":i==14&&e.dateNF?n=e.dateNF:n=(e.table!=null?e.table:ki)[i],n==null&&(n=e.table&&e.table[i6[i]]||ki[i6[i]]),n==null&&(n=e3[i]||"General");break}if(lc(n,0))return Pf(t,e);t instanceof Date&&(t=U6(t,e.date1904));var r=x3(n,t);if(lc(r[1]))return Pf(t,e);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return v3(r[1],t,e,r[0])}function X6(i,t){if(typeof t!="number"){t=+t||-1;for(var e=0;e<392;++e){if(ki[e]==null){t<0&&(t=e);continue}if(ki[e]==i){t=e;break}}t<0&&(t=391)}return ki[t]=i,t}function bc(i){for(var t=0;t!=392;++t)i[t]!==void 0&&X6(i[t],t)}function Cc(){ki=QC()}var K6=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function y3(i){var t=typeof i=="number"?ki[i]:i;return t=t.replace(K6,"(\\d+)"),new RegExp("^"+t+"$")}function b3(i,t,e){var n=-1,r=-1,a=-1,u=-1,p=-1,g=-1;(t.match(K6)||[]).forEach(function(M,E){var A=parseInt(e[E+1],10);switch(M.toLowerCase().charAt(0)){case"y":n=A;break;case"d":a=A;break;case"h":u=A;break;case"s":g=A;break;case"m":u>=0?p=A:r=A;break}}),g>=0&&p==-1&&r>=0&&(p=r,r=-1);var v=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(r>=1?r:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);v.length==7&&(v="0"+v),v.length==8&&(v="20"+v);var y=("00"+(u>=0?u:0)).slice(-2)+":"+("00"+(p>=0?p:0)).slice(-2)+":"+("00"+(g>=0?g:0)).slice(-2);return u==-1&&p==-1&&g==-1?v:n==-1&&r==-1&&a==-1?y:v+"T"+y}var C3=function(){var i={};i.version="1.2.0";function t(){for(var ne=0,xe=new Array(256),me=0;me!=256;++me)ne=me,ne=ne&1?-306674912^ne>>>1:ne>>>1,ne=ne&1?-306674912^ne>>>1:ne>>>1,ne=ne&1?-306674912^ne>>>1:ne>>>1,ne=ne&1?-306674912^ne>>>1:ne>>>1,ne=ne&1?-306674912^ne>>>1:ne>>>1,ne=ne&1?-306674912^ne>>>1:ne>>>1,ne=ne&1?-306674912^ne>>>1:ne>>>1,ne=ne&1?-306674912^ne>>>1:ne>>>1,xe[me]=ne;return typeof Int32Array<"u"?new Int32Array(xe):xe}var e=t();function n(ne){var xe=0,me=0,_e=0,Ae=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(_e=0;_e!=256;++_e)Ae[_e]=ne[_e];for(_e=0;_e!=256;++_e)for(me=ne[_e],xe=256+_e;xe<4096;xe+=256)me=Ae[xe]=me>>>8^ne[me&255];var we=[];for(_e=1;_e!=16;++_e)we[_e-1]=typeof Int32Array<"u"?Ae.subarray(_e*256,_e*256+256):Ae.slice(_e*256,_e*256+256);return we}var r=n(e),a=r[0],u=r[1],p=r[2],g=r[3],v=r[4],y=r[5],M=r[6],E=r[7],A=r[8],O=r[9],F=r[10],D=r[11],ee=r[12],ie=r[13],te=r[14];function pe(ne,xe){for(var me=xe^-1,_e=0,Ae=ne.length;_e<Ae;)me=me>>>8^e[(me^ne.charCodeAt(_e++))&255];return~me}function Ce(ne,xe){for(var me=xe^-1,_e=ne.length-15,Ae=0;Ae<_e;)me=te[ne[Ae++]^me&255]^ie[ne[Ae++]^me>>8&255]^ee[ne[Ae++]^me>>16&255]^D[ne[Ae++]^me>>>24]^F[ne[Ae++]]^O[ne[Ae++]]^A[ne[Ae++]]^E[ne[Ae++]]^M[ne[Ae++]]^y[ne[Ae++]]^v[ne[Ae++]]^g[ne[Ae++]]^p[ne[Ae++]]^u[ne[Ae++]]^a[ne[Ae++]]^e[ne[Ae++]];for(_e+=15;Ae<_e;)me=me>>>8^e[(me^ne[Ae++])&255];return~me}function ze(ne,xe){for(var me=xe^-1,_e=0,Ae=ne.length,we=0,Ke=0;_e<Ae;)we=ne.charCodeAt(_e++),we<128?me=me>>>8^e[(me^we)&255]:we<2048?(me=me>>>8^e[(me^(192|we>>6&31))&255],me=me>>>8^e[(me^(128|we&63))&255]):we>=55296&&we<57344?(we=(we&1023)+64,Ke=ne.charCodeAt(_e++)&1023,me=me>>>8^e[(me^(240|we>>8&7))&255],me=me>>>8^e[(me^(128|we>>2&63))&255],me=me>>>8^e[(me^(128|Ke>>6&15|(we&3)<<4))&255],me=me>>>8^e[(me^(128|Ke&63))&255]):(me=me>>>8^e[(me^(224|we>>12&15))&255],me=me>>>8^e[(me^(128|we>>6&63))&255],me=me>>>8^e[(me^(128|we&63))&255]);return~me}return i.table=e,i.bstr=pe,i.buf=Ce,i.str=ze,i}(),si=function(){var t={};t.version="1.2.1";function e(k,W){for(var I=k.split("/"),B=W.split("/"),U=0,j=0,ae=Math.min(I.length,B.length);U<ae;++U){if(j=I[U].length-B[U].length)return j;if(I[U]!=B[U])return I[U]<B[U]?-1:1}return I.length-B.length}function n(k){if(k.charAt(k.length-1)=="/")return k.slice(0,-1).indexOf("/")===-1?k:n(k.slice(0,-1));var W=k.lastIndexOf("/");return W===-1?k:k.slice(0,W+1)}function r(k){if(k.charAt(k.length-1)=="/")return r(k.slice(0,-1));var W=k.lastIndexOf("/");return W===-1?k:k.slice(W+1)}function a(k,W){typeof W=="string"&&(W=new Date(W));var I=W.getHours();I=I<<6|W.getMinutes(),I=I<<5|W.getSeconds()>>>1,k.write_shift(2,I);var B=W.getFullYear()-1980;B=B<<4|W.getMonth()+1,B=B<<5|W.getDate(),k.write_shift(2,B)}function u(k){var W=k.read_shift(2)&65535,I=k.read_shift(2)&65535,B=new Date,U=I&31;I>>>=5;var j=I&15;I>>>=4,B.setMilliseconds(0),B.setFullYear(I+1980),B.setMonth(j-1),B.setDate(U);var ae=W&31;W>>>=5;var he=W&63;return W>>>=6,B.setHours(W),B.setMinutes(he),B.setSeconds(ae<<1),B}function p(k){Qn(k,0);for(var W={},I=0;k.l<=k.length-4;){var B=k.read_shift(2),U=k.read_shift(2),j=k.l+U,ae={};switch(B){case 21589:I=k.read_shift(1),I&1&&(ae.mtime=k.read_shift(4)),U>5&&(I&2&&(ae.atime=k.read_shift(4)),I&4&&(ae.ctime=k.read_shift(4))),ae.mtime&&(ae.mt=new Date(ae.mtime*1e3));break}k.l=j,W[B]=ae}return W}var g;function v(){return g||(g={})}function y(k,W){if(k[0]==80&&k[1]==75)return zs(k,W);if((k[0]|32)==109&&(k[1]|32)==105)return xd(k,W);if(k.length<512)throw new Error("CFB file size "+k.length+" < 512");var I=3,B=512,U=0,j=0,ae=0,he=0,se=0,oe=[],ce=k.slice(0,512);Qn(ce,0);var Me=M(ce);switch(I=Me[0],I){case 3:B=512;break;case 4:B=4096;break;case 0:if(Me[1]==0)return zs(k,W);default:throw new Error("Major Version: Expected 3 or 4 saw "+I)}B!==512&&(ce=k.slice(0,B),Qn(ce,28));var ke=k.slice(0,B);E(ce,I);var $e=ce.read_shift(4,"i");if(I===3&&$e!==0)throw new Error("# Directory Sectors: Expected 0 saw "+$e);ce.l+=4,ae=ce.read_shift(4,"i"),ce.l+=4,ce.chk("00100000","Mini Stream Cutoff Size: "),he=ce.read_shift(4,"i"),U=ce.read_shift(4,"i"),se=ce.read_shift(4,"i"),j=ce.read_shift(4,"i");for(var De=-1,Ve=0;Ve<109&&(De=ce.read_shift(4,"i"),!(De<0));++Ve)oe[Ve]=De;var ct=A(k,B);D(se,j,ct,B,oe);var ui=ie(ct,ae,oe,B);ui[ae].name="!Directory",U>0&&he!==Ke&&(ui[he].name="!MiniFAT"),ui[oe[0]].name="!FAT",ui.fat_addrs=oe,ui.ssz=B;var Yi={},fi=[],fn=[],pa=[];te(ae,ui,ct,fi,U,Yi,fn,he),O(fn,pa,fi),fi.shift();var pr={FileIndex:fn,FullPaths:pa};return W&&W.raw&&(pr.raw={header:ke,sectors:ct}),pr}function M(k){if(k[k.l]==80&&k[k.l+1]==75)return[0,0];k.chk(mt,"Header Signature: "),k.l+=16;var W=k.read_shift(2,"u");return[k.read_shift(2,"u"),W]}function E(k,W){var I=9;switch(k.l+=2,I=k.read_shift(2)){case 9:if(W!=3)throw new Error("Sector Shift: Expected 9 saw "+I);break;case 12:if(W!=4)throw new Error("Sector Shift: Expected 12 saw "+I);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+I)}k.chk("0600","Mini Sector Shift: "),k.chk("000000000000","Reserved: ")}function A(k,W){for(var I=Math.ceil(k.length/W)-1,B=[],U=1;U<I;++U)B[U-1]=k.slice(U*W,(U+1)*W);return B[I-1]=k.slice(I*W),B}function O(k,W,I){for(var B=0,U=0,j=0,ae=0,he=0,se=I.length,oe=[],ce=[];B<se;++B)oe[B]=ce[B]=B,W[B]=I[B];for(;he<ce.length;++he)B=ce[he],U=k[B].L,j=k[B].R,ae=k[B].C,oe[B]===B&&(U!==-1&&oe[U]!==U&&(oe[B]=oe[U]),j!==-1&&oe[j]!==j&&(oe[B]=oe[j])),ae!==-1&&(oe[ae]=B),U!==-1&&B!=oe[B]&&(oe[U]=oe[B],ce.lastIndexOf(U)<he&&ce.push(U)),j!==-1&&B!=oe[B]&&(oe[j]=oe[B],ce.lastIndexOf(j)<he&&ce.push(j));for(B=1;B<se;++B)oe[B]===B&&(j!==-1&&oe[j]!==j?oe[B]=oe[j]:U!==-1&&oe[U]!==U&&(oe[B]=oe[U]));for(B=1;B<se;++B)if(k[B].type!==0){if(he=B,he!=oe[he])do he=oe[he],W[B]=W[he]+"/"+W[B];while(he!==0&&oe[he]!==-1&&he!=oe[he]);oe[B]=-1}for(W[0]+="/",B=1;B<se;++B)k[B].type!==2&&(W[B]+="/")}function F(k,W,I){for(var B=k.start,U=k.size,j=[],ae=B;I&&U>0&&ae>=0;)j.push(W.slice(ae*we,ae*we+we)),U-=we,ae=so(I,ae*4);return j.length===0?ge(0):un(j).slice(0,k.size)}function D(k,W,I,B,U){var j=Ke;if(k===Ke){if(W!==0)throw new Error("DIFAT chain shorter than expected")}else if(k!==-1){var ae=I[k],he=(B>>>2)-1;if(!ae)return;for(var se=0;se<he&&(j=so(ae,se*4))!==Ke;++se)U.push(j);D(so(ae,B-4),W-1,I,B,U)}}function ee(k,W,I,B,U){var j=[],ae=[];U||(U=[]);var he=B-1,se=0,oe=0;for(se=W;se>=0;){U[se]=!0,j[j.length]=se,ae.push(k[se]);var ce=I[Math.floor(se*4/B)];if(oe=se*4&he,B<4+oe)throw new Error("FAT boundary crossed: "+se+" 4 "+B);if(!k[ce])break;se=so(k[ce],oe)}return{nodes:j,data:p6([ae])}}function ie(k,W,I,B){var U=k.length,j=[],ae=[],he=[],se=[],oe=B-1,ce=0,Me=0,ke=0,$e=0;for(ce=0;ce<U;++ce)if(he=[],ke=ce+W,ke>=U&&(ke-=U),!ae[ke]){se=[];var De=[];for(Me=ke;Me>=0;){De[Me]=!0,ae[Me]=!0,he[he.length]=Me,se.push(k[Me]);var Ve=I[Math.floor(Me*4/B)];if($e=Me*4&oe,B<4+$e)throw new Error("FAT boundary crossed: "+Me+" 4 "+B);if(!k[Ve]||(Me=so(k[Ve],$e),De[Me]))break}j[ke]={nodes:he,data:p6([se])}}return j}function te(k,W,I,B,U,j,ae,he){for(var se=0,oe=B.length?2:0,ce=W[k].data,Me=0,ke=0,$e;Me<ce.length;Me+=128){var De=ce.slice(Me,Me+128);Qn(De,64),ke=De.read_shift(2),$e=Tc(De,0,ke-oe),B.push($e);var Ve={name:$e,type:De.read_shift(1),color:De.read_shift(1),L:De.read_shift(4,"i"),R:De.read_shift(4,"i"),C:De.read_shift(4,"i"),clsid:De.read_shift(16),state:De.read_shift(4,"i"),start:0,size:0},ct=De.read_shift(2)+De.read_shift(2)+De.read_shift(2)+De.read_shift(2);ct!==0&&(Ve.ct=pe(De,De.l-8));var ui=De.read_shift(2)+De.read_shift(2)+De.read_shift(2)+De.read_shift(2);ui!==0&&(Ve.mt=pe(De,De.l-8)),Ve.start=De.read_shift(4,"i"),Ve.size=De.read_shift(4,"i"),Ve.size<0&&Ve.start<0&&(Ve.size=Ve.type=0,Ve.start=Ke,Ve.name=""),Ve.type===5?(se=Ve.start,U>0&&se!==Ke&&(W[se].name="!StreamData")):Ve.size>=4096?(Ve.storage="fat",W[Ve.start]===void 0&&(W[Ve.start]=ee(I,Ve.start,W.fat_addrs,W.ssz)),W[Ve.start].name=Ve.name,Ve.content=W[Ve.start].data.slice(0,Ve.size)):(Ve.storage="minifat",Ve.size<0?Ve.size=0:se!==Ke&&Ve.start!==Ke&&W[se]&&(Ve.content=F(Ve,W[se].data,(W[he]||{}).data))),Ve.content&&Qn(Ve.content,0),j[$e]=Ve,ae.push(Ve)}}function pe(k,W){return new Date((Qi(k,W+4)/1e7*Math.pow(2,32)+Qi(k,W)/1e7-11644473600)*1e3)}function Ce(k,W){return v(),y(g.readFileSync(k),W)}function ze(k,W){var I=W&&W.type;switch(I||qt&&Buffer.isBuffer(k)&&(I="buffer"),I||"base64"){case"file":return Ce(k,W);case"base64":return y(Er(ca(k)),W);case"binary":return y(Er(k),W)}return y(k,W)}function ne(k,W){var I=W||{},B=I.root||"Root Entry";if(k.FullPaths||(k.FullPaths=[]),k.FileIndex||(k.FileIndex=[]),k.FullPaths.length!==k.FileIndex.length)throw new Error("inconsistent CFB structure");k.FullPaths.length===0&&(k.FullPaths[0]=B+"/",k.FileIndex[0]={name:B,type:5}),I.CLSID&&(k.FileIndex[0].clsid=I.CLSID),xe(k)}function xe(k){var W="Sh33tJ5";if(!si.find(k,"/"+W)){var I=ge(4);I[0]=55,I[1]=I[3]=50,I[2]=54,k.FileIndex.push({name:W,type:2,content:I,size:4,L:69,R:69,C:69}),k.FullPaths.push(k.FullPaths[0]+W),me(k)}}function me(k,W){ne(k);for(var I=!1,B=!1,U=k.FullPaths.length-1;U>=0;--U){var j=k.FileIndex[U];switch(j.type){case 0:B?I=!0:(k.FileIndex.pop(),k.FullPaths.pop());break;case 1:case 2:case 5:B=!0,isNaN(j.R*j.L*j.C)&&(I=!0),j.R>-1&&j.L>-1&&j.R==j.L&&(I=!0);break;default:I=!0;break}}if(!(!I&&!W)){var ae=new Date(1987,1,19),he=0,se=Object.create?Object.create(null):{},oe=[];for(U=0;U<k.FullPaths.length;++U)se[k.FullPaths[U]]=!0,k.FileIndex[U].type!==0&&oe.push([k.FullPaths[U],k.FileIndex[U]]);for(U=0;U<oe.length;++U){var ce=n(oe[U][0]);B=se[ce],B||(oe.push([ce,{name:r(ce).replace("/",""),type:1,clsid:Je,ct:ae,mt:ae,content:null}]),se[ce]=!0)}for(oe.sort(function($e,De){return e($e[0],De[0])}),k.FullPaths=[],k.FileIndex=[],U=0;U<oe.length;++U)k.FullPaths[U]=oe[U][0],k.FileIndex[U]=oe[U][1];for(U=0;U<oe.length;++U){var Me=k.FileIndex[U],ke=k.FullPaths[U];if(Me.name=r(ke).replace("/",""),Me.L=Me.R=Me.C=-(Me.color=1),Me.size=Me.content?Me.content.length:0,Me.start=0,Me.clsid=Me.clsid||Je,U===0)Me.C=oe.length>1?1:-1,Me.size=0,Me.type=5;else if(ke.slice(-1)=="/"){for(he=U+1;he<oe.length&&n(k.FullPaths[he])!=ke;++he);for(Me.C=he>=oe.length?-1:he,he=U+1;he<oe.length&&n(k.FullPaths[he])!=n(ke);++he);Me.R=he>=oe.length?-1:he,Me.type=1}else n(k.FullPaths[U+1]||"")==n(ke)&&(Me.R=U+1),Me.type=2}}}function _e(k,W){var I=W||{};if(I.fileType=="mad")return yd(k,I);switch(me(k),I.fileType){case"zip":return pd(k,I)}var B=function($e){for(var De=0,Ve=0,ct=0;ct<$e.FileIndex.length;++ct){var ui=$e.FileIndex[ct];if(ui.content){var Yi=ui.content.length;Yi>0&&(Yi<4096?De+=Yi+63>>6:Ve+=Yi+511>>9)}}for(var fi=$e.FullPaths.length+3>>2,fn=De+7>>3,pa=De+127>>7,pr=fn+Ve+fi+pa,yt=pr+127>>7,ci=yt<=109?0:Math.ceil((yt-109)/127);pr+yt+ci+127>>7>yt;)ci=++yt<=109?0:Math.ceil((yt-109)/127);var Fn=[1,ci,yt,pa,fi,Ve,De,0];return $e.FileIndex[0].size=De<<6,Fn[7]=($e.FileIndex[0].start=Fn[0]+Fn[1]+Fn[2]+Fn[3]+Fn[4]+Fn[5])+(Fn[6]+7>>3),Fn}(k),U=ge(B[7]<<9),j=0,ae=0;{for(j=0;j<8;++j)U.write_shift(1,it[j]);for(j=0;j<8;++j)U.write_shift(2,0);for(U.write_shift(2,62),U.write_shift(2,3),U.write_shift(2,65534),U.write_shift(2,9),U.write_shift(2,6),j=0;j<3;++j)U.write_shift(2,0);for(U.write_shift(4,0),U.write_shift(4,B[2]),U.write_shift(4,B[0]+B[1]+B[2]+B[3]-1),U.write_shift(4,0),U.write_shift(4,4096),U.write_shift(4,B[3]?B[0]+B[1]+B[2]-1:Ke),U.write_shift(4,B[3]),U.write_shift(-4,B[1]?B[0]-1:Ke),U.write_shift(4,B[1]),j=0;j<109;++j)U.write_shift(-4,j<B[2]?B[1]+j:-1)}if(B[1])for(ae=0;ae<B[1];++ae){for(;j<236+ae*127;++j)U.write_shift(-4,j<B[2]?B[1]+j:-1);U.write_shift(-4,ae===B[1]-1?Ke:ae+1)}var he=function($e){for(ae+=$e;j<ae-1;++j)U.write_shift(-4,j+1);$e&&(++j,U.write_shift(-4,Ke))};for(ae=j=0,ae+=B[1];j<ae;++j)U.write_shift(-4,Pi.DIFSECT);for(ae+=B[2];j<ae;++j)U.write_shift(-4,Pi.FATSECT);he(B[3]),he(B[4]);for(var se=0,oe=0,ce=k.FileIndex[0];se<k.FileIndex.length;++se)ce=k.FileIndex[se],ce.content&&(oe=ce.content.length,!(oe<4096)&&(ce.start=ae,he(oe+511>>9)));for(he(B[6]+7>>3);U.l&511;)U.write_shift(-4,Pi.ENDOFCHAIN);for(ae=j=0,se=0;se<k.FileIndex.length;++se)ce=k.FileIndex[se],ce.content&&(oe=ce.content.length,!(!oe||oe>=4096)&&(ce.start=ae,he(oe+63>>6)));for(;U.l&511;)U.write_shift(-4,Pi.ENDOFCHAIN);for(j=0;j<B[4]<<2;++j){var Me=k.FullPaths[j];if(!Me||Me.length===0){for(se=0;se<17;++se)U.write_shift(4,0);for(se=0;se<3;++se)U.write_shift(4,-1);for(se=0;se<12;++se)U.write_shift(4,0);continue}ce=k.FileIndex[j],j===0&&(ce.start=ce.size?ce.start-1:Ke);var ke=j===0&&I.root||ce.name;if(oe=2*(ke.length+1),U.write_shift(64,ke,"utf16le"),U.write_shift(2,oe),U.write_shift(1,ce.type),U.write_shift(1,ce.color),U.write_shift(-4,ce.L),U.write_shift(-4,ce.R),U.write_shift(-4,ce.C),ce.clsid)U.write_shift(16,ce.clsid,"hex");else for(se=0;se<4;++se)U.write_shift(4,0);U.write_shift(4,ce.state||0),U.write_shift(4,0),U.write_shift(4,0),U.write_shift(4,0),U.write_shift(4,0),U.write_shift(4,ce.start),U.write_shift(4,ce.size),U.write_shift(4,0)}for(j=1;j<k.FileIndex.length;++j)if(ce=k.FileIndex[j],ce.size>=4096)if(U.l=ce.start+1<<9,qt&&Buffer.isBuffer(ce.content))ce.content.copy(U,U.l,0,ce.size),U.l+=ce.size+511&-512;else{for(se=0;se<ce.size;++se)U.write_shift(1,ce.content[se]);for(;se&511;++se)U.write_shift(1,0)}for(j=1;j<k.FileIndex.length;++j)if(ce=k.FileIndex[j],ce.size>0&&ce.size<4096)if(qt&&Buffer.isBuffer(ce.content))ce.content.copy(U,U.l,0,ce.size),U.l+=ce.size+63&-64;else{for(se=0;se<ce.size;++se)U.write_shift(1,ce.content[se]);for(;se&63;++se)U.write_shift(1,0)}if(qt)U.l=U.length;else for(;U.l<U.length;)U.write_shift(1,0);return U}function Ae(k,W){var I=k.FullPaths.map(function(se){return se.toUpperCase()}),B=I.map(function(se){var oe=se.split("/");return oe[oe.length-(se.slice(-1)=="/"?2:1)]}),U=!1;W.charCodeAt(0)===47?(U=!0,W=I[0].slice(0,-1)+W):U=W.indexOf("/")!==-1;var j=W.toUpperCase(),ae=U===!0?I.indexOf(j):B.indexOf(j);if(ae!==-1)return k.FileIndex[ae];var he=!j.match(Qu);for(j=j.replace(gs,""),he&&(j=j.replace(Qu,"!")),ae=0;ae<I.length;++ae)if((he?I[ae].replace(Qu,"!"):I[ae]).replace(gs,"")==j||(he?B[ae].replace(Qu,"!"):B[ae]).replace(gs,"")==j)return k.FileIndex[ae];return null}var we=64,Ke=-2,mt="d0cf11e0a1b11ae1",it=[208,207,17,224,161,177,26,225],Je="00000000000000000000000000000000",Pi={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:Ke,FREESECT:-1,HEADER_SIGNATURE:mt,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Je,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function nt(k,W,I){v();var B=_e(k,I);g.writeFileSync(W,B)}function St(k){for(var W=new Array(k.length),I=0;I<k.length;++I)W[I]=String.fromCharCode(k[I]);return W.join("")}function Wt(k,W){var I=_e(k,W);switch(W&&W.type||"buffer"){case"file":return v(),g.writeFileSync(W.filename,I),I;case"binary":return typeof I=="string"?I:St(I);case"base64":return n0(typeof I=="string"?I:St(I));case"buffer":if(qt)return Buffer.isBuffer(I)?I:ma(I);case"array":return typeof I=="string"?Er(I):I}return I}var Jt;function X(k){try{var W=k.InflateRaw,I=new W;if(I._processChunk(new Uint8Array([3,0]),I._finishFlushFlag),I.bytesRead)Jt=k;else throw new Error("zlib does not expose bytesRead")}catch(B){console.error("cannot use native zlib: "+(B.message||B))}}function ue(k,W){if(!Jt)return js(k,W);var I=Jt.InflateRaw,B=new I,U=B._processChunk(k.slice(k.l),B._finishFlushFlag);return k.l+=B.bytesRead,U}function K(k){return Jt?Jt.deflateRawSync(k):_0(k)}var J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ye=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Ze=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function st(k){var W=(k<<1|k<<11)&139536|(k<<5|k<<15)&558144;return(W>>16|W>>8|W)&255}for(var Ge=typeof Uint8Array<"u",Fe=Ge?new Uint8Array(256):[],jt=0;jt<256;++jt)Fe[jt]=st(jt);function Dt(k,W){var I=Fe[k&255];return W<=8?I>>>8-W:(I=I<<8|Fe[k>>8&255],W<=16?I>>>16-W:(I=I<<8|Fe[k>>16&255],I>>>24-W))}function Li(k,W){var I=W&7,B=W>>>3;return(k[B]|(I<=6?0:k[B+1]<<8))>>>I&3}function Rt(k,W){var I=W&7,B=W>>>3;return(k[B]|(I<=5?0:k[B+1]<<8))>>>I&7}function yn(k,W){var I=W&7,B=W>>>3;return(k[B]|(I<=4?0:k[B+1]<<8))>>>I&15}function li(k,W){var I=W&7,B=W>>>3;return(k[B]|(I<=3?0:k[B+1]<<8))>>>I&31}function qe(k,W){var I=W&7,B=W>>>3;return(k[B]|(I<=1?0:k[B+1]<<8))>>>I&127}function bn(k,W,I){var B=W&7,U=W>>>3,j=(1<<I)-1,ae=k[U]>>>B;return I<8-B||(ae|=k[U+1]<<8-B,I<16-B)||(ae|=k[U+2]<<16-B,I<24-B)||(ae|=k[U+3]<<24-B),ae&j}function Bn(k,W,I){var B=W&7,U=W>>>3;return B<=5?k[U]|=(I&7)<<B:(k[U]|=I<<B&255,k[U+1]=(I&7)>>8-B),W+3}function kr(k,W,I){var B=W&7,U=W>>>3;return I=(I&1)<<B,k[U]|=I,W+1}function Zr(k,W,I){var B=W&7,U=W>>>3;return I<<=B,k[U]|=I&255,I>>>=8,k[U+1]=I,W+8}function h0(k,W,I){var B=W&7,U=W>>>3;return I<<=B,k[U]|=I&255,I>>>=8,k[U+1]=I&255,k[U+2]=I>>>8,W+16}function Vs(k,W){var I=k.length,B=2*I>W?2*I:W+5,U=0;if(I>=W)return k;if(qt){var j=Q1(B);if(k.copy)k.copy(j);else for(;U<k.length;++U)j[U]=k[U];return j}else if(Ge){var ae=new Uint8Array(B);if(ae.set)ae.set(k);else for(;U<I;++U)ae[U]=k[U];return ae}return k.length=B,k}function An(k){for(var W=new Array(k),I=0;I<k;++I)W[I]=0;return W}function Ua(k,W,I){var B=1,U=0,j=0,ae=0,he=0,se=k.length,oe=Ge?new Uint16Array(32):An(32);for(j=0;j<32;++j)oe[j]=0;for(j=se;j<I;++j)k[j]=0;se=k.length;var ce=Ge?new Uint16Array(se):An(se);for(j=0;j<se;++j)oe[U=k[j]]++,B<U&&(B=U),ce[j]=0;for(oe[0]=0,j=1;j<=B;++j)oe[j+16]=he=he+oe[j-1]<<1;for(j=0;j<se;++j)he=k[j],he!=0&&(ce[j]=oe[he+16]++);var Me=0;for(j=0;j<se;++j)if(Me=k[j],Me!=0)for(he=Dt(ce[j],B)>>B-Me,ae=(1<<B+4-Me)-1;ae>=0;--ae)W[he|ae<<Me]=Me&15|j<<4;return B}var yo=Ge?new Uint16Array(512):An(512),Bs=Ge?new Uint16Array(32):An(32);if(!Ge){for(var Pr=0;Pr<512;++Pr)yo[Pr]=0;for(Pr=0;Pr<32;++Pr)Bs[Pr]=0}(function(){for(var k=[],W=0;W<32;W++)k.push(5);Ua(k,Bs,32);var I=[];for(W=0;W<=143;W++)I.push(8);for(;W<=255;W++)I.push(9);for(;W<=279;W++)I.push(7);for(;W<=287;W++)I.push(8);Ua(I,yo,288)})();var g0=function(){for(var W=Ge?new Uint8Array(32768):[],I=0,B=0;I<Ze.length-1;++I)for(;B<Ze[I+1];++B)W[B]=I;for(;B<32768;++B)W[B]=29;var U=Ge?new Uint8Array(259):[];for(I=0,B=0;I<ye.length-1;++I)for(;B<ye[I+1];++B)U[B]=I;function j(he,se){for(var oe=0;oe<he.length;){var ce=Math.min(65535,he.length-oe),Me=oe+ce==he.length;for(se.write_shift(1,+Me),se.write_shift(2,ce),se.write_shift(2,~ce&65535);ce-- >0;)se[se.l++]=he[oe++]}return se.l}function ae(he,se){for(var oe=0,ce=0,Me=Ge?new Uint16Array(32768):[];ce<he.length;){var ke=Math.min(65535,he.length-ce);if(ke<10){for(oe=Bn(se,oe,+(ce+ke==he.length)),oe&7&&(oe+=8-(oe&7)),se.l=oe/8|0,se.write_shift(2,ke),se.write_shift(2,~ke&65535);ke-- >0;)se[se.l++]=he[ce++];oe=se.l*8;continue}oe=Bn(se,oe,+(ce+ke==he.length)+2);for(var $e=0;ke-- >0;){var De=he[ce];$e=($e<<5^De)&32767;var Ve=-1,ct=0;if((Ve=Me[$e])&&(Ve|=ce&-32768,Ve>ce&&(Ve-=32768),Ve<ce))for(;he[Ve+ct]==he[ce+ct]&&ct<250;)++ct;if(ct>2){De=U[ct],De<=22?oe=Zr(se,oe,Fe[De+1]>>1)-1:(Zr(se,oe,3),oe+=5,Zr(se,oe,Fe[De-23]>>5),oe+=3);var ui=De<8?0:De-4>>2;ui>0&&(h0(se,oe,ct-ye[De]),oe+=ui),De=W[ce-Ve],oe=Zr(se,oe,Fe[De]>>3),oe-=3;var Yi=De<4?0:De-2>>1;Yi>0&&(h0(se,oe,ce-Ve-Ze[De]),oe+=Yi);for(var fi=0;fi<ct;++fi)Me[$e]=ce&32767,$e=($e<<5^he[ce])&32767,++ce;ke-=ct-1}else De<=143?De=De+48:oe=kr(se,oe,1),oe=Zr(se,oe,Fe[De]),Me[$e]=ce&32767,++ce}oe=Zr(se,oe,0)-1}return se.l=(oe+7)/8|0,se.l}return function(se,oe){return se.length<8?j(se,oe):ae(se,oe)}}();function _0(k){var W=ge(50+Math.floor(k.length*1.1)),I=g0(k,W);return W.slice(0,I)}var Us=Ge?new Uint16Array(32768):An(32768),bo=Ge?new Uint16Array(32768):An(32768),Ws=Ge?new Uint16Array(128):An(128),v0=1,fa=1;function dd(k,W){var I=li(k,W)+257;W+=5;var B=li(k,W)+1;W+=5;var U=yn(k,W)+4;W+=4;for(var j=0,ae=Ge?new Uint8Array(19):An(19),he=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],se=1,oe=Ge?new Uint8Array(8):An(8),ce=Ge?new Uint8Array(8):An(8),Me=ae.length,ke=0;ke<U;++ke)ae[J[ke]]=j=Rt(k,W),se<j&&(se=j),oe[j]++,W+=3;var $e=0;for(oe[0]=0,ke=1;ke<=se;++ke)ce[ke]=$e=$e+oe[ke-1]<<1;for(ke=0;ke<Me;++ke)($e=ae[ke])!=0&&(he[ke]=ce[$e]++);var De=0;for(ke=0;ke<Me;++ke)if(De=ae[ke],De!=0){$e=Fe[he[ke]]>>8-De;for(var Ve=(1<<7-De)-1;Ve>=0;--Ve)Ws[$e|Ve<<De]=De&7|ke<<3}var ct=[];for(se=1;ct.length<I+B;)switch($e=Ws[qe(k,W)],W+=$e&7,$e>>>=3){case 16:for(j=3+Li(k,W),W+=2,$e=ct[ct.length-1];j-- >0;)ct.push($e);break;case 17:for(j=3+Rt(k,W),W+=3;j-- >0;)ct.push(0);break;case 18:for(j=11+qe(k,W),W+=7;j-- >0;)ct.push(0);break;default:ct.push($e),se<$e&&(se=$e);break}var ui=ct.slice(0,I),Yi=ct.slice(I);for(ke=I;ke<286;++ke)ui[ke]=0;for(ke=B;ke<30;++ke)Yi[ke]=0;return v0=Ua(ui,Us,286),fa=Ua(Yi,bo,30),W}function md(k,W){if(k[0]==3&&!(k[1]&3))return[co(W),2];for(var I=0,B=0,U=Q1(W||1<<18),j=0,ae=U.length>>>0,he=0,se=0;(B&1)==0;){if(B=Rt(k,I),I+=3,B>>>1)B>>1==1?(he=9,se=5):(I=dd(k,I),he=v0,se=fa);else{I&7&&(I+=8-(I&7));var oe=k[I>>>3]|k[(I>>>3)+1]<<8;if(I+=32,oe>0)for(!W&&ae<j+oe&&(U=Vs(U,j+oe),ae=U.length);oe-- >0;)U[j++]=k[I>>>3],I+=8;continue}for(;;){!W&&ae<j+32767&&(U=Vs(U,j+32767),ae=U.length);var ce=bn(k,I,he),Me=B>>>1==1?yo[ce]:Us[ce];if(I+=Me&15,Me>>>=4,(Me>>>8&255)===0)U[j++]=Me;else{if(Me==256)break;Me-=257;var ke=Me<8?0:Me-4>>2;ke>5&&(ke=0);var $e=j+ye[Me];ke>0&&($e+=bn(k,I,ke),I+=ke),ce=bn(k,I,se),Me=B>>>1==1?Bs[ce]:bo[ce],I+=Me&15,Me>>>=4;var De=Me<4?0:Me-2>>1,Ve=Ze[Me];for(De>0&&(Ve+=bn(k,I,De),I+=De),!W&&ae<$e&&(U=Vs(U,$e+100),ae=U.length);j<$e;)U[j]=U[j-Ve],++j}}}return W?[U,I+7>>>3]:[U.slice(0,j),I+7>>>3]}function js(k,W){var I=k.slice(k.l||0),B=md(I,W);return k.l+=B[1],B[0]}function Hs(k,W){if(k)typeof console<"u"&&console.error(W);else throw new Error(W)}function zs(k,W){var I=k;Qn(I,0);var B=[],U=[],j={FileIndex:B,FullPaths:U};ne(j,{root:W.root});for(var ae=I.length-4;(I[ae]!=80||I[ae+1]!=75||I[ae+2]!=5||I[ae+3]!=6)&&ae>=0;)--ae;I.l=ae+4,I.l+=4;var he=I.read_shift(2);I.l+=6;var se=I.read_shift(4);for(I.l=se,ae=0;ae<he;++ae){I.l+=20;var oe=I.read_shift(4),ce=I.read_shift(4),Me=I.read_shift(2),ke=I.read_shift(2),$e=I.read_shift(2);I.l+=8;var De=I.read_shift(4),Ve=p(I.slice(I.l+Me,I.l+Me+ke));I.l+=Me+ke+$e;var ct=I.l;I.l=De+4,fd(I,oe,ce,j,Ve),I.l=ct}return j}function fd(k,W,I,B,U){k.l+=2;var j=k.read_shift(2),ae=k.read_shift(2),he=u(k);if(j&8257)throw new Error("Unsupported ZIP encryption");for(var se=k.read_shift(4),oe=k.read_shift(4),ce=k.read_shift(4),Me=k.read_shift(2),ke=k.read_shift(2),$e="",De=0;De<Me;++De)$e+=String.fromCharCode(k[k.l++]);if(ke){var Ve=p(k.slice(k.l,k.l+ke));(Ve[21589]||{}).mt&&(he=Ve[21589].mt),((U||{})[21589]||{}).mt&&(he=U[21589].mt)}k.l+=ke;var ct=k.slice(k.l,k.l+oe);switch(ae){case 8:ct=ue(k,ce);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+ae)}var ui=!1;j&8&&(se=k.read_shift(4),se==134695760&&(se=k.read_shift(4),ui=!0),oe=k.read_shift(4),ce=k.read_shift(4)),oe!=W&&Hs(ui,"Bad compressed size: "+W+" != "+oe),ce!=I&&Hs(ui,"Bad uncompressed size: "+I+" != "+ce),Mn(B,$e,ct,{unsafe:!0,mt:he})}function pd(k,W){var I=W||{},B=[],U=[],j=ge(1),ae=I.compression?8:0,he=0,se=!1;se&&(he|=8);var oe=0,ce=0,Me=0,ke=0,$e=k.FullPaths[0],De=$e,Ve=k.FileIndex[0],ct=[],ui=0;for(oe=1;oe<k.FullPaths.length;++oe)if(De=k.FullPaths[oe].slice($e.length),Ve=k.FileIndex[oe],!(!Ve.size||!Ve.content||De=="Sh33tJ5")){var Yi=Me,fi=ge(De.length);for(ce=0;ce<De.length;++ce)fi.write_shift(1,De.charCodeAt(ce)&127);fi=fi.slice(0,fi.l),ct[ke]=C3.buf(Ve.content,0);var fn=Ve.content;ae==8&&(fn=K(fn)),j=ge(30),j.write_shift(4,67324752),j.write_shift(2,20),j.write_shift(2,he),j.write_shift(2,ae),Ve.mt?a(j,Ve.mt):j.write_shift(4,0),j.write_shift(-4,he&8?0:ct[ke]),j.write_shift(4,he&8?0:fn.length),j.write_shift(4,he&8?0:Ve.content.length),j.write_shift(2,fi.length),j.write_shift(2,0),Me+=j.length,B.push(j),Me+=fi.length,B.push(fi),Me+=fn.length,B.push(fn),he&8&&(j=ge(12),j.write_shift(-4,ct[ke]),j.write_shift(4,fn.length),j.write_shift(4,Ve.content.length),Me+=j.l,B.push(j)),j=ge(46),j.write_shift(4,33639248),j.write_shift(2,0),j.write_shift(2,20),j.write_shift(2,he),j.write_shift(2,ae),j.write_shift(4,0),j.write_shift(-4,ct[ke]),j.write_shift(4,fn.length),j.write_shift(4,Ve.content.length),j.write_shift(2,fi.length),j.write_shift(2,0),j.write_shift(2,0),j.write_shift(2,0),j.write_shift(2,0),j.write_shift(4,0),j.write_shift(4,Yi),ui+=j.l,U.push(j),ui+=fi.length,U.push(fi),++ke}return j=ge(22),j.write_shift(4,101010256),j.write_shift(2,0),j.write_shift(2,0),j.write_shift(2,ke),j.write_shift(2,ke),j.write_shift(4,ui),j.write_shift(4,Me),j.write_shift(2,0),un([un(B),un(U),j])}var Co={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function hd(k,W){if(k.ctype)return k.ctype;var I=k.name||"",B=I.match(/\.([^\.]+)$/);return B&&Co[B[1]]||W&&(B=(I=W).match(/[\.\\]([^\.\\])+$/),B&&Co[B[1]])?Co[B[1]]:"application/octet-stream"}function gd(k){for(var W=n0(k),I=[],B=0;B<W.length;B+=76)I.push(W.slice(B,B+76));return I.join(`\r
`)+`\r
`}function _d(k){var W=k.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(oe){var ce=oe.charCodeAt(0).toString(16).toUpperCase();return"="+(ce.length==1?"0"+ce:ce)});W=W.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),W.charAt(0)==`
`&&(W="=0D"+W.slice(1)),W=W.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var I=[],B=W.split(`\r
`),U=0;U<B.length;++U){var j=B[U];if(j.length==0){I.push("");continue}for(var ae=0;ae<j.length;){var he=76,se=j.slice(ae,ae+he);se.charAt(he-1)=="="?he--:se.charAt(he-2)=="="?he-=2:se.charAt(he-3)=="="&&(he-=3),se=j.slice(ae,ae+he),ae+=he,ae<j.length&&(se+="="),I.push(se)}}return I.join(`\r
`)}function Gs(k){for(var W=[],I=0;I<k.length;++I){for(var B=k[I];I<=k.length&&B.charAt(B.length-1)=="=";)B=B.slice(0,B.length-1)+k[++I];W.push(B)}for(var U=0;U<W.length;++U)W[U]=W[U].replace(/[=][0-9A-Fa-f]{2}/g,function(j){return String.fromCharCode(parseInt(j.slice(1),16))});return Er(W.join(`\r
`))}function vd(k,W,I){for(var B="",U="",j="",ae,he=0;he<10;++he){var se=W[he];if(!se||se.match(/^\s*$/))break;var oe=se.match(/^(.*?):\s*([^\s].*)$/);if(oe)switch(oe[1].toLowerCase()){case"content-location":B=oe[2].trim();break;case"content-type":j=oe[2].trim();break;case"content-transfer-encoding":U=oe[2].trim();break}}switch(++he,U.toLowerCase()){case"base64":ae=Er(ca(W.slice(he).join("")));break;case"quoted-printable":ae=Gs(W.slice(he));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+U)}var ce=Mn(k,B.slice(I.length),ae,{unsafe:!0});j&&(ce.ctype=j)}function xd(k,W){if(St(k.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var I=W&&W.root||"",B=(qt&&Buffer.isBuffer(k)?k.toString("binary"):St(k)).split(`\r
`),U=0,j="";for(U=0;U<B.length;++U)if(j=B[U],!!/^Content-Location:/i.test(j)&&(j=j.slice(j.indexOf("file")),I||(I=j.slice(0,j.lastIndexOf("/")+1)),j.slice(0,I.length)!=I))for(;I.length>0&&(I=I.slice(0,I.length-1),I=I.slice(0,I.lastIndexOf("/")+1),j.slice(0,I.length)!=I););var ae=(B[1]||"").match(/boundary="(.*?)"/);if(!ae)throw new Error("MAD cannot find boundary");var he="--"+(ae[1]||""),se=[],oe=[],ce={FileIndex:se,FullPaths:oe};ne(ce);var Me,ke=0;for(U=0;U<B.length;++U){var $e=B[U];$e!==he&&$e!==he+"--"||(ke++&&vd(ce,B.slice(Me,U),I),Me=U)}return ce}function yd(k,W){var I=W||{},B=I.boundary||"SheetJS";B="------="+B;for(var U=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+B.slice(2)+'"',"","",""],j=k.FullPaths[0],ae=j,he=k.FileIndex[0],se=1;se<k.FullPaths.length;++se)if(ae=k.FullPaths[se].slice(j.length),he=k.FileIndex[se],!(!he.size||!he.content||ae=="Sh33tJ5")){ae=ae.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(ct){return"_x"+ct.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(ct){return"_u"+ct.charCodeAt(0).toString(16)+"_"});for(var oe=he.content,ce=qt&&Buffer.isBuffer(oe)?oe.toString("binary"):St(oe),Me=0,ke=Math.min(1024,ce.length),$e=0,De=0;De<=ke;++De)($e=ce.charCodeAt(De))>=32&&$e<128&&++Me;var Ve=Me>=ke*4/5;U.push(B),U.push("Content-Location: "+(I.root||"file:///C:/SheetJS/")+ae),U.push("Content-Transfer-Encoding: "+(Ve?"quoted-printable":"base64")),U.push("Content-Type: "+hd(he,ae)),U.push(""),U.push(Ve?_d(ce):gd(ce))}return U.push(B+`--\r
`),U.join(`\r
`)}function bd(k){var W={};return ne(W,k),W}function Mn(k,W,I,B){var U=B&&B.unsafe;U||ne(k);var j=!U&&si.find(k,W);if(!j){var ae=k.FullPaths[0];W.slice(0,ae.length)==ae?ae=W:(ae.slice(-1)!="/"&&(ae+="/"),ae=(ae+W).replace("//","/")),j={name:r(W),type:2},k.FileIndex.push(j),k.FullPaths.push(ae),U||si.utils.cfb_gc(k)}return j.content=I,j.size=I?I.length:0,B&&(B.CLSID&&(j.clsid=B.CLSID),B.mt&&(j.mt=B.mt),B.ct&&(j.ct=B.ct)),j}function at(k,W){ne(k);var I=si.find(k,W);if(I){for(var B=0;B<k.FileIndex.length;++B)if(k.FileIndex[B]==I)return k.FileIndex.splice(B,1),k.FullPaths.splice(B,1),!0}return!1}function x0(k,W,I){ne(k);var B=si.find(k,W);if(B){for(var U=0;U<k.FileIndex.length;++U)if(k.FileIndex[U]==B)return k.FileIndex[U].name=r(I),k.FullPaths[U]=I,!0}return!1}function y0(k){me(k,!0)}return t.find=Ae,t.read=ze,t.parse=y,t.write=Wt,t.writeFile=nt,t.utils={cfb_new:bd,cfb_add:Mn,cfb_del:at,cfb_mov:x0,cfb_gc:y0,ReadShift:Kl,CheckField:c_,prep_blob:Qn,bconcat:un,use_zlib:X,_deflateRaw:_0,_inflateRaw:js,consts:Pi},t}(),tc;function w3(i){return typeof i=="string"?yc(i):Array.isArray(i)?YC(i):i}function u0(i,t,e){if(typeof tc<"u"&&tc.writeFileSync)return e?tc.writeFileSync(i,t,e):tc.writeFileSync(i,t);if(typeof Deno<"u"){if(e&&typeof t=="string")switch(e){case"utf8":t=new TextEncoder(e).encode(t);break;case"binary":t=yc(t);break;default:throw new Error("Unsupported encoding "+e)}return Deno.writeFileSync(i,t)}var n=e=="utf8"?oa(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,i);if(typeof Blob<"u"){var r=new Blob([w3(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(r,i);if(typeof saveAs<"u")return saveAs(r,i);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(r);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:i,saveAs:!0});var u=document.createElement("a");if(u.download!=null)return u.download=i,u.href=a,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var p=File(i);return p.open("w"),p.encoding="binary",Array.isArray(t)&&(t=l0(t)),p.write(t),p.close(),t}catch(g){if(!g.message||!g.message.match(/onstruct/))throw g}throw new Error("cannot save file "+i)}function mn(i){for(var t=Object.keys(i),e=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(i,t[n])&&e.push(t[n]);return e}function s6(i,t){for(var e=[],n=mn(i),r=0;r!==n.length;++r)e[i[n[r]][t]]==null&&(e[i[n[r]][t]]=n[r]);return e}function Nf(i){for(var t=[],e=mn(i),n=0;n!==e.length;++n)t[i[e[n]]]=e[n];return t}function wc(i){for(var t=[],e=mn(i),n=0;n!==e.length;++n)t[i[e[n]]]=parseInt(e[n],10);return t}function S3(i){for(var t=[],e=mn(i),n=0;n!==e.length;++n)t[i[e[n]]]==null&&(t[i[e[n]]]=[]),t[i[e[n]]].push(e[n]);return t}var cc=new Date(1899,11,30,0,0,0);function Nn(i,t){var e=i.getTime();t&&(e-=1462*24*60*60*1e3);var n=cc.getTime()+(i.getTimezoneOffset()-cc.getTimezoneOffset())*6e4;return(e-n)/(24*60*60*1e3)}var J6=new Date,T3=cc.getTime()+(J6.getTimezoneOffset()-cc.getTimezoneOffset())*6e4,l6=J6.getTimezoneOffset();function Q6(i){var t=new Date;return t.setTime(i*24*60*60*1e3+T3),t.getTimezoneOffset()!==l6&&t.setTime(t.getTime()+(t.getTimezoneOffset()-l6)*6e4),t}var u6=new Date("2017-02-19T19:06:09.000Z"),e_=isNaN(u6.getFullYear())?new Date("2/19/17"):u6,E3=e_.getFullYear()==2017;function En(i,t){var e=new Date(i);if(E3)return t>0?e.setTime(e.getTime()+e.getTimezoneOffset()*60*1e3):t<0&&e.setTime(e.getTime()-e.getTimezoneOffset()*60*1e3),e;if(i instanceof Date)return i;if(e_.getFullYear()==1917&&!isNaN(e.getFullYear())){var n=e.getFullYear();return i.indexOf(""+n)>-1||e.setFullYear(e.getFullYear()+100),e}var r=i.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+r[0],+r[1]-1,+r[2],+r[3]||0,+r[4]||0,+r[5]||0);return i.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function Sc(i,t){if(qt&&Buffer.isBuffer(i)){if(t){if(i[0]==255&&i[1]==254)return oa(i.slice(2).toString("utf16le"));if(i[1]==254&&i[2]==255)return oa(qC(i.slice(2).toString("binary")))}return i.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(i[0]==255&&i[1]==254)return oa(new TextDecoder("utf-16le").decode(i.slice(2)));if(i[0]==254&&i[1]==255)return oa(new TextDecoder("utf-16be").decode(i.slice(2)))}var e={"\u20AC":"\x80","\u201A":"\x82",\u0192:"\x83","\u201E":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87","\u02C6":"\x88","\u2030":"\x89",\u0160:"\x8A","\u2039":"\x8B",\u0152:"\x8C",\u017D:"\x8E","\u2018":"\x91","\u2019":"\x92","\u201C":"\x93","\u201D":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02DC":"\x98","\u2122":"\x99",\u0161:"\x9A","\u203A":"\x9B",\u0153:"\x9C",\u017E:"\x9E",\u0178:"\x9F"};return Array.isArray(i)&&(i=new Uint8Array(i)),new TextDecoder("latin1").decode(i).replace(/[]/g,function(a){return e[a]||a})}catch{}for(var n=[],r=0;r!=i.length;++r)n.push(String.fromCharCode(i[r]));return n.join("")}function Vn(i){if(typeof JSON<"u"&&!Array.isArray(i))return JSON.parse(JSON.stringify(i));if(typeof i!="object"||i==null)return i;if(i instanceof Date)return new Date(i.getTime());var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=Vn(i[e]));return t}function Fi(i,t){for(var e="";e.length<t;)e+=i;return e}function la(i){var t=Number(i);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(i))return t;var e=1,n=i.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return e*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(r,a){return e=-e,a}),!isNaN(t=Number(n)))?t/e:t}var A3=["january","february","march","april","may","june","july","august","september","october","november","december"];function r0(i){var t=new Date(i),e=new Date(NaN),n=t.getYear(),r=t.getMonth(),a=t.getDate();if(isNaN(a))return e;var u=i.toLowerCase();if(u.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(u=u.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),u.length>3&&A3.indexOf(u)==-1)return e}else if(u.match(/[a-z]/))return e;return n<0||n>8099?e:(r>0||a>1)&&n!=101?t:i.match(/[^-0-9:,\/\\]/)?e:t}function wt(i,t,e){if(i.FullPaths){if(typeof e=="string"){var n;return qt?n=ma(e):n=XC(e),si.utils.cfb_add(i,t,n)}si.utils.cfb_add(i,t,e)}else i.file(t,e)}function Vf(){return si.utils.cfb_new()}var zi=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`;var M3={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Bf=Nf(M3);var Uf=/[&<>'"]/g,F3=/[\u0000-\u0008\u000b-\u001f]/g;function ii(i){var t=i+"";return t.replace(Uf,function(e){return Bf[e]}).replace(F3,function(e){return"_x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+"_"})}function c6(i){return ii(i).replace(/ /g,"_x0020_")}var t_=/[\u0000-\u001f]/g;function k3(i){var t=i+"";return t.replace(Uf,function(e){return Bf[e]}).replace(/\n/g,"<br/>").replace(t_,function(e){return"&#x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+";"})}function P3(i){var t=i+"";return t.replace(Uf,function(e){return Bf[e]}).replace(t_,function(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"})}function D3(i){return i.replace(/(\r\n|[\r\n])/g,"&#10;")}function I3(i){switch(i){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Sf(i){for(var t="",e=0,n=0,r=0,a=0,u=0,p=0;e<i.length;){if(n=i.charCodeAt(e++),n<128){t+=String.fromCharCode(n);continue}if(r=i.charCodeAt(e++),n>191&&n<224){u=(n&31)<<6,u|=r&63,t+=String.fromCharCode(u);continue}if(a=i.charCodeAt(e++),n<240){t+=String.fromCharCode((n&15)<<12|(r&63)<<6|a&63);continue}u=i.charCodeAt(e++),p=((n&7)<<18|(r&63)<<12|(a&63)<<6|u&63)-65536,t+=String.fromCharCode(55296+(p>>>10&1023)),t+=String.fromCharCode(56320+(p&1023))}return t}function d6(i){var t=co(2*i.length),e,n,r=1,a=0,u=0,p;for(n=0;n<i.length;n+=r)r=1,(p=i.charCodeAt(n))<128?e=p:p<224?(e=(p&31)*64+(i.charCodeAt(n+1)&63),r=2):p<240?(e=(p&15)*4096+(i.charCodeAt(n+1)&63)*64+(i.charCodeAt(n+2)&63),r=3):(r=4,e=(p&7)*262144+(i.charCodeAt(n+1)&63)*4096+(i.charCodeAt(n+2)&63)*64+(i.charCodeAt(n+3)&63),e-=65536,u=55296+(e>>>10&1023),e=56320+(e&1023)),u!==0&&(t[a++]=u&255,t[a++]=u>>>8,u=0),t[a++]=e%256,t[a++]=e>>>8;return t.slice(0,a).toString("ucs2")}function m6(i){return ma(i,"binary").toString("utf8")}var ic="foo bar baz\xE2\x98\x83\xF0\x9F\x8D\xA3",Xl=qt&&(m6(ic)==Sf(ic)&&m6||d6(ic)==Sf(ic)&&d6)||Sf,oa=qt?function(i){return ma(i,"utf8").toString("binary")}:function(i){for(var t=[],e=0,n=0,r=0;e<i.length;)switch(n=i.charCodeAt(e++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,r=i.charCodeAt(e++)-56320+(n<<10),t.push(String.fromCharCode(240+(r>>18&7))),t.push(String.fromCharCode(144+(r>>12&63))),t.push(String.fromCharCode(128+(r>>6&63))),t.push(String.fromCharCode(128+(r&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")};var O3=function(){var i=[["nbsp"," "],["middot","\xB7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(e){for(var n=e.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),r=0;r<i.length;++r)n=n.replace(i[r][0],i[r][1]);return n}}();var i_=/(^\s|\s$|\n)/;function cn(i,t){return"<"+i+(t.match(i_)?' xml:space="preserve"':"")+">"+t+"</"+i+">"}function a0(i){return mn(i).map(function(t){return" "+t+'="'+i[t]+'"'}).join("")}function Ie(i,t,e){return"<"+i+(e!=null?a0(e):"")+(t!=null?(t.match(i_)?' xml:space="preserve"':"")+">"+t+"</"+i:"/")+">"}function Df(i,t){try{return i.toISOString().replace(/\.\d*/,"")}catch(e){if(t)throw e}return""}function L3(i,t){switch(typeof i){case"string":var e=Ie("vt:lpwstr",ii(i));return t&&(e=e.replace(/&quot;/g,"_x0022_")),e;case"number":return Ie((i|0)==i?"vt:i4":"vt:r8",ii(String(i)));case"boolean":return Ie("vt:bool",i?"true":"false")}if(i instanceof Date)return Ie("vt:filetime",Df(i));throw new Error("Unable to serialize "+i)}var en={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},ws=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],er={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function R3(i,t){for(var e=1-2*(i[t+7]>>>7),n=((i[t+7]&127)<<4)+(i[t+6]>>>4&15),r=i[t+6]&15,a=5;a>=0;--a)r=r*256+i[t+a];return n==2047?r==0?e*(1/0):NaN:(n==0?n=-1022:(n-=1023,r+=Math.pow(2,52)),e*Math.pow(2,n-52)*r)}function N3(i,t,e){var n=(t<0||1/t==-1/0?1:0)<<7,r=0,a=0,u=n?-t:t;isFinite(u)?u==0?r=a=0:(r=Math.floor(Math.log(u)/Math.LN2),a=u*Math.pow(2,52-r),r<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?r=-1022:(a-=Math.pow(2,52),r+=1023)):(r=2047,a=isNaN(t)?26985:0);for(var p=0;p<=5;++p,a/=256)i[e+p]=a&255;i[e+6]=(r&15)<<4|a&15,i[e+7]=r>>4|n}var f6=function(i){for(var t=[],e=10240,n=0;n<i[0].length;++n)if(i[0][n])for(var r=0,a=i[0][n].length;r<a;r+=e)t.push.apply(t,i[0][n].slice(r,r+e));return t},p6=qt?function(i){return i[0].length>0&&Buffer.isBuffer(i[0][0])?Buffer.concat(i[0].map(function(t){return Buffer.isBuffer(t)?t:ma(t)})):f6(i)}:f6,h6=function(i,t,e){for(var n=[],r=t;r<e;r+=2)n.push(String.fromCharCode(Yl(i,r)));return n.join("").replace(gs,"")},Tc=qt?function(i,t,e){return Buffer.isBuffer(i)?i.toString("utf16le",t,e).replace(gs,""):h6(i,t,e)}:h6,g6=function(i,t,e){for(var n=[],r=t;r<t+e;++r)n.push(("0"+i[r].toString(16)).slice(-2));return n.join("")},n_=qt?function(i,t,e){return Buffer.isBuffer(i)?i.toString("hex",t,t+e):g6(i,t,e)}:g6,_6=function(i,t,e){for(var n=[],r=t;r<e;r++)n.push(String.fromCharCode(ps(i,r)));return n.join("")},Ss=qt?function(t,e,n){return Buffer.isBuffer(t)?t.toString("utf8",e,n):_6(t,e,n)}:_6,r_=function(i,t){var e=Qi(i,t);return e>0?Ss(i,t+4,t+4+e-1):""},Wf=r_,a_=function(i,t){var e=Qi(i,t);return e>0?Ss(i,t+4,t+4+e-1):""},jf=a_,o_=function(i,t){var e=2*Qi(i,t);return e>0?Ss(i,t+4,t+4+e-1):""},Hf=o_,s_=function(t,e){var n=Qi(t,e);return n>0?Tc(t,e+4,e+4+n):""},zf=s_,l_=function(i,t){var e=Qi(i,t);return e>0?Ss(i,t+4,t+4+e):""},Gf=l_,u_=function(i,t){return R3(i,t)},dc=u_,$f=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};qt&&(Wf=function(t,e){if(!Buffer.isBuffer(t))return r_(t,e);var n=t.readUInt32LE(e);return n>0?t.toString("utf8",e+4,e+4+n-1):""},jf=function(t,e){if(!Buffer.isBuffer(t))return a_(t,e);var n=t.readUInt32LE(e);return n>0?t.toString("utf8",e+4,e+4+n-1):""},Hf=function(t,e){if(!Buffer.isBuffer(t))return o_(t,e);var n=2*t.readUInt32LE(e);return t.toString("utf16le",e+4,e+4+n-1)},zf=function(t,e){if(!Buffer.isBuffer(t))return s_(t,e);var n=t.readUInt32LE(e);return t.toString("utf16le",e+4,e+4+n)},Gf=function(t,e){if(!Buffer.isBuffer(t))return l_(t,e);var n=t.readUInt32LE(e);return t.toString("utf8",e+4,e+4+n)},dc=function(t,e){return Buffer.isBuffer(t)?t.readDoubleLE(e):u_(t,e)},$f=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});function V3(){Tc=function(i,t,e){return mi.utils.decode(1200,i.slice(t,e)).replace(gs,"")},Ss=function(i,t,e){return mi.utils.decode(65001,i.slice(t,e))},Wf=function(i,t){var e=Qi(i,t);return e>0?mi.utils.decode(bs,i.slice(t+4,t+4+e-1)):""},jf=function(i,t){var e=Qi(i,t);return e>0?mi.utils.decode(lo,i.slice(t+4,t+4+e-1)):""},Hf=function(i,t){var e=2*Qi(i,t);return e>0?mi.utils.decode(1200,i.slice(t+4,t+4+e-1)):""},zf=function(i,t){var e=Qi(i,t);return e>0?mi.utils.decode(1200,i.slice(t+4,t+4+e)):""},Gf=function(i,t){var e=Qi(i,t);return e>0?mi.utils.decode(65001,i.slice(t+4,t+4+e)):""}}typeof mi<"u"&&V3();var ps=function(i,t){return i[t]},Yl=function(i,t){return i[t+1]*256+i[t]},B3=function(i,t){var e=i[t+1]*256+i[t];return e<32768?e:(65535-e+1)*-1},Qi=function(i,t){return i[t+3]*(1<<24)+(i[t+2]<<16)+(i[t+1]<<8)+i[t]},so=function(i,t){return i[t+3]<<24|i[t+2]<<16|i[t+1]<<8|i[t]},U3=function(i,t){return i[t]<<24|i[t+1]<<16|i[t+2]<<8|i[t+3]};function Kl(i,t){var e="",n,r,a=[],u,p,g,v;switch(t){case"dbcs":if(v=this.l,qt&&Buffer.isBuffer(this))e=this.slice(this.l,this.l+2*i).toString("utf16le");else for(g=0;g<i;++g)e+=String.fromCharCode(Yl(this,v)),v+=2;i*=2;break;case"utf8":e=Ss(this,this.l,this.l+i);break;case"utf16le":i*=2,e=Tc(this,this.l,this.l+i);break;case"wstr":if(typeof mi<"u")e=mi.utils.decode(lo,this.slice(this.l,this.l+2*i));else return Kl.call(this,i,"dbcs");i=2*i;break;case"lpstr-ansi":e=Wf(this,this.l),i=4+Qi(this,this.l);break;case"lpstr-cp":e=jf(this,this.l),i=4+Qi(this,this.l);break;case"lpwstr":e=Hf(this,this.l),i=4+2*Qi(this,this.l);break;case"lpp4":i=4+Qi(this,this.l),e=zf(this,this.l),i&2&&(i+=2);break;case"8lpp4":i=4+Qi(this,this.l),e=Gf(this,this.l),i&3&&(i+=4-(i&3));break;case"cstr":for(i=0,e="";(u=ps(this,this.l+i++))!==0;)a.push(Ju(u));e=a.join("");break;case"_wstr":for(i=0,e="";(u=Yl(this,this.l+i))!==0;)a.push(Ju(u)),i+=2;i+=2,e=a.join("");break;case"dbcs-cont":for(e="",v=this.l,g=0;g<i;++g){if(this.lens&&this.lens.indexOf(v)!==-1)return u=ps(this,v),this.l=v+1,p=Kl.call(this,i-g,u?"dbcs-cont":"sbcs-cont"),a.join("")+p;a.push(Ju(Yl(this,v))),v+=2}e=a.join(""),i*=2;break;case"cpstr":if(typeof mi<"u"){e=mi.utils.decode(lo,this.slice(this.l,this.l+i));break}case"sbcs-cont":for(e="",v=this.l,g=0;g!=i;++g){if(this.lens&&this.lens.indexOf(v)!==-1)return u=ps(this,v),this.l=v+1,p=Kl.call(this,i-g,u?"dbcs-cont":"sbcs-cont"),a.join("")+p;a.push(Ju(ps(this,v))),v+=1}e=a.join("");break;default:switch(i){case 1:return n=ps(this,this.l),this.l++,n;case 2:return n=(t==="i"?B3:Yl)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(i>0?so:U3)(this,this.l),this.l+=4,n):(r=Qi(this,this.l),this.l+=4,r);case 8:case-8:if(t==="f")return i==8?r=dc(this,this.l):r=dc([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,r;i=8;case 16:e=n_(this,this.l,i);break}}return this.l+=i,e}var W3=function(i,t,e){i[e]=t&255,i[e+1]=t>>>8&255,i[e+2]=t>>>16&255,i[e+3]=t>>>24&255},j3=function(i,t,e){i[e]=t&255,i[e+1]=t>>8&255,i[e+2]=t>>16&255,i[e+3]=t>>24&255},H3=function(i,t,e){i[e]=t&255,i[e+1]=t>>>8&255};function z3(i,t,e){var n=0,r=0;if(e==="dbcs"){for(r=0;r!=t.length;++r)H3(this,t.charCodeAt(r),this.l+2*r);n=2*t.length}else if(e==="sbcs"){if(typeof mi<"u"&&bs==874)for(r=0;r!=t.length;++r){var a=mi.utils.encode(bs,t.charAt(r));this[this.l+r]=a[0]}else for(t=t.replace(/[^\x00-\x7F]/g,"_"),r=0;r!=t.length;++r)this[this.l+r]=t.charCodeAt(r)&255;n=t.length}else if(e==="hex"){for(;r<i;++r)this[this.l++]=parseInt(t.slice(2*r,2*r+2),16)||0;return this}else if(e==="utf16le"){var u=Math.min(this.l+i,this.length);for(r=0;r<Math.min(t.length,i);++r){var p=t.charCodeAt(r);this[this.l++]=p&255,this[this.l++]=p>>8}for(;this.l<u;)this[this.l++]=0;return this}else switch(i){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,W3(this,t,this.l);break;case 8:if(n=8,e==="f"){N3(this,t,this.l);break}case 16:break;case-4:n=4,j3(this,t,this.l);break}return this.l+=n,this}function c_(i,t){var e=n_(this,this.l,i.length>>1);if(e!==i)throw new Error(t+"Expected "+i+" saw "+e);this.l+=i.length>>1}function Qn(i,t){i.l=t,i.read_shift=Kl,i.chk=c_,i.write_shift=z3}function Gr(i,t){i.l+=t}function ge(i){var t=co(i);return Qn(t,0),t}function Rn(){var i=[],t=qt?256:2048,e=function(v){var y=ge(v);return Qn(y,0),y},n=e(t),r=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&i.push(n),n=null)},a=function(v){return n&&v<n.length-n.l?n:(r(),n=e(Math.max(v+1,t)))},u=function(){return r(),un(i)},p=function(v){r(),n=v,n.l==null&&(n.l=n.length),a(t)};return{next:a,push:p,end:u,_bufs:i}}function be(i,t,e,n){var r=+t,a;if(!isNaN(r)){n||(n=NM[r].p||(e||[]).length||0),a=1+(r>=128?1:0)+1,n>=128&&++a,n>=16384&&++a,n>=2097152&&++a;var u=i.next(a);r<=127?u.write_shift(1,r):(u.write_shift(1,(r&127)+128),u.write_shift(1,r>>7));for(var p=0;p!=4;++p)if(n>=128)u.write_shift(1,(n&127)+128),n>>=7;else{u.write_shift(1,n);break}n>0&&$f(e)&&i.push(e)}}function Jl(i,t,e){var n=Vn(i);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!e||e.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function v6(i,t,e){var n=Vn(i);return n.s=Jl(n.s,t.s,e),n.e=Jl(n.e,t.s,e),n}function Ql(i,t){if(i.cRel&&i.c<0)for(i=Vn(i);i.c<0;)i.c+=t>8?16384:256;if(i.rRel&&i.r<0)for(i=Vn(i);i.r<0;)i.r+=t>8?1048576:t>5?65536:16384;var e=ni(i);return!i.cRel&&i.cRel!=null&&(e=Z3(e)),!i.rRel&&i.rRel!=null&&(e=G3(e)),e}function Tf(i,t){return i.s.r==0&&!i.s.rRel&&i.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!i.e.rRel?(i.s.cRel?"":"$")+vn(i.s.c)+":"+(i.e.cRel?"":"$")+vn(i.e.c):i.s.c==0&&!i.s.cRel&&i.e.c==(t.biff>=12?16383:255)&&!i.e.cRel?(i.s.rRel?"":"$")+dn(i.s.r)+":"+(i.e.rRel?"":"$")+dn(i.e.r):Ql(i.s,t.biff)+":"+Ql(i.e,t.biff)}function Zf(i){return parseInt($3(i),10)-1}function dn(i){return""+(i+1)}function G3(i){return i.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function $3(i){return i.replace(/\$(\d+)$/,"$1")}function qf(i){for(var t=q3(i),e=0,n=0;n!==t.length;++n)e=26*e+t.charCodeAt(n)-64;return e-1}function vn(i){if(i<0)throw new Error("invalid column "+i);var t="";for(++i;i;i=Math.floor((i-1)/26))t=String.fromCharCode((i-1)%26+65)+t;return t}function Z3(i){return i.replace(/^([A-Z])/,"$$$1")}function q3(i){return i.replace(/^\$([A-Z])/,"$1")}function Y3(i){return i.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function tn(i){for(var t=0,e=0,n=0;n<i.length;++n){var r=i.charCodeAt(n);r>=48&&r<=57?t=10*t+(r-48):r>=65&&r<=90&&(e=26*e+(r-64))}return{c:e-1,r:t-1}}function ni(i){for(var t=i.c+1,e="";t;t=(t-1)/26|0)e=String.fromCharCode((t-1)%26+65)+e;return e+(i.r+1)}function tr(i){var t=i.indexOf(":");return t==-1?{s:tn(i),e:tn(i)}:{s:tn(i.slice(0,t)),e:tn(i.slice(t+1))}}function Hi(i,t){return typeof t>"u"||typeof t=="number"?Hi(i.s,i.e):(typeof i!="string"&&(i=ni(i)),typeof t!="string"&&(t=ni(t)),i==t?i:i+":"+t)}function yi(i){var t={s:{c:0,r:0},e:{c:0,r:0}},e=0,n=0,r=0,a=i.length;for(e=0;n<a&&!((r=i.charCodeAt(n)-64)<1||r>26);++n)e=26*e+r;for(t.s.c=--e,e=0;n<a&&!((r=i.charCodeAt(n)-48)<0||r>9);++n)e=10*e+r;if(t.s.r=--e,n===a||r!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,e=0;n!=a&&!((r=i.charCodeAt(n)-64)<1||r>26);++n)e=26*e+r;for(t.e.c=--e,e=0;n!=a&&!((r=i.charCodeAt(n)-48)<0||r>9);++n)e=10*e+r;return t.e.r=--e,t}function x6(i,t){var e=i.t=="d"&&t instanceof Date;if(i.z!=null)try{return i.w=Ia(i.z,e?Nn(t):t)}catch{}try{return i.w=Ia((i.XF||{}).numFmtId||(e?14:0),e?Nn(t):t)}catch{return""+t}}function da(i,t,e){return i==null||i.t==null||i.t=="z"?"":i.w!==void 0?i.w:(i.t=="d"&&!i.z&&e&&e.dateNF&&(i.z=e.dateNF),i.t=="e"?c0[i.v]||i.v:t==null?x6(i,i.v):x6(i,t))}function po(i,t){var e=t&&t.sheet?t.sheet:"Sheet1",n={};return n[e]=i,{SheetNames:[e],Sheets:n}}function d_(i,t,e){var n=e||{},r=i?Array.isArray(i):n.dense;zr!=null&&r==null&&(r=zr);var a=i||(r?[]:{}),u=0,p=0;if(a&&n.origin!=null){if(typeof n.origin=="number")u=n.origin;else{var g=typeof n.origin=="string"?tn(n.origin):n.origin;u=g.r,p=g.c}a["!ref"]||(a["!ref"]="A1:A1")}var v={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var y=yi(a["!ref"]);v.s.c=y.s.c,v.s.r=y.s.r,v.e.c=Math.max(v.e.c,y.e.c),v.e.r=Math.max(v.e.r,y.e.r),u==-1&&(v.e.r=u=y.e.r+1)}for(var M=0;M!=t.length;++M)if(t[M]){if(!Array.isArray(t[M]))throw new Error("aoa_to_sheet expects an array of arrays");for(var E=0;E!=t[M].length;++E)if(!(typeof t[M][E]>"u")){var A={v:t[M][E]},O=u+M,F=p+E;if(v.s.r>O&&(v.s.r=O),v.s.c>F&&(v.s.c=F),v.e.r<O&&(v.e.r=O),v.e.c<F&&(v.e.c=F),t[M][E]&&typeof t[M][E]=="object"&&!Array.isArray(t[M][E])&&!(t[M][E]instanceof Date))A=t[M][E];else if(Array.isArray(A.v)&&(A.f=t[M][E][1],A.v=A.v[0]),A.v===null)if(A.f)A.t="n";else if(n.nullError)A.t="e",A.v=0;else if(n.sheetStubs)A.t="z";else continue;else typeof A.v=="number"?A.t="n":typeof A.v=="boolean"?A.t="b":A.v instanceof Date?(A.z=n.dateNF||ki[14],n.cellDates?(A.t="d",A.w=Ia(A.z,Nn(A.v))):(A.t="n",A.v=Nn(A.v),A.w=Ia(A.z,A.v))):A.t="s";if(r)a[O]||(a[O]=[]),a[O][F]&&a[O][F].z&&(A.z=a[O][F].z),a[O][F]=A;else{var D=ni({c:F,r:O});a[D]&&a[D].z&&(A.z=a[D].z),a[D]=A}}}return v.s.c<1e7&&(a["!ref"]=Hi(v)),a}function Ts(i,t){return d_(null,i,t)}function X3(i){return i.read_shift(4,"i")}function Mr(i,t){return t||(t=ge(4)),t.write_shift(4,i),t}function xn(i){var t=i.read_shift(4);return t===0?"":i.read_shift(t,"dbcs")}function nn(i,t){var e=!1;return t==null&&(e=!0,t=ge(4+2*i.length)),t.write_shift(4,i.length),i.length>0&&t.write_shift(0,i,"dbcs"),e?t.slice(0,t.l):t}function K3(i){return{ich:i.read_shift(2),ifnt:i.read_shift(2)}}function J3(i,t){return t||(t=ge(4)),t.write_shift(2,i.ich||0),t.write_shift(2,i.ifnt||0),t}function Yf(i,t){var e=i.l,n=i.read_shift(1),r=xn(i),a=[],u={t:r,h:r};if((n&1)!==0){for(var p=i.read_shift(4),g=0;g!=p;++g)a.push(K3(i));u.r=a}else u.r=[{ich:0,ifnt:0}];return i.l=e+t,u}function Q3(i,t){var e=!1;return t==null&&(e=!0,t=ge(15+4*i.t.length)),t.write_shift(1,0),nn(i.t,t),e?t.slice(0,t.l):t}var ew=Yf;function tw(i,t){var e=!1;return t==null&&(e=!0,t=ge(23+4*i.t.length)),t.write_shift(1,1),nn(i.t,t),t.write_shift(4,1),J3({ich:0,ifnt:0},t),e?t.slice(0,t.l):t}function fr(i){var t=i.read_shift(4),e=i.read_shift(2);return e+=i.read_shift(1)<<16,i.l++,{c:t,iStyleRef:e}}function ho(i,t){return t==null&&(t=ge(8)),t.write_shift(-4,i.c),t.write_shift(3,i.iStyleRef||i.s),t.write_shift(1,0),t}function go(i){var t=i.read_shift(2);return t+=i.read_shift(1)<<16,i.l++,{c:-1,iStyleRef:t}}function _o(i,t){return t==null&&(t=ge(4)),t.write_shift(3,i.iStyleRef||i.s),t.write_shift(1,0),t}var iw=xn,m_=nn;function Xf(i){var t=i.read_shift(4);return t===0||t===4294967295?"":i.read_shift(t,"dbcs")}function mc(i,t){var e=!1;return t==null&&(e=!0,t=ge(127)),t.write_shift(4,i.length>0?i.length:4294967295),i.length>0&&t.write_shift(0,i,"dbcs"),e?t.slice(0,t.l):t}var nw=xn,If=Xf,Kf=mc;function f_(i){var t=i.slice(i.l,i.l+4),e=t[0]&1,n=t[0]&2;i.l+=4;var r=n===0?dc([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):so(t,0)>>2;return e?r/100:r}function p_(i,t){t==null&&(t=ge(4));var e=0,n=0,r=i*100;if(i==(i|0)&&i>=-(1<<29)&&i<1<<29?n=1:r==(r|0)&&r>=-(1<<29)&&r<1<<29&&(n=1,e=1),n)t.write_shift(-4,((e?r:i)<<2)+(e+2));else throw new Error("unsupported RkNumber "+i)}function h_(i){var t={s:{},e:{}};return t.s.r=i.read_shift(4),t.e.r=i.read_shift(4),t.s.c=i.read_shift(4),t.e.c=i.read_shift(4),t}function rw(i,t){return t||(t=ge(16)),t.write_shift(4,i.s.r),t.write_shift(4,i.e.r),t.write_shift(4,i.s.c),t.write_shift(4,i.e.c),t}var vo=h_,Es=rw;function As(i){if(i.length-i.l<8)throw"XLS Xnum Buffer underflow";return i.read_shift(8,"f")}function mo(i,t){return(t||ge(8)).write_shift(8,i,"f")}function aw(i){var t={},e=i.read_shift(1),n=e>>>1,r=i.read_shift(1),a=i.read_shift(2,"i"),u=i.read_shift(1),p=i.read_shift(1),g=i.read_shift(1);switch(i.l++,n){case 0:t.auto=1;break;case 1:t.index=r;var v=pw[r];v&&(t.rgb=k6(v));break;case 2:t.rgb=k6([u,p,g]);break;case 3:t.theme=r;break}return a!=0&&(t.tint=a>0?a/32767:a/32768),t}function fc(i,t){if(t||(t=ge(8)),!i||i.auto)return t.write_shift(4,0),t.write_shift(4,0),t;i.index!=null?(t.write_shift(1,2),t.write_shift(1,i.index)):i.theme!=null?(t.write_shift(1,6),t.write_shift(1,i.theme)):(t.write_shift(1,5),t.write_shift(1,0));var e=i.tint||0;if(e>0?e*=32767:e<0&&(e*=32768),t.write_shift(2,e),!i.rgb||i.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=i.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function ow(i){var t=i.read_shift(1);i.l++;var e={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return e}function sw(i,t){t||(t=ge(2));var e=(i.italic?2:0)|(i.strike?8:0)|(i.outline?16:0)|(i.shadow?32:0)|(i.condense?64:0)|(i.extend?128:0);return t.write_shift(1,e),t.write_shift(1,0),t}var g_=2,Jn=3,nc=11;var pc=19;var rc=64,lw=65,uw=71;var cw=4108,dw=4126,ln=80;var y6={1:{n:"CodePage",t:g_},2:{n:"Category",t:ln},3:{n:"PresentationFormat",t:ln},4:{n:"ByteCount",t:Jn},5:{n:"LineCount",t:Jn},6:{n:"ParagraphCount",t:Jn},7:{n:"SlideCount",t:Jn},8:{n:"NoteCount",t:Jn},9:{n:"HiddenCount",t:Jn},10:{n:"MultimediaClipCount",t:Jn},11:{n:"ScaleCrop",t:nc},12:{n:"HeadingPairs",t:cw},13:{n:"TitlesOfParts",t:dw},14:{n:"Manager",t:ln},15:{n:"Company",t:ln},16:{n:"LinksUpToDate",t:nc},17:{n:"CharacterCount",t:Jn},19:{n:"SharedDoc",t:nc},22:{n:"HyperlinksChanged",t:nc},23:{n:"AppVersion",t:Jn,p:"version"},24:{n:"DigSig",t:lw},26:{n:"ContentType",t:ln},27:{n:"ContentStatus",t:ln},28:{n:"Language",t:ln},29:{n:"Version",t:ln},255:{},2147483648:{n:"Locale",t:pc},2147483651:{n:"Behavior",t:pc},1919054434:{}},b6={1:{n:"CodePage",t:g_},2:{n:"Title",t:ln},3:{n:"Subject",t:ln},4:{n:"Author",t:ln},5:{n:"Keywords",t:ln},6:{n:"Comments",t:ln},7:{n:"Template",t:ln},8:{n:"LastAuthor",t:ln},9:{n:"RevNumber",t:ln},10:{n:"EditTime",t:rc},11:{n:"LastPrinted",t:rc},12:{n:"CreatedDate",t:rc},13:{n:"ModifiedDate",t:rc},14:{n:"PageCount",t:Jn},15:{n:"WordCount",t:Jn},16:{n:"CharCount",t:Jn},17:{n:"Thumbnail",t:uw},18:{n:"Application",t:ln},19:{n:"DocSecurity",t:Jn},255:{},2147483648:{n:"Locale",t:pc},2147483651:{n:"Behavior",t:pc},1919054434:{}};function mw(i){return i.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var fw=mw([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),pw=Vn(fw),c0={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"};var hw={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},ac={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function __(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function v_(i,t){var e=S3(hw),n=[],r;n[n.length]=zi,n[n.length]=Ie("Types",null,{xmlns:en.CT,"xmlns:xsd":en.xsd,"xmlns:xsi":en.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(g){return Ie("Default",null,{Extension:g[0],ContentType:g[1]})}));var a=function(g){i[g]&&i[g].length>0&&(r=i[g][0],n[n.length]=Ie("Override",null,{PartName:(r[0]=="/"?"":"/")+r,ContentType:ac[g][t.bookType]||ac[g].xlsx}))},u=function(g){(i[g]||[]).forEach(function(v){n[n.length]=Ie("Override",null,{PartName:(v[0]=="/"?"":"/")+v,ContentType:ac[g][t.bookType]||ac[g].xlsx})})},p=function(g){(i[g]||[]).forEach(function(v){n[n.length]=Ie("Override",null,{PartName:(v[0]=="/"?"":"/")+v,ContentType:e[g][0]})})};return a("workbooks"),u("sheets"),u("charts"),p("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(p),p("vba"),p("comments"),p("threadedcomments"),p("drawings"),u("metadata"),p("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Ht={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function x_(i){var t=i.lastIndexOf("/");return i.slice(0,t+1)+"_rels/"+i.slice(t+1)+".rels"}function vs(i){var t=[zi,Ie("Relationships",null,{xmlns:en.RELS})];return mn(i["!id"]).forEach(function(e){t[t.length]=Ie("Relationship",null,i["!id"][e])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function ti(i,t,e,n,r,a){if(r||(r={}),i["!id"]||(i["!id"]={}),i["!idx"]||(i["!idx"]=1),t<0)for(t=i["!idx"];i["!id"]["rId"+t];++t);if(i["!idx"]=t+1,r.Id="rId"+t,r.Type=n,r.Target=e,a?r.TargetMode=a:[Ht.HLINK,Ht.XPATH,Ht.XMISS].indexOf(r.Type)>-1&&(r.TargetMode="External"),i["!id"][r.Id])throw new Error("Cannot rewrite rId "+t);return i["!id"][r.Id]=r,i[("/"+r.Target).replace("//","/")]=r,t}function gw(i){var t=[zi];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var e=0;e<i.length;++e)t.push('  <manifest:file-entry manifest:full-path="'+i[e][0]+'" manifest:media-type="'+i[e][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function C6(i,t,e){return['  <rdf:Description rdf:about="'+i+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(e||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function _w(i,t){return['  <rdf:Description rdf:about="'+i+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function vw(i){var t=[zi];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var e=0;e!=i.length;++e)t.push(C6(i[e][0],i[e][1])),t.push(_w("",i[e][0]));return t.push(C6("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function y_(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+t0.version+"</meta:generator></office:meta></office:document-meta>"}var uo=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Ef(i,t,e,n,r){r[i]!=null||t==null||t===""||(r[i]=t,t=ii(t),n[n.length]=e?Ie(i,t,e):cn(i,t))}function b_(i,t){var e=t||{},n=[zi,Ie("cp:coreProperties",null,{"xmlns:cp":en.CORE_PROPS,"xmlns:dc":en.dc,"xmlns:dcterms":en.dcterms,"xmlns:dcmitype":en.dcmitype,"xmlns:xsi":en.xsi})],r={};if(!i&&!e.Props)return n.join("");i&&(i.CreatedDate!=null&&Ef("dcterms:created",typeof i.CreatedDate=="string"?i.CreatedDate:Df(i.CreatedDate,e.WTF),{"xsi:type":"dcterms:W3CDTF"},n,r),i.ModifiedDate!=null&&Ef("dcterms:modified",typeof i.ModifiedDate=="string"?i.ModifiedDate:Df(i.ModifiedDate,e.WTF),{"xsi:type":"dcterms:W3CDTF"},n,r));for(var a=0;a!=uo.length;++a){var u=uo[a],p=e.Props&&e.Props[u[1]]!=null?e.Props[u[1]]:i?i[u[1]]:null;p===!0?p="1":p===!1?p="0":typeof p=="number"&&(p=String(p)),p!=null&&Ef(u[0],p,null,n,r)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var xs=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],C_=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function w_(i){var t=[],e=Ie;return i||(i={}),i.Application="SheetJS",t[t.length]=zi,t[t.length]=Ie("Properties",null,{xmlns:en.EXT_PROPS,"xmlns:vt":en.vt}),xs.forEach(function(n){if(i[n[1]]!==void 0){var r;switch(n[2]){case"string":r=ii(String(i[n[1]]));break;case"bool":r=i[n[1]]?"true":"false";break}r!==void 0&&(t[t.length]=e(n[0],r))}}),t[t.length]=e("HeadingPairs",e("vt:vector",e("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+e("vt:variant",e("vt:i4",String(i.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=e("TitlesOfParts",e("vt:vector",i.SheetNames.map(function(n){return"<vt:lpstr>"+ii(n)+"</vt:lpstr>"}).join(""),{size:i.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function S_(i){var t=[zi,Ie("Properties",null,{xmlns:en.CUST_PROPS,"xmlns:vt":en.vt})];if(!i)return t.join("");var e=1;return mn(i).forEach(function(r){++e,t[t.length]=Ie("property",L3(i[r],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:e,name:ii(r)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var w6={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function xw(i,t){var e=[];return mn(w6).map(function(n){for(var r=0;r<uo.length;++r)if(uo[r][1]==n)return uo[r];for(r=0;r<xs.length;++r)if(xs[r][1]==n)return xs[r];throw n}).forEach(function(n){if(i[n[1]]!=null){var r=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:i[n[1]];switch(n[2]){case"date":r=new Date(r).toISOString().replace(/\.\d*Z/,"Z");break}typeof r=="number"?r=String(r):r===!0||r===!1?r=r?"1":"0":r instanceof Date&&(r=new Date(r).toISOString().replace(/\.\d*Z/,"")),e.push(cn(w6[n[1]]||n[1],r))}}),Ie("DocumentProperties",e.join(""),{xmlns:er.o})}function yw(i,t){var e=["Worksheets","SheetNames"],n="CustomDocumentProperties",r=[];return i&&mn(i).forEach(function(a){if(Object.prototype.hasOwnProperty.call(i,a)){for(var u=0;u<uo.length;++u)if(a==uo[u][1])return;for(u=0;u<xs.length;++u)if(a==xs[u][1])return;for(u=0;u<e.length;++u)if(a==e[u])return;var p=i[a],g="string";typeof p=="number"?(g="float",p=String(p)):p===!0||p===!1?(g="boolean",p=p?"1":"0"):p=String(p),r.push(Ie(c6(a),p,{"dt:dt":g}))}}),t&&mn(t).forEach(function(a){if(Object.prototype.hasOwnProperty.call(t,a)&&!(i&&Object.prototype.hasOwnProperty.call(i,a))){var u=t[a],p="string";typeof u=="number"?(p="float",u=String(u)):u===!0||u===!1?(p="boolean",u=u?"1":"0"):u instanceof Date?(p="dateTime.tz",u=u.toISOString()):u=String(u),r.push(Ie(c6(a),u,{"dt:dt":p}))}}),"<"+n+' xmlns="'+er.o+'">'+r.join("")+"</"+n+">"}function bw(i){var t=typeof i=="string"?new Date(Date.parse(i)):i,e=t.getTime()/1e3+11644473600,n=e%Math.pow(2,32),r=(e-n)/Math.pow(2,32);n*=1e7,r*=1e7;var a=n/Math.pow(2,32)|0;a>0&&(n=n%Math.pow(2,32),r+=a);var u=ge(8);return u.write_shift(4,n),u.write_shift(4,r),u}function S6(i,t){var e=ge(4),n=ge(4);switch(e.write_shift(4,i==80?31:i),i){case 3:n.write_shift(-4,t);break;case 5:n=ge(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=bw(t);break;case 31:case 80:for(n=ge(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+i+" "+t)}return un([e,n])}var T_=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Cw(i){switch(typeof i){case"boolean":return 11;case"number":return(i|0)==i?3:5;case"string":return 31;case"object":if(i instanceof Date)return 64;break}return-1}function T6(i,t,e){var n=ge(8),r=[],a=[],u=8,p=0,g=ge(8),v=ge(8);if(g.write_shift(4,2),g.write_shift(4,1200),v.write_shift(4,1),a.push(g),r.push(v),u+=8+g.length,!t){v=ge(8),v.write_shift(4,0),r.unshift(v);var y=[ge(4)];for(y[0].write_shift(4,i.length),p=0;p<i.length;++p){var M=i[p][0];for(g=ge(8+2*(M.length+1)+(M.length%2?0:2)),g.write_shift(4,p+2),g.write_shift(4,M.length+1),g.write_shift(0,M,"dbcs");g.l!=g.length;)g.write_shift(1,0);y.push(g)}g=un(y),a.unshift(g),u+=8+g.length}for(p=0;p<i.length;++p)if(!(t&&!t[i[p][0]])&&!(T_.indexOf(i[p][0])>-1||C_.indexOf(i[p][0])>-1)&&i[p][1]!=null){var E=i[p][1],A=0;if(t){A=+t[i[p][0]];var O=e[A];if(O.p=="version"&&typeof E=="string"){var F=E.split(".");E=(+F[0]<<16)+(+F[1]||0)}g=S6(O.t,E)}else{var D=Cw(E);D==-1&&(D=31,E=String(E)),g=S6(D,E)}a.push(g),v=ge(8),v.write_shift(4,t?A:2+p),r.push(v),u+=8+g.length}var ee=8*(a.length+1);for(p=0;p<a.length;++p)r[p].write_shift(4,ee),ee+=a[p].length;return n.write_shift(4,u),n.write_shift(4,a.length),un([n].concat(r).concat(a))}function E6(i,t,e,n,r,a){var u=ge(r?68:48),p=[u];u.write_shift(2,65534),u.write_shift(2,0),u.write_shift(4,842412599),u.write_shift(16,si.utils.consts.HEADER_CLSID,"hex"),u.write_shift(4,r?2:1),u.write_shift(16,t,"hex"),u.write_shift(4,r?68:48);var g=T6(i,e,n);if(p.push(g),r){var v=T6(r,null,null);u.write_shift(16,a,"hex"),u.write_shift(4,68+g.length),p.push(v)}return un(p)}function ww(i,t){t||(t=ge(i));for(var e=0;e<i;++e)t.write_shift(1,0);return t}function Sw(i,t){return i.read_shift(t)===1}function Tn(i,t){return t||(t=ge(2)),t.write_shift(2,+!!i),t}function E_(i){return i.read_shift(2,"u")}function mr(i,t){return t||(t=ge(2)),t.write_shift(2,i),t}function A_(i,t,e){return e||(e=ge(2)),e.write_shift(1,t=="e"?+i:+!!i),e.write_shift(1,t=="e"?1:0),e}function M_(i,t,e){var n=i.read_shift(e&&e.biff>=12?2:1),r="sbcs-cont",a=lo;if(e&&e.biff>=8&&(lo=1200),!e||e.biff==8){var u=i.read_shift(1);u&&(r="dbcs-cont")}else e.biff==12&&(r="wstr");e.biff>=2&&e.biff<=5&&(r="cpstr");var p=n?i.read_shift(n,r):"";return lo=a,p}function Tw(i){var t=i.t||"",e=1,n=ge(3+(e>1?2:0));n.write_shift(2,t.length),n.write_shift(1,(e>1?8:0)|1),e>1&&n.write_shift(2,e);var r=ge(2*t.length);r.write_shift(2*t.length,t,"utf16le");var a=[n,r];return un(a)}function Ew(i,t,e){var n;if(e){if(e.biff>=2&&e.biff<=5)return i.read_shift(t,"cpstr");if(e.biff>=12)return i.read_shift(t,"dbcs-cont")}var r=i.read_shift(1);return r===0?n=i.read_shift(t,"sbcs-cont"):n=i.read_shift(t,"dbcs-cont"),n}function Aw(i,t,e){var n=i.read_shift(e&&e.biff==2?1:2);return n===0?(i.l++,""):Ew(i,n,e)}function Mw(i,t,e){if(e.biff>5)return Aw(i,t,e);var n=i.read_shift(1);return n===0?(i.l++,""):i.read_shift(n,e.biff<=4||!i.lens?"cpstr":"sbcs-cont")}function F_(i,t,e){return e||(e=ge(3+2*i.length)),e.write_shift(2,i.length),e.write_shift(1,1),e.write_shift(31,i,"utf16le"),e}function A6(i,t){t||(t=ge(6+i.length*2)),t.write_shift(4,1+i.length);for(var e=0;e<i.length;++e)t.write_shift(2,i.charCodeAt(e));return t.write_shift(2,0),t}function Fw(i){var t=ge(512),e=0,n=i.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var r=n.indexOf("#"),a=r>-1?31:23;switch(n.charAt(0)){case"#":a=28;break;case".":a&=-3;break}t.write_shift(4,2),t.write_shift(4,a);var u=[8,6815827,6619237,4849780,83];for(e=0;e<u.length;++e)t.write_shift(4,u[e]);if(a==28)n=n.slice(1),A6(n,t);else if(a&2){for(u="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),e=0;e<u.length;++e)t.write_shift(1,parseInt(u[e],16));var p=r>-1?n.slice(0,r):n;for(t.write_shift(4,2*(p.length+1)),e=0;e<p.length;++e)t.write_shift(2,p.charCodeAt(e));t.write_shift(2,0),a&8&&A6(r>-1?n.slice(r+1):"",t)}else{for(u="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),e=0;e<u.length;++e)t.write_shift(1,parseInt(u[e],16));for(var g=0;n.slice(g*3,g*3+3)=="../"||n.slice(g*3,g*3+3)=="..\\";)++g;for(t.write_shift(2,g),t.write_shift(4,n.length-3*g+1),e=0;e<n.length-3*g;++e)t.write_shift(1,n.charCodeAt(e+3*g)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),e=0;e<6;++e)t.write_shift(4,0)}return t.slice(0,t.l)}function fo(i,t,e,n){return n||(n=ge(6)),n.write_shift(2,i),n.write_shift(2,t),n.write_shift(2,e||0),n}function kw(i,t,e){var n=e.biff>8?4:2,r=i.read_shift(n),a=i.read_shift(n,"i"),u=i.read_shift(n,"i");return[r,a,u]}function Pw(i){var t=i.read_shift(2),e=i.read_shift(2),n=i.read_shift(2),r=i.read_shift(2);return{s:{c:n,r:t},e:{c:r,r:e}}}function k_(i,t){return t||(t=ge(8)),t.write_shift(2,i.s.r),t.write_shift(2,i.e.r),t.write_shift(2,i.s.c),t.write_shift(2,i.e.c),t}function Jf(i,t,e){var n=1536,r=16;switch(e.bookType){case"biff8":break;case"biff5":n=1280,r=8;break;case"biff4":n=4,r=6;break;case"biff3":n=3,r=6;break;case"biff2":n=2,r=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var a=ge(r);return a.write_shift(2,n),a.write_shift(2,t),r>4&&a.write_shift(2,29282),r>6&&a.write_shift(2,1997),r>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function Dw(i,t){var e=!t||t.biff==8,n=ge(e?112:54);for(n.write_shift(t.biff==8?2:1,7),e&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(e?0:536870912));n.l<n.length;)n.write_shift(1,e?0:32);return n}function Iw(i,t){var e=!t||t.biff>=8?2:1,n=ge(8+e*i.name.length);n.write_shift(4,i.pos),n.write_shift(1,i.hs||0),n.write_shift(1,i.dt),n.write_shift(1,i.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(e*i.name.length,i.name,t.biff<8?"sbcs":"utf16le");var r=n.slice(0,n.l);return r.l=n.l,r}function Ow(i,t){var e=ge(8);e.write_shift(4,i.Count),e.write_shift(4,i.Unique);for(var n=[],r=0;r<i.length;++r)n[r]=Tw(i[r],t);var a=un([e].concat(n));return a.parts=[e.length].concat(n.map(function(u){return u.length})),a}function Lw(){var i=ge(18);return i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,29280),i.write_shift(2,17600),i.write_shift(2,56),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,1),i.write_shift(2,500),i}function Rw(i){var t=ge(18),e=1718;return i&&i.RTL&&(e|=64),t.write_shift(2,e),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function Nw(i,t){var e=i.name||"Arial",n=t&&t.biff==5,r=n?15+e.length:16+2*e.length,a=ge(r);return a.write_shift(2,(i.sz||12)*20),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,e.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*e.length,e,n?"sbcs":"utf16le"),a}function Vw(i,t,e,n){var r=ge(10);return fo(i,t,n,r),r.write_shift(4,e),r}function Bw(i,t,e,n,r){var a=!r||r.biff==8,u=ge(8+ +a+(1+a)*e.length);return fo(i,t,n,u),u.write_shift(2,e.length),a&&u.write_shift(1,1),u.write_shift((1+a)*e.length,e,a?"utf16le":"sbcs"),u}function Uw(i,t,e,n){var r=e&&e.biff==5;n||(n=ge(r?3+t.length:5+2*t.length)),n.write_shift(2,i),n.write_shift(r?1:2,t.length),r||n.write_shift(1,1),n.write_shift((r?1:2)*t.length,t,r?"sbcs":"utf16le");var a=n.length>n.l?n.slice(0,n.l):n;return a.l==null&&(a.l=a.length),a}function Ww(i,t){var e=t.biff==8||!t.biff?4:2,n=ge(2*e+6);return n.write_shift(e,i.s.r),n.write_shift(e,i.e.r+1),n.write_shift(2,i.s.c),n.write_shift(2,i.e.c+1),n.write_shift(2,0),n}function M6(i,t,e,n){var r=e&&e.biff==5;n||(n=ge(r?16:20)),n.write_shift(2,0),i.style?(n.write_shift(2,i.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,i.numFmtId||0),n.write_shift(2,t<<4));var a=0;return i.numFmtId>0&&r&&(a|=1024),n.write_shift(4,a),n.write_shift(4,0),r||n.write_shift(4,0),n.write_shift(2,0),n}function jw(i){var t=ge(8);return t.write_shift(4,0),t.write_shift(2,i[0]?i[0]+1:0),t.write_shift(2,i[1]?i[1]+1:0),t}function Hw(i,t,e,n,r,a){var u=ge(8);return fo(i,t,n,u),A_(e,a,u),u}function zw(i,t,e,n){var r=ge(14);return fo(i,t,n,r),mo(e,r),r}function Gw(i,t,e){if(e.biff<8)return $w(i,t,e);for(var n=[],r=i.l+t,a=i.read_shift(e.biff>8?4:2);a--!==0;)n.push(kw(i,e.biff>8?12:6,e));if(i.l!=r)throw new Error("Bad ExternSheet: "+i.l+" != "+r);return n}function $w(i,t,e){i[i.l+1]==3&&i[i.l]++;var n=M_(i,t,e);return n.charCodeAt(0)==3?n.slice(1):n}function Zw(i){var t=ge(2+i.length*8);t.write_shift(2,i.length);for(var e=0;e<i.length;++e)k_(i[e],t);return t}function qw(i){var t=ge(24),e=tn(i[0]);t.write_shift(2,e.r),t.write_shift(2,e.r),t.write_shift(2,e.c),t.write_shift(2,e.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<16;++r)t.write_shift(1,parseInt(n[r],16));return un([t,Fw(i[1])])}function Yw(i){var t=i[1].Tooltip,e=ge(10+2*(t.length+1));e.write_shift(2,2048);var n=tn(i[0]);e.write_shift(2,n.r),e.write_shift(2,n.r),e.write_shift(2,n.c),e.write_shift(2,n.c);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function Xw(i){return i||(i=ge(4)),i.write_shift(2,1),i.write_shift(2,1),i}function Kw(i,t,e){if(!e.cellStyles)return Gr(i,t);var n=e&&e.biff>=12?4:2,r=i.read_shift(n),a=i.read_shift(n),u=i.read_shift(n),p=i.read_shift(n),g=i.read_shift(2);n==2&&(i.l+=2);var v={s:r,e:a,w:u,ixfe:p,flags:g};return(e.biff>=5||!e.biff)&&(v.level=g>>8&7),v}function Jw(i,t){var e=ge(12);e.write_shift(2,t),e.write_shift(2,t),e.write_shift(2,i.width*256),e.write_shift(2,0);var n=0;return i.hidden&&(n|=1),e.write_shift(1,n),n=i.level||0,e.write_shift(1,n),e.write_shift(2,0),e}function Qw(i){for(var t=ge(2*i),e=0;e<i;++e)t.write_shift(2,e+1);return t}function eS(i,t,e){var n=ge(15);return m0(n,i,t),n.write_shift(8,e,"f"),n}function tS(i,t,e){var n=ge(9);return m0(n,i,t),n.write_shift(2,e),n}var iS=function(){var i={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=Nf({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function e(p,g){var v=[],y=co(1);switch(g.type){case"base64":y=Er(ca(p));break;case"binary":y=Er(p);break;case"buffer":case"array":y=p;break}Qn(y,0);var M=y.read_shift(1),E=!!(M&136),A=!1,O=!1;switch(M){case 2:break;case 3:break;case 48:A=!0,E=!0;break;case 49:A=!0,E=!0;break;case 131:break;case 139:break;case 140:O=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+M.toString(16))}var F=0,D=521;M==2&&(F=y.read_shift(2)),y.l+=3,M!=2&&(F=y.read_shift(4)),F>1048576&&(F=1e6),M!=2&&(D=y.read_shift(2));var ee=y.read_shift(2),ie=g.codepage||1252;M!=2&&(y.l+=16,y.read_shift(1),y[y.l]!==0&&(ie=i[y[y.l]]),y.l+=1,y.l+=2),O&&(y.l+=36);for(var te=[],pe={},Ce=Math.min(y.length,M==2?521:D-10-(A?264:0)),ze=O?32:11;y.l<Ce&&y[y.l]!=13;)switch(pe={},pe.name=mi.utils.decode(ie,y.slice(y.l,y.l+ze)).replace(/[\u0000\r\n].*$/g,""),y.l+=ze,pe.type=String.fromCharCode(y.read_shift(1)),M!=2&&!O&&(pe.offset=y.read_shift(4)),pe.len=y.read_shift(1),M==2&&(pe.offset=y.read_shift(2)),pe.dec=y.read_shift(1),pe.name.length&&te.push(pe),M!=2&&(y.l+=O?13:14),pe.type){case"B":(!A||pe.len!=8)&&g.WTF&&console.log("Skipping "+pe.name+":"+pe.type);break;case"G":case"P":g.WTF&&console.log("Skipping "+pe.name+":"+pe.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+pe.type)}if(y[y.l]!==13&&(y.l=D-1),y.read_shift(1)!==13)throw new Error("DBF Terminator not found "+y.l+" "+y[y.l]);y.l=D;var ne=0,xe=0;for(v[0]=[],xe=0;xe!=te.length;++xe)v[0][xe]=te[xe].name;for(;F-- >0;){if(y[y.l]===42){y.l+=ee;continue}for(++y.l,v[++ne]=[],xe=0,xe=0;xe!=te.length;++xe){var me=y.slice(y.l,y.l+te[xe].len);y.l+=te[xe].len,Qn(me,0);var _e=mi.utils.decode(ie,me);switch(te[xe].type){case"C":_e.trim().length&&(v[ne][xe]=_e.replace(/\s+$/,""));break;case"D":_e.length===8?v[ne][xe]=new Date(+_e.slice(0,4),+_e.slice(4,6)-1,+_e.slice(6,8)):v[ne][xe]=_e;break;case"F":v[ne][xe]=parseFloat(_e.trim());break;case"+":case"I":v[ne][xe]=O?me.read_shift(-4,"i")^2147483648:me.read_shift(4,"i");break;case"L":switch(_e.trim().toUpperCase()){case"Y":case"T":v[ne][xe]=!0;break;case"N":case"F":v[ne][xe]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+_e+"|")}break;case"M":if(!E)throw new Error("DBF Unexpected MEMO for type "+M.toString(16));v[ne][xe]="##MEMO##"+(O?parseInt(_e.trim(),10):me.read_shift(4));break;case"N":_e=_e.replace(/\u0000/g,"").trim(),_e&&_e!="."&&(v[ne][xe]=+_e||0);break;case"@":v[ne][xe]=new Date(me.read_shift(-8,"f")-621356832e5);break;case"T":v[ne][xe]=new Date((me.read_shift(4)-2440588)*864e5+me.read_shift(4));break;case"Y":v[ne][xe]=me.read_shift(4,"i")/1e4+me.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":v[ne][xe]=-me.read_shift(-8,"f");break;case"B":if(A&&te[xe].len==8){v[ne][xe]=me.read_shift(8,"f");break}case"G":case"P":me.l+=te[xe].len;break;case"0":if(te[xe].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+te[xe].type)}}}if(M!=2&&y.l<y.length&&y[y.l++]!=26)throw new Error("DBF EOF Marker missing "+(y.l-1)+" of "+y.length+" "+y[y.l-1].toString(16));return g&&g.sheetRows&&(v=v.slice(0,g.sheetRows)),g.DBF=te,v}function n(p,g){var v=g||{};v.dateNF||(v.dateNF="yyyymmdd");var y=Ts(e(p,v),v);return y["!cols"]=v.DBF.map(function(M){return{wch:M.len,DBF:M}}),delete v.DBF,y}function r(p,g){try{return po(n(p,g),g)}catch(v){if(g&&g.WTF)throw v}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function u(p,g){var v=g||{};if(+v.codepage>=0&&i0(+v.codepage),v.type=="string")throw new Error("Cannot write DBF to JS string");var y=Rn(),M=xc(p,{header:1,raw:!0,cellDates:!0}),E=M[0],A=M.slice(1),O=p["!cols"]||[],F=0,D=0,ee=0,ie=1;for(F=0;F<E.length;++F){if(((O[F]||{}).DBF||{}).name){E[F]=O[F].DBF.name,++ee;continue}if(E[F]!=null){if(++ee,typeof E[F]=="number"&&(E[F]=E[F].toString(10)),typeof E[F]!="string")throw new Error("DBF Invalid column name "+E[F]+" |"+typeof E[F]+"|");if(E.indexOf(E[F])!==F){for(D=0;D<1024;++D)if(E.indexOf(E[F]+"_"+D)==-1){E[F]+="_"+D;break}}}}var te=yi(p["!ref"]),pe=[],Ce=[],ze=[];for(F=0;F<=te.e.c-te.s.c;++F){var ne="",xe="",me=0,_e=[];for(D=0;D<A.length;++D)A[D][F]!=null&&_e.push(A[D][F]);if(_e.length==0||E[F]==null){pe[F]="?";continue}for(D=0;D<_e.length;++D){switch(typeof _e[D]){case"number":xe="B";break;case"string":xe="C";break;case"boolean":xe="L";break;case"object":xe=_e[D]instanceof Date?"D":"C";break;default:xe="C"}me=Math.max(me,String(_e[D]).length),ne=ne&&ne!=xe?"C":xe}me>250&&(me=250),xe=((O[F]||{}).DBF||{}).type,xe=="C"&&O[F].DBF.len>me&&(me=O[F].DBF.len),ne=="B"&&xe=="N"&&(ne="N",ze[F]=O[F].DBF.dec,me=O[F].DBF.len),Ce[F]=ne=="C"||xe=="N"?me:a[ne]||0,ie+=Ce[F],pe[F]=ne}var Ae=y.next(32);for(Ae.write_shift(4,318902576),Ae.write_shift(4,A.length),Ae.write_shift(2,296+32*ee),Ae.write_shift(2,ie),F=0;F<4;++F)Ae.write_shift(4,0);for(Ae.write_shift(4,0|(+t[bs]||3)<<8),F=0,D=0;F<E.length;++F)if(E[F]!=null){var we=y.next(32),Ke=(E[F].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);we.write_shift(1,Ke,"sbcs"),we.write_shift(1,pe[F]=="?"?"C":pe[F],"sbcs"),we.write_shift(4,D),we.write_shift(1,Ce[F]||a[pe[F]]||0),we.write_shift(1,ze[F]||0),we.write_shift(1,2),we.write_shift(4,0),we.write_shift(1,0),we.write_shift(4,0),we.write_shift(4,0),D+=Ce[F]||a[pe[F]]||0}var mt=y.next(264);for(mt.write_shift(4,13),F=0;F<65;++F)mt.write_shift(4,0);for(F=0;F<A.length;++F){var it=y.next(ie);for(it.write_shift(1,0),D=0;D<E.length;++D)if(E[D]!=null)switch(pe[D]){case"L":it.write_shift(1,A[F][D]==null?63:A[F][D]?84:70);break;case"B":it.write_shift(8,A[F][D]||0,"f");break;case"N":var Je="0";for(typeof A[F][D]=="number"&&(Je=A[F][D].toFixed(ze[D]||0)),ee=0;ee<Ce[D]-Je.length;++ee)it.write_shift(1,32);it.write_shift(1,Je,"sbcs");break;case"D":A[F][D]?(it.write_shift(4,("0000"+A[F][D].getFullYear()).slice(-4),"sbcs"),it.write_shift(2,("00"+(A[F][D].getMonth()+1)).slice(-2),"sbcs"),it.write_shift(2,("00"+A[F][D].getDate()).slice(-2),"sbcs")):it.write_shift(8,"00000000","sbcs");break;case"C":var Pi=String(A[F][D]!=null?A[F][D]:"").slice(0,Ce[D]);for(it.write_shift(1,Pi,"sbcs"),ee=0;ee<Ce[D]-Pi.length;++ee)it.write_shift(1,32);break}}return y.next(1).write_shift(1,26),y.end()}return{to_workbook:r,to_sheet:n,from_sheet:u}}(),nS=function(){var i={AA:"\xC0",BA:"\xC1",CA:"\xC2",DA:195,HA:"\xC4",JA:197,AE:"\xC8",BE:"\xC9",CE:"\xCA",HE:"\xCB",AI:"\xCC",BI:"\xCD",CI:"\xCE",HI:"\xCF",AO:"\xD2",BO:"\xD3",CO:"\xD4",DO:213,HO:"\xD6",AU:"\xD9",BU:"\xDA",CU:"\xDB",HU:"\xDC",Aa:"\xE0",Ba:"\xE1",Ca:"\xE2",Da:227,Ha:"\xE4",Ja:229,Ae:"\xE8",Be:"\xE9",Ce:"\xEA",He:"\xEB",Ai:"\xEC",Bi:"\xED",Ci:"\xEE",Hi:"\xEF",Ao:"\xF2",Bo:"\xF3",Co:"\xF4",Do:245,Ho:"\xF6",Au:"\xF9",Bu:"\xFA",Cu:"\xFB",Hu:"\xFC",KC:"\xC7",Kc:"\xE7",q:"\xE6",z:"\u0153",a:"\xC6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+mn(i).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),e=function(E,A){var O=i[A];return typeof O=="number"?J1(O):O},n=function(E,A,O){var F=A.charCodeAt(0)-32<<4|O.charCodeAt(0)-48;return F==59?E:J1(F)};i["|"]=254;function r(E,A){switch(A.type){case"base64":return a(ca(E),A);case"binary":return a(E,A);case"buffer":return a(qt&&Buffer.isBuffer(E)?E.toString("binary"):l0(E),A);case"array":return a(Sc(E),A)}throw new Error("Unrecognized type "+A.type)}function a(E,A){var O=E.split(/[\n\r]+/),F=-1,D=-1,ee=0,ie=0,te=[],pe=[],Ce=null,ze={},ne=[],xe=[],me=[],_e=0,Ae;for(+A.codepage>=0&&i0(+A.codepage);ee!==O.length;++ee){_e=0;var we=O[ee].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,e),Ke=we.replace(/;;/g,"\0").split(";").map(function(J){return J.replace(/\u0000/g,";")}),mt=Ke[0],it;if(we.length>0)switch(mt){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":Ke[1].charAt(0)=="P"&&pe.push(we.slice(3).replace(/;;/g,";"));break;case"C":var Je=!1,Pi=!1,nt=!1,St=!1,Wt=-1,Jt=-1;for(ie=1;ie<Ke.length;++ie)switch(Ke[ie].charAt(0)){case"A":break;case"X":D=parseInt(Ke[ie].slice(1))-1,Pi=!0;break;case"Y":for(F=parseInt(Ke[ie].slice(1))-1,Pi||(D=0),Ae=te.length;Ae<=F;++Ae)te[Ae]=[];break;case"K":it=Ke[ie].slice(1),it.charAt(0)==='"'?it=it.slice(1,it.length-1):it==="TRUE"?it=!0:it==="FALSE"?it=!1:isNaN(la(it))?isNaN(r0(it).getDate())||(it=En(it)):(it=la(it),Ce!==null&&Y6(Ce)&&(it=Q6(it))),typeof mi<"u"&&typeof it=="string"&&(A||{}).type!="string"&&(A||{}).codepage&&(it=mi.utils.decode(A.codepage,it)),Je=!0;break;case"E":St=!0;var X=tT(Ke[ie].slice(1),{r:F,c:D});te[F][D]=[te[F][D],X];break;case"S":nt=!0,te[F][D]=[te[F][D],"S5S"];break;case"G":break;case"R":Wt=parseInt(Ke[ie].slice(1))-1;break;case"C":Jt=parseInt(Ke[ie].slice(1))-1;break;default:if(A&&A.WTF)throw new Error("SYLK bad record "+we)}if(Je&&(te[F][D]&&te[F][D].length==2?te[F][D][0]=it:te[F][D]=it,Ce=null),nt){if(St)throw new Error("SYLK shared formula cannot have own formula");var ue=Wt>-1&&te[Wt][Jt];if(!ue||!ue[1])throw new Error("SYLK shared formula cannot find base");te[F][D][1]=iT(ue[1],{r:F-Wt,c:D-Jt})}break;case"F":var K=0;for(ie=1;ie<Ke.length;++ie)switch(Ke[ie].charAt(0)){case"X":D=parseInt(Ke[ie].slice(1))-1,++K;break;case"Y":for(F=parseInt(Ke[ie].slice(1))-1,Ae=te.length;Ae<=F;++Ae)te[Ae]=[];break;case"M":_e=parseInt(Ke[ie].slice(1))/20;break;case"F":break;case"G":break;case"P":Ce=pe[parseInt(Ke[ie].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(me=Ke[ie].slice(1).split(" "),Ae=parseInt(me[0],10);Ae<=parseInt(me[1],10);++Ae)_e=parseInt(me[2],10),xe[Ae-1]=_e===0?{hidden:!0}:{wch:_e},Qf(xe[Ae-1]);break;case"C":D=parseInt(Ke[ie].slice(1))-1,xe[D]||(xe[D]={});break;case"R":F=parseInt(Ke[ie].slice(1))-1,ne[F]||(ne[F]={}),_e>0?(ne[F].hpt=_e,ne[F].hpx=L_(_e)):_e===0&&(ne[F].hidden=!0);break;default:if(A&&A.WTF)throw new Error("SYLK bad record "+we)}K<1&&(Ce=null);break;default:if(A&&A.WTF)throw new Error("SYLK bad record "+we)}}return ne.length>0&&(ze["!rows"]=ne),xe.length>0&&(ze["!cols"]=xe),A&&A.sheetRows&&(te=te.slice(0,A.sheetRows)),[te,ze]}function u(E,A){var O=r(E,A),F=O[0],D=O[1],ee=Ts(F,A);return mn(D).forEach(function(ie){ee[ie]=D[ie]}),ee}function p(E,A){return po(u(E,A),A)}function g(E,A,O,F){var D="C;Y"+(O+1)+";X"+(F+1)+";K";switch(E.t){case"n":D+=E.v||0,E.f&&!E.F&&(D+=";E"+tp(E.f,{r:O,c:F}));break;case"b":D+=E.v?"TRUE":"FALSE";break;case"e":D+=E.w||E.v;break;case"d":D+='"'+(E.w||E.v)+'"';break;case"s":D+='"'+E.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return D}function v(E,A){A.forEach(function(O,F){var D="F;W"+(F+1)+" "+(F+1)+" ";O.hidden?D+="0":(typeof O.width=="number"&&!O.wpx&&(O.wpx=hc(O.width)),typeof O.wpx=="number"&&!O.wch&&(O.wch=gc(O.wpx)),typeof O.wch=="number"&&(D+=Math.round(O.wch))),D.charAt(D.length-1)!=" "&&E.push(D)})}function y(E,A){A.forEach(function(O,F){var D="F;";O.hidden?D+="M0;":O.hpt?D+="M"+20*O.hpt+";":O.hpx&&(D+="M"+20*_c(O.hpx)+";"),D.length>2&&E.push(D+"R"+(F+1))})}function M(E,A){var O=["ID;PWXL;N;E"],F=[],D=yi(E["!ref"]),ee,ie=Array.isArray(E),te=`\r
`;O.push("P;PGeneral"),O.push("F;P0;DG0G8;M255"),E["!cols"]&&v(O,E["!cols"]),E["!rows"]&&y(O,E["!rows"]),O.push("B;Y"+(D.e.r-D.s.r+1)+";X"+(D.e.c-D.s.c+1)+";D"+[D.s.c,D.s.r,D.e.c,D.e.r].join(" "));for(var pe=D.s.r;pe<=D.e.r;++pe)for(var Ce=D.s.c;Ce<=D.e.c;++Ce){var ze=ni({r:pe,c:Ce});ee=ie?(E[pe]||[])[Ce]:E[ze],!(!ee||ee.v==null&&(!ee.f||ee.F))&&F.push(g(ee,E,pe,Ce,A))}return O.join(te)+te+F.join(te)+te+"E"+te}return{to_workbook:p,to_sheet:u,from_sheet:M}}(),rS=function(){function i(a,u){switch(u.type){case"base64":return t(ca(a),u);case"binary":return t(a,u);case"buffer":return t(qt&&Buffer.isBuffer(a)?a.toString("binary"):l0(a),u);case"array":return t(Sc(a),u)}throw new Error("Unrecognized type "+u.type)}function t(a,u){for(var p=a.split(`
`),g=-1,v=-1,y=0,M=[];y!==p.length;++y){if(p[y].trim()==="BOT"){M[++g]=[],v=0;continue}if(!(g<0)){var E=p[y].trim().split(","),A=E[0],O=E[1];++y;for(var F=p[y]||"";(F.match(/["]/g)||[]).length&1&&y<p.length-1;)F+=`
`+p[++y];switch(F=F.trim(),+A){case-1:if(F==="BOT"){M[++g]=[],v=0;continue}else if(F!=="EOD")throw new Error("Unrecognized DIF special command "+F);break;case 0:F==="TRUE"?M[g][v]=!0:F==="FALSE"?M[g][v]=!1:isNaN(la(O))?isNaN(r0(O).getDate())?M[g][v]=O:M[g][v]=En(O):M[g][v]=la(O),++v;break;case 1:F=F.slice(1,F.length-1),F=F.replace(/""/g,'"'),Zl&&F&&F.match(/^=".*"$/)&&(F=F.slice(2,-1)),M[g][v++]=F!==""?F:null;break}if(F==="EOD")break}}return u&&u.sheetRows&&(M=M.slice(0,u.sheetRows)),M}function e(a,u){return Ts(i(a,u),u)}function n(a,u){return po(e(a,u),u)}var r=function(){var a=function(g,v,y,M,E){g.push(v),g.push(y+","+M),g.push('"'+E.replace(/"/g,'""')+'"')},u=function(g,v,y,M){g.push(v+","+y),g.push(v==1?'"'+M.replace(/"/g,'""')+'"':M)};return function(g){var v=[],y=yi(g["!ref"]),M,E=Array.isArray(g);a(v,"TABLE",0,1,"sheetjs"),a(v,"VECTORS",0,y.e.r-y.s.r+1,""),a(v,"TUPLES",0,y.e.c-y.s.c+1,""),a(v,"DATA",0,0,"");for(var A=y.s.r;A<=y.e.r;++A){u(v,-1,0,"BOT");for(var O=y.s.c;O<=y.e.c;++O){var F=ni({r:A,c:O});if(M=E?(g[A]||[])[O]:g[F],!M){u(v,1,0,"");continue}switch(M.t){case"n":var D=Zl?M.w:M.v;!D&&M.v!=null&&(D=M.v),D==null?Zl&&M.f&&!M.F?u(v,1,0,"="+M.f):u(v,1,0,""):u(v,0,D,"V");break;case"b":u(v,0,M.v?1:0,M.v?"TRUE":"FALSE");break;case"s":u(v,1,0,!Zl||isNaN(M.v)?M.v:'="'+M.v+'"');break;case"d":M.w||(M.w=Ia(M.z||ki[14],Nn(En(M.v)))),Zl?u(v,0,M.w,"V"):u(v,1,0,M.w);break;default:u(v,1,0,"")}}}u(v,-1,0,"EOD");var ee=`\r
`,ie=v.join(ee);return ie}}();return{to_workbook:n,to_sheet:e,from_sheet:r}}(),P_=function(){function i(M){return M.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(M){return M.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function e(M,E){for(var A=M.split(`
`),O=-1,F=-1,D=0,ee=[];D!==A.length;++D){var ie=A[D].trim().split(":");if(ie[0]==="cell"){var te=tn(ie[1]);if(ee.length<=te.r)for(O=ee.length;O<=te.r;++O)ee[O]||(ee[O]=[]);switch(O=te.r,F=te.c,ie[2]){case"t":ee[O][F]=i(ie[3]);break;case"v":ee[O][F]=+ie[3];break;case"vtf":var pe=ie[ie.length-1];case"vtc":switch(ie[3]){case"nl":ee[O][F]=!!+ie[4];break;default:ee[O][F]=+ie[4];break}ie[2]=="vtf"&&(ee[O][F]=[ee[O][F],pe])}}}return E&&E.sheetRows&&(ee=ee.slice(0,E.sheetRows)),ee}function n(M,E){return Ts(e(M,E),E)}function r(M,E){return po(n(M,E),E)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),u=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,p=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),g="--SocialCalcSpreadsheetControlSave--";function v(M){if(!M||!M["!ref"])return"";for(var E=[],A=[],O,F="",D=tr(M["!ref"]),ee=Array.isArray(M),ie=D.s.r;ie<=D.e.r;++ie)for(var te=D.s.c;te<=D.e.c;++te)if(F=ni({r:ie,c:te}),O=ee?(M[ie]||[])[te]:M[F],!(!O||O.v==null||O.t==="z")){switch(A=["cell",F,"t"],O.t){case"s":case"str":A.push(t(O.v));break;case"n":O.f?(A[2]="vtf",A[3]="n",A[4]=O.v,A[5]=t(O.f)):(A[2]="v",A[3]=O.v);break;case"b":A[2]="vt"+(O.f?"f":"c"),A[3]="nl",A[4]=O.v?"1":"0",A[5]=t(O.f||(O.v?"TRUE":"FALSE"));break;case"d":var pe=Nn(En(O.v));A[2]="vtc",A[3]="nd",A[4]=""+pe,A[5]=O.w||Ia(O.z||ki[14],pe);break;case"e":continue}E.push(A.join(":"))}return E.push("sheet:c:"+(D.e.c-D.s.c+1)+":r:"+(D.e.r-D.s.r+1)+":tvf:1"),E.push("valueformat:1:text-wiki"),E.join(`
`)}function y(M){return[a,u,p,u,v(M),g].join(`
`)}return{to_workbook:r,to_sheet:n,from_sheet:y}}(),aS=function(){function i(y,M,E,A,O){O.raw?M[E][A]=y:y===""||(y==="TRUE"?M[E][A]=!0:y==="FALSE"?M[E][A]=!1:isNaN(la(y))?isNaN(r0(y).getDate())?M[E][A]=y:M[E][A]=En(y):M[E][A]=la(y))}function t(y,M){var E=M||{},A=[];if(!y||y.length===0)return A;for(var O=y.split(/[\r\n]/),F=O.length-1;F>=0&&O[F].length===0;)--F;for(var D=10,ee=0,ie=0;ie<=F;++ie)ee=O[ie].indexOf(" "),ee==-1?ee=O[ie].length:ee++,D=Math.max(D,ee);for(ie=0;ie<=F;++ie){A[ie]=[];var te=0;for(i(O[ie].slice(0,D).trim(),A,ie,te,E),te=1;te<=(O[ie].length-D)/10+1;++te)i(O[ie].slice(D+(te-1)*10,D+te*10).trim(),A,ie,te,E)}return E.sheetRows&&(A=A.slice(0,E.sheetRows)),A}var e={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function r(y){for(var M={},E=!1,A=0,O=0;A<y.length;++A)(O=y.charCodeAt(A))==34?E=!E:!E&&O in e&&(M[O]=(M[O]||0)+1);O=[];for(A in M)Object.prototype.hasOwnProperty.call(M,A)&&O.push([M[A],A]);if(!O.length){M=n;for(A in M)Object.prototype.hasOwnProperty.call(M,A)&&O.push([M[A],A])}return O.sort(function(F,D){return F[0]-D[0]||n[F[1]]-n[D[1]]}),e[O.pop()[1]]||44}function a(y,M){var E=M||{},A="";zr!=null&&E.dense==null&&(E.dense=zr);var O=E.dense?[]:{},F={s:{c:0,r:0},e:{c:0,r:0}};y.slice(0,4)=="sep="?y.charCodeAt(5)==13&&y.charCodeAt(6)==10?(A=y.charAt(4),y=y.slice(7)):y.charCodeAt(5)==13||y.charCodeAt(5)==10?(A=y.charAt(4),y=y.slice(6)):A=r(y.slice(0,1024)):E&&E.FS?A=E.FS:A=r(y.slice(0,1024));var D=0,ee=0,ie=0,te=0,pe=0,Ce=A.charCodeAt(0),ze=!1,ne=0,xe=y.charCodeAt(0);y=y.replace(/\r\n/mg,`
`);var me=E.dateNF!=null?y3(E.dateNF):null;function _e(){var Ae=y.slice(te,pe),we={};if(Ae.charAt(0)=='"'&&Ae.charAt(Ae.length-1)=='"'&&(Ae=Ae.slice(1,-1).replace(/""/g,'"')),Ae.length===0)we.t="z";else if(E.raw)we.t="s",we.v=Ae;else if(Ae.trim().length===0)we.t="s",we.v=Ae;else if(Ae.charCodeAt(0)==61)Ae.charCodeAt(1)==34&&Ae.charCodeAt(Ae.length-1)==34?(we.t="s",we.v=Ae.slice(2,-1).replace(/""/g,'"')):nT(Ae)?(we.t="n",we.f=Ae.slice(1)):(we.t="s",we.v=Ae);else if(Ae=="TRUE")we.t="b",we.v=!0;else if(Ae=="FALSE")we.t="b",we.v=!1;else if(!isNaN(ie=la(Ae)))we.t="n",E.cellText!==!1&&(we.w=Ae),we.v=ie;else if(!isNaN(r0(Ae).getDate())||me&&Ae.match(me)){we.z=E.dateNF||ki[14];var Ke=0;me&&Ae.match(me)&&(Ae=b3(Ae,E.dateNF,Ae.match(me)||[]),Ke=1),E.cellDates?(we.t="d",we.v=En(Ae,Ke)):(we.t="n",we.v=Nn(En(Ae,Ke))),E.cellText!==!1&&(we.w=Ia(we.z,we.v instanceof Date?Nn(we.v):we.v)),E.cellNF||delete we.z}else we.t="s",we.v=Ae;if(we.t=="z"||(E.dense?(O[D]||(O[D]=[]),O[D][ee]=we):O[ni({c:ee,r:D})]=we),te=pe+1,xe=y.charCodeAt(te),F.e.c<ee&&(F.e.c=ee),F.e.r<D&&(F.e.r=D),ne==Ce)++ee;else if(ee=0,++D,E.sheetRows&&E.sheetRows<=D)return!0}e:for(;pe<y.length;++pe)switch(ne=y.charCodeAt(pe)){case 34:xe===34&&(ze=!ze);break;case Ce:case 10:case 13:if(!ze&&_e())break e;break;default:break}return pe-te>0&&_e(),O["!ref"]=Hi(F),O}function u(y,M){return!(M&&M.PRN)||M.FS||y.slice(0,4)=="sep="||y.indexOf("	")>=0||y.indexOf(",")>=0||y.indexOf(";")>=0?a(y,M):Ts(t(y,M),M)}function p(y,M){var E="",A=M.type=="string"?[0,0,0,0]:_5(y,M);switch(M.type){case"base64":E=ca(y);break;case"binary":E=y;break;case"buffer":M.codepage==65001?E=y.toString("utf8"):M.codepage&&typeof mi<"u"?E=mi.utils.decode(M.codepage,y):E=qt&&Buffer.isBuffer(y)?y.toString("binary"):l0(y);break;case"array":E=Sc(y);break;case"string":E=y;break;default:throw new Error("Unrecognized type "+M.type)}return A[0]==239&&A[1]==187&&A[2]==191?E=Xl(E.slice(3)):M.type!="string"&&M.type!="buffer"&&M.codepage==65001?E=Xl(E):M.type=="binary"&&typeof mi<"u"&&M.codepage&&(E=mi.utils.decode(M.codepage,mi.utils.encode(28591,E))),E.slice(0,19)=="socialcalc:version:"?P_.to_sheet(M.type=="string"?E:Xl(E),M):u(E,M)}function g(y,M){return po(p(y,M),M)}function v(y){for(var M=[],E=yi(y["!ref"]),A,O=Array.isArray(y),F=E.s.r;F<=E.e.r;++F){for(var D=[],ee=E.s.c;ee<=E.e.c;++ee){var ie=ni({r:F,c:ee});if(A=O?(y[F]||[])[ee]:y[ie],!A||A.v==null){D.push("          ");continue}for(var te=(A.w||(da(A),A.w)||"").slice(0,10);te.length<10;)te+=" ";D.push(te+(ee===0?" ":""))}M.push(D.join(""))}return M.join(`
`)}return{to_workbook:g,to_sheet:p,from_sheet:v}}();var F6=function(){function i(X,ue,K){if(X){Qn(X,X.l||0);for(var J=K.Enum||Wt;X.l<X.length;){var ye=X.read_shift(2),Ze=J[ye]||J[65535],st=X.read_shift(2),Ge=X.l+st,Fe=Ze.f&&Ze.f(X,st,K);if(X.l=Ge,ue(Fe,Ze,ye))return}}}function t(X,ue){switch(ue.type){case"base64":return e(Er(ca(X)),ue);case"binary":return e(Er(X),ue);case"buffer":case"array":return e(X,ue)}throw"Unsupported type "+ue.type}function e(X,ue){if(!X)return X;var K=ue||{};zr!=null&&K.dense==null&&(K.dense=zr);var J=K.dense?[]:{},ye="Sheet1",Ze="",st=0,Ge={},Fe=[],jt=[],Dt={s:{r:0,c:0},e:{r:0,c:0}},Li=K.sheetRows||0;if(X[2]==0&&(X[3]==8||X[3]==9)&&X.length>=16&&X[14]==5&&X[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(X[2]==2)K.Enum=Wt,i(X,function(qe,bn,Bn){switch(Bn){case 0:K.vers=qe,qe>=4096&&(K.qpro=!0);break;case 6:Dt=qe;break;case 204:qe&&(Ze=qe);break;case 222:Ze=qe;break;case 15:case 51:K.qpro||(qe[1].v=qe[1].v.slice(1));case 13:case 14:case 16:Bn==14&&(qe[2]&112)==112&&(qe[2]&15)>1&&(qe[2]&15)<15&&(qe[1].z=K.dateNF||ki[14],K.cellDates&&(qe[1].t="d",qe[1].v=Q6(qe[1].v))),K.qpro&&qe[3]>st&&(J["!ref"]=Hi(Dt),Ge[ye]=J,Fe.push(ye),J=K.dense?[]:{},Dt={s:{r:0,c:0},e:{r:0,c:0}},st=qe[3],ye=Ze||"Sheet"+(st+1),Ze="");var kr=K.dense?(J[qe[0].r]||[])[qe[0].c]:J[ni(qe[0])];if(kr){kr.t=qe[1].t,kr.v=qe[1].v,qe[1].z!=null&&(kr.z=qe[1].z),qe[1].f!=null&&(kr.f=qe[1].f);break}K.dense?(J[qe[0].r]||(J[qe[0].r]=[]),J[qe[0].r][qe[0].c]=qe[1]):J[ni(qe[0])]=qe[1];break;default:}},K);else if(X[2]==26||X[2]==14)K.Enum=Jt,X[2]==14&&(K.qpro=!0,X.l=0),i(X,function(qe,bn,Bn){switch(Bn){case 204:ye=qe;break;case 22:qe[1].v=qe[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(qe[3]>st&&(J["!ref"]=Hi(Dt),Ge[ye]=J,Fe.push(ye),J=K.dense?[]:{},Dt={s:{r:0,c:0},e:{r:0,c:0}},st=qe[3],ye="Sheet"+(st+1)),Li>0&&qe[0].r>=Li)break;K.dense?(J[qe[0].r]||(J[qe[0].r]=[]),J[qe[0].r][qe[0].c]=qe[1]):J[ni(qe[0])]=qe[1],Dt.e.c<qe[0].c&&(Dt.e.c=qe[0].c),Dt.e.r<qe[0].r&&(Dt.e.r=qe[0].r);break;case 27:qe[14e3]&&(jt[qe[14e3][0]]=qe[14e3][1]);break;case 1537:jt[qe[0]]=qe[1],qe[0]==st&&(ye=qe[1]);break;default:break}},K);else throw new Error("Unrecognized LOTUS BOF "+X[2]);if(J["!ref"]=Hi(Dt),Ge[Ze||ye]=J,Fe.push(Ze||ye),!jt.length)return{SheetNames:Fe,Sheets:Ge};for(var Rt={},yn=[],li=0;li<jt.length;++li)Ge[Fe[li]]?(yn.push(jt[li]||Fe[li]),Rt[jt[li]]=Ge[jt[li]]||Ge[Fe[li]]):(yn.push(jt[li]),Rt[jt[li]]={"!ref":"A1"});return{SheetNames:yn,Sheets:Rt}}function n(X,ue){var K=ue||{};if(+K.codepage>=0&&i0(+K.codepage),K.type=="string")throw new Error("Cannot write WK1 to JS string");var J=Rn(),ye=yi(X["!ref"]),Ze=Array.isArray(X),st=[];Re(J,0,a(1030)),Re(J,6,g(ye));for(var Ge=Math.min(ye.e.r,8191),Fe=ye.s.r;Fe<=Ge;++Fe)for(var jt=dn(Fe),Dt=ye.s.c;Dt<=ye.e.c;++Dt){Fe===ye.s.r&&(st[Dt]=vn(Dt));var Li=st[Dt]+jt,Rt=Ze?(X[Fe]||[])[Dt]:X[Li];if(!(!Rt||Rt.t=="z"))if(Rt.t=="n")(Rt.v|0)==Rt.v&&Rt.v>=-32768&&Rt.v<=32767?Re(J,13,A(Fe,Dt,Rt.v)):Re(J,14,F(Fe,Dt,Rt.v));else{var yn=da(Rt);Re(J,15,M(Fe,Dt,yn.slice(0,239)))}}return Re(J,1),J.end()}function r(X,ue){var K=ue||{};if(+K.codepage>=0&&i0(+K.codepage),K.type=="string")throw new Error("Cannot write WK3 to JS string");var J=Rn();Re(J,0,u(X));for(var ye=0,Ze=0;ye<X.SheetNames.length;++ye)(X.Sheets[X.SheetNames[ye]]||{})["!ref"]&&Re(J,27,St(X.SheetNames[ye],Ze++));var st=0;for(ye=0;ye<X.SheetNames.length;++ye){var Ge=X.Sheets[X.SheetNames[ye]];if(!(!Ge||!Ge["!ref"])){for(var Fe=yi(Ge["!ref"]),jt=Array.isArray(Ge),Dt=[],Li=Math.min(Fe.e.r,8191),Rt=Fe.s.r;Rt<=Li;++Rt)for(var yn=dn(Rt),li=Fe.s.c;li<=Fe.e.c;++li){Rt===Fe.s.r&&(Dt[li]=vn(li));var qe=Dt[li]+yn,bn=jt?(Ge[Rt]||[])[li]:Ge[qe];if(!(!bn||bn.t=="z"))if(bn.t=="n")Re(J,23,_e(Rt,li,st,bn.v));else{var Bn=da(bn);Re(J,22,ne(Rt,li,st,Bn.slice(0,239)))}}++st}}return Re(J,1),J.end()}function a(X){var ue=ge(2);return ue.write_shift(2,X),ue}function u(X){var ue=ge(26);ue.write_shift(2,4096),ue.write_shift(2,4),ue.write_shift(4,0);for(var K=0,J=0,ye=0,Ze=0;Ze<X.SheetNames.length;++Ze){var st=X.SheetNames[Ze],Ge=X.Sheets[st];if(!(!Ge||!Ge["!ref"])){++ye;var Fe=tr(Ge["!ref"]);K<Fe.e.r&&(K=Fe.e.r),J<Fe.e.c&&(J=Fe.e.c)}}return K>8191&&(K=8191),ue.write_shift(2,K),ue.write_shift(1,ye),ue.write_shift(1,J),ue.write_shift(2,0),ue.write_shift(2,0),ue.write_shift(1,1),ue.write_shift(1,2),ue.write_shift(4,0),ue.write_shift(4,0),ue}function p(X,ue,K){var J={s:{c:0,r:0},e:{c:0,r:0}};return ue==8&&K.qpro?(J.s.c=X.read_shift(1),X.l++,J.s.r=X.read_shift(2),J.e.c=X.read_shift(1),X.l++,J.e.r=X.read_shift(2),J):(J.s.c=X.read_shift(2),J.s.r=X.read_shift(2),ue==12&&K.qpro&&(X.l+=2),J.e.c=X.read_shift(2),J.e.r=X.read_shift(2),ue==12&&K.qpro&&(X.l+=2),J.s.c==65535&&(J.s.c=J.e.c=J.s.r=J.e.r=0),J)}function g(X){var ue=ge(8);return ue.write_shift(2,X.s.c),ue.write_shift(2,X.s.r),ue.write_shift(2,X.e.c),ue.write_shift(2,X.e.r),ue}function v(X,ue,K){var J=[{c:0,r:0},{t:"n",v:0},0,0];return K.qpro&&K.vers!=20768?(J[0].c=X.read_shift(1),J[3]=X.read_shift(1),J[0].r=X.read_shift(2),X.l+=2):(J[2]=X.read_shift(1),J[0].c=X.read_shift(2),J[0].r=X.read_shift(2)),J}function y(X,ue,K){var J=X.l+ue,ye=v(X,ue,K);if(ye[1].t="s",K.vers==20768){X.l++;var Ze=X.read_shift(1);return ye[1].v=X.read_shift(Ze,"utf8"),ye}return K.qpro&&X.l++,ye[1].v=X.read_shift(J-X.l,"cstr"),ye}function M(X,ue,K){var J=ge(7+K.length);J.write_shift(1,255),J.write_shift(2,ue),J.write_shift(2,X),J.write_shift(1,39);for(var ye=0;ye<J.length;++ye){var Ze=K.charCodeAt(ye);J.write_shift(1,Ze>=128?95:Ze)}return J.write_shift(1,0),J}function E(X,ue,K){var J=v(X,ue,K);return J[1].v=X.read_shift(2,"i"),J}function A(X,ue,K){var J=ge(7);return J.write_shift(1,255),J.write_shift(2,ue),J.write_shift(2,X),J.write_shift(2,K,"i"),J}function O(X,ue,K){var J=v(X,ue,K);return J[1].v=X.read_shift(8,"f"),J}function F(X,ue,K){var J=ge(13);return J.write_shift(1,255),J.write_shift(2,ue),J.write_shift(2,X),J.write_shift(8,K,"f"),J}function D(X,ue,K){var J=X.l+ue,ye=v(X,ue,K);if(ye[1].v=X.read_shift(8,"f"),K.qpro)X.l=J;else{var Ze=X.read_shift(2);pe(X.slice(X.l,X.l+Ze),ye),X.l+=Ze}return ye}function ee(X,ue,K){var J=ue&32768;return ue&=-32769,ue=(J?X:0)+(ue>=8192?ue-16384:ue),(J?"":"$")+(K?vn(ue):dn(ue))}var ie={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},te=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function pe(X,ue){Qn(X,0);for(var K=[],J=0,ye="",Ze="",st="",Ge="";X.l<X.length;){var Fe=X[X.l++];switch(Fe){case 0:K.push(X.read_shift(8,"f"));break;case 1:Ze=ee(ue[0].c,X.read_shift(2),!0),ye=ee(ue[0].r,X.read_shift(2),!1),K.push(Ze+ye);break;case 2:{var jt=ee(ue[0].c,X.read_shift(2),!0),Dt=ee(ue[0].r,X.read_shift(2),!1);Ze=ee(ue[0].c,X.read_shift(2),!0),ye=ee(ue[0].r,X.read_shift(2),!1),K.push(jt+Dt+":"+Ze+ye)}break;case 3:if(X.l<X.length){console.error("WK1 premature formula end");return}break;case 4:K.push("("+K.pop()+")");break;case 5:K.push(X.read_shift(2));break;case 6:{for(var Li="";Fe=X[X.l++];)Li+=String.fromCharCode(Fe);K.push('"'+Li.replace(/"/g,'""')+'"')}break;case 8:K.push("-"+K.pop());break;case 23:K.push("+"+K.pop());break;case 22:K.push("NOT("+K.pop()+")");break;case 20:case 21:Ge=K.pop(),st=K.pop(),K.push(["AND","OR"][Fe-20]+"("+st+","+Ge+")");break;default:if(Fe<32&&te[Fe])Ge=K.pop(),st=K.pop(),K.push(st+te[Fe]+Ge);else if(ie[Fe]){if(J=ie[Fe][1],J==69&&(J=X[X.l++]),J>K.length){console.error("WK1 bad formula parse 0x"+Fe.toString(16)+":|"+K.join("|")+"|");return}var Rt=K.slice(-J);K.length-=J,K.push(ie[Fe][0]+"("+Rt.join(",")+")")}else return Fe<=7?console.error("WK1 invalid opcode "+Fe.toString(16)):Fe<=24?console.error("WK1 unsupported op "+Fe.toString(16)):Fe<=30?console.error("WK1 invalid opcode "+Fe.toString(16)):Fe<=115?console.error("WK1 unsupported function opcode "+Fe.toString(16)):console.error("WK1 unrecognized opcode "+Fe.toString(16))}}K.length==1?ue[1].f=""+K[0]:console.error("WK1 bad formula parse |"+K.join("|")+"|")}function Ce(X){var ue=[{c:0,r:0},{t:"n",v:0},0];return ue[0].r=X.read_shift(2),ue[3]=X[X.l++],ue[0].c=X[X.l++],ue}function ze(X,ue){var K=Ce(X,ue);return K[1].t="s",K[1].v=X.read_shift(ue-4,"cstr"),K}function ne(X,ue,K,J){var ye=ge(6+J.length);ye.write_shift(2,X),ye.write_shift(1,K),ye.write_shift(1,ue),ye.write_shift(1,39);for(var Ze=0;Ze<J.length;++Ze){var st=J.charCodeAt(Ze);ye.write_shift(1,st>=128?95:st)}return ye.write_shift(1,0),ye}function xe(X,ue){var K=Ce(X,ue);K[1].v=X.read_shift(2);var J=K[1].v>>1;if(K[1].v&1)switch(J&7){case 0:J=(J>>3)*5e3;break;case 1:J=(J>>3)*500;break;case 2:J=(J>>3)/20;break;case 3:J=(J>>3)/200;break;case 4:J=(J>>3)/2e3;break;case 5:J=(J>>3)/2e4;break;case 6:J=(J>>3)/16;break;case 7:J=(J>>3)/64;break}return K[1].v=J,K}function me(X,ue){var K=Ce(X,ue),J=X.read_shift(4),ye=X.read_shift(4),Ze=X.read_shift(2);if(Ze==65535)return J===0&&ye===3221225472?(K[1].t="e",K[1].v=15):J===0&&ye===3489660928?(K[1].t="e",K[1].v=42):K[1].v=0,K;var st=Ze&32768;return Ze=(Ze&32767)-16446,K[1].v=(1-st*2)*(ye*Math.pow(2,Ze+32)+J*Math.pow(2,Ze)),K}function _e(X,ue,K,J){var ye=ge(14);if(ye.write_shift(2,X),ye.write_shift(1,K),ye.write_shift(1,ue),J==0)return ye.write_shift(4,0),ye.write_shift(4,0),ye.write_shift(2,65535),ye;var Ze=0,st=0,Ge=0,Fe=0;return J<0&&(Ze=1,J=-J),st=Math.log2(J)|0,J/=Math.pow(2,st-31),Fe=J>>>0,(Fe&2147483648)==0&&(J/=2,++st,Fe=J>>>0),J-=Fe,Fe|=2147483648,Fe>>>=0,J*=Math.pow(2,32),Ge=J>>>0,ye.write_shift(4,Ge),ye.write_shift(4,Fe),st+=16383+(Ze?32768:0),ye.write_shift(2,st),ye}function Ae(X,ue){var K=me(X,14);return X.l+=ue-14,K}function we(X,ue){var K=Ce(X,ue),J=X.read_shift(4);return K[1].v=J>>6,K}function Ke(X,ue){var K=Ce(X,ue),J=X.read_shift(8,"f");return K[1].v=J,K}function mt(X,ue){var K=Ke(X,14);return X.l+=ue-10,K}function it(X,ue){return X[X.l+ue-1]==0?X.read_shift(ue,"cstr"):""}function Je(X,ue){var K=X[X.l++];K>ue-1&&(K=ue-1);for(var J="";J.length<K;)J+=String.fromCharCode(X[X.l++]);return J}function Pi(X,ue,K){if(!(!K.qpro||ue<21)){var J=X.read_shift(1);X.l+=17,X.l+=1,X.l+=2;var ye=X.read_shift(ue-21,"cstr");return[J,ye]}}function nt(X,ue){for(var K={},J=X.l+ue;X.l<J;){var ye=X.read_shift(2);if(ye==14e3){for(K[ye]=[0,""],K[ye][0]=X.read_shift(2);X[X.l];)K[ye][1]+=String.fromCharCode(X[X.l]),X.l++;X.l++}}return K}function St(X,ue){var K=ge(5+X.length);K.write_shift(2,14e3),K.write_shift(2,ue);for(var J=0;J<X.length;++J){var ye=X.charCodeAt(J);K[K.l++]=ye>127?95:ye}return K[K.l++]=0,K}var Wt={0:{n:"BOF",f:E_},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:p},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:E},14:{n:"NUMBER",f:O},15:{n:"LABEL",f:y},16:{n:"FORMULA",f:D},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:y},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:it},222:{n:"SHEETNAMELP",f:Je},65535:{n:""}},Jt={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:ze},23:{n:"NUMBER17",f:me},24:{n:"NUMBER18",f:xe},25:{n:"FORMULA19",f:Ae},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:nt},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:we},38:{n:"??"},39:{n:"NUMBER27",f:Ke},40:{n:"FORMULA28",f:mt},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:it},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Pi},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:r,to_workbook:t}}();var oS=/^\s|\s$|[\t\n\r]/;function D_(i,t){if(!t.bookSST)return"";var e=[zi];e[e.length]=Ie("sst",null,{xmlns:ws[0],count:i.Count,uniqueCount:i.Unique});for(var n=0;n!=i.length;++n)if(i[n]!=null){var r=i[n],a="<si>";r.r?a+=r.r:(a+="<t",r.t||(r.t=""),r.t.match(oS)&&(a+=' xml:space="preserve"'),a+=">"+ii(r.t)+"</t>"),a+="</si>",e[e.length]=a}return e.length>2&&(e[e.length]="</sst>",e[1]=e[1].replace("/>",">")),e.join("")}function sS(i){return[i.read_shift(4),i.read_shift(4)]}function lS(i,t){return t||(t=ge(8)),t.write_shift(4,i.Count),t.write_shift(4,i.Unique),t}var uS=Q3;function cS(i){var t=Rn();be(t,159,lS(i));for(var e=0;e<i.length;++e)be(t,19,uS(i[e]));return be(t,160),t.end()}function dS(i){if(typeof mi<"u")return mi.utils.encode(bs,i);for(var t=[],e=i.split(""),n=0;n<e.length;++n)t[n]=e[n].charCodeAt(0);return t}function I_(i){var t=0,e,n=dS(i),r=n.length+1,a,u,p,g,v;for(e=co(r),e[0]=n.length,a=1;a!=r;++a)e[a]=n[a-1];for(a=r-1;a>=0;--a)u=e[a],p=(t&16384)===0?0:1,g=t<<1&32767,v=p|g,t=v^u;return t^52811}var mS=function(){function i(r,a){switch(a.type){case"base64":return t(ca(r),a);case"binary":return t(r,a);case"buffer":return t(qt&&Buffer.isBuffer(r)?r.toString("binary"):l0(r),a);case"array":return t(Sc(r),a)}throw new Error("Unrecognized type "+a.type)}function t(r,a){var u=a||{},p=u.dense?[]:{},g=r.match(/\\trowd.*?\\row\b/g);if(!g.length)throw new Error("RTF missing table");var v={s:{c:0,r:0},e:{c:0,r:g.length-1}};return g.forEach(function(y,M){Array.isArray(p)&&(p[M]=[]);for(var E=/\\\w+\b/g,A=0,O,F=-1;O=E.exec(y);){switch(O[0]){case"\\cell":var D=y.slice(A,E.lastIndex-O[0].length);if(D[0]==" "&&(D=D.slice(1)),++F,D.length){var ee={v:D,t:"s"};Array.isArray(p)?p[M][F]=ee:p[ni({r:M,c:F})]=ee}break}A=E.lastIndex}F>v.e.c&&(v.e.c=F)}),p["!ref"]=Hi(v),p}function e(r,a){return po(i(r,a),a)}function n(r){for(var a=["{\\rtf1\\ansi"],u=yi(r["!ref"]),p,g=Array.isArray(r),v=u.s.r;v<=u.e.r;++v){a.push("\\trowd\\trautofit1");for(var y=u.s.c;y<=u.e.c;++y)a.push("\\cellx"+(y+1));for(a.push("\\pard\\intbl"),y=u.s.c;y<=u.e.c;++y){var M=ni({r:v,c:y});p=g?(r[v]||[])[y]:r[M],!(!p||p.v==null&&(!p.f||p.F))&&(a.push(" "+(p.w||(da(p),p.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:e,to_sheet:i,from_sheet:n}}();function k6(i){for(var t=0,e=1;t!=3;++t)e=e*256+(i[t]>255?255:i[t]<0?0:i[t]);return e.toString(16).toUpperCase().slice(1)}var fS=6;var ua=fS;function hc(i){return Math.floor((i+Math.round(128/ua)/256)*ua)}function gc(i){return Math.floor((i-5)/ua*100+.5)/100}function Of(i){return Math.round((i*ua+5)/ua*256)/256}function Qf(i){i.width?(i.wpx=hc(i.width),i.wch=gc(i.wpx),i.MDW=ua):i.wpx?(i.wch=gc(i.wpx),i.width=Of(i.wch),i.MDW=ua):typeof i.wch=="number"&&(i.width=Of(i.wch),i.wpx=hc(i.width),i.MDW=ua),i.customWidth&&delete i.customWidth}var pS=96,O_=pS;function _c(i){return i*96/O_}function L_(i){return i*O_/96}function hS(i){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(e){for(var n=e[0];n<=e[1];++n)i[n]!=null&&(t[t.length]=Ie("numFmt",null,{numFmtId:n,formatCode:ii(i[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Ie("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function gS(i){var t=[];return t[t.length]=Ie("cellXfs",null),i.forEach(function(e){t[t.length]=Ie("xf",null,e)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Ie("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function R_(i,t){var e=[zi,Ie("styleSheet",null,{xmlns:ws[0],"xmlns:vt":en.vt})],n;return i.SSF&&(n=hS(i.SSF))!=null&&(e[e.length]=n),e[e.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',e[e.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',e[e.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',e[e.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=gS(t.cellXfs))&&(e[e.length]=n),e[e.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',e[e.length]='<dxfs count="0"/>',e[e.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',e.length>2&&(e[e.length]="</styleSheet>",e[1]=e[1].replace("/>",">")),e.join("")}function _S(i,t){var e=i.read_shift(2),n=xn(i,t-2);return[e,n]}function vS(i,t,e){e||(e=ge(6+4*t.length)),e.write_shift(2,i),nn(t,e);var n=e.length>e.l?e.slice(0,e.l):e;return e.l==null&&(e.l=e.length),n}function xS(i,t,e){var n={};n.sz=i.read_shift(2)/20;var r=ow(i,2,e);r.fItalic&&(n.italic=1),r.fCondense&&(n.condense=1),r.fExtend&&(n.extend=1),r.fShadow&&(n.shadow=1),r.fOutline&&(n.outline=1),r.fStrikeout&&(n.strike=1);var a=i.read_shift(2);switch(a===700&&(n.bold=1),i.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var u=i.read_shift(1);u!=0&&(n.underline=u);var p=i.read_shift(1);p>0&&(n.family=p);var g=i.read_shift(1);switch(g>0&&(n.charset=g),i.l++,n.color=aw(i,8),i.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=xn(i,t-21),n}function yS(i,t){t||(t=ge(25+4*32)),t.write_shift(2,i.sz*20),sw(i,t),t.write_shift(2,i.bold?700:400);var e=0;i.vertAlign=="superscript"?e=1:i.vertAlign=="subscript"&&(e=2),t.write_shift(2,e),t.write_shift(1,i.underline||0),t.write_shift(1,i.family||0),t.write_shift(1,i.charset||0),t.write_shift(1,0),fc(i.color,t);var n=0;return i.scheme=="major"&&(n=1),i.scheme=="minor"&&(n=2),t.write_shift(1,n),nn(i.name,t),t.length>t.l?t.slice(0,t.l):t}var bS=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Af,CS=Gr;function P6(i,t){t||(t=ge(4*3+8*7+16*1)),Af||(Af=Nf(bS));var e=Af[i.patternType];e==null&&(e=40),t.write_shift(4,e);var n=0;if(e!=40)for(fc({auto:1},t),fc({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function wS(i,t){var e=i.l+t,n=i.read_shift(2),r=i.read_shift(2);return i.l=e,{ixfe:n,numFmtId:r}}function N_(i,t,e){e||(e=ge(16)),e.write_shift(2,t||0),e.write_shift(2,i.numFmtId||0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);var n=0;return e.write_shift(1,n),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(1,0),e}function ql(i,t){return t||(t=ge(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var SS=Gr;function TS(i,t){return t||(t=ge(51)),t.write_shift(1,0),ql(null,t),ql(null,t),ql(null,t),ql(null,t),ql(null,t),t.length>t.l?t.slice(0,t.l):t}function ES(i,t){return t||(t=ge(12+4*10)),t.write_shift(4,i.xfId),t.write_shift(2,1),t.write_shift(1,+i.builtinId),t.write_shift(1,0),mc(i.name||"",t),t.length>t.l?t.slice(0,t.l):t}function AS(i,t,e){var n=ge(2052);return n.write_shift(4,i),mc(t,n),mc(e,n),n.length>n.l?n.slice(0,n.l):n}function MS(i,t){if(t){var e=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)t[r]!=null&&++e}),e!=0&&(be(i,615,Mr(e)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)t[r]!=null&&be(i,44,vS(r,t[r]))}),be(i,616))}}function FS(i){var t=1;t!=0&&(be(i,611,Mr(t)),be(i,43,yS({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),be(i,612))}function kS(i){var t=2;t!=0&&(be(i,603,Mr(t)),be(i,45,P6({patternType:"none"})),be(i,45,P6({patternType:"gray125"})),be(i,604))}function PS(i){var t=1;t!=0&&(be(i,613,Mr(t)),be(i,46,TS({})),be(i,614))}function DS(i){var t=1;be(i,626,Mr(t)),be(i,47,N_({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),be(i,627)}function IS(i,t){be(i,617,Mr(t.length)),t.forEach(function(e){be(i,47,N_(e,0))}),be(i,618)}function OS(i){var t=1;be(i,619,Mr(t)),be(i,48,ES({xfId:0,builtinId:0,name:"Normal"})),be(i,620)}function LS(i){var t=0;be(i,505,Mr(t)),be(i,506)}function RS(i){var t=0;be(i,508,AS(t,"TableStyleMedium9","PivotStyleMedium4")),be(i,509)}function NS(i,t){var e=Rn();return be(e,278),MS(e,i.SSF),FS(e,i),kS(e,i),PS(e,i),DS(e,i),IS(e,t.cellXfs),OS(e,i),LS(e,i),RS(e,i),be(e,279),e.end()}function V_(i,t){if(t&&t.themeXLSX)return t.themeXLSX;if(i&&typeof i.raw=="string")return i.raw;var e=[zi];return e[e.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',e[e.length]="<a:themeElements>",e[e.length]='<a:clrScheme name="Office">',e[e.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',e[e.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',e[e.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',e[e.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',e[e.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',e[e.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',e[e.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',e[e.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',e[e.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',e[e.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',e[e.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',e[e.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',e[e.length]="</a:clrScheme>",e[e.length]='<a:fontScheme name="Office">',e[e.length]="<a:majorFont>",e[e.length]='<a:latin typeface="Cambria"/>',e[e.length]='<a:ea typeface=""/>',e[e.length]='<a:cs typeface=""/>',e[e.length]='<a:font script="Jpan" typeface="\uFF2D\uFF33 \uFF30\u30B4\u30B7\u30C3\u30AF"/>',e[e.length]='<a:font script="Hang" typeface="\uB9D1\uC740 \uACE0\uB515"/>',e[e.length]='<a:font script="Hans" typeface="\u5B8B\u4F53"/>',e[e.length]='<a:font script="Hant" typeface="\u65B0\u7D30\u660E\u9AD4"/>',e[e.length]='<a:font script="Arab" typeface="Times New Roman"/>',e[e.length]='<a:font script="Hebr" typeface="Times New Roman"/>',e[e.length]='<a:font script="Thai" typeface="Tahoma"/>',e[e.length]='<a:font script="Ethi" typeface="Nyala"/>',e[e.length]='<a:font script="Beng" typeface="Vrinda"/>',e[e.length]='<a:font script="Gujr" typeface="Shruti"/>',e[e.length]='<a:font script="Khmr" typeface="MoolBoran"/>',e[e.length]='<a:font script="Knda" typeface="Tunga"/>',e[e.length]='<a:font script="Guru" typeface="Raavi"/>',e[e.length]='<a:font script="Cans" typeface="Euphemia"/>',e[e.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',e[e.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',e[e.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',e[e.length]='<a:font script="Thaa" typeface="MV Boli"/>',e[e.length]='<a:font script="Deva" typeface="Mangal"/>',e[e.length]='<a:font script="Telu" typeface="Gautami"/>',e[e.length]='<a:font script="Taml" typeface="Latha"/>',e[e.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',e[e.length]='<a:font script="Orya" typeface="Kalinga"/>',e[e.length]='<a:font script="Mlym" typeface="Kartika"/>',e[e.length]='<a:font script="Laoo" typeface="DokChampa"/>',e[e.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',e[e.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',e[e.length]='<a:font script="Viet" typeface="Times New Roman"/>',e[e.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',e[e.length]='<a:font script="Geor" typeface="Sylfaen"/>',e[e.length]="</a:majorFont>",e[e.length]="<a:minorFont>",e[e.length]='<a:latin typeface="Calibri"/>',e[e.length]='<a:ea typeface=""/>',e[e.length]='<a:cs typeface=""/>',e[e.length]='<a:font script="Jpan" typeface="\uFF2D\uFF33 \uFF30\u30B4\u30B7\u30C3\u30AF"/>',e[e.length]='<a:font script="Hang" typeface="\uB9D1\uC740 \uACE0\uB515"/>',e[e.length]='<a:font script="Hans" typeface="\u5B8B\u4F53"/>',e[e.length]='<a:font script="Hant" typeface="\u65B0\u7D30\u660E\u9AD4"/>',e[e.length]='<a:font script="Arab" typeface="Arial"/>',e[e.length]='<a:font script="Hebr" typeface="Arial"/>',e[e.length]='<a:font script="Thai" typeface="Tahoma"/>',e[e.length]='<a:font script="Ethi" typeface="Nyala"/>',e[e.length]='<a:font script="Beng" typeface="Vrinda"/>',e[e.length]='<a:font script="Gujr" typeface="Shruti"/>',e[e.length]='<a:font script="Khmr" typeface="DaunPenh"/>',e[e.length]='<a:font script="Knda" typeface="Tunga"/>',e[e.length]='<a:font script="Guru" typeface="Raavi"/>',e[e.length]='<a:font script="Cans" typeface="Euphemia"/>',e[e.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',e[e.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',e[e.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',e[e.length]='<a:font script="Thaa" typeface="MV Boli"/>',e[e.length]='<a:font script="Deva" typeface="Mangal"/>',e[e.length]='<a:font script="Telu" typeface="Gautami"/>',e[e.length]='<a:font script="Taml" typeface="Latha"/>',e[e.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',e[e.length]='<a:font script="Orya" typeface="Kalinga"/>',e[e.length]='<a:font script="Mlym" typeface="Kartika"/>',e[e.length]='<a:font script="Laoo" typeface="DokChampa"/>',e[e.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',e[e.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',e[e.length]='<a:font script="Viet" typeface="Arial"/>',e[e.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',e[e.length]='<a:font script="Geor" typeface="Sylfaen"/>',e[e.length]="</a:minorFont>",e[e.length]="</a:fontScheme>",e[e.length]='<a:fmtScheme name="Office">',e[e.length]="<a:fillStyleLst>",e[e.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',e[e.length]='<a:gradFill rotWithShape="1">',e[e.length]="<a:gsLst>",e[e.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',e[e.length]="</a:gsLst>",e[e.length]='<a:lin ang="16200000" scaled="1"/>',e[e.length]="</a:gradFill>",e[e.length]='<a:gradFill rotWithShape="1">',e[e.length]="<a:gsLst>",e[e.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',e[e.length]="</a:gsLst>",e[e.length]='<a:lin ang="16200000" scaled="0"/>',e[e.length]="</a:gradFill>",e[e.length]="</a:fillStyleLst>",e[e.length]="<a:lnStyleLst>",e[e.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',e[e.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',e[e.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',e[e.length]="</a:lnStyleLst>",e[e.length]="<a:effectStyleLst>",e[e.length]="<a:effectStyle>",e[e.length]="<a:effectLst>",e[e.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',e[e.length]="</a:effectLst>",e[e.length]="</a:effectStyle>",e[e.length]="<a:effectStyle>",e[e.length]="<a:effectLst>",e[e.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',e[e.length]="</a:effectLst>",e[e.length]="</a:effectStyle>",e[e.length]="<a:effectStyle>",e[e.length]="<a:effectLst>",e[e.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',e[e.length]="</a:effectLst>",e[e.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',e[e.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',e[e.length]="</a:effectStyle>",e[e.length]="</a:effectStyleLst>",e[e.length]="<a:bgFillStyleLst>",e[e.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',e[e.length]='<a:gradFill rotWithShape="1">',e[e.length]="<a:gsLst>",e[e.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',e[e.length]="</a:gsLst>",e[e.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',e[e.length]="</a:gradFill>",e[e.length]='<a:gradFill rotWithShape="1">',e[e.length]="<a:gsLst>",e[e.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',e[e.length]="</a:gsLst>",e[e.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',e[e.length]="</a:gradFill>",e[e.length]="</a:bgFillStyleLst>",e[e.length]="</a:fmtScheme>",e[e.length]="</a:themeElements>",e[e.length]="<a:objectDefaults>",e[e.length]="<a:spDef>",e[e.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',e[e.length]="</a:spDef>",e[e.length]="<a:lnDef>",e[e.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',e[e.length]="</a:lnDef>",e[e.length]="</a:objectDefaults>",e[e.length]="<a:extraClrSchemeLst/>",e[e.length]="</a:theme>",e.join("")}function VS(i,t){return{flags:i.read_shift(4),version:i.read_shift(4),name:xn(i,t-8)}}function BS(i){var t=ge(12+2*i.name.length);return t.write_shift(4,i.flags),t.write_shift(4,i.version),nn(i.name,t),t.slice(0,t.l)}function US(i){for(var t=[],e=i.read_shift(4);e-- >0;)t.push([i.read_shift(4),i.read_shift(4)]);return t}function WS(i){var t=ge(4+8*i.length);t.write_shift(4,i.length);for(var e=0;e<i.length;++e)t.write_shift(4,i[e][0]),t.write_shift(4,i[e][1]);return t}function jS(i,t){var e=ge(8+2*t.length);return e.write_shift(4,i),nn(t,e),e.slice(0,e.l)}function HS(i){return i.l+=4,i.read_shift(4)!=0}function zS(i,t){var e=ge(8);return e.write_shift(4,i),e.write_shift(4,t?1:0),e}function GS(){var i=Rn();return be(i,332),be(i,334,Mr(1)),be(i,335,BS({name:"XLDAPR",version:12e4,flags:3496657072})),be(i,336),be(i,339,jS(1,"XLDAPR")),be(i,52),be(i,35,Mr(514)),be(i,4096,Mr(0)),be(i,4097,mr(1)),be(i,36),be(i,53),be(i,340),be(i,337,zS(1,!0)),be(i,51,WS([[1,0]])),be(i,338),be(i,333),i.end()}function B_(){var i=[zi];return i.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),i.join("")}function $S(i){var t={};t.i=i.read_shift(4);var e={};e.r=i.read_shift(4),e.c=i.read_shift(4),t.r=ni(e);var n=i.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}var hs=1024;function U_(i,t){for(var e=[21600,21600],n=["m0,0l0",e[1],e[0],e[1],e[0],"0xe"].join(","),r=[Ie("xml",null,{"xmlns:v":er.v,"xmlns:o":er.o,"xmlns:x":er.x,"xmlns:mv":er.mv}).replace(/\/>/,">"),Ie("o:shapelayout",Ie("o:idmap",null,{"v:ext":"edit",data:i}),{"v:ext":"edit"}),Ie("v:shapetype",[Ie("v:stroke",null,{joinstyle:"miter"}),Ie("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:e.join(","),path:n})];hs<i*1e3;)hs+=1e3;return t.forEach(function(a){var u=tn(a[0]),p={color2:"#BEFF82",type:"gradient"};p.type=="gradient"&&(p.angle="-180");var g=p.type=="gradient"?Ie("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,v=Ie("v:fill",g,p),y={on:"t",obscured:"t"};++hs,r=r.concat(["<v:shape"+a0({id:"_x0000_s"+hs,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(a[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",v,Ie("v:shadow",null,y),Ie("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",cn("x:Anchor",[u.c+1,0,u.r+1,0,u.c+3,20,u.r+5,20].join(",")),cn("x:AutoFill","False"),cn("x:Row",String(u.r)),cn("x:Column",String(u.c)),a[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),r.push("</xml>"),r.join("")}function W_(i){var t=[zi,Ie("comments",null,{xmlns:ws[0]})],e=[];return t.push("<authors>"),i.forEach(function(n){n[1].forEach(function(r){var a=ii(r.a);e.indexOf(a)==-1&&(e.push(a),t.push("<author>"+a+"</author>")),r.T&&r.ID&&e.indexOf("tc="+r.ID)==-1&&(e.push("tc="+r.ID),t.push("<author>tc="+r.ID+"</author>"))})}),e.length==0&&(e.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),i.forEach(function(n){var r=0,a=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?r=e.indexOf("tc="+n[1][0].ID):n[1].forEach(function(g){g.a&&(r=e.indexOf(ii(g.a))),a.push(g.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+r+'"><text>'),a.length<=1)t.push(cn("t",ii(a[0]||"")));else{for(var u=`Comment:
    `+a[0]+`
`,p=1;p<a.length;++p)u+=`Reply:
    `+a[p]+`
`;t.push(cn("t",ii(u)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function ZS(i,t,e){var n=[zi,Ie("ThreadedComments",null,{xmlns:en.TCMNT}).replace(/[\/]>/,">")];return i.forEach(function(r){var a="";(r[1]||[]).forEach(function(u,p){if(!u.T){delete u.ID;return}u.a&&t.indexOf(u.a)==-1&&t.push(u.a);var g={ref:r[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+e.tcid++).slice(-12)+"}"};p==0?a=g.id:g.parentId=a,u.ID=g.id,u.a&&(g.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(u.a)).slice(-12)+"}"),n.push(Ie("threadedComment",cn("text",u.t||""),g))})}),n.push("</ThreadedComments>"),n.join("")}function qS(i){var t=[zi,Ie("personList",null,{xmlns:en.TCMNT,"xmlns:x":ws[0]}).replace(/[\/]>/,">")];return i.forEach(function(e,n){t.push(Ie("person",null,{displayName:e,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:e,providerId:"None"}))}),t.push("</personList>"),t.join("")}function YS(i){var t={};t.iauthor=i.read_shift(4);var e=vo(i,16);return t.rfx=e.s,t.ref=ni(e.s),i.l+=16,t}function XS(i,t){return t==null&&(t=ge(36)),t.write_shift(4,i[1].iauthor),Es(i[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var KS=xn;function JS(i){return nn(i.slice(0,54))}function QS(i){var t=Rn(),e=[];return be(t,628),be(t,630),i.forEach(function(n){n[1].forEach(function(r){e.indexOf(r.a)>-1||(e.push(r.a.slice(0,54)),be(t,632,JS(r.a)))})}),be(t,631),be(t,633),i.forEach(function(n){n[1].forEach(function(r){r.iauthor=e.indexOf(r.a);var a={s:tn(n[0]),e:tn(n[0])};be(t,635,XS([a,r])),r.t&&r.t.length>0&&be(t,637,tw(r)),be(t,636),delete r.iauthor})}),be(t,634),be(t,629),t.end()}function eT(i,t){t.FullPaths.forEach(function(e,n){if(n!=0){var r=e.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");r.slice(-1)!=="/"&&si.utils.cfb_add(i,r,t.FileIndex[n].content)}})}var j_=["xlsb","xlsm","xlam","biff8","xla"];var tT=function(){var i=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function e(n,r,a,u){var p=!1,g=!1;a.length==0?g=!0:a.charAt(0)=="["&&(g=!0,a=a.slice(1,-1)),u.length==0?p=!0:u.charAt(0)=="["&&(p=!0,u=u.slice(1,-1));var v=a.length>0?parseInt(a,10)|0:0,y=u.length>0?parseInt(u,10)|0:0;return p?y+=t.c:--y,g?v+=t.r:--v,r+(p?"":"$")+vn(y)+(g?"":"$")+dn(v)}return function(r,a){return t=a,r.replace(i,e)}}(),ep=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,tp=function(){return function(t,e){return t.replace(ep,function(n,r,a,u,p,g){var v=qf(u)-(a?0:e.c),y=Zf(g)-(p?0:e.r),M=y==0?"":p?y+1:"["+y+"]",E=v==0?"":a?v+1:"["+v+"]";return r+"R"+M+"C"+E})}}();function iT(i,t){return i.replace(ep,function(e,n,r,a,u,p){return n+(r=="$"?r+a:vn(qf(a)+t.c))+(u=="$"?u+p:dn(Zf(p)+t.r))})}function nT(i){return i.length!=1}function ji(i){i.l+=1}function Oa(i,t){var e=i.read_shift(t==1?1:2);return[e&16383,e>>14&1,e>>15&1]}function H_(i,t,e){var n=2;if(e){if(e.biff>=2&&e.biff<=5)return z_(i,t,e);e.biff==12&&(n=4)}var r=i.read_shift(n),a=i.read_shift(n),u=Oa(i,2),p=Oa(i,2);return{s:{r,c:u[0],cRel:u[1],rRel:u[2]},e:{r:a,c:p[0],cRel:p[1],rRel:p[2]}}}function z_(i){var t=Oa(i,2),e=Oa(i,2),n=i.read_shift(1),r=i.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:e[0],c:r,cRel:e[1],rRel:e[2]}}}function rT(i,t,e){if(e.biff<8)return z_(i,t,e);var n=i.read_shift(e.biff==12?4:2),r=i.read_shift(e.biff==12?4:2),a=Oa(i,2),u=Oa(i,2);return{s:{r:n,c:a[0],cRel:a[1],rRel:a[2]},e:{r,c:u[0],cRel:u[1],rRel:u[2]}}}function G_(i,t,e){if(e&&e.biff>=2&&e.biff<=5)return aT(i,t,e);var n=i.read_shift(e&&e.biff==12?4:2),r=Oa(i,2);return{r:n,c:r[0],cRel:r[1],rRel:r[2]}}function aT(i){var t=Oa(i,2),e=i.read_shift(1);return{r:t[0],c:e,cRel:t[1],rRel:t[2]}}function oT(i){var t=i.read_shift(2),e=i.read_shift(2);return{r:t,c:e&255,fQuoted:!!(e&16384),cRel:e>>15,rRel:e>>15}}function sT(i,t,e){var n=e&&e.biff?e.biff:8;if(n>=2&&n<=5)return lT(i,t,e);var r=i.read_shift(n>=12?4:2),a=i.read_shift(2),u=(a&16384)>>14,p=(a&32768)>>15;if(a&=16383,p==1)for(;r>524287;)r-=1048576;if(u==1)for(;a>8191;)a=a-16384;return{r,c:a,cRel:u,rRel:p}}function lT(i){var t=i.read_shift(2),e=i.read_shift(1),n=(t&32768)>>15,r=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),r==1&&e>=128&&(e=e-256),{r:t,c:e,cRel:r,rRel:n}}function uT(i,t,e){var n=(i[i.l++]&96)>>5,r=H_(i,e.biff>=2&&e.biff<=5?6:8,e);return[n,r]}function cT(i,t,e){var n=(i[i.l++]&96)>>5,r=i.read_shift(2,"i"),a=8;if(e)switch(e.biff){case 5:i.l+=12,a=6;break;case 12:a=12;break}var u=H_(i,a,e);return[n,r,u]}function dT(i,t,e){var n=(i[i.l++]&96)>>5;return i.l+=e&&e.biff>8?12:e.biff<8?6:8,[n]}function mT(i,t,e){var n=(i[i.l++]&96)>>5,r=i.read_shift(2),a=8;if(e)switch(e.biff){case 5:i.l+=12,a=6;break;case 12:a=12;break}return i.l+=a,[n,r]}function fT(i,t,e){var n=(i[i.l++]&96)>>5,r=rT(i,t-1,e);return[n,r]}function pT(i,t,e){var n=(i[i.l++]&96)>>5;return i.l+=e.biff==2?6:e.biff==12?14:7,[n]}function D6(i){var t=i[i.l+1]&1,e=1;return i.l+=4,[t,e]}function hT(i,t,e){i.l+=2;for(var n=i.read_shift(e&&e.biff==2?1:2),r=[],a=0;a<=n;++a)r.push(i.read_shift(e&&e.biff==2?1:2));return r}function gT(i,t,e){var n=i[i.l+1]&255?1:0;return i.l+=2,[n,i.read_shift(e&&e.biff==2?1:2)]}function _T(i,t,e){var n=i[i.l+1]&255?1:0;return i.l+=2,[n,i.read_shift(e&&e.biff==2?1:2)]}function vT(i){var t=i[i.l+1]&255?1:0;return i.l+=2,[t,i.read_shift(2)]}function xT(i,t,e){var n=i[i.l+1]&255?1:0;return i.l+=e&&e.biff==2?3:4,[n]}function $_(i){var t=i.read_shift(1),e=i.read_shift(1);return[t,e]}function yT(i){return i.read_shift(2),$_(i,2)}function bT(i){return i.read_shift(2),$_(i,2)}function CT(i,t,e){var n=(i[i.l]&96)>>5;i.l+=1;var r=G_(i,0,e);return[n,r]}function wT(i,t,e){var n=(i[i.l]&96)>>5;i.l+=1;var r=sT(i,0,e);return[n,r]}function ST(i,t,e){var n=(i[i.l]&96)>>5;i.l+=1;var r=i.read_shift(2);e&&e.biff==5&&(i.l+=12);var a=G_(i,0,e);return[n,r,a]}function TT(i,t,e){var n=(i[i.l]&96)>>5;i.l+=1;var r=i.read_shift(e&&e.biff<=3?1:2);return[TE[r],Y_[r],n]}function ET(i,t,e){var n=i[i.l++],r=i.read_shift(1),a=e&&e.biff<=3?[n==88?-1:0,i.read_shift(1)]:AT(i);return[r,(a[0]===0?Y_:SE)[a[1]]]}function AT(i){return[i[i.l+1]>>7,i.read_shift(2)&32767]}function MT(i,t,e){i.l+=e&&e.biff==2?3:4}function FT(i,t,e){if(i.l++,e&&e.biff==12)return[i.read_shift(4,"i"),0];var n=i.read_shift(2),r=i.read_shift(e&&e.biff==2?1:2);return[n,r]}function kT(i){return i.l++,c0[i.read_shift(1)]}function PT(i){return i.l++,i.read_shift(2)}function DT(i){return i.l++,i.read_shift(1)!==0}function IT(i){return i.l++,As(i,8)}function OT(i,t,e){return i.l++,M_(i,t-1,e)}function LT(i,t){var e=[i.read_shift(1)];if(t==12)switch(e[0]){case 2:e[0]=4;break;case 4:e[0]=16;break;case 0:e[0]=1;break;case 1:e[0]=2;break}switch(e[0]){case 4:e[1]=Sw(i,1)?"TRUE":"FALSE",t!=12&&(i.l+=7);break;case 37:case 16:e[1]=c0[i[i.l]],i.l+=t==12?4:8;break;case 0:i.l+=8;break;case 1:e[1]=As(i,8);break;case 2:e[1]=Mw(i,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+e[0])}return e}function RT(i,t,e){for(var n=i.read_shift(e.biff==12?4:2),r=[],a=0;a!=n;++a)r.push((e.biff==12?vo:Pw)(i,8));return r}function NT(i,t,e){var n=0,r=0;e.biff==12?(n=i.read_shift(4),r=i.read_shift(4)):(r=1+i.read_shift(1),n=1+i.read_shift(2)),e.biff>=2&&e.biff<8&&(--n,--r==0&&(r=256));for(var a=0,u=[];a!=n&&(u[a]=[]);++a)for(var p=0;p!=r;++p)u[a][p]=LT(i,e.biff);return u}function VT(i,t,e){var n=i.read_shift(1)>>>5&3,r=!e||e.biff>=8?4:2,a=i.read_shift(r);switch(e.biff){case 2:i.l+=5;break;case 3:case 4:i.l+=8;break;case 5:i.l+=12;break}return[n,0,a]}function BT(i,t,e){if(e.biff==5)return UT(i,t,e);var n=i.read_shift(1)>>>5&3,r=i.read_shift(2),a=i.read_shift(4);return[n,r,a]}function UT(i){var t=i.read_shift(1)>>>5&3,e=i.read_shift(2,"i");i.l+=8;var n=i.read_shift(2);return i.l+=12,[t,e,n]}function WT(i,t,e){var n=i.read_shift(1)>>>5&3;i.l+=e&&e.biff==2?3:4;var r=i.read_shift(e&&e.biff==2?1:2);return[n,r]}function jT(i,t,e){var n=i.read_shift(1)>>>5&3,r=i.read_shift(e&&e.biff==2?1:2);return[n,r]}function HT(i,t,e){var n=i.read_shift(1)>>>5&3;return i.l+=4,e.biff<8&&i.l--,e.biff==12&&(i.l+=2),[n]}function zT(i,t,e){var n=(i[i.l++]&96)>>5,r=i.read_shift(2),a=4;if(e)switch(e.biff){case 5:a=15;break;case 12:a=6;break}return i.l+=a,[n,r]}var GT=Gr,$T=Gr,ZT=Gr;function d0(i,t,e){return i.l+=2,[oT(i,4,e)]}function ip(i){return i.l+=6,[]}var qT=d0,YT=ip,XT=ip,KT=d0;function Z_(i){return i.l+=2,[E_(i),i.read_shift(2)&1]}var JT=d0,QT=Z_,eE=ip,tE=d0,iE=d0,nE=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function rE(i){i.l+=2;var t=i.read_shift(2),e=i.read_shift(2),n=i.read_shift(4),r=i.read_shift(2),a=i.read_shift(2),u=nE[e>>2&31];return{ixti:t,coltype:e&3,rt:u,idx:n,c:r,C:a}}function aE(i){return i.l+=2,[i.read_shift(4)]}function oE(i,t,e){return i.l+=5,i.l+=2,i.l+=e.biff==2?1:4,["PTGSHEET"]}function sE(i,t,e){return i.l+=e.biff==2?4:5,["PTGENDSHEET"]}function lE(i){var t=i.read_shift(1)>>>5&3,e=i.read_shift(2);return[t,e]}function uE(i){var t=i.read_shift(1)>>>5&3,e=i.read_shift(2);return[t,e]}function cE(i){return i.l+=4,[0,0]}var I6={1:{n:"PtgExp",f:FT},2:{n:"PtgTbl",f:ZT},3:{n:"PtgAdd",f:ji},4:{n:"PtgSub",f:ji},5:{n:"PtgMul",f:ji},6:{n:"PtgDiv",f:ji},7:{n:"PtgPower",f:ji},8:{n:"PtgConcat",f:ji},9:{n:"PtgLt",f:ji},10:{n:"PtgLe",f:ji},11:{n:"PtgEq",f:ji},12:{n:"PtgGe",f:ji},13:{n:"PtgGt",f:ji},14:{n:"PtgNe",f:ji},15:{n:"PtgIsect",f:ji},16:{n:"PtgUnion",f:ji},17:{n:"PtgRange",f:ji},18:{n:"PtgUplus",f:ji},19:{n:"PtgUminus",f:ji},20:{n:"PtgPercent",f:ji},21:{n:"PtgParen",f:ji},22:{n:"PtgMissArg",f:ji},23:{n:"PtgStr",f:OT},26:{n:"PtgSheet",f:oE},27:{n:"PtgEndSheet",f:sE},28:{n:"PtgErr",f:kT},29:{n:"PtgBool",f:DT},30:{n:"PtgInt",f:PT},31:{n:"PtgNum",f:IT},32:{n:"PtgArray",f:pT},33:{n:"PtgFunc",f:TT},34:{n:"PtgFuncVar",f:ET},35:{n:"PtgName",f:VT},36:{n:"PtgRef",f:CT},37:{n:"PtgArea",f:uT},38:{n:"PtgMemArea",f:WT},39:{n:"PtgMemErr",f:GT},40:{n:"PtgMemNoMem",f:$T},41:{n:"PtgMemFunc",f:jT},42:{n:"PtgRefErr",f:HT},43:{n:"PtgAreaErr",f:dT},44:{n:"PtgRefN",f:wT},45:{n:"PtgAreaN",f:fT},46:{n:"PtgMemAreaN",f:lE},47:{n:"PtgMemNoMemN",f:uE},57:{n:"PtgNameX",f:BT},58:{n:"PtgRef3d",f:ST},59:{n:"PtgArea3d",f:cT},60:{n:"PtgRefErr3d",f:zT},61:{n:"PtgAreaErr3d",f:mT},255:{}},dE={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},mE={1:{n:"PtgElfLel",f:Z_},2:{n:"PtgElfRw",f:tE},3:{n:"PtgElfCol",f:qT},6:{n:"PtgElfRwV",f:iE},7:{n:"PtgElfColV",f:KT},10:{n:"PtgElfRadical",f:JT},11:{n:"PtgElfRadicalS",f:eE},13:{n:"PtgElfColS",f:YT},15:{n:"PtgElfColSV",f:XT},16:{n:"PtgElfRadicalLel",f:QT},25:{n:"PtgList",f:rE},29:{n:"PtgSxName",f:aE},255:{}},fE={0:{n:"PtgAttrNoop",f:cE},1:{n:"PtgAttrSemi",f:xT},2:{n:"PtgAttrIf",f:_T},4:{n:"PtgAttrChoose",f:hT},8:{n:"PtgAttrGoto",f:gT},16:{n:"PtgAttrSum",f:MT},32:{n:"PtgAttrBaxcel",f:D6},33:{n:"PtgAttrBaxcel",f:D6},64:{n:"PtgAttrSpace",f:yT},65:{n:"PtgAttrSpaceSemi",f:bT},128:{n:"PtgAttrIfError",f:vT},255:{}};function pE(i,t,e,n){if(n.biff<8)return Gr(i,t);for(var r=i.l+t,a=[],u=0;u!==e.length;++u)switch(e[u][0]){case"PtgArray":e[u][1]=NT(i,0,n),a.push(e[u][1]);break;case"PtgMemArea":e[u][2]=RT(i,e[u][1],n),a.push(e[u][2]);break;case"PtgExp":n&&n.biff==12&&(e[u][1][1]=i.read_shift(4),a.push(e[u][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+e[u][0];default:break}return t=r-i.l,t!==0&&a.push(Gr(i,t)),a}function hE(i,t,e){for(var n=i.l+t,r,a,u=[];n!=i.l;)t=n-i.l,a=i[i.l],r=I6[a]||I6[dE[a]],(a===24||a===25)&&(r=(a===24?mE:fE)[i[i.l+1]]),!r||!r.f?Gr(i,t):u.push([r.n,r.f(i,t,e)]);return u}function gE(i){for(var t=[],e=0;e<i.length;++e){for(var n=i[e],r=[],a=0;a<n.length;++a){var u=n[a];if(u)switch(u[0]){case 2:r.push('"'+u[1].replace(/"/g,'""')+'"');break;default:r.push(u[1])}else r.push("")}t.push(r.join(","))}return t.join(";")}var _E={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function vE(i,t){if(!i&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(i)?"'"+i+"'":i}function q_(i,t,e){if(!i)return"SH33TJSERR0";if(e.biff>8&&(!i.XTI||!i.XTI[t]))return i.SheetNames[t];if(!i.XTI)return"SH33TJSERR6";var n=i.XTI[t];if(e.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":i.XTI[t-1];if(!n)return"SH33TJSERR1";var r="";if(e.biff>8)switch(i[n[0]][0]){case 357:return r=n[1]==-1?"#REF":i.SheetNames[n[1]],n[1]==n[2]?r:r+":"+i.SheetNames[n[2]];case 358:return e.SID!=null?i.SheetNames[e.SID]:"SH33TJSSAME"+i[n[0]][0];case 355:default:return"SH33TJSSRC"+i[n[0]][0]}switch(i[n[0]][0][0]){case 1025:return r=n[1]==-1?"#REF":i.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?r:r+":"+i.SheetNames[n[2]];case 14849:return i[n[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return i[n[0]][0][3]?(r=n[1]==-1?"#REF":i[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?r:r+":"+i[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function O6(i,t,e){var n=q_(i,t,e);return n=="#REF"?n:vE(n,e)}function Cs(i,t,e,n,r){var a=r&&r.biff||8,u={s:{c:0,r:0},e:{c:0,r:0}},p=[],g,v,y,M=0,E=0,A,O="";if(!i[0]||!i[0][0])return"";for(var F=-1,D="",ee=0,ie=i[0].length;ee<ie;++ee){var te=i[0][ee];switch(te[0]){case"PtgUminus":p.push("-"+p.pop());break;case"PtgUplus":p.push("+"+p.pop());break;case"PtgPercent":p.push(p.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(g=p.pop(),v=p.pop(),F>=0){switch(i[0][F][1][0]){case 0:D=Fi(" ",i[0][F][1][1]);break;case 1:D=Fi("\r",i[0][F][1][1]);break;default:if(D="",r.WTF)throw new Error("Unexpected PtgAttrSpaceType "+i[0][F][1][0])}v=v+D,F=-1}p.push(v+_E[te[0]]+g);break;case"PtgIsect":g=p.pop(),v=p.pop(),p.push(v+" "+g);break;case"PtgUnion":g=p.pop(),v=p.pop(),p.push(v+","+g);break;case"PtgRange":g=p.pop(),v=p.pop(),p.push(v+":"+g);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":y=Jl(te[1][1],u,r),p.push(Ql(y,a));break;case"PtgRefN":y=e?Jl(te[1][1],e,r):te[1][1],p.push(Ql(y,a));break;case"PtgRef3d":M=te[1][1],y=Jl(te[1][2],u,r),O=O6(n,M,r);var pe=O;p.push(O+"!"+Ql(y,a));break;case"PtgFunc":case"PtgFuncVar":var Ce=te[1][0],ze=te[1][1];Ce||(Ce=0),Ce&=127;var ne=Ce==0?[]:p.slice(-Ce);p.length-=Ce,ze==="User"&&(ze=ne.shift()),p.push(ze+"("+ne.join(",")+")");break;case"PtgBool":p.push(te[1]?"TRUE":"FALSE");break;case"PtgInt":p.push(te[1]);break;case"PtgNum":p.push(String(te[1]));break;case"PtgStr":p.push('"'+te[1].replace(/"/g,'""')+'"');break;case"PtgErr":p.push(te[1]);break;case"PtgAreaN":A=v6(te[1][1],e?{s:e}:u,r),p.push(Tf(A,r));break;case"PtgArea":A=v6(te[1][1],u,r),p.push(Tf(A,r));break;case"PtgArea3d":M=te[1][1],A=te[1][2],O=O6(n,M,r),p.push(O+"!"+Tf(A,r));break;case"PtgAttrSum":p.push("SUM("+p.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":E=te[1][2];var xe=(n.names||[])[E-1]||(n[0]||[])[E],me=xe?xe.Name:"SH33TJSNAME"+String(E);me&&me.slice(0,6)=="_xlfn."&&!r.xlfn&&(me=me.slice(6)),p.push(me);break;case"PtgNameX":var _e=te[1][1];E=te[1][2];var Ae;if(r.biff<=5)_e<0&&(_e=-_e),n[_e]&&(Ae=n[_e][E]);else{var we="";if(((n[_e]||[])[0]||[])[0]==14849||(((n[_e]||[])[0]||[])[0]==1025?n[_e][E]&&n[_e][E].itab>0&&(we=n.SheetNames[n[_e][E].itab-1]+"!"):we=n.SheetNames[E-1]+"!"),n[_e]&&n[_e][E])we+=n[_e][E].Name;else if(n[0]&&n[0][E])we+=n[0][E].Name;else{var Ke=(q_(n,_e,r)||"").split(";;");Ke[E-1]?we=Ke[E-1]:we+="SH33TJSERRX"}p.push(we);break}Ae||(Ae={Name:"SH33TJSERRY"}),p.push(Ae.Name);break;case"PtgParen":var mt="(",it=")";if(F>=0){switch(D="",i[0][F][1][0]){case 2:mt=Fi(" ",i[0][F][1][1])+mt;break;case 3:mt=Fi("\r",i[0][F][1][1])+mt;break;case 4:it=Fi(" ",i[0][F][1][1])+it;break;case 5:it=Fi("\r",i[0][F][1][1])+it;break;default:if(r.WTF)throw new Error("Unexpected PtgAttrSpaceType "+i[0][F][1][0])}F=-1}p.push(mt+p.pop()+it);break;case"PtgRefErr":p.push("#REF!");break;case"PtgRefErr3d":p.push("#REF!");break;case"PtgExp":y={c:te[1][1],r:te[1][0]};var Je={c:e.c,r:e.r};if(n.sharedf[ni(y)]){var Pi=n.sharedf[ni(y)];p.push(Cs(Pi,u,Je,n,r))}else{var nt=!1;for(g=0;g!=n.arrayf.length;++g)if(v=n.arrayf[g],!(y.c<v[0].s.c||y.c>v[0].e.c)&&!(y.r<v[0].s.r||y.r>v[0].e.r)){p.push(Cs(v[1],u,Je,n,r)),nt=!0;break}nt||p.push(te[1])}break;case"PtgArray":p.push("{"+gE(te[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":F=ee;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":p.push("");break;case"PtgAreaErr":p.push("#REF!");break;case"PtgAreaErr3d":p.push("#REF!");break;case"PtgList":p.push("Table"+te[1].idx+"[#"+te[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(te));default:throw new Error("Unrecognized Formula Token: "+String(te))}var St=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(r.biff!=3&&F>=0&&St.indexOf(i[0][ee][0])==-1){te=i[0][F];var Wt=!0;switch(te[1][0]){case 4:Wt=!1;case 0:D=Fi(" ",te[1][1]);break;case 5:Wt=!1;case 1:D=Fi("\r",te[1][1]);break;default:if(D="",r.WTF)throw new Error("Unexpected PtgAttrSpaceType "+te[1][0])}p.push((Wt?D:"")+p.pop()+(Wt?"":D)),F=-1}}if(p.length>1&&r.WTF)throw new Error("bad formula stack");return p[0]}function xE(i){if(i==null){var t=ge(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof i=="number")return mo(i);return mo(0)}function yE(i,t,e,n,r){var a=fo(t,e,r),u=xE(i.v),p=ge(6),g=33;p.write_shift(2,g),p.write_shift(4,0);for(var v=ge(i.bf.length),y=0;y<i.bf.length;++y)v[y]=i.bf[y];var M=un([a,u,p,v]);return M}function Ec(i,t,e){var n=i.read_shift(4),r=hE(i,n,e),a=i.read_shift(4),u=a>0?pE(i,a,r,e):null;return[r,u]}var bE=Ec,Ac=Ec,CE=Ec,wE=Ec,SE={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Y_={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},TE={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function EE(i){var t="of:="+i.replace(ep,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function AE(i){return i.replace(/\./,"!")}var e0=typeof Map<"u";function np(i,t,e){var n=0,r=i.length;if(e){if(e0?e.has(t):Object.prototype.hasOwnProperty.call(e,t)){for(var a=e0?e.get(t):e[t];n<a.length;++n)if(i[a[n]].t===t)return i.Count++,a[n]}}else for(;n<r;++n)if(i[n].t===t)return i.Count++,n;return i[r]={t},i.Count++,i.Unique++,e&&(e0?(e.has(t)||e.set(t,[]),e.get(t).push(r)):(Object.prototype.hasOwnProperty.call(e,t)||(e[t]=[]),e[t].push(r))),r}function Mc(i,t){var e={min:i+1,max:i+1},n=-1;return t.MDW&&(ua=t.MDW),t.width!=null?e.customWidth=1:t.wpx!=null?n=gc(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(e.width=Of(n),e.customWidth=1):t.width!=null&&(e.width=t.width),t.hidden&&(e.hidden=!0),t.level!=null&&(e.outlineLevel=e.level=t.level),e}function X_(i,t){if(i){var e=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(e=[1,1,1,1,.5,.5]),i.left==null&&(i.left=e[0]),i.right==null&&(i.right=e[1]),i.top==null&&(i.top=e[2]),i.bottom==null&&(i.bottom=e[3]),i.header==null&&(i.header=e[4]),i.footer==null&&(i.footer=e[5])}}function Ra(i,t,e){var n=e.revssf[t.z!=null?t.z:"General"],r=60,a=i.length;if(n==null&&e.ssf){for(;r<392;++r)if(e.ssf[r]==null){X6(t.z,r),e.ssf[r]=t.z,e.revssf[t.z]=n=r;break}}for(r=0;r!=a;++r)if(i[r].numFmtId===n)return r;return i[a]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function ME(i,t,e){if(i&&i["!ref"]){var n=yi(i["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+e+"): "+i["!ref"])}}function FE(i){if(i.length===0)return"";for(var t='<mergeCells count="'+i.length+'">',e=0;e!=i.length;++e)t+='<mergeCell ref="'+Hi(i[e])+'"/>';return t+"</mergeCells>"}function kE(i,t,e,n,r){var a=!1,u={},p=null;if(n.bookType!=="xlsx"&&t.vbaraw){var g=t.SheetNames[e];try{t.Workbook&&(g=t.Workbook.Sheets[e].CodeName||g)}catch{}a=!0,u.codeName=oa(ii(g))}if(i&&i["!outline"]){var v={summaryBelow:1,summaryRight:1};i["!outline"].above&&(v.summaryBelow=0),i["!outline"].left&&(v.summaryRight=0),p=(p||"")+Ie("outlinePr",null,v)}!a&&!p||(r[r.length]=Ie("sheetPr",p,u))}var PE=["objects","scenarios","selectLockedCells","selectUnlockedCells"],DE=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function IE(i){var t={sheet:1};return PE.forEach(function(e){i[e]!=null&&i[e]&&(t[e]="1")}),DE.forEach(function(e){i[e]!=null&&!i[e]&&(t[e]="0")}),i.password&&(t.password=I_(i.password).toString(16).toUpperCase()),Ie("sheetProtection",null,t)}function OE(i){return X_(i),Ie("pageMargins",null,i)}function LE(i,t){for(var e=["<cols>"],n,r=0;r!=t.length;++r)(n=t[r])&&(e[e.length]=Ie("col",null,Mc(r,n)));return e[e.length]="</cols>",e.join("")}function RE(i,t,e,n){var r=typeof i.ref=="string"?i.ref:Hi(i.ref);e.Workbook||(e.Workbook={Sheets:[]}),e.Workbook.Names||(e.Workbook.Names=[]);var a=e.Workbook.Names,u=tr(r);u.s.r==u.e.r&&(u.e.r=tr(t["!ref"]).e.r,r=Hi(u));for(var p=0;p<a.length;++p){var g=a[p];if(g.Name=="_xlnm._FilterDatabase"&&g.Sheet==n){g.Ref="'"+e.SheetNames[n]+"'!"+r;break}}return p==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+e.SheetNames[n]+"'!"+r}),Ie("autoFilter",null,{ref:r})}function NE(i,t,e,n){var r={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(r.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Ie("sheetViews",Ie("sheetView",null,r),{})}function VE(i,t,e,n){if(i.c&&e["!comments"].push([t,i.c]),i.v===void 0&&typeof i.f!="string"||i.t==="z"&&!i.f)return"";var r="",a=i.t,u=i.v;if(i.t!=="z")switch(i.t){case"b":r=i.v?"1":"0";break;case"n":r=""+i.v;break;case"e":r=c0[i.v];break;case"d":n&&n.cellDates?r=En(i.v,-1).toISOString():(i=Vn(i),i.t="n",r=""+(i.v=Nn(En(i.v)))),typeof i.z>"u"&&(i.z=ki[14]);break;default:r=i.v;break}var p=cn("v",ii(r)),g={r:t},v=Ra(n.cellXfs,i,n);switch(v!==0&&(g.s=v),i.t){case"n":break;case"d":g.t="d";break;case"b":g.t="b";break;case"e":g.t="e";break;case"z":break;default:if(i.v==null){delete i.t;break}if(i.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){p=cn("v",""+np(n.Strings,i.v,n.revStrings)),g.t="s";break}g.t="str";break}if(i.t!=a&&(i.t=a,i.v=u),typeof i.f=="string"&&i.f){var y=i.F&&i.F.slice(0,t.length)==t?{t:"array",ref:i.F}:null;p=Ie("f",ii(i.f),y)+(i.v!=null?p:"")}return i.l&&e["!links"].push([t,i.l]),i.D&&(g.cm=1),Ie("c",p,g)}function BE(i,t,e,n){var r=[],a=[],u=yi(i["!ref"]),p="",g,v="",y=[],M=0,E=0,A=i["!rows"],O=Array.isArray(i),F={r:v},D,ee=-1;for(E=u.s.c;E<=u.e.c;++E)y[E]=vn(E);for(M=u.s.r;M<=u.e.r;++M){for(a=[],v=dn(M),E=u.s.c;E<=u.e.c;++E){g=y[E]+v;var ie=O?(i[M]||[])[E]:i[g];ie!==void 0&&(p=VE(ie,g,i,t,e,n))!=null&&a.push(p)}(a.length>0||A&&A[M])&&(F={r:v},A&&A[M]&&(D=A[M],D.hidden&&(F.hidden=1),ee=-1,D.hpx?ee=_c(D.hpx):D.hpt&&(ee=D.hpt),ee>-1&&(F.ht=ee,F.customHeight=1),D.level&&(F.outlineLevel=D.level)),r[r.length]=Ie("row",a.join(""),F))}if(A)for(;M<A.length;++M)A&&A[M]&&(F={r:M+1},D=A[M],D.hidden&&(F.hidden=1),ee=-1,D.hpx?ee=_c(D.hpx):D.hpt&&(ee=D.hpt),ee>-1&&(F.ht=ee,F.customHeight=1),D.level&&(F.outlineLevel=D.level),r[r.length]=Ie("row","",F));return r.join("")}function K_(i,t,e,n){var r=[zi,Ie("worksheet",null,{xmlns:ws[0],"xmlns:r":en.r})],a=e.SheetNames[i],u=0,p="",g=e.Sheets[a];g==null&&(g={});var v=g["!ref"]||"A1",y=yi(v);if(y.e.c>16383||y.e.r>1048575){if(t.WTF)throw new Error("Range "+v+" exceeds format limit A1:XFD1048576");y.e.c=Math.min(y.e.c,16383),y.e.r=Math.min(y.e.c,1048575),v=Hi(y)}n||(n={}),g["!comments"]=[];var M=[];kE(g,e,i,t,r),r[r.length]=Ie("dimension",null,{ref:v}),r[r.length]=NE(g,t,i,e),t.sheetFormat&&(r[r.length]=Ie("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),g["!cols"]!=null&&g["!cols"].length>0&&(r[r.length]=LE(g,g["!cols"])),r[u=r.length]="<sheetData/>",g["!links"]=[],g["!ref"]!=null&&(p=BE(g,t,i,e,n),p.length>0&&(r[r.length]=p)),r.length>u+1&&(r[r.length]="</sheetData>",r[u]=r[u].replace("/>",">")),g["!protect"]&&(r[r.length]=IE(g["!protect"])),g["!autofilter"]!=null&&(r[r.length]=RE(g["!autofilter"],g,e,i)),g["!merges"]!=null&&g["!merges"].length>0&&(r[r.length]=FE(g["!merges"]));var E=-1,A,O=-1;return g["!links"].length>0&&(r[r.length]="<hyperlinks>",g["!links"].forEach(function(F){F[1].Target&&(A={ref:F[0]},F[1].Target.charAt(0)!="#"&&(O=ti(n,-1,ii(F[1].Target).replace(/#.*$/,""),Ht.HLINK),A["r:id"]="rId"+O),(E=F[1].Target.indexOf("#"))>-1&&(A.location=ii(F[1].Target.slice(E+1))),F[1].Tooltip&&(A.tooltip=ii(F[1].Tooltip)),r[r.length]=Ie("hyperlink",null,A))}),r[r.length]="</hyperlinks>"),delete g["!links"],g["!margins"]!=null&&(r[r.length]=OE(g["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(r[r.length]=cn("ignoredErrors",Ie("ignoredError",null,{numberStoredAsText:1,sqref:v}))),M.length>0&&(O=ti(n,-1,"../drawings/drawing"+(i+1)+".xml",Ht.DRAW),r[r.length]=Ie("drawing",null,{"r:id":"rId"+O}),g["!drawing"]=M),g["!comments"].length>0&&(O=ti(n,-1,"../drawings/vmlDrawing"+(i+1)+".vml",Ht.VML),r[r.length]=Ie("legacyDrawing",null,{"r:id":"rId"+O}),g["!legacy"]=O),r.length>1&&(r[r.length]="</worksheet>",r[1]=r[1].replace("/>",">")),r.join("")}function UE(i,t){var e={},n=i.l+t;e.r=i.read_shift(4),i.l+=4;var r=i.read_shift(2);i.l+=1;var a=i.read_shift(1);return i.l=n,a&7&&(e.level=a&7),a&16&&(e.hidden=!0),a&32&&(e.hpt=r/20),e}function WE(i,t,e){var n=ge(145),r=(e["!rows"]||[])[i]||{};n.write_shift(4,i),n.write_shift(4,0);var a=320;r.hpx?a=_c(r.hpx)*20:r.hpt&&(a=r.hpt*20),n.write_shift(2,a),n.write_shift(1,0);var u=0;r.level&&(u|=r.level),r.hidden&&(u|=16),(r.hpx||r.hpt)&&(u|=32),n.write_shift(1,u),n.write_shift(1,0);var p=0,g=n.l;n.l+=4;for(var v={r:i,c:0},y=0;y<16;++y)if(!(t.s.c>y+1<<10||t.e.c<y<<10)){for(var M=-1,E=-1,A=y<<10;A<y+1<<10;++A){v.c=A;var O=Array.isArray(e)?(e[v.r]||[])[v.c]:e[ni(v)];O&&(M<0&&(M=A),E=A)}M<0||(++p,n.write_shift(4,M),n.write_shift(4,E))}var F=n.l;return n.l=g,n.write_shift(4,p),n.l=F,n.length>n.l?n.slice(0,n.l):n}function jE(i,t,e,n){var r=WE(n,e,t);(r.length>17||(t["!rows"]||[])[n])&&be(i,0,r)}var HE=vo,zE=Es;function GE(){}function $E(i,t){var e={},n=i[i.l];return++i.l,e.above=!(n&64),e.left=!(n&128),i.l+=18,e.name=iw(i,t-19),e}function ZE(i,t,e){e==null&&(e=ge(84+4*i.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),e.write_shift(1,n);for(var r=1;r<3;++r)e.write_shift(1,0);return fc({auto:1},e),e.write_shift(-4,-1),e.write_shift(-4,-1),m_(i,e),e.slice(0,e.l)}function qE(i){var t=fr(i);return[t]}function YE(i,t,e){return e==null&&(e=ge(8)),ho(t,e)}function XE(i){var t=go(i);return[t]}function KE(i,t,e){return e==null&&(e=ge(4)),_o(t,e)}function JE(i){var t=fr(i),e=i.read_shift(1);return[t,e,"b"]}function QE(i,t,e){return e==null&&(e=ge(9)),ho(t,e),e.write_shift(1,i.v?1:0),e}function eA(i){var t=go(i),e=i.read_shift(1);return[t,e,"b"]}function tA(i,t,e){return e==null&&(e=ge(5)),_o(t,e),e.write_shift(1,i.v?1:0),e}function iA(i){var t=fr(i),e=i.read_shift(1);return[t,e,"e"]}function nA(i,t,e){return e==null&&(e=ge(9)),ho(t,e),e.write_shift(1,i.v),e}function rA(i){var t=go(i),e=i.read_shift(1);return[t,e,"e"]}function aA(i,t,e){return e==null&&(e=ge(8)),_o(t,e),e.write_shift(1,i.v),e.write_shift(2,0),e.write_shift(1,0),e}function oA(i){var t=fr(i),e=i.read_shift(4);return[t,e,"s"]}function sA(i,t,e){return e==null&&(e=ge(12)),ho(t,e),e.write_shift(4,t.v),e}function lA(i){var t=go(i),e=i.read_shift(4);return[t,e,"s"]}function uA(i,t,e){return e==null&&(e=ge(8)),_o(t,e),e.write_shift(4,t.v),e}function cA(i){var t=fr(i),e=As(i);return[t,e,"n"]}function dA(i,t,e){return e==null&&(e=ge(16)),ho(t,e),mo(i.v,e),e}function mA(i){var t=go(i),e=As(i);return[t,e,"n"]}function fA(i,t,e){return e==null&&(e=ge(12)),_o(t,e),mo(i.v,e),e}function pA(i){var t=fr(i),e=f_(i);return[t,e,"n"]}function hA(i,t,e){return e==null&&(e=ge(12)),ho(t,e),p_(i.v,e),e}function gA(i){var t=go(i),e=f_(i);return[t,e,"n"]}function _A(i,t,e){return e==null&&(e=ge(8)),_o(t,e),p_(i.v,e),e}function vA(i){var t=fr(i),e=Yf(i);return[t,e,"is"]}function xA(i){var t=fr(i),e=xn(i);return[t,e,"str"]}function yA(i,t,e){return e==null&&(e=ge(12+4*i.v.length)),ho(t,e),nn(i.v,e),e.length>e.l?e.slice(0,e.l):e}function bA(i){var t=go(i),e=xn(i);return[t,e,"str"]}function CA(i,t,e){return e==null&&(e=ge(8+4*i.v.length)),_o(t,e),nn(i.v,e),e.length>e.l?e.slice(0,e.l):e}function wA(i,t,e){var n=i.l+t,r=fr(i);r.r=e["!row"];var a=i.read_shift(1),u=[r,a,"b"];if(e.cellFormula){i.l+=2;var p=Ac(i,n-i.l,e);u[3]=Cs(p,null,r,e.supbooks,e)}else i.l=n;return u}function SA(i,t,e){var n=i.l+t,r=fr(i);r.r=e["!row"];var a=i.read_shift(1),u=[r,a,"e"];if(e.cellFormula){i.l+=2;var p=Ac(i,n-i.l,e);u[3]=Cs(p,null,r,e.supbooks,e)}else i.l=n;return u}function TA(i,t,e){var n=i.l+t,r=fr(i);r.r=e["!row"];var a=As(i),u=[r,a,"n"];if(e.cellFormula){i.l+=2;var p=Ac(i,n-i.l,e);u[3]=Cs(p,null,r,e.supbooks,e)}else i.l=n;return u}function EA(i,t,e){var n=i.l+t,r=fr(i);r.r=e["!row"];var a=xn(i),u=[r,a,"str"];if(e.cellFormula){i.l+=2;var p=Ac(i,n-i.l,e);u[3]=Cs(p,null,r,e.supbooks,e)}else i.l=n;return u}var AA=vo,MA=Es;function FA(i,t){return t==null&&(t=ge(4)),t.write_shift(4,i),t}function kA(i,t){var e=i.l+t,n=vo(i,16),r=Xf(i),a=xn(i),u=xn(i),p=xn(i);i.l=e;var g={rfx:n,relId:r,loc:a,display:p};return u&&(g.Tooltip=u),g}function PA(i,t){var e=ge(50+4*(i[1].Target.length+(i[1].Tooltip||"").length));Es({s:tn(i[0]),e:tn(i[0])},e),Kf("rId"+t,e);var n=i[1].Target.indexOf("#"),r=n==-1?"":i[1].Target.slice(n+1);return nn(r||"",e),nn(i[1].Tooltip||"",e),nn("",e),e.slice(0,e.l)}function DA(){}function IA(i,t,e){var n=i.l+t,r=h_(i,16),a=i.read_shift(1),u=[r];if(u[2]=a,e.cellFormula){var p=bE(i,n-i.l,e);u[1]=p}else i.l=n;return u}function OA(i,t,e){var n=i.l+t,r=vo(i,16),a=[r];if(e.cellFormula){var u=wE(i,n-i.l,e);a[1]=u,i.l=n}else i.l=n;return a}function LA(i,t,e){e==null&&(e=ge(18));var n=Mc(i,t);e.write_shift(-4,i),e.write_shift(-4,i),e.write_shift(4,(n.width||10)*256),e.write_shift(4,0);var r=0;return t.hidden&&(r|=1),typeof n.width=="number"&&(r|=2),t.level&&(r|=t.level<<8),e.write_shift(2,r),e}var J_=["left","right","top","bottom","header","footer"];function RA(i){var t={};return J_.forEach(function(e){t[e]=As(i,8)}),t}function NA(i,t){return t==null&&(t=ge(6*8)),X_(i),J_.forEach(function(e){mo(i[e],t)}),t}function VA(i){var t=i.read_shift(2);return i.l+=28,{RTL:t&32}}function BA(i,t,e){e==null&&(e=ge(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),e.write_shift(2,n),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,100),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(4,0),e}function UA(i){var t=ge(24);return t.write_shift(4,4),t.write_shift(4,1),Es(i,t),t}function WA(i,t){return t==null&&(t=ge(16*4+2)),t.write_shift(2,i.password?I_(i.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(e){e[1]?t.write_shift(4,i[e[0]]!=null&&!i[e[0]]?1:0):t.write_shift(4,i[e[0]]!=null&&i[e[0]]?0:1)}),t}function jA(){}function HA(){}function zA(i,t,e,n,r,a,u){if(t.v===void 0)return!1;var p="";switch(t.t){case"b":p=t.v?"1":"0";break;case"d":t=Vn(t),t.z=t.z||ki[14],t.v=Nn(En(t.v)),t.t="n";break;case"n":case"e":p=""+t.v;break;default:p=t.v;break}var g={r:e,c:n};switch(g.s=Ra(r.cellXfs,t,r),t.l&&a["!links"].push([ni(g),t.l]),t.c&&a["!comments"].push([ni(g),t.c]),t.t){case"s":case"str":return r.bookSST?(p=np(r.Strings,t.v,r.revStrings),g.t="s",g.v=p,u?be(i,18,uA(t,g)):be(i,7,sA(t,g))):(g.t="str",u?be(i,17,CA(t,g)):be(i,6,yA(t,g))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?u?be(i,13,_A(t,g)):be(i,2,hA(t,g)):u?be(i,16,fA(t,g)):be(i,5,dA(t,g)),!0;case"b":return g.t="b",u?be(i,15,tA(t,g)):be(i,4,QE(t,g)),!0;case"e":return g.t="e",u?be(i,14,aA(t,g)):be(i,3,nA(t,g)),!0}return u?be(i,12,KE(t,g)):be(i,1,YE(t,g)),!0}function GA(i,t,e,n){var r=yi(t["!ref"]||"A1"),a,u="",p=[];be(i,145);var g=Array.isArray(t),v=r.e.r;t["!rows"]&&(v=Math.max(r.e.r,t["!rows"].length-1));for(var y=r.s.r;y<=v;++y){u=dn(y),jE(i,t,r,y);var M=!1;if(y<=r.e.r)for(var E=r.s.c;E<=r.e.c;++E){y===r.s.r&&(p[E]=vn(E)),a=p[E]+u;var A=g?(t[y]||[])[E]:t[a];if(!A){M=!1;continue}M=zA(i,A,y,E,n,t,M)}}be(i,146)}function $A(i,t){!t||!t["!merges"]||(be(i,177,FA(t["!merges"].length)),t["!merges"].forEach(function(e){be(i,176,MA(e))}),be(i,178))}function ZA(i,t){!t||!t["!cols"]||(be(i,390),t["!cols"].forEach(function(e,n){e&&be(i,60,LA(n,e))}),be(i,391))}function qA(i,t){!t||!t["!ref"]||(be(i,648),be(i,649,UA(yi(t["!ref"]))),be(i,650))}function YA(i,t,e){t["!links"].forEach(function(n){if(n[1].Target){var r=ti(e,-1,n[1].Target.replace(/#.*$/,""),Ht.HLINK);be(i,494,PA(n,r))}}),delete t["!links"]}function XA(i,t,e,n){if(t["!comments"].length>0){var r=ti(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Ht.VML);be(i,551,Kf("rId"+r)),t["!legacy"]=r}}function KA(i,t,e,n){if(t["!autofilter"]){var r=t["!autofilter"],a=typeof r.ref=="string"?r.ref:Hi(r.ref);e.Workbook||(e.Workbook={Sheets:[]}),e.Workbook.Names||(e.Workbook.Names=[]);var u=e.Workbook.Names,p=tr(a);p.s.r==p.e.r&&(p.e.r=tr(t["!ref"]).e.r,a=Hi(p));for(var g=0;g<u.length;++g){var v=u[g];if(v.Name=="_xlnm._FilterDatabase"&&v.Sheet==n){v.Ref="'"+e.SheetNames[n]+"'!"+a;break}}g==u.length&&u.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+e.SheetNames[n]+"'!"+a}),be(i,161,Es(yi(a))),be(i,162)}}function JA(i,t,e){be(i,133),be(i,137,BA(t,e)),be(i,138),be(i,134)}function QA(i,t){t["!protect"]&&be(i,535,WA(t["!protect"]))}function eM(i,t,e,n){var r=Rn(),a=e.SheetNames[i],u=e.Sheets[a]||{},p=a;try{e&&e.Workbook&&(p=e.Workbook.Sheets[i].CodeName||p)}catch{}var g=yi(u["!ref"]||"A1");if(g.e.c>16383||g.e.r>1048575){if(t.WTF)throw new Error("Range "+(u["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");g.e.c=Math.min(g.e.c,16383),g.e.r=Math.min(g.e.c,1048575)}return u["!links"]=[],u["!comments"]=[],be(r,129),(e.vbaraw||u["!outline"])&&be(r,147,ZE(p,u["!outline"])),be(r,148,zE(g)),JA(r,u,e.Workbook),ZA(r,u,i,t,e),GA(r,u,i,t,e),QA(r,u),KA(r,u,e,i),$A(r,u),YA(r,u,n),u["!margins"]&&be(r,476,NA(u["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&qA(r,u),XA(r,u,i,n),be(r,130),r.end()}function tM(i,t){i.l+=10;var e=xn(i,t-10);return{name:e}}var iM=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function nM(i){return!i.Workbook||!i.Workbook.WBProps?"false":I3(i.Workbook.WBProps.date1904)?"true":"false"}var rM="][*?/\\".split("");function Q_(i,t){if(i.length>31){if(t)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var e=!0;return rM.forEach(function(n){if(i.indexOf(n)!=-1){if(!t)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");e=!1}}),e}function aM(i,t,e){i.forEach(function(n,r){Q_(n);for(var a=0;a<r;++a)if(n==i[a])throw new Error("Duplicate Sheet Name: "+n);if(e){var u=t&&t[r]&&t[r].CodeName||n;if(u.charCodeAt(0)==95&&u.length>22)throw new Error("Bad Code Name: Worksheet"+u)}})}function oM(i){if(!i||!i.SheetNames||!i.Sheets)throw new Error("Invalid Workbook");if(!i.SheetNames.length)throw new Error("Workbook is empty");var t=i.Workbook&&i.Workbook.Sheets||[];aM(i.SheetNames,t,!!i.vbaraw);for(var e=0;e<i.SheetNames.length;++e)ME(i.Sheets[i.SheetNames[e]],i.SheetNames[e],e)}function e2(i){var t=[zi];t[t.length]=Ie("workbook",null,{xmlns:ws[0],"xmlns:r":en.r});var e=i.Workbook&&(i.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};i.Workbook&&i.Workbook.WBProps&&(iM.forEach(function(p){i.Workbook.WBProps[p[0]]!=null&&i.Workbook.WBProps[p[0]]!=p[1]&&(n[p[0]]=i.Workbook.WBProps[p[0]])}),i.Workbook.WBProps.CodeName&&(n.codeName=i.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Ie("workbookPr",null,n);var r=i.Workbook&&i.Workbook.Sheets||[],a=0;if(r&&r[0]&&r[0].Hidden){for(t[t.length]="<bookViews>",a=0;a!=i.SheetNames.length&&!(!r[a]||!r[a].Hidden);++a);a==i.SheetNames.length&&(a=0),t[t.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",a=0;a!=i.SheetNames.length;++a){var u={name:ii(i.SheetNames[a].slice(0,31))};if(u.sheetId=""+(a+1),u["r:id"]="rId"+(a+1),r[a])switch(r[a].Hidden){case 1:u.state="hidden";break;case 2:u.state="veryHidden";break}t[t.length]=Ie("sheet",null,u)}return t[t.length]="</sheets>",e&&(t[t.length]="<definedNames>",i.Workbook&&i.Workbook.Names&&i.Workbook.Names.forEach(function(p){var g={name:p.Name};p.Comment&&(g.comment=p.Comment),p.Sheet!=null&&(g.localSheetId=""+p.Sheet),p.Hidden&&(g.hidden="1"),p.Ref&&(t[t.length]=Ie("definedName",ii(p.Ref),g))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function sM(i,t){var e={};return e.Hidden=i.read_shift(4),e.iTabID=i.read_shift(4),e.strRelID=If(i,t-8),e.name=xn(i),e}function lM(i,t){return t||(t=ge(127)),t.write_shift(4,i.Hidden),t.write_shift(4,i.iTabID),Kf(i.strRelID,t),nn(i.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function uM(i,t){var e={},n=i.read_shift(4);e.defaultThemeVersion=i.read_shift(4);var r=t>8?xn(i):"";return r.length>0&&(e.CodeName=r),e.autoCompressPictures=!!(n&65536),e.backupFile=!!(n&64),e.checkCompatibility=!!(n&4096),e.date1904=!!(n&1),e.filterPrivacy=!!(n&8),e.hidePivotFieldList=!!(n&1024),e.promptedSolutions=!!(n&16),e.publishItems=!!(n&2048),e.refreshAllConnections=!!(n&262144),e.saveExternalLinkValues=!!(n&128),e.showBorderUnselectedTables=!!(n&4),e.showInkAnnotation=!!(n&32),e.showObjects=["all","placeholders","none"][n>>13&3],e.showPivotChartFilter=!!(n&32768),e.updateLinks=["userSet","never","always"][n>>8&3],e}function cM(i,t){t||(t=ge(72));var e=0;return i&&i.filterPrivacy&&(e|=8),t.write_shift(4,e),t.write_shift(4,0),m_(i&&i.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function dM(i,t,e){var n=i.l+t;i.l+=4,i.l+=1;var r=i.read_shift(4),a=nw(i),u=CE(i,0,e),p=Xf(i);i.l=n;var g={Name:a,Ptg:u};return r<268435455&&(g.Sheet=r),p&&(g.Comment=p),g}function mM(i,t){be(i,143);for(var e=0;e!=t.SheetNames.length;++e){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[e]&&t.Workbook.Sheets[e].Hidden||0,r={Hidden:n,iTabID:e+1,strRelID:"rId"+(e+1),name:t.SheetNames[e]};be(i,156,lM(r))}be(i,144)}function fM(i,t){t||(t=ge(127));for(var e=0;e!=4;++e)t.write_shift(4,0);return nn("SheetJS",t),nn(t0.version,t),nn(t0.version,t),nn("7262",t),t.length>t.l?t.slice(0,t.l):t}function pM(i,t){t||(t=ge(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,i),t.write_shift(4,i);var e=120;return t.write_shift(1,e),t.length>t.l?t.slice(0,t.l):t}function hM(i,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var e=t.Workbook.Sheets,n=0,r=-1,a=-1;n<e.length;++n)!e[n]||!e[n].Hidden&&r==-1?r=n:e[n].Hidden==1&&a==-1&&(a=n);a>r||(be(i,135),be(i,158,pM(r)),be(i,136))}}function gM(i,t){var e=Rn();return be(e,131),be(e,128,fM()),be(e,153,cM(i.Workbook&&i.Workbook.WBProps||null)),hM(e,i,t),mM(e,i,t),be(e,132),e.end()}function _M(i,t,e){return(t.slice(-4)===".bin"?gM:e2)(i,e)}function vM(i,t,e,n,r){return(t.slice(-4)===".bin"?eM:K_)(i,e,n,r)}function xM(i,t,e){return(t.slice(-4)===".bin"?NS:R_)(i,e)}function yM(i,t,e){return(t.slice(-4)===".bin"?cS:D_)(i,e)}function bM(i,t,e){return(t.slice(-4)===".bin"?QS:W_)(i,e)}function CM(i){return(i.slice(-4)===".bin"?GS:B_)()}function wM(i,t){var e=[];return i.Props&&e.push(xw(i.Props,t)),i.Custprops&&e.push(yw(i.Props,i.Custprops,t)),e.join("")}function SM(){return""}function TM(i,t){var e=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,r){var a=[];a.push(Ie("NumberFormat",null,{"ss:Format":ii(ki[n.numFmtId])}));var u={"ss:ID":"s"+(21+r)};e.push(Ie("Style",a.join(""),u))}),Ie("Styles",e.join(""))}function t2(i){return Ie("NamedRange",null,{"ss:Name":i.Name,"ss:RefersTo":"="+tp(i.Ref,{r:0,c:0})})}function EM(i){if(!((i||{}).Workbook||{}).Names)return"";for(var t=i.Workbook.Names,e=[],n=0;n<t.length;++n){var r=t[n];r.Sheet==null&&(r.Name.match(/^_xlfn\./)||e.push(t2(r)))}return Ie("Names",e.join(""))}function AM(i,t,e,n){if(!i||!((n||{}).Workbook||{}).Names)return"";for(var r=n.Workbook.Names,a=[],u=0;u<r.length;++u){var p=r[u];p.Sheet==e&&(p.Name.match(/^_xlfn\./)||a.push(t2(p)))}return a.join("")}function MM(i,t,e,n){if(!i)return"";var r=[];if(i["!margins"]&&(r.push("<PageSetup>"),i["!margins"].header&&r.push(Ie("Header",null,{"x:Margin":i["!margins"].header})),i["!margins"].footer&&r.push(Ie("Footer",null,{"x:Margin":i["!margins"].footer})),r.push(Ie("PageMargins",null,{"x:Bottom":i["!margins"].bottom||"0.75","x:Left":i["!margins"].left||"0.7","x:Right":i["!margins"].right||"0.7","x:Top":i["!margins"].top||"0.75"})),r.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[e])if(n.Workbook.Sheets[e].Hidden)r.push(Ie("Visible",n.Workbook.Sheets[e].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<e&&!(n.Workbook.Sheets[a]&&!n.Workbook.Sheets[a].Hidden);++a);a==e&&r.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&r.push("<DisplayRightToLeft/>"),i["!protect"]&&(r.push(cn("ProtectContents","True")),i["!protect"].objects&&r.push(cn("ProtectObjects","True")),i["!protect"].scenarios&&r.push(cn("ProtectScenarios","True")),i["!protect"].selectLockedCells!=null&&!i["!protect"].selectLockedCells?r.push(cn("EnableSelection","NoSelection")):i["!protect"].selectUnlockedCells!=null&&!i["!protect"].selectUnlockedCells&&r.push(cn("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(u){i["!protect"][u[0]]&&r.push("<"+u[1]+"/>")})),r.length==0?"":Ie("WorksheetOptions",r.join(""),{xmlns:er.x})}function FM(i){return i.map(function(t){var e=D3(t.t||""),n=Ie("ss:Data",e,{xmlns:"http://www.w3.org/TR/REC-html40"});return Ie("Comment",n,{"ss:Author":t.a})}).join("")}function kM(i,t,e,n,r,a,u){if(!i||i.v==null&&i.f==null)return"";var p={};if(i.f&&(p["ss:Formula"]="="+ii(tp(i.f,u))),i.F&&i.F.slice(0,t.length)==t){var g=tn(i.F.slice(t.length+1));p["ss:ArrayRange"]="RC:R"+(g.r==u.r?"":"["+(g.r-u.r)+"]")+"C"+(g.c==u.c?"":"["+(g.c-u.c)+"]")}if(i.l&&i.l.Target&&(p["ss:HRef"]=ii(i.l.Target),i.l.Tooltip&&(p["x:HRefScreenTip"]=ii(i.l.Tooltip))),e["!merges"])for(var v=e["!merges"],y=0;y!=v.length;++y)v[y].s.c!=u.c||v[y].s.r!=u.r||(v[y].e.c>v[y].s.c&&(p["ss:MergeAcross"]=v[y].e.c-v[y].s.c),v[y].e.r>v[y].s.r&&(p["ss:MergeDown"]=v[y].e.r-v[y].s.r));var M="",E="";switch(i.t){case"z":if(!n.sheetStubs)return"";break;case"n":M="Number",E=String(i.v);break;case"b":M="Boolean",E=i.v?"1":"0";break;case"e":M="Error",E=c0[i.v];break;case"d":M="DateTime",E=new Date(i.v).toISOString(),i.z==null&&(i.z=i.z||ki[14]);break;case"s":M="String",E=P3(i.v||"");break}var A=Ra(n.cellXfs,i,n);p["ss:StyleID"]="s"+(21+A),p["ss:Index"]=u.c+1;var O=i.v!=null?E:"",F=i.t=="z"?"":'<Data ss:Type="'+M+'">'+O+"</Data>";return(i.c||[]).length>0&&(F+=FM(i.c)),Ie("Cell",F,p)}function PM(i,t){var e='<Row ss:Index="'+(i+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=L_(t.hpt)),t.hpx&&(e+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(e+=' ss:Hidden="1"')),e+">"}function DM(i,t,e,n){if(!i["!ref"])return"";var r=yi(i["!ref"]),a=i["!merges"]||[],u=0,p=[];i["!cols"]&&i["!cols"].forEach(function(D,ee){Qf(D);var ie=!!D.width,te=Mc(ee,D),pe={"ss:Index":ee+1};ie&&(pe["ss:Width"]=hc(te.width)),D.hidden&&(pe["ss:Hidden"]="1"),p.push(Ie("Column",null,pe))});for(var g=Array.isArray(i),v=r.s.r;v<=r.e.r;++v){for(var y=[PM(v,(i["!rows"]||[])[v])],M=r.s.c;M<=r.e.c;++M){var E=!1;for(u=0;u!=a.length;++u)if(!(a[u].s.c>M)&&!(a[u].s.r>v)&&!(a[u].e.c<M)&&!(a[u].e.r<v)){(a[u].s.c!=M||a[u].s.r!=v)&&(E=!0);break}if(!E){var A={r:v,c:M},O=ni(A),F=g?(i[v]||[])[M]:i[O];y.push(kM(F,O,i,t,e,n,A))}}y.push("</Row>"),y.length>2&&p.push(y.join(""))}return p.join("")}function IM(i,t,e){var n=[],r=e.SheetNames[i],a=e.Sheets[r],u=a?AM(a,t,i,e):"";return u.length>0&&n.push("<Names>"+u+"</Names>"),u=a?DM(a,t,i,e):"",u.length>0&&n.push("<Table>"+u+"</Table>"),n.push(MM(a,t,i,e)),n.join("")}function OM(i,t){t||(t={}),i.SSF||(i.SSF=Vn(ki)),i.SSF&&(Cc(),bc(i.SSF),t.revssf=wc(i.SSF),t.revssf[i.SSF[65535]]=0,t.ssf=i.SSF,t.cellXfs=[],Ra(t.cellXfs,{},{revssf:{General:0}}));var e=[];e.push(wM(i,t)),e.push(SM(i,t)),e.push(""),e.push("");for(var n=0;n<i.SheetNames.length;++n)e.push(Ie("Worksheet",IM(n,t,i),{"ss:Name":ii(i.SheetNames[n])}));return e[2]=TM(i,t),e[3]=EM(i,t),zi+Ie("Workbook",e.join(""),{xmlns:er.ss,"xmlns:o":er.o,"xmlns:x":er.x,"xmlns:ss":er.ss,"xmlns:dt":er.dt,"xmlns:html":er.html})}var Mf={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function LM(i,t){var e=[],n=[],r=[],a=0,u,p=s6(y6,"n"),g=s6(b6,"n");if(i.Props)for(u=mn(i.Props),a=0;a<u.length;++a)(Object.prototype.hasOwnProperty.call(p,u[a])?e:Object.prototype.hasOwnProperty.call(g,u[a])?n:r).push([u[a],i.Props[u[a]]]);if(i.Custprops)for(u=mn(i.Custprops),a=0;a<u.length;++a)Object.prototype.hasOwnProperty.call(i.Props||{},u[a])||(Object.prototype.hasOwnProperty.call(p,u[a])?e:Object.prototype.hasOwnProperty.call(g,u[a])?n:r).push([u[a],i.Custprops[u[a]]]);var v=[];for(a=0;a<r.length;++a)T_.indexOf(r[a][0])>-1||C_.indexOf(r[a][0])>-1||r[a][1]!=null&&v.push(r[a]);n.length&&si.utils.cfb_add(t,"/SummaryInformation",E6(n,Mf.SI,g,b6)),(e.length||v.length)&&si.utils.cfb_add(t,"/DocumentSummaryInformation",E6(e,Mf.DSI,p,y6,v.length?v:null,Mf.UDI))}function RM(i,t){var e=t||{},n=si.utils.cfb_new({root:"R"}),r="/Workbook";switch(e.bookType||"xls"){case"xls":e.bookType="biff8";case"xla":e.bookType||(e.bookType="xla");case"biff8":r="/Workbook",e.biff=8;break;case"biff5":r="/Book",e.biff=5;break;default:throw new Error("invalid type "+e.bookType+" for XLS CFB")}return si.utils.cfb_add(n,r,i2(i,e)),e.biff==8&&(i.Props||i.Custprops)&&LM(i,n),e.biff==8&&i.vbaraw&&eT(n,si.read(i.vbaraw,{type:typeof i.vbaraw=="string"?"binary":"buffer"})),n}var NM={0:{f:UE},1:{f:qE},2:{f:pA},3:{f:iA},4:{f:JE},5:{f:cA},6:{f:xA},7:{f:oA},8:{f:EA},9:{f:TA},10:{f:wA},11:{f:SA},12:{f:XE},13:{f:gA},14:{f:rA},15:{f:eA},16:{f:mA},17:{f:bA},18:{f:lA},19:{f:Yf},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:dM},40:{},42:{},43:{f:xS},44:{f:_S},45:{f:CS},46:{f:SS},47:{f:wS},48:{},49:{f:X3},50:{},51:{f:US},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Kw},62:{f:vA},63:{f:$S},64:{f:jA},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Gr,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:VA},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:$E},148:{f:HE,p:16},151:{f:DA},152:{},153:{f:uM},154:{},155:{},156:{f:sM},157:{},158:{},159:{T:1,f:sS},160:{T:-1},161:{T:1,f:vo},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:AA},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:VS},336:{T:-1},337:{f:HS,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:If},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Gw},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:IA},427:{f:OA},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:RA},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:GE},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:kA},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:If},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:KS},633:{T:1},634:{T:-1},635:{T:1,f:YS},636:{T:-1},637:{f:ew},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:tM},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:HA},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Re(i,t,e,n){var r=t;if(!isNaN(r)){var a=n||(e||[]).length||0,u=i.next(4);u.write_shift(2,r),u.write_shift(2,a),a>0&&$f(e)&&i.push(e)}}function VM(i,t,e,n){var r=n||(e||[]).length||0;if(r<=8224)return Re(i,t,e,r);var a=t;if(!isNaN(a)){for(var u=e.parts||[],p=0,g=0,v=0;v+(u[p]||8224)<=8224;)v+=u[p]||8224,p++;var y=i.next(4);for(y.write_shift(2,a),y.write_shift(2,v),i.push(e.slice(g,g+v)),g+=v;g<r;){for(y=i.next(4),y.write_shift(2,60),v=0;v+(u[p]||8224)<=8224;)v+=u[p]||8224,p++;y.write_shift(2,v),i.push(e.slice(g,g+v)),g+=v}}}function m0(i,t,e){return i||(i=ge(7)),i.write_shift(2,t),i.write_shift(2,e),i.write_shift(2,0),i.write_shift(1,0),i}function BM(i,t,e,n){var r=ge(9);return m0(r,i,t),A_(e,n||"b",r),r}function UM(i,t,e){var n=ge(8+2*e.length);return m0(n,i,t),n.write_shift(1,e.length),n.write_shift(e.length,e,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function WM(i,t,e,n){if(t.v!=null)switch(t.t){case"d":case"n":var r=t.t=="d"?Nn(En(t.v)):t.v;r==(r|0)&&r>=0&&r<65536?Re(i,2,tS(e,n,r)):Re(i,3,eS(e,n,r));return;case"b":case"e":Re(i,5,BM(e,n,t.v,t.t));return;case"s":case"str":Re(i,4,UM(e,n,(t.v||"").slice(0,255)));return}Re(i,1,m0(null,e,n))}function jM(i,t,e,n){var r=Array.isArray(t),a=yi(t["!ref"]||"A1"),u,p="",g=[];if(a.e.c>255||a.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),u=Hi(a)}for(var v=a.s.r;v<=a.e.r;++v){p=dn(v);for(var y=a.s.c;y<=a.e.c;++y){v===a.s.r&&(g[y]=vn(y)),u=g[y]+p;var M=r?(t[v]||[])[y]:t[u];M&&WM(i,M,v,y,n)}}}function HM(i,t){var e=t||{};zr!=null&&e.dense==null&&(e.dense=zr);for(var n=Rn(),r=0,a=0;a<i.SheetNames.length;++a)i.SheetNames[a]==e.sheet&&(r=a);if(r==0&&e.sheet&&i.SheetNames[0]!=e.sheet)throw new Error("Sheet not found: "+e.sheet);return Re(n,e.biff==4?1033:e.biff==3?521:9,Jf(i,16,e)),jM(n,i.Sheets[i.SheetNames[r]],r,e,i),Re(n,10),n.end()}function zM(i,t,e){Re(i,49,Nw({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},e))}function GM(i,t,e){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)t[r]!=null&&Re(i,1054,Uw(r,t[r],e))})}function $M(i,t){var e=ge(19);e.write_shift(4,2151),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(2,3),e.write_shift(1,1),e.write_shift(4,0),Re(i,2151,e),e=ge(39),e.write_shift(4,2152),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(2,3),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(2,1),e.write_shift(4,4),e.write_shift(2,0),k_(yi(t["!ref"]||"A1"),e),e.write_shift(4,4),Re(i,2152,e)}function ZM(i,t){for(var e=0;e<16;++e)Re(i,224,M6({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){Re(i,224,M6(n,0,t))})}function qM(i,t){for(var e=0;e<t["!links"].length;++e){var n=t["!links"][e];Re(i,440,qw(n)),n[1].Tooltip&&Re(i,2048,Yw(n))}delete t["!links"]}function YM(i,t){if(t){var e=0;t.forEach(function(n,r){++e<=256&&n&&Re(i,125,Jw(Mc(r,n),r))})}}function XM(i,t,e,n,r){var a=16+Ra(r.cellXfs,t,r);if(t.v==null&&!t.bf){Re(i,513,fo(e,n,a));return}if(t.bf)Re(i,6,yE(t,e,n,r,a));else switch(t.t){case"d":case"n":var u=t.t=="d"?Nn(En(t.v)):t.v;Re(i,515,zw(e,n,u,a,r));break;case"b":case"e":Re(i,517,Hw(e,n,t.v,a,r,t.t));break;case"s":case"str":if(r.bookSST){var p=np(r.Strings,t.v,r.revStrings);Re(i,253,Vw(e,n,p,a,r))}else Re(i,516,Bw(e,n,(t.v||"").slice(0,255),a,r));break;default:Re(i,513,fo(e,n,a))}}function KM(i,t,e){var n=Rn(),r=e.SheetNames[i],a=e.Sheets[r]||{},u=(e||{}).Workbook||{},p=(u.Sheets||[])[i]||{},g=Array.isArray(a),v=t.biff==8,y,M="",E=[],A=yi(a["!ref"]||"A1"),O=v?65536:16384;if(A.e.c>255||A.e.r>=O){if(t.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");A.e.c=Math.min(A.e.c,255),A.e.r=Math.min(A.e.c,O-1)}Re(n,2057,Jf(e,16,t)),Re(n,13,mr(1)),Re(n,12,mr(100)),Re(n,15,Tn(!0)),Re(n,17,Tn(!1)),Re(n,16,mo(.001)),Re(n,95,Tn(!0)),Re(n,42,Tn(!1)),Re(n,43,Tn(!1)),Re(n,130,mr(1)),Re(n,128,jw([0,0])),Re(n,131,Tn(!1)),Re(n,132,Tn(!1)),v&&YM(n,a["!cols"]),Re(n,512,Ww(A,t)),v&&(a["!links"]=[]);for(var F=A.s.r;F<=A.e.r;++F){M=dn(F);for(var D=A.s.c;D<=A.e.c;++D){F===A.s.r&&(E[D]=vn(D)),y=E[D]+M;var ee=g?(a[F]||[])[D]:a[y];ee&&(XM(n,ee,F,D,t),v&&ee.l&&a["!links"].push([y,ee.l]))}}var ie=p.CodeName||p.name||r;return v&&Re(n,574,Rw((u.Views||[])[0])),v&&(a["!merges"]||[]).length&&Re(n,229,Zw(a["!merges"])),v&&qM(n,a),Re(n,442,F_(ie,t)),v&&$M(n,a),Re(n,10),n.end()}function JM(i,t,e){var n=Rn(),r=(i||{}).Workbook||{},a=r.Sheets||[],u=r.WBProps||{},p=e.biff==8,g=e.biff==5;if(Re(n,2057,Jf(i,5,e)),e.bookType=="xla"&&Re(n,135),Re(n,225,p?mr(1200):null),Re(n,193,ww(2)),g&&Re(n,191),g&&Re(n,192),Re(n,226),Re(n,92,Dw("SheetJS",e)),Re(n,66,mr(p?1200:1252)),p&&Re(n,353,mr(0)),p&&Re(n,448),Re(n,317,Qw(i.SheetNames.length)),p&&i.vbaraw&&Re(n,211),p&&i.vbaraw){var v=u.CodeName||"ThisWorkbook";Re(n,442,F_(v,e))}Re(n,156,mr(17)),Re(n,25,Tn(!1)),Re(n,18,Tn(!1)),Re(n,19,mr(0)),p&&Re(n,431,Tn(!1)),p&&Re(n,444,mr(0)),Re(n,61,Lw(e)),Re(n,64,Tn(!1)),Re(n,141,mr(0)),Re(n,34,Tn(nM(i)=="true")),Re(n,14,Tn(!0)),p&&Re(n,439,Tn(!1)),Re(n,218,mr(0)),zM(n,i,e),GM(n,i.SSF,e),ZM(n,e),p&&Re(n,352,Tn(!1));var y=n.end(),M=Rn();p&&Re(M,140,Xw()),p&&e.Strings&&VM(M,252,Ow(e.Strings,e)),Re(M,10);var E=M.end(),A=Rn(),O=0,F=0;for(F=0;F<i.SheetNames.length;++F)O+=(p?12:11)+(p?2:1)*i.SheetNames[F].length;var D=y.length+O+E.length;for(F=0;F<i.SheetNames.length;++F){var ee=a[F]||{};Re(A,133,Iw({pos:D,hs:ee.Hidden||0,dt:0,name:i.SheetNames[F]},e)),D+=t[F].length}var ie=A.end();if(O!=ie.length)throw new Error("BS8 "+O+" != "+ie.length);var te=[];return y.length&&te.push(y),ie.length&&te.push(ie),E.length&&te.push(E),un(te)}function QM(i,t){var e=t||{},n=[];i&&!i.SSF&&(i.SSF=Vn(ki)),i&&i.SSF&&(Cc(),bc(i.SSF),e.revssf=wc(i.SSF),e.revssf[i.SSF[65535]]=0,e.ssf=i.SSF),e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,rp(e),e.cellXfs=[],Ra(e.cellXfs,{},{revssf:{General:0}}),i.Props||(i.Props={});for(var r=0;r<i.SheetNames.length;++r)n[n.length]=KM(r,e,i);return n.unshift(JM(i,n,e)),un(n)}function i2(i,t){for(var e=0;e<=i.SheetNames.length;++e){var n=i.Sheets[i.SheetNames[e]];if(!(!n||!n["!ref"])){var r=tr(n["!ref"]);r.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+i.SheetNames[e]+"' extends beyond column IV (255).  Data may be lost.")}}var a=t||{};switch(a.biff||2){case 8:case 5:return QM(i,t);case 4:case 3:case 2:return HM(i,t)}throw new Error("invalid type "+a.bookType+" for BIFF")}function e5(i,t,e,n){for(var r=i["!merges"]||[],a=[],u=t.s.c;u<=t.e.c;++u){for(var p=0,g=0,v=0;v<r.length;++v)if(!(r[v].s.r>e||r[v].s.c>u)&&!(r[v].e.r<e||r[v].e.c<u)){if(r[v].s.r<e||r[v].s.c<u){p=-1;break}p=r[v].e.r-r[v].s.r+1,g=r[v].e.c-r[v].s.c+1;break}if(!(p<0)){var y=ni({r:e,c:u}),M=n.dense?(i[e]||[])[u]:i[y],E=M&&M.v!=null&&(M.h||k3(M.w||(da(M),M.w)||""))||"",A={};p>1&&(A.rowspan=p),g>1&&(A.colspan=g),n.editable?E='<span contenteditable="true">'+E+"</span>":M&&(A["data-t"]=M&&M.t||"z",M.v!=null&&(A["data-v"]=M.v),M.z!=null&&(A["data-z"]=M.z),M.l&&(M.l.Target||"#").charAt(0)!="#"&&(E='<a href="'+M.l.Target+'">'+E+"</a>")),A.id=(n.id||"sjs")+"-"+y,a.push(Ie("td",E,A))}}var O="<tr>";return O+a.join("")+"</tr>"}var t5='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',i5="</body></html>";function n5(i,t,e){var n=[];return n.join("")+"<table"+(e&&e.id?' id="'+e.id+'"':"")+">"}function n2(i,t){var e=t||{},n=e.header!=null?e.header:t5,r=e.footer!=null?e.footer:i5,a=[n],u=tr(i["!ref"]);e.dense=Array.isArray(i),a.push(n5(i,u,e));for(var p=u.s.r;p<=u.e.r;++p)a.push(e5(i,u,p,e));return a.push("</table>"+r),a.join("")}function r2(i,t,e){var n=e||{};zr!=null&&(n.dense=zr);var r=0,a=0;if(n.origin!=null)if(typeof n.origin=="number")r=n.origin;else{var u=typeof n.origin=="string"?tn(n.origin):n.origin;r=u.r,a=u.c}var p=t.getElementsByTagName("tr"),g=Math.min(n.sheetRows||1e7,p.length),v={s:{r:0,c:0},e:{r,c:a}};if(i["!ref"]){var y=tr(i["!ref"]);v.s.r=Math.min(v.s.r,y.s.r),v.s.c=Math.min(v.s.c,y.s.c),v.e.r=Math.max(v.e.r,y.e.r),v.e.c=Math.max(v.e.c,y.e.c),r==-1&&(v.e.r=r=y.e.r+1)}var M=[],E=0,A=i["!rows"]||(i["!rows"]=[]),O=0,F=0,D=0,ee=0,ie=0,te=0;for(i["!cols"]||(i["!cols"]=[]);O<p.length&&F<g;++O){var pe=p[O];if(L6(pe)){if(n.display)continue;A[F]={hidden:!0}}var Ce=pe.children;for(D=ee=0;D<Ce.length;++D){var ze=Ce[D];if(!(n.display&&L6(ze))){var ne=ze.hasAttribute("data-v")?ze.getAttribute("data-v"):ze.hasAttribute("v")?ze.getAttribute("v"):O3(ze.innerHTML),xe=ze.getAttribute("data-z")||ze.getAttribute("z");for(E=0;E<M.length;++E){var me=M[E];me.s.c==ee+a&&me.s.r<F+r&&F+r<=me.e.r&&(ee=me.e.c+1-a,E=-1)}te=+ze.getAttribute("colspan")||1,((ie=+ze.getAttribute("rowspan")||1)>1||te>1)&&M.push({s:{r:F+r,c:ee+a},e:{r:F+r+(ie||1)-1,c:ee+a+(te||1)-1}});var _e={t:"s",v:ne},Ae=ze.getAttribute("data-t")||ze.getAttribute("t")||"";ne!=null&&(ne.length==0?_e.t=Ae||"z":n.raw||ne.trim().length==0||Ae=="s"||(ne==="TRUE"?_e={t:"b",v:!0}:ne==="FALSE"?_e={t:"b",v:!1}:isNaN(la(ne))?isNaN(r0(ne).getDate())||(_e={t:"d",v:En(ne)},n.cellDates||(_e={t:"n",v:Nn(_e.v)}),_e.z=n.dateNF||ki[14]):_e={t:"n",v:la(ne)})),_e.z===void 0&&xe!=null&&(_e.z=xe);var we="",Ke=ze.getElementsByTagName("A");if(Ke&&Ke.length)for(var mt=0;mt<Ke.length&&!(Ke[mt].hasAttribute("href")&&(we=Ke[mt].getAttribute("href"),we.charAt(0)!="#"));++mt);we&&we.charAt(0)!="#"&&(_e.l={Target:we}),n.dense?(i[F+r]||(i[F+r]=[]),i[F+r][ee+a]=_e):i[ni({c:ee+a,r:F+r})]=_e,v.e.c<ee+a&&(v.e.c=ee+a),ee+=te}}++F}return M.length&&(i["!merges"]=(i["!merges"]||[]).concat(M)),v.e.r=Math.max(v.e.r,F-1+r),i["!ref"]=Hi(v),F>=g&&(i["!fullref"]=Hi((v.e.r=p.length-O+F-1+r,v))),i}function a2(i,t){var e=t||{},n=e.dense?[]:{};return r2(n,i,t)}function r5(i,t){return po(a2(i,t),t)}function L6(i){var t="",e=a5(i);return e&&(t=e(i).getPropertyValue("display")),t||(t=i.style&&i.style.display),t==="none"}function a5(i){return i.ownerDocument.defaultView&&typeof i.ownerDocument.defaultView.getComputedStyle=="function"?i.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var o5=function(){var i=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+a0({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+i+"</office:document-styles>";return function(){return zi+t}}(),R6=function(){var i=function(a){return ii(a).replace(/  +/g,function(u){return'<text:s text:c="'+u.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,e=`          <table:covered-table-cell/>
`,n=function(a,u,p){var g=[];g.push('      <table:table table:name="'+ii(u.SheetNames[p])+`" table:style-name="ta1">
`);var v=0,y=0,M=tr(a["!ref"]||"A1"),E=a["!merges"]||[],A=0,O=Array.isArray(a);if(a["!cols"])for(y=0;y<=M.e.c;++y)g.push("        <table:table-column"+(a["!cols"][y]?' table:style-name="co'+a["!cols"][y].ods+'"':"")+`></table:table-column>
`);var F="",D=a["!rows"]||[];for(v=0;v<M.s.r;++v)F=D[v]?' table:style-name="ro'+D[v].ods+'"':"",g.push("        <table:table-row"+F+`></table:table-row>
`);for(;v<=M.e.r;++v){for(F=D[v]?' table:style-name="ro'+D[v].ods+'"':"",g.push("        <table:table-row"+F+`>
`),y=0;y<M.s.c;++y)g.push(t);for(;y<=M.e.c;++y){var ee=!1,ie={},te="";for(A=0;A!=E.length;++A)if(!(E[A].s.c>y)&&!(E[A].s.r>v)&&!(E[A].e.c<y)&&!(E[A].e.r<v)){(E[A].s.c!=y||E[A].s.r!=v)&&(ee=!0),ie["table:number-columns-spanned"]=E[A].e.c-E[A].s.c+1,ie["table:number-rows-spanned"]=E[A].e.r-E[A].s.r+1;break}if(ee){g.push(e);continue}var pe=ni({r:v,c:y}),Ce=O?(a[v]||[])[y]:a[pe];if(Ce&&Ce.f&&(ie["table:formula"]=ii(EE(Ce.f)),Ce.F&&Ce.F.slice(0,pe.length)==pe)){var ze=tr(Ce.F);ie["table:number-matrix-columns-spanned"]=ze.e.c-ze.s.c+1,ie["table:number-matrix-rows-spanned"]=ze.e.r-ze.s.r+1}if(!Ce){g.push(t);continue}switch(Ce.t){case"b":te=Ce.v?"TRUE":"FALSE",ie["office:value-type"]="boolean",ie["office:boolean-value"]=Ce.v?"true":"false";break;case"n":te=Ce.w||String(Ce.v||0),ie["office:value-type"]="float",ie["office:value"]=Ce.v||0;break;case"s":case"str":te=Ce.v==null?"":Ce.v,ie["office:value-type"]="string";break;case"d":te=Ce.w||En(Ce.v).toISOString(),ie["office:value-type"]="date",ie["office:date-value"]=En(Ce.v).toISOString(),ie["table:style-name"]="ce1";break;default:g.push(t);continue}var ne=i(te);if(Ce.l&&Ce.l.Target){var xe=Ce.l.Target;xe=xe.charAt(0)=="#"?"#"+AE(xe.slice(1)):xe,xe.charAt(0)!="#"&&!xe.match(/^\w+:/)&&(xe="../"+xe),ne=Ie("text:a",ne,{"xlink:href":xe.replace(/&/g,"&amp;")})}g.push("          "+Ie("table:table-cell",Ie("text:p",ne,{}),ie)+`
`)}g.push(`        </table:table-row>
`)}return g.push(`      </table:table>
`),g.join("")},r=function(a,u){a.push(` <office:automatic-styles>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var p=0;u.SheetNames.map(function(v){return u.Sheets[v]}).forEach(function(v){if(v&&v["!cols"]){for(var y=0;y<v["!cols"].length;++y)if(v["!cols"][y]){var M=v["!cols"][y];if(M.width==null&&M.wpx==null&&M.wch==null)continue;Qf(M),M.ods=p;var E=v["!cols"][y].wpx+"px";a.push('  <style:style style:name="co'+p+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+E+`"/>
`),a.push(`  </style:style>
`),++p}}});var g=0;u.SheetNames.map(function(v){return u.Sheets[v]}).forEach(function(v){if(v&&v["!rows"]){for(var y=0;y<v["!rows"].length;++y)if(v["!rows"][y]){v["!rows"][y].ods=g;var M=v["!rows"][y].hpx+"px";a.push('  <style:style style:name="ro'+g+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+M+`"/>
`),a.push(`  </style:style>
`),++g}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),a.push(` </office:automatic-styles>
`)};return function(u,p){var g=[zi],v=a0({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),y=a0({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});p.bookType=="fods"?(g.push("<office:document"+v+y+`>
`),g.push(y_().replace(/office:document-meta/g,"office:meta"))):g.push("<office:document-content"+v+`>
`),r(g,u),g.push(`  <office:body>
`),g.push(`    <office:spreadsheet>
`);for(var M=0;M!=u.SheetNames.length;++M)g.push(n(u.Sheets[u.SheetNames[M]],u,M,p));return g.push(`    </office:spreadsheet>
`),g.push(`  </office:body>
`),p.bookType=="fods"?g.push("</office:document>"):g.push("</office:document-content>"),g.join("")}}();function o2(i,t){if(t.bookType=="fods")return R6(i,t);var e=Vf(),n="",r=[],a=[];return n="mimetype",wt(e,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",wt(e,n,R6(i,t)),r.push([n,"text/xml"]),a.push([n,"ContentFile"]),n="styles.xml",wt(e,n,o5(i,t)),r.push([n,"text/xml"]),a.push([n,"StylesFile"]),n="meta.xml",wt(e,n,zi+y_()),r.push([n,"text/xml"]),a.push([n,"MetadataFile"]),n="manifest.rdf",wt(e,n,vw(a)),r.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",wt(e,n,gw(r)),e}function vc(i){return new DataView(i.buffer,i.byteOffset,i.byteLength)}function s5(i){return typeof TextEncoder<"u"?new TextEncoder().encode(i):Er(oa(i))}function l5(i,t){e:for(var e=0;e<=i.length-t.length;++e){for(var n=0;n<t.length;++n)if(i[e+n]!=t[n])continue e;return!0}return!1}function La(i){var t=i.reduce(function(r,a){return r+a.length},0),e=new Uint8Array(t),n=0;return i.forEach(function(r){e.set(r,n),n+=r.length}),e}function u5(i,t,e){var n=Math.floor(e==0?0:Math.LOG10E*Math.log(Math.abs(e)))+6176-20,r=e/Math.pow(10,n-6176);i[t+15]|=n>>7,i[t+14]|=(n&127)<<1;for(var a=0;r>=1;++a,r/=256)i[t+a]=r&255;i[t+15]|=e>=0?0:128}function o0(i,t){var e=t?t[0]:0,n=i[e]&127;e:if(i[e++]>=128&&(n|=(i[e]&127)<<7,i[e++]<128||(n|=(i[e]&127)<<14,i[e++]<128)||(n|=(i[e]&127)<<21,i[e++]<128)||(n+=(i[e]&127)*Math.pow(2,28),++e,i[e++]<128)||(n+=(i[e]&127)*Math.pow(2,35),++e,i[e++]<128)||(n+=(i[e]&127)*Math.pow(2,42),++e,i[e++]<128)))break e;return t&&(t[0]=e),n}function ei(i){var t=new Uint8Array(7);t[0]=i&127;var e=1;e:if(i>127){if(t[e-1]|=128,t[e]=i>>7&127,++e,i<=16383||(t[e-1]|=128,t[e]=i>>14&127,++e,i<=2097151)||(t[e-1]|=128,t[e]=i>>21&127,++e,i<=268435455)||(t[e-1]|=128,t[e]=i/256>>>21&127,++e,i<=34359738367)||(t[e-1]|=128,t[e]=i/65536>>>21&127,++e,i<=4398046511103))break e;t[e-1]|=128,t[e]=i/16777216>>>21&127,++e}return t.slice(0,e)}function ys(i){var t=0,e=i[t]&127;e:if(i[t++]>=128){if(e|=(i[t]&127)<<7,i[t++]<128||(e|=(i[t]&127)<<14,i[t++]<128)||(e|=(i[t]&127)<<21,i[t++]<128))break e;e|=(i[t]&127)<<28}return e}function qi(i){for(var t=[],e=[0];e[0]<i.length;){var n=e[0],r=o0(i,e),a=r&7;r=Math.floor(r/8);var u=0,p;if(r==0)break;switch(a){case 0:{for(var g=e[0];i[e[0]++]>=128;);p=i.slice(g,e[0])}break;case 5:u=4,p=i.slice(e[0],e[0]+u),e[0]+=u;break;case 1:u=8,p=i.slice(e[0],e[0]+u),e[0]+=u;break;case 2:u=o0(i,e),p=i.slice(e[0],e[0]+u),e[0]+=u;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(r," at offset ").concat(n))}var v={data:p,type:a};t[r]==null?t[r]=[v]:t[r].push(v)}return t}function sn(i){var t=[];return i.forEach(function(e,n){e.forEach(function(r){r.data&&(t.push(ei(n*8+r.type)),r.type==2&&t.push(ei(r.data.length)),t.push(r.data))})}),La(t)}function Sr(i){for(var t,e=[],n=[0];n[0]<i.length;){var r=o0(i,n),a=qi(i.slice(n[0],n[0]+r));n[0]+=r;var u={id:ys(a[1][0].data),messages:[]};a[2].forEach(function(p){var g=qi(p.data),v=ys(g[3][0].data);u.messages.push({meta:g,data:i.slice(n[0],n[0]+v)}),n[0]+=v}),(t=a[3])!=null&&t[0]&&(u.merge=ys(a[3][0].data)>>>0>0),e.push(u)}return e}function ms(i){var t=[];return i.forEach(function(e){var n=[];n[1]=[{data:ei(e.id),type:0}],n[2]=[],e.merge!=null&&(n[3]=[{data:ei(+!!e.merge),type:0}]);var r=[];e.messages.forEach(function(u){r.push(u.data),u.meta[3]=[{type:0,data:ei(u.data.length)}],n[2].push({data:sn(u.meta),type:2})});var a=sn(n);t.push(ei(a.length)),t.push(a),r.forEach(function(u){return t.push(u)})}),La(t)}function c5(i,t){if(i!=0)throw new Error("Unexpected Snappy chunk type ".concat(i));for(var e=[0],n=o0(t,e),r=[];e[0]<t.length;){var a=t[e[0]]&3;if(a==0){var u=t[e[0]++]>>2;if(u<60)++u;else{var p=u-59;u=t[e[0]],p>1&&(u|=t[e[0]+1]<<8),p>2&&(u|=t[e[0]+2]<<16),p>3&&(u|=t[e[0]+3]<<24),u>>>=0,u++,e[0]+=p}r.push(t.slice(e[0],e[0]+u)),e[0]+=u;continue}else{var g=0,v=0;if(a==1?(v=(t[e[0]]>>2&7)+4,g=(t[e[0]++]&224)<<3,g|=t[e[0]++]):(v=(t[e[0]++]>>2)+1,a==2?(g=t[e[0]]|t[e[0]+1]<<8,e[0]+=2):(g=(t[e[0]]|t[e[0]+1]<<8|t[e[0]+2]<<16|t[e[0]+3]<<24)>>>0,e[0]+=4)),r=[La(r)],g==0)throw new Error("Invalid offset 0");if(g>r[0].length)throw new Error("Invalid offset beyond length");if(v>=g)for(r.push(r[0].slice(-g)),v-=g;v>=r[r.length-1].length;)r.push(r[r.length-1]),v-=r[r.length-1].length;r.push(r[0].slice(-g,-g+v))}}var y=La(r);if(y.length!=n)throw new Error("Unexpected length: ".concat(y.length," != ").concat(n));return y}function Tr(i){for(var t=[],e=0;e<i.length;){var n=i[e++],r=i[e]|i[e+1]<<8|i[e+2]<<16;e+=3,t.push(c5(n,i.slice(e,e+r))),e+=r}if(e!==i.length)throw new Error("data is not a valid framed stream!");return La(t)}function fs(i){for(var t=[],e=0;e<i.length;){var n=Math.min(i.length-e,268435455),r=new Uint8Array(4);t.push(r);var a=ei(n),u=a.length;t.push(a),n<=60?(u++,t.push(new Uint8Array([n-1<<2]))):n<=256?(u+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(u+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(u+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(u+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(i.slice(e,e+n)),u+=n,r[0]=0,r[1]=u&255,r[2]=u>>8&255,r[3]=u>>16&255,e+=n}return La(t)}function Ff(i,t){var e=new Uint8Array(32),n=vc(e),r=12,a=0;switch(e[0]=5,i.t){case"n":e[1]=2,u5(e,r,i.v),a|=1,r+=16;break;case"b":e[1]=6,n.setFloat64(r,i.v?1:0,!0),a|=2,r+=8;break;case"s":if(t.indexOf(i.v)==-1)throw new Error("Value ".concat(i.v," missing from SST!"));e[1]=3,n.setUint32(r,t.indexOf(i.v),!0),a|=8,r+=4;break;default:throw"unsupported cell type "+i.t}return n.setUint32(8,a,!0),e.slice(0,r)}function kf(i,t){var e=new Uint8Array(32),n=vc(e),r=12,a=0;switch(e[0]=3,i.t){case"n":e[2]=2,n.setFloat64(r,i.v,!0),a|=32,r+=8;break;case"b":e[2]=6,n.setFloat64(r,i.v?1:0,!0),a|=32,r+=8;break;case"s":if(t.indexOf(i.v)==-1)throw new Error("Value ".concat(i.v," missing from SST!"));e[2]=3,n.setUint32(r,t.indexOf(i.v),!0),a|=16,r+=4;break;default:throw"unsupported cell type "+i.t}return n.setUint32(4,a,!0),e.slice(0,r)}function ka(i){var t=qi(i);return o0(t[1][0].data)}function d5(i,t,e){var n,r,a,u;if(!((n=i[6])!=null&&n[0])||!((r=i[7])!=null&&r[0]))throw"Mutation only works on post-BNC storages!";var p=((u=(a=i[8])==null?void 0:a[0])==null?void 0:u.data)&&ys(i[8][0].data)>0||!1;if(p)throw"Math only works with normal offsets";for(var g=0,v=vc(i[7][0].data),y=0,M=[],E=vc(i[4][0].data),A=0,O=[],F=0;F<t.length;++F){if(t[F]==null){v.setUint16(F*2,65535,!0),E.setUint16(F*2,65535);continue}v.setUint16(F*2,y,!0),E.setUint16(F*2,A,!0);var D,ee;switch(typeof t[F]){case"string":D=Ff({t:"s",v:t[F]},e),ee=kf({t:"s",v:t[F]},e);break;case"number":D=Ff({t:"n",v:t[F]},e),ee=kf({t:"n",v:t[F]},e);break;case"boolean":D=Ff({t:"b",v:t[F]},e),ee=kf({t:"b",v:t[F]},e);break;default:throw new Error("Unsupported value "+t[F])}M.push(D),y+=D.length,O.push(ee),A+=ee.length,++g}for(i[2][0].data=ei(g);F<i[7][0].data.length/2;++F)v.setUint16(F*2,65535,!0),E.setUint16(F*2,65535,!0);return i[6][0].data=La(M),i[3][0].data=La(O),g}function m5(i,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var e=i.Sheets[i.SheetNames[0]];i.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=tr(e["!ref"]);n.s.r=n.s.c=0;var r=!1;n.e.c>9&&(r=!0,n.e.c=9),n.e.r>49&&(r=!0,n.e.r=49),r&&console.error("The Numbers writer is currently limited to ".concat(Hi(n)));var a=xc(e,{range:n,header:1}),u=["~Sh33tJ5~"];a.forEach(function(K){return K.forEach(function(J){typeof J=="string"&&u.push(J)})});var p={},g=[],v=si.read(t.numbers,{type:"base64"});v.FileIndex.map(function(K,J){return[K,v.FullPaths[J]]}).forEach(function(K){var J=K[0],ye=K[1];if(J.type==2&&J.name.match(/\.iwa/)){var Ze=J.content,st=Tr(Ze),Ge=Sr(st);Ge.forEach(function(Fe){g.push(Fe.id),p[Fe.id]={deps:[],location:ye,type:ys(Fe.messages[0].meta[1][0].data)}})}}),g.sort(function(K,J){return K-J});var y=g.filter(function(K){return K>1}).map(function(K){return[K,ei(K)]});v.FileIndex.map(function(K,J){return[K,v.FullPaths[J]]}).forEach(function(K){var J=K[0],ye=K[1];if(J.name.match(/\.iwa/)){var Ze=Sr(Tr(J.content));Ze.forEach(function(st){st.messages.forEach(function(Ge){y.forEach(function(Fe){st.messages.some(function(jt){return ys(jt.meta[1][0].data)!=11006&&l5(jt.data,Fe[1])})&&p[Fe[0]].deps.push(st.id)})})})}});function M(){for(var K=927262;K<2e6;++K)if(!p[K])return K;throw new Error("Too many messages")}for(var E=si.find(v,p[1].location),A=Sr(Tr(E.content)),O,F=0;F<A.length;++F){var D=A[F];D.id==1&&(O=D)}var ee=ka(qi(O.messages[0].data)[1][0].data);for(E=si.find(v,p[ee].location),A=Sr(Tr(E.content)),F=0;F<A.length;++F)D=A[F],D.id==ee&&(O=D);for(ee=ka(qi(O.messages[0].data)[2][0].data),E=si.find(v,p[ee].location),A=Sr(Tr(E.content)),F=0;F<A.length;++F)D=A[F],D.id==ee&&(O=D);for(ee=ka(qi(O.messages[0].data)[2][0].data),E=si.find(v,p[ee].location),A=Sr(Tr(E.content)),F=0;F<A.length;++F)D=A[F],D.id==ee&&(O=D);var ie=qi(O.messages[0].data);{ie[6][0].data=ei(n.e.r+1),ie[7][0].data=ei(n.e.c+1);var te=ka(ie[46][0].data),pe=si.find(v,p[te].location),Ce=Sr(Tr(pe.content));{for(var ze=0;ze<Ce.length&&Ce[ze].id!=te;++ze);if(Ce[ze].id!=te)throw"Bad ColumnRowUIDMapArchive";var ne=qi(Ce[ze].messages[0].data);ne[1]=[],ne[2]=[],ne[3]=[];for(var xe=0;xe<=n.e.c;++xe){var me=[];me[1]=me[2]=[{type:0,data:ei(xe+420690)}],ne[1].push({type:2,data:sn(me)}),ne[2].push({type:0,data:ei(xe)}),ne[3].push({type:0,data:ei(xe)})}ne[4]=[],ne[5]=[],ne[6]=[];for(var _e=0;_e<=n.e.r;++_e)me=[],me[1]=me[2]=[{type:0,data:ei(_e+726270)}],ne[4].push({type:2,data:sn(me)}),ne[5].push({type:0,data:ei(_e)}),ne[6].push({type:0,data:ei(_e)});Ce[ze].messages[0].data=sn(ne)}pe.content=fs(ms(Ce)),pe.size=pe.content.length,delete ie[46];var Ae=qi(ie[4][0].data);{Ae[7][0].data=ei(n.e.r+1);var we=qi(Ae[1][0].data),Ke=ka(we[2][0].data);pe=si.find(v,p[Ke].location),Ce=Sr(Tr(pe.content));{if(Ce[0].id!=Ke)throw"Bad HeaderStorageBucket";var mt=qi(Ce[0].messages[0].data);for(_e=0;_e<a.length;++_e){var it=qi(mt[2][0].data);it[1][0].data=ei(_e),it[4][0].data=ei(a[_e].length),mt[2][_e]={type:mt[2][0].type,data:sn(it)}}Ce[0].messages[0].data=sn(mt)}pe.content=fs(ms(Ce)),pe.size=pe.content.length;var Je=ka(Ae[2][0].data);pe=si.find(v,p[Je].location),Ce=Sr(Tr(pe.content));{if(Ce[0].id!=Je)throw"Bad HeaderStorageBucket";for(mt=qi(Ce[0].messages[0].data),xe=0;xe<=n.e.c;++xe)it=qi(mt[2][0].data),it[1][0].data=ei(xe),it[4][0].data=ei(n.e.r+1),mt[2][xe]={type:mt[2][0].type,data:sn(it)};Ce[0].messages[0].data=sn(mt)}pe.content=fs(ms(Ce)),pe.size=pe.content.length;var Pi=ka(Ae[4][0].data);(function(){for(var K=si.find(v,p[Pi].location),J=Sr(Tr(K.content)),ye,Ze=0;Ze<J.length;++Ze){var st=J[Ze];st.id==Pi&&(ye=st)}var Ge=qi(ye.messages[0].data);{Ge[3]=[];var Fe=[];u.forEach(function(Li,Rt){Fe[1]=[{type:0,data:ei(Rt)}],Fe[2]=[{type:0,data:ei(1)}],Fe[3]=[{type:2,data:s5(Li)}],Ge[3].push({type:2,data:sn(Fe)})})}ye.messages[0].data=sn(Ge);var jt=ms(J),Dt=fs(jt);K.content=Dt,K.size=K.content.length})();var nt=qi(Ae[3][0].data);{var St=nt[1][0];delete nt[2];var Wt=qi(St.data);{var Jt=ka(Wt[2][0].data);(function(){for(var K=si.find(v,p[Jt].location),J=Sr(Tr(K.content)),ye,Ze=0;Ze<J.length;++Ze){var st=J[Ze];st.id==Jt&&(ye=st)}var Ge=qi(ye.messages[0].data);{delete Ge[6],delete nt[7];var Fe=new Uint8Array(Ge[5][0].data);Ge[5]=[];for(var jt=0,Dt=0;Dt<=n.e.r;++Dt){var Li=qi(Fe);jt+=d5(Li,a[Dt],u),Li[1][0].data=ei(Dt),Ge[5].push({data:sn(Li),type:2})}Ge[1]=[{type:0,data:ei(n.e.c+1)}],Ge[2]=[{type:0,data:ei(n.e.r+1)}],Ge[3]=[{type:0,data:ei(jt)}],Ge[4]=[{type:0,data:ei(n.e.r+1)}]}ye.messages[0].data=sn(Ge);var Rt=ms(J),yn=fs(Rt);K.content=yn,K.size=K.content.length})()}St.data=sn(Wt)}Ae[3][0].data=sn(nt)}ie[4][0].data=sn(Ae)}O.messages[0].data=sn(ie);var X=ms(A),ue=fs(X);return E.content=ue,E.size=E.content.length,v}function f5(i){return function(e){for(var n=0;n!=i.length;++n){var r=i[n];e[r[0]]===void 0&&(e[r[0]]=r[1]),r[2]==="n"&&(e[r[0]]=Number(e[r[0]]))}}}function rp(i){f5([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(i)}function p5(i,t){return t.bookType=="ods"?o2(i,t):t.bookType=="numbers"?m5(i,t):t.bookType=="xlsb"?h5(i,t):g5(i,t)}function h5(i,t){hs=1024,i&&!i.SSF&&(i.SSF=Vn(ki)),i&&i.SSF&&(Cc(),bc(i.SSF),t.revssf=wc(i.SSF),t.revssf[i.SSF[65535]]=0,t.ssf=i.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,e0?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var e=t.bookType=="xlsb"?"bin":"xml",n=j_.indexOf(t.bookType)>-1,r=__();rp(t=t||{});var a=Vf(),u="",p=0;if(t.cellXfs=[],Ra(t.cellXfs,{},{revssf:{General:0}}),i.Props||(i.Props={}),u="docProps/core.xml",wt(a,u,b_(i.Props,t)),r.coreprops.push(u),ti(t.rels,2,u,Ht.CORE_PROPS),u="docProps/app.xml",!(i.Props&&i.Props.SheetNames))if(!i.Workbook||!i.Workbook.Sheets)i.Props.SheetNames=i.SheetNames;else{for(var g=[],v=0;v<i.SheetNames.length;++v)(i.Workbook.Sheets[v]||{}).Hidden!=2&&g.push(i.SheetNames[v]);i.Props.SheetNames=g}for(i.Props.Worksheets=i.Props.SheetNames.length,wt(a,u,w_(i.Props,t)),r.extprops.push(u),ti(t.rels,3,u,Ht.EXT_PROPS),i.Custprops!==i.Props&&mn(i.Custprops||{}).length>0&&(u="docProps/custom.xml",wt(a,u,S_(i.Custprops,t)),r.custprops.push(u),ti(t.rels,4,u,Ht.CUST_PROPS)),p=1;p<=i.SheetNames.length;++p){var y={"!id":{}},M=i.Sheets[i.SheetNames[p-1]],E=(M||{})["!type"]||"sheet";switch(E){case"chart":default:u="xl/worksheets/sheet"+p+"."+e,wt(a,u,vM(p-1,u,t,i,y)),r.sheets.push(u),ti(t.wbrels,-1,"worksheets/sheet"+p+"."+e,Ht.WS[0])}if(M){var A=M["!comments"],O=!1,F="";A&&A.length>0&&(F="xl/comments"+p+"."+e,wt(a,F,bM(A,F,t)),r.comments.push(F),ti(y,-1,"../comments"+p+"."+e,Ht.CMNT),O=!0),M["!legacy"]&&O&&wt(a,"xl/drawings/vmlDrawing"+p+".vml",U_(p,M["!comments"])),delete M["!comments"],delete M["!legacy"]}y["!id"].rId1&&wt(a,x_(u),vs(y))}return t.Strings!=null&&t.Strings.length>0&&(u="xl/sharedStrings."+e,wt(a,u,yM(t.Strings,u,t)),r.strs.push(u),ti(t.wbrels,-1,"sharedStrings."+e,Ht.SST)),u="xl/workbook."+e,wt(a,u,_M(i,u,t)),r.workbooks.push(u),ti(t.rels,1,u,Ht.WB),u="xl/theme/theme1.xml",wt(a,u,V_(i.Themes,t)),r.themes.push(u),ti(t.wbrels,-1,"theme/theme1.xml",Ht.THEME),u="xl/styles."+e,wt(a,u,xM(i,u,t)),r.styles.push(u),ti(t.wbrels,-1,"styles."+e,Ht.STY),i.vbaraw&&n&&(u="xl/vbaProject.bin",wt(a,u,i.vbaraw),r.vba.push(u),ti(t.wbrels,-1,"vbaProject.bin",Ht.VBA)),u="xl/metadata."+e,wt(a,u,CM(u)),r.metadata.push(u),ti(t.wbrels,-1,"metadata."+e,Ht.XLMETA),wt(a,"[Content_Types].xml",v_(r,t)),wt(a,"_rels/.rels",vs(t.rels)),wt(a,"xl/_rels/workbook."+e+".rels",vs(t.wbrels)),delete t.revssf,delete t.ssf,a}function g5(i,t){hs=1024,i&&!i.SSF&&(i.SSF=Vn(ki)),i&&i.SSF&&(Cc(),bc(i.SSF),t.revssf=wc(i.SSF),t.revssf[i.SSF[65535]]=0,t.ssf=i.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,e0?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var e="xml",n=j_.indexOf(t.bookType)>-1,r=__();rp(t=t||{});var a=Vf(),u="",p=0;if(t.cellXfs=[],Ra(t.cellXfs,{},{revssf:{General:0}}),i.Props||(i.Props={}),u="docProps/core.xml",wt(a,u,b_(i.Props,t)),r.coreprops.push(u),ti(t.rels,2,u,Ht.CORE_PROPS),u="docProps/app.xml",!(i.Props&&i.Props.SheetNames))if(!i.Workbook||!i.Workbook.Sheets)i.Props.SheetNames=i.SheetNames;else{for(var g=[],v=0;v<i.SheetNames.length;++v)(i.Workbook.Sheets[v]||{}).Hidden!=2&&g.push(i.SheetNames[v]);i.Props.SheetNames=g}i.Props.Worksheets=i.Props.SheetNames.length,wt(a,u,w_(i.Props,t)),r.extprops.push(u),ti(t.rels,3,u,Ht.EXT_PROPS),i.Custprops!==i.Props&&mn(i.Custprops||{}).length>0&&(u="docProps/custom.xml",wt(a,u,S_(i.Custprops,t)),r.custprops.push(u),ti(t.rels,4,u,Ht.CUST_PROPS));var y=["SheetJ5"];for(t.tcid=0,p=1;p<=i.SheetNames.length;++p){var M={"!id":{}},E=i.Sheets[i.SheetNames[p-1]],A=(E||{})["!type"]||"sheet";switch(A){case"chart":default:u="xl/worksheets/sheet"+p+"."+e,wt(a,u,K_(p-1,t,i,M)),r.sheets.push(u),ti(t.wbrels,-1,"worksheets/sheet"+p+"."+e,Ht.WS[0])}if(E){var O=E["!comments"],F=!1,D="";if(O&&O.length>0){var ee=!1;O.forEach(function(ie){ie[1].forEach(function(te){te.T==!0&&(ee=!0)})}),ee&&(D="xl/threadedComments/threadedComment"+p+"."+e,wt(a,D,ZS(O,y,t)),r.threadedcomments.push(D),ti(M,-1,"../threadedComments/threadedComment"+p+"."+e,Ht.TCMNT)),D="xl/comments"+p+"."+e,wt(a,D,W_(O,t)),r.comments.push(D),ti(M,-1,"../comments"+p+"."+e,Ht.CMNT),F=!0}E["!legacy"]&&F&&wt(a,"xl/drawings/vmlDrawing"+p+".vml",U_(p,E["!comments"])),delete E["!comments"],delete E["!legacy"]}M["!id"].rId1&&wt(a,x_(u),vs(M))}return t.Strings!=null&&t.Strings.length>0&&(u="xl/sharedStrings."+e,wt(a,u,D_(t.Strings,t)),r.strs.push(u),ti(t.wbrels,-1,"sharedStrings."+e,Ht.SST)),u="xl/workbook."+e,wt(a,u,e2(i,t)),r.workbooks.push(u),ti(t.rels,1,u,Ht.WB),u="xl/theme/theme1.xml",wt(a,u,V_(i.Themes,t)),r.themes.push(u),ti(t.wbrels,-1,"theme/theme1.xml",Ht.THEME),u="xl/styles."+e,wt(a,u,R_(i,t)),r.styles.push(u),ti(t.wbrels,-1,"styles."+e,Ht.STY),i.vbaraw&&n&&(u="xl/vbaProject.bin",wt(a,u,i.vbaraw),r.vba.push(u),ti(t.wbrels,-1,"vbaProject.bin",Ht.VBA)),u="xl/metadata."+e,wt(a,u,B_()),r.metadata.push(u),ti(t.wbrels,-1,"metadata."+e,Ht.XLMETA),y.length>1&&(u="xl/persons/person.xml",wt(a,u,qS(y,t)),r.people.push(u),ti(t.wbrels,-1,"persons/person.xml",Ht.PEOPLE)),wt(a,"[Content_Types].xml",v_(r,t)),wt(a,"_rels/.rels",vs(t.rels)),wt(a,"xl/_rels/workbook."+e+".rels",vs(t.wbrels)),delete t.revssf,delete t.ssf,a}function _5(i,t){var e="";switch((t||{}).type||"base64"){case"buffer":return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]];case"base64":e=ca(i.slice(0,12));break;case"binary":e=i;break;case"array":return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3),e.charCodeAt(4),e.charCodeAt(5),e.charCodeAt(6),e.charCodeAt(7)]}function s2(i,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return u0(t.file,si.write(i,{type:qt?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return si.write(i,t)}function v5(i,t){var e=Vn(t||{}),n=p5(i,e);return x5(n,e)}function x5(i,t){var e={},n=qt?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(e.compression="DEFLATE"),t.password)e.type=n;else switch(t.type){case"base64":e.type="base64";break;case"binary":e.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":e.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var r=i.FullPaths?si.write(i,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[e.type]||e.type,compression:!!t.compression}):i.generate(e);if(typeof Deno<"u"&&typeof r=="string"){if(t.type=="binary"||t.type=="base64")return r;r=new Uint8Array(yc(r))}return t.password&&typeof encrypt_agile<"u"?s2(encrypt_agile(r,t.password),t):t.type==="file"?u0(t.file,r):t.type=="string"?Xl(r):r}function y5(i,t){var e=t||{},n=RM(i,e);return s2(n,e)}function Hr(i,t,e){e||(e="");var n=e+i;switch(t.type){case"base64":return n0(oa(n));case"binary":return oa(n);case"string":return i;case"file":return u0(t.file,n,"utf8");case"buffer":return qt?ma(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Hr(n,{type:"binary"}).split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function b5(i,t){switch(t.type){case"base64":return n0(i);case"binary":return i;case"string":return i;case"file":return u0(t.file,i,"binary");case"buffer":return qt?ma(i,"binary"):i.split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function oc(i,t){switch(t.type){case"string":case"base64":case"binary":for(var e="",n=0;n<i.length;++n)e+=String.fromCharCode(i[n]);return t.type=="base64"?n0(e):t.type=="string"?Xl(e):e;case"file":return u0(t.file,i);case"buffer":return i;default:throw new Error("Unrecognized type "+t.type)}}function Fc(i,t){ZC(),oM(i);var e=Vn(t||{});if(e.cellStyles&&(e.cellNF=!0,e.sheetStubs=!0),e.type=="array"){e.type="binary";var n=Fc(i,e);return e.type="array",yc(n)}var r=0;if(e.sheet&&(typeof e.sheet=="number"?r=e.sheet:r=i.SheetNames.indexOf(e.sheet),!i.SheetNames[r]))throw new Error("Sheet not found: "+e.sheet+" : "+typeof e.sheet);switch(e.bookType||"xlsb"){case"xml":case"xlml":return Hr(OM(i,e),e);case"slk":case"sylk":return Hr(nS.from_sheet(i.Sheets[i.SheetNames[r]],e),e);case"htm":case"html":return Hr(n2(i.Sheets[i.SheetNames[r]],e),e);case"txt":return b5(l2(i.Sheets[i.SheetNames[r]],e),e);case"csv":return Hr(ap(i.Sheets[i.SheetNames[r]],e),e,"\uFEFF");case"dif":return Hr(rS.from_sheet(i.Sheets[i.SheetNames[r]],e),e);case"dbf":return oc(iS.from_sheet(i.Sheets[i.SheetNames[r]],e),e);case"prn":return Hr(aS.from_sheet(i.Sheets[i.SheetNames[r]],e),e);case"rtf":return Hr(mS.from_sheet(i.Sheets[i.SheetNames[r]],e),e);case"eth":return Hr(P_.from_sheet(i.Sheets[i.SheetNames[r]],e),e);case"fods":return Hr(o2(i,e),e);case"wk1":return oc(F6.sheet_to_wk1(i.Sheets[i.SheetNames[r]],e),e);case"wk3":return oc(F6.book_to_wk3(i,e),e);case"biff2":e.biff||(e.biff=2);case"biff3":e.biff||(e.biff=3);case"biff4":return e.biff||(e.biff=4),oc(i2(i,e),e);case"biff5":e.biff||(e.biff=5);case"biff8":case"xla":case"xls":return e.biff||(e.biff=8),y5(i,e);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return v5(i,e);default:throw new Error("Unrecognized bookType |"+e.bookType+"|")}}function C5(i,t,e,n,r,a,u,p){var g=dn(e),v=p.defval,y=p.raw||!Object.prototype.hasOwnProperty.call(p,"raw"),M=!0,E=r===1?[]:{};if(r!==1)if(Object.defineProperty)try{Object.defineProperty(E,"__rowNum__",{value:e,enumerable:!1})}catch{E.__rowNum__=e}else E.__rowNum__=e;if(!u||i[e])for(var A=t.s.c;A<=t.e.c;++A){var O=u?i[e][A]:i[n[A]+g];if(O===void 0||O.t===void 0){if(v===void 0)continue;a[A]!=null&&(E[a[A]]=v);continue}var F=O.v;switch(O.t){case"z":if(F==null)break;continue;case"e":F=F==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+O.t)}if(a[A]!=null){if(F==null)if(O.t=="e"&&F===null)E[a[A]]=null;else if(v!==void 0)E[a[A]]=v;else if(y&&F===null)E[a[A]]=null;else continue;else E[a[A]]=y&&(O.t!=="n"||O.t==="n"&&p.rawNumbers!==!1)?F:da(O,F,p);F!=null&&(M=!1)}}return{row:E,isempty:M}}function xc(i,t){if(i==null||i["!ref"]==null)return[];var e={t:"n",v:0},n=0,r=1,a=[],u=0,p="",g={s:{r:0,c:0},e:{r:0,c:0}},v=t||{},y=v.range!=null?v.range:i["!ref"];switch(v.header===1?n=1:v.header==="A"?n=2:Array.isArray(v.header)?n=3:v.header==null&&(n=0),typeof y){case"string":g=yi(y);break;case"number":g=yi(i["!ref"]),g.s.r=y;break;default:g=y}n>0&&(r=0);var M=dn(g.s.r),E=[],A=[],O=0,F=0,D=Array.isArray(i),ee=g.s.r,ie=0,te={};D&&!i[ee]&&(i[ee]=[]);var pe=v.skipHidden&&i["!cols"]||[],Ce=v.skipHidden&&i["!rows"]||[];for(ie=g.s.c;ie<=g.e.c;++ie)if(!(pe[ie]||{}).hidden)switch(E[ie]=vn(ie),e=D?i[ee][ie]:i[E[ie]+M],n){case 1:a[ie]=ie-g.s.c;break;case 2:a[ie]=E[ie];break;case 3:a[ie]=v.header[ie-g.s.c];break;default:if(e==null&&(e={w:"__EMPTY",t:"s"}),p=u=da(e,null,v),F=te[u]||0,!F)te[u]=1;else{do p=u+"_"+F++;while(te[p]);te[u]=F,te[p]=1}a[ie]=p}for(ee=g.s.r+r;ee<=g.e.r;++ee)if(!(Ce[ee]||{}).hidden){var ze=C5(i,g,ee,E,n,a,D,v);(ze.isempty===!1||(n===1?v.blankrows!==!1:v.blankrows))&&(A[O++]=ze.row)}return A.length=O,A}var N6=/"/g;function w5(i,t,e,n,r,a,u,p){for(var g=!0,v=[],y="",M=dn(e),E=t.s.c;E<=t.e.c;++E)if(n[E]){var A=p.dense?(i[e]||[])[E]:i[n[E]+M];if(A==null)y="";else if(A.v!=null){g=!1,y=""+(p.rawNumbers&&A.t=="n"?A.v:da(A,null,p));for(var O=0,F=0;O!==y.length;++O)if((F=y.charCodeAt(O))===r||F===a||F===34||p.forceQuotes){y='"'+y.replace(N6,'""')+'"';break}y=="ID"&&(y='"ID"')}else A.f!=null&&!A.F?(g=!1,y="="+A.f,y.indexOf(",")>=0&&(y='"'+y.replace(N6,'""')+'"')):y="";v.push(y)}return p.blankrows===!1&&g?null:v.join(u)}function ap(i,t){var e=[],n=t??{};if(i==null||i["!ref"]==null)return"";var r=yi(i["!ref"]),a=n.FS!==void 0?n.FS:",",u=a.charCodeAt(0),p=n.RS!==void 0?n.RS:`
`,g=p.charCodeAt(0),v=new RegExp((a=="|"?"\\|":a)+"+$"),y="",M=[];n.dense=Array.isArray(i);for(var E=n.skipHidden&&i["!cols"]||[],A=n.skipHidden&&i["!rows"]||[],O=r.s.c;O<=r.e.c;++O)(E[O]||{}).hidden||(M[O]=vn(O));for(var F=0,D=r.s.r;D<=r.e.r;++D)(A[D]||{}).hidden||(y=w5(i,r,D,M,u,g,a,n),y!=null&&(n.strip&&(y=y.replace(v,"")),(y||n.blankrows!==!1)&&e.push((F++?p:"")+y)));return delete n.dense,e.join("")}function l2(i,t){t||(t={}),t.FS="	",t.RS=`
`;var e=ap(i,t);if(typeof mi>"u"||t.type=="string")return e;var n=mi.utils.encode(1200,e,"str");return"\xFF\xFE"+n}function S5(i){var t="",e,n="";if(i==null||i["!ref"]==null)return[];var r=yi(i["!ref"]),a="",u=[],p,g=[],v=Array.isArray(i);for(p=r.s.c;p<=r.e.c;++p)u[p]=vn(p);for(var y=r.s.r;y<=r.e.r;++y)for(a=dn(y),p=r.s.c;p<=r.e.c;++p)if(t=u[p]+a,e=v?(i[y]||[])[p]:i[t],n="",e!==void 0){if(e.F!=null){if(t=e.F,!e.f)continue;n=e.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(e.f!=null)n=e.f;else{if(e.t=="z")continue;if(e.t=="n"&&e.v!=null)n=""+e.v;else if(e.t=="b")n=e.v?"TRUE":"FALSE";else if(e.w!==void 0)n="'"+e.w;else{if(e.v===void 0)continue;e.t=="s"?n="'"+e.v:n=""+e.v}}g[g.length]=t+"="+n}return g}function u2(i,t,e){var n=e||{},r=+!n.skipHeader,a=i||{},u=0,p=0;if(a&&n.origin!=null)if(typeof n.origin=="number")u=n.origin;else{var g=typeof n.origin=="string"?tn(n.origin):n.origin;u=g.r,p=g.c}var v,y={s:{c:0,r:0},e:{c:p,r:u+t.length-1+r}};if(a["!ref"]){var M=yi(a["!ref"]);y.e.c=Math.max(y.e.c,M.e.c),y.e.r=Math.max(y.e.r,M.e.r),u==-1&&(u=M.e.r+1,y.e.r=u+t.length-1+r)}else u==-1&&(u=0,y.e.r=t.length-1+r);var E=n.header||[],A=0;t.forEach(function(F,D){mn(F).forEach(function(ee){(A=E.indexOf(ee))==-1&&(E[A=E.length]=ee);var ie=F[ee],te="z",pe="",Ce=ni({c:p+A,r:u+D+r});v=s0(a,Ce),ie&&typeof ie=="object"&&!(ie instanceof Date)?a[Ce]=ie:(typeof ie=="number"?te="n":typeof ie=="boolean"?te="b":typeof ie=="string"?te="s":ie instanceof Date?(te="d",n.cellDates||(te="n",ie=Nn(ie)),pe=n.dateNF||ki[14]):ie===null&&n.nullError&&(te="e",ie=0),v?(v.t=te,v.v=ie,delete v.w,delete v.R,pe&&(v.z=pe)):a[Ce]=v={t:te,v:ie},pe&&(v.z=pe))})}),y.e.c=Math.max(y.e.c,p+E.length-1);var O=dn(u);if(r)for(A=0;A<E.length;++A)a[vn(A+p)+O]={t:"s",v:E[A]};return a["!ref"]=Hi(y),a}function T5(i,t){return u2(null,i,t)}function s0(i,t,e){if(typeof t=="string"){if(Array.isArray(i)){var n=tn(t);return i[n.r]||(i[n.r]=[]),i[n.r][n.c]||(i[n.r][n.c]={t:"z"})}return i[t]||(i[t]={t:"z"})}return typeof t!="number"?s0(i,ni(t)):s0(i,ni({r:t,c:e||0}))}function E5(i,t){if(typeof t=="number"){if(t>=0&&i.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var e=i.SheetNames.indexOf(t);if(e>-1)return e;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function A5(){return{SheetNames:[],Sheets:{}}}function M5(i,t,e,n){var r=1;if(!e)for(;r<=65535&&i.SheetNames.indexOf(e="Sheet"+r)!=-1;++r,e=void 0);if(!e||i.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&i.SheetNames.indexOf(e)>=0){var a=e.match(/(^.*?)(\d+)$/);r=a&&+a[2]||0;var u=a&&a[1]||e;for(++r;r<=65535&&i.SheetNames.indexOf(e=u+r)!=-1;++r);}if(Q_(e),i.SheetNames.indexOf(e)>=0)throw new Error("Worksheet with name |"+e+"| already exists!");return i.SheetNames.push(e),i.Sheets[e]=t,e}function F5(i,t,e){i.Workbook||(i.Workbook={}),i.Workbook.Sheets||(i.Workbook.Sheets=[]);var n=E5(i,t);switch(i.Workbook.Sheets[n]||(i.Workbook.Sheets[n]={}),e){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+e)}i.Workbook.Sheets[n].Hidden=e}function k5(i,t){return i.z=t,i}function c2(i,t,e){return t?(i.l={Target:t},e&&(i.l.Tooltip=e)):delete i.l,i}function P5(i,t,e){return c2(i,"#"+t,e)}function D5(i,t,e){i.c||(i.c=[]),i.c.push({t,a:e||"SheetJS"})}function I5(i,t,e,n){for(var r=typeof t!="string"?t:yi(t),a=typeof t=="string"?t:Hi(t),u=r.s.r;u<=r.e.r;++u)for(var p=r.s.c;p<=r.e.c;++p){var g=s0(i,u,p);g.t="n",g.F=a,delete g.v,u==r.s.r&&p==r.s.c&&(g.f=e,n&&(g.D=!0))}return i}var xo={encode_col:vn,encode_row:dn,encode_cell:ni,encode_range:Hi,decode_col:qf,decode_row:Zf,split_cell:Y3,decode_cell:tn,decode_range:tr,format_cell:da,sheet_add_aoa:d_,sheet_add_json:u2,sheet_add_dom:r2,aoa_to_sheet:Ts,json_to_sheet:T5,table_to_sheet:a2,table_to_book:r5,sheet_to_csv:ap,sheet_to_txt:l2,sheet_to_json:xc,sheet_to_html:n2,sheet_to_formulae:S5,sheet_to_row_object_array:xc,sheet_get_cell:s0,book_new:A5,book_append_sheet:M5,book_set_sheet_visibility:F5,cell_set_number_format:k5,cell_set_hyperlink:c2,cell_set_internal_link:P5,cell_add_comment:D5,sheet_set_array_formula:I5,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};var aB=t0.version;var Ms=class i{constructor(){}exportToExcel(t,e,n,r="Sheet1"){let a=[],u=e.map(M=>M.header);a.push(u),t.forEach(M=>{let E=e.map(A=>{let O=this.getNestedValue(M,A.key);return O??""});a.push(E)});let p=xo.aoa_to_sheet(a),g=e.map(M=>({wch:M.width||15}));p["!cols"]=g;let v=xo.book_new();xo.book_append_sheet(v,p,r),v.Workbook||(v.Workbook={}),v.Workbook.Views||(v.Workbook.Views=[]),v.Workbook.Views[0]={RTL:!0};let y=Fc(v,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(y,n)}exportToExcelMultiSheet(t,e){let n=xo.book_new();t.forEach(a=>{let u=[],p=a.columns.map(y=>y.header);u.push(p),a.data.forEach(y=>{let M=a.columns.map(E=>{let A=this.getNestedValue(y,E.key);return A??""});u.push(M)});let g=xo.aoa_to_sheet(u),v=a.columns.map(y=>({wch:y.width||15}));g["!cols"]=v,xo.book_append_sheet(n,g,a.name)}),n.Workbook||(n.Workbook={}),n.Workbook.Views||(n.Workbook.Views=[]),n.Workbook.Views[0]={RTL:!0};let r=Fc(n,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(r,e)}generateFilenameWithDates(t,e,n){let r=new Date().toISOString().split("T")[0];return e&&n?`${t}_${e}_to_${n}`:e?`${t}_from_${e}`:n?`${t}_until_${n}`:`${t}_${r}`}saveAsExcelFile(t,e){let n=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),r=document.createElement("a");r.href=window.URL.createObjectURL(n),r.download=`${e}.xlsx`,r.click(),setTimeout(()=>{window.URL.revokeObjectURL(r.href)},100)}getNestedValue(t,e){return e.split(".").reduce((n,r)=>n?.[r],t)}formatDate(t,e,n){let r=String(t).padStart(2,"0"),a=String(e).padStart(2,"0");return`${n}/${a}/${r}`}formatBoolean(t){return t?"\u0646\u0639\u0645":"\u0644\u0627"}static \u0275fac=function(e){return new(e||i)};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})};var m2=()=>({standalone:!0}),L5=i=>({"background-color":i}),op=(i,t)=>t.id;function R5(i,t){if(i&1&&(s(0,"option",44),d(1),l()),i&2){let e=t.$implicit;S("value",e.id),m(),vt("",e.vehicleName," (",e.vehicleId,") ")}}function N5(i,t){if(i&1){let e=Q();s(0,"div",64)(1,"label",65),d(2,"\u0628\u062F\u0621"),l(),s(3,"input",66),V("ngModelChange",function(r){b(e);let a=h(2);return N(a.tripForm.start,r)||(a.tripForm.start=r),C(r)}),l()(),s(4,"div",64)(5,"label",67),d(6,"\u0646\u0647\u0627\u064A\u0629"),l(),s(7,"input",68),V("ngModelChange",function(r){b(e);let a=h(2);return N(a.tripForm.end,r)||(a.tripForm.end=r),C(r)}),l()(),s(8,"div",64)(9,"label",69),d(10,"\u0633\u0648\u0644\u0627\u0631 (\u0643\u064A\u0644\u0648\u0645\u062A\u0631)"),l(),x(11,"input",70),l()}if(i&2){let e=h(2);m(3),R("ngModel",e.tripForm.start),m(4),R("ngModel",e.tripForm.end),m(4),S("value",e.calculatedDiesel)}}function V5(i,t){if(i&1&&(s(0,"option",44),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function B5(i,t){if(i&1&&(s(0,"option",44),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function U5(i,t){if(i&1){let e=Q();s(0,"div",33)(1,"label",71),d(2,"\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0643\u0644\u064A (\u20AA)"),l(),s(3,"input",72),V("ngModelChange",function(r){b(e);let a=h(2);return N(a.tripForm.totalPrice,r)||(a.tripForm.totalPrice=r),C(r)}),l(),s(4,"small",45),d(5,"\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0645\u0641\u062A\u0631\u0636 \u062F\u0641\u0639\u0647"),l()(),s(6,"div",33)(7,"label",73),d(8,"\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0645\u062F\u0641\u0648\u0639 (\u20AA)"),l(),s(9,"input",74),V("ngModelChange",function(r){b(e);let a=h(2);return N(a.tripForm.payedPrice,r)||(a.tripForm.payedPrice=r),C(r)}),l(),s(10,"small",45),d(11,"\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0630\u064A \u062F\u0641\u0639\u0647 \u0627\u0644\u0645\u0631\u064A\u0636"),l()(),s(12,"div",33)(13,"label",75),d(14,"\u0645\u0635\u0627\u0631\u064A\u0641 \u0623\u062E\u0631\u0649 (\u20AA)"),l(),s(15,"input",76),V("ngModelChange",function(r){b(e);let a=h(2);return N(a.tripForm.otherExpenses,r)||(a.tripForm.otherExpenses=r),C(r)}),l()(),s(16,"div",33)(17,"label",77),d(18,"\u062D\u0635\u0629 \u0627\u0644\u0636\u0627\u0628\u0637 (\u20AA)"),l(),s(19,"input",78),V("ngModelChange",function(r){b(e);let a=h(2);return N(a.tripForm.paramedicShare,r)||(a.tripForm.paramedicShare=r),C(r)}),l(),s(20,"small",45),d(21,"\u064A\u062A\u0645 \u062E\u0635\u0645\u0647\u0627 \u0623\u0648\u0644\u0627\u064B \u0642\u0628\u0644 \u062A\u0648\u0632\u064A\u0639 \u0627\u0644\u0628\u0627\u0642\u064A"),l()()}if(i&2){let e=h(2);m(3),R("ngModel",e.tripForm.totalPrice),m(6),R("ngModel",e.tripForm.payedPrice),m(6),R("ngModel",e.tripForm.otherExpenses),m(4),dt("background-color",e.tripForm.tripType!=="\u0627\u062E\u0631\u0649"&&e.tripForm.tripType!==""?"#e9ecef":"white"),R("ngModel",e.tripForm.paramedicShare),S("readonly",e.tripForm.tripType!=="\u0627\u062E\u0631\u0649"&&e.tripForm.tripType!=="")}}function W5(i,t){if(i&1){let e=Q();x(0,"div",18),s(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",22)(5,"h5",23),d(6,"\u0625\u0636\u0627\u0641\u0629 \u0631\u062D\u0644\u0629/\u0646\u0642\u0644 \u062C\u062F\u064A\u062F"),l(),s(7,"button",24),T("click",function(){b(e);let r=h();return C(r.closeAddTripModal())}),x(8,"i",25),l()(),s(9,"div",26)(10,"form",27),T("ngSubmit",function(){b(e);let r=h();return C(r.addTrip())}),s(11,"div",28)(12,"div",29)(13,"label",30),d(14,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E"),l(),s(15,"input",31),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.date,r)||(a.tripForm.date=r),C(r)}),l()(),s(16,"div",29)(17,"label",30),d(18,"YMD"),l(),s(19,"div",32)(20,"div",33)(21,"input",34),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.ymdNumber,r)||(a.tripForm.ymdNumber=r),C(r)}),l()(),s(22,"div",33)(23,"select",35),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.ymdPeriod,r)||(a.tripForm.ymdPeriod=r),C(r)}),s(24,"option",36),d(25,"\u064A\u0648\u0645"),l(),s(26,"option",37),d(27,"\u0627\u0633\u0628\u0648\u0639"),l(),s(28,"option",38),d(29,"\u0634\u0647\u0631"),l(),s(30,"option",39),d(31,"\u0633\u0646\u0629"),l()()()()(),s(32,"div",29)(33,"label",40),d(34,"\u0627\u0644\u0645\u0631\u0643\u0628\u0629"),l(),s(35,"input",41),V("ngModelChange",function(r){b(e);let a=h();return N(a.vehicleSearchTerm,r)||(a.vehicleSearchTerm=r),C(r)}),l(),s(36,"select",42),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.vehicleId,r)||(a.tripForm.vehicleId=r),C(r)}),T("change",function(r){b(e);let a=h();return C(a.onVehicleSelect(r))}),s(37,"option",43),d(38,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0631\u0643\u0628\u0629"),l(),Te(39,R5,2,3,"option",44,op),l(),s(41,"small",45),d(42,"\u0633\u064A\u062A\u0645 \u0645\u0644\u0621 \u0627\u0644\u0633\u0627\u0626\u0642 \u0648\u0627\u0644\u0636\u0627\u0628\u0637 \u0645\u0646 \u0642\u0628\u0644 \u0627\u0644\u0633\u0627\u0626\u0642 \u0639\u0646\u062F \u0627\u0644\u0642\u0628\u0648\u0644"),l()(),s(43,"div",46)(44,"app-location-search",47),T("locationSelected",function(r){b(e);let a=h();return C(a.onTransferFromSelected(r))}),l()(),s(45,"div",46)(46,"app-location-search",48),T("locationSelected",function(r){b(e);let a=h();return C(a.onTransferToSelected(r))}),l()(),H(47,N5,12,3),s(48,"div",46)(49,"label",49),d(50,"\u0627\u0644\u0645\u0631\u064A\u0636"),l(),s(51,"input",50),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.patientName,r)||(a.tripForm.patientName=r),C(r)}),l()(),s(52,"div",46)(53,"label",51),d(54,"\u0631\u0642\u0645 \u0627\u0644\u062A\u0648\u0627\u0635\u0644"),l(),s(55,"input",52),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.patientContact,r)||(a.tripForm.patientContact=r),C(r)}),l()(),s(56,"div",53)(57,"app-transportation-type-search",54),T("typeSelected",function(r){b(e);let a=h();return C(a.onTransportationTypeSelected(r))}),l()(),s(58,"div",46)(59,"label",55),d(60,"\u0627\u0644\u0646\u0642\u0644"),l(),s(61,"select",56),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.transferStatus,r)||(a.tripForm.transferStatus=r),C(r)}),Te(62,V5,2,2,"option",44,pt),l()(),s(64,"div",33)(65,"label",57),d(66,"\u0646\u0648\u0639 \u0627\u0644\u0631\u062D\u0644\u0629"),l(),s(67,"select",58),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.tripType,r)||(a.tripForm.tripType=r),C(r)}),T("ngModelChange",function(){b(e);let r=h();return C(r.onTripTypeChange())}),s(68,"option",43),d(69,"\u0627\u062E\u062A\u0631 \u0646\u0648\u0639 \u0627\u0644\u0631\u062D\u0644\u0629"),l(),Te(70,B5,2,2,"option",44,pt),l()(),H(72,U5,22,7),s(73,"div",29)(74,"label",59),d(75,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0627\u0644\u0631\u062D\u0644\u0629"),l(),s(76,"textarea",60),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.tripNotes,r)||(a.tripForm.tripNotes=r),C(r)}),l(),s(77,"small",45),d(78,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629 \u0639\u0646 \u0627\u0644\u0631\u062D\u0644\u0629"),l()()(),s(79,"div",61)(80,"button",62),T("click",function(){b(e);let r=h();return C(r.closeAddTripModal())}),d(81,"\u0625\u0644\u063A\u0627\u0621"),l(),s(82,"button",63),d(83,"\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0631\u062D\u0644\u0629"),l()()()()()()()}if(i&2){let e=h();m(15),R("ngModel",e.tripForm.date),m(6),R("ngModel",e.tripForm.ymdNumber),m(2),R("ngModel",e.tripForm.ymdPeriod),m(12),R("ngModel",e.vehicleSearchTerm),S("ngModelOptions",Ei(20,m2)),m(),R("ngModel",e.tripForm.vehicleId),m(3),Ee(e.filteredVehiclesList()),m(5),S("required",!1)("selectedLocationName",e.tripForm.transferFrom),m(2),S("required",!1)("selectedLocationName",e.tripForm.transferTo),m(),le(e.isAddingNewTrip()?-1:47),m(4),R("ngModel",e.tripForm.patientName),m(4),R("ngModel",e.tripForm.patientContact),m(2),S("label","\u0627\u0644\u062A\u0634\u062E\u064A\u0635")("placeholder","\u0627\u0628\u062D\u062B \u0639\u0646 \u0627\u0644\u062A\u0634\u062E\u064A\u0635...")("selectedTypeName",e.tripForm.transportationTypeName),m(4),R("ngModel",e.tripForm.transferStatus),m(),Ee(e.transferStatuses),m(5),R("ngModel",e.tripForm.tripType),m(3),Ee(e.tripTypes),m(2),le(e.isAddingNewTrip()?-1:72),m(4),R("ngModel",e.tripForm.tripNotes)}}function j5(i,t){if(i&1&&(s(0,"option",44),d(1),l()),i&2){let e=t.$implicit;S("value",e.id),m(),vt("",e.vehicleName," (",e.vehicleId,") ")}}function H5(i,t){if(i&1&&(s(0,"option",44),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function z5(i,t){if(i&1&&(s(0,"option",44),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function G5(i,t){if(i&1){let e=Q();x(0,"div",18),s(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",79)(5,"h5",23),d(6,"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0631\u062D\u0644\u0629"),l(),s(7,"button",80),T("click",function(){b(e);let r=h();return C(r.closeEditTripModal())}),x(8,"i",25),l()(),s(9,"div",26)(10,"form",27),T("ngSubmit",function(){b(e);let r=h();return C(r.saveEditTrip())}),s(11,"div",28)(12,"div",29)(13,"label",30),d(14,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E"),l(),s(15,"input",31),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.date,r)||(a.tripForm.date=r),C(r)}),l()(),s(16,"div",29)(17,"label",30),d(18,"YMD"),l(),s(19,"div",32)(20,"div",33)(21,"input",34),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.ymdNumber,r)||(a.tripForm.ymdNumber=r),C(r)}),l()(),s(22,"div",33)(23,"select",35),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.ymdPeriod,r)||(a.tripForm.ymdPeriod=r),C(r)}),s(24,"option",36),d(25,"\u064A\u0648\u0645"),l(),s(26,"option",37),d(27,"\u0627\u0633\u0628\u0648\u0639"),l(),s(28,"option",38),d(29,"\u0634\u0647\u0631"),l(),s(30,"option",39),d(31,"\u0633\u0646\u0629"),l()()()()(),s(32,"div",29)(33,"label",81),d(34,"\u0627\u0644\u0645\u0631\u0643\u0628\u0629"),l(),s(35,"input",41),V("ngModelChange",function(r){b(e);let a=h();return N(a.vehicleSearchTerm,r)||(a.vehicleSearchTerm=r),C(r)}),l(),s(36,"select",82),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.vehicleId,r)||(a.tripForm.vehicleId=r),C(r)}),T("change",function(r){b(e);let a=h();return C(a.onVehicleSelect(r))}),s(37,"option",43),d(38,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0631\u0643\u0628\u0629"),l(),Te(39,j5,2,3,"option",44,op),l()(),s(41,"div",46)(42,"app-location-search",47),T("locationSelected",function(r){b(e);let a=h();return C(a.onTransferFromSelected(r))}),l()(),s(43,"div",46)(44,"app-location-search",48),T("locationSelected",function(r){b(e);let a=h();return C(a.onTransferToSelected(r))}),l()(),s(45,"div",64)(46,"label",83),d(47,"\u0628\u062F\u0621"),l(),s(48,"input",84),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.start,r)||(a.tripForm.start=r),C(r)}),l()(),s(49,"div",64)(50,"label",85),d(51,"\u0646\u0647\u0627\u064A\u0629"),l(),s(52,"input",86),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.end,r)||(a.tripForm.end=r),C(r)}),l()(),s(53,"div",64)(54,"label",87),d(55,"\u0633\u0648\u0644\u0627\u0631 (\u0643\u064A\u0644\u0648\u0645\u062A\u0631)"),l(),x(56,"input",88),l(),s(57,"div",46)(58,"label",89),d(59,"\u0627\u0644\u0645\u0631\u064A\u0636"),l(),s(60,"input",90),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.patientName,r)||(a.tripForm.patientName=r),C(r)}),l()(),s(61,"div",46)(62,"label",91),d(63,"\u0631\u0642\u0645 \u0627\u0644\u062A\u0648\u0627\u0635\u0644"),l(),s(64,"input",92),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.patientContact,r)||(a.tripForm.patientContact=r),C(r)}),l()(),s(65,"div",53)(66,"app-transportation-type-search",54),T("typeSelected",function(r){b(e);let a=h();return C(a.onTransportationTypeSelected(r))}),l()(),s(67,"div",46)(68,"label",93),d(69,"\u0627\u0644\u0646\u0642\u0644"),l(),s(70,"select",94),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.transferStatus,r)||(a.tripForm.transferStatus=r),C(r)}),Te(71,H5,2,2,"option",44,pt),l()(),s(73,"div",33)(74,"label",95),d(75,"\u0646\u0648\u0639 \u0627\u0644\u0631\u062D\u0644\u0629"),l(),s(76,"select",96),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.tripType,r)||(a.tripForm.tripType=r),C(r)}),T("ngModelChange",function(){b(e);let r=h();return C(r.onTripTypeChange())}),s(77,"option",43),d(78,"\u0627\u062E\u062A\u0631 \u0646\u0648\u0639 \u0627\u0644\u0631\u062D\u0644\u0629"),l(),Te(79,z5,2,2,"option",44,pt),l()(),s(81,"div",46)(82,"label",97),d(83,"\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0643\u0644\u064A (\u20AA)"),l(),s(84,"input",98),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.totalPrice,r)||(a.tripForm.totalPrice=r),C(r)}),l(),s(85,"small",45),d(86,"\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0645\u0641\u062A\u0631\u0636 \u062F\u0641\u0639\u0647"),l()(),s(87,"div",46)(88,"label",99),d(89,"\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0645\u062F\u0641\u0648\u0639 (\u20AA)"),l(),s(90,"input",100),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.payedPrice,r)||(a.tripForm.payedPrice=r),C(r)}),l(),s(91,"small",45),d(92,"\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0630\u064A \u062F\u0641\u0639\u0647 \u0627\u0644\u0645\u0631\u064A\u0636"),l()(),s(93,"div",46)(94,"label",101),d(95,"\u0645\u0635\u0627\u0631\u064A\u0641 \u0623\u062E\u0631\u0649 (\u20AA)"),l(),s(96,"input",102),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.otherExpenses,r)||(a.tripForm.otherExpenses=r),C(r)}),l()(),s(97,"div",46)(98,"label",103),d(99,"\u062D\u0635\u0629 \u0627\u0644\u0636\u0627\u0628\u0637 (\u20AA)"),l(),s(100,"input",104),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.paramedicShare,r)||(a.tripForm.paramedicShare=r),C(r)}),l(),s(101,"small",45),d(102,"\u064A\u062A\u0645 \u062E\u0635\u0645\u0647\u0627 \u0623\u0648\u0644\u0627\u064B \u0642\u0628\u0644 \u062A\u0648\u0632\u064A\u0639 \u0627\u0644\u0628\u0627\u0642\u064A"),l()()(),s(103,"div",105)(104,"div",29)(105,"label",106),d(106,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0627\u0644\u0631\u062D\u0644\u0629"),l(),s(107,"textarea",107),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.tripNotes,r)||(a.tripForm.tripNotes=r),C(r)}),l(),s(108,"small",45),d(109,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629 \u0639\u0646 \u0627\u0644\u0631\u062D\u0644\u0629"),l()()(),s(110,"div",61)(111,"button",62),T("click",function(){b(e);let r=h();return C(r.closeEditTripModal())}),d(112,"\u0625\u0644\u063A\u0627\u0621"),l(),s(113,"button",108),d(114,"\u062D\u0641\u0638 \u0627\u0644\u062A\u063A\u064A\u064A\u0631\u0627\u062A"),l()()()()()()()}if(i&2){let e=h();m(15),R("ngModel",e.tripForm.date),m(6),R("ngModel",e.tripForm.ymdNumber),m(2),R("ngModel",e.tripForm.ymdPeriod),m(12),R("ngModel",e.vehicleSearchTerm),S("ngModelOptions",Ei(28,m2)),m(),R("ngModel",e.tripForm.vehicleId),m(3),Ee(e.filteredVehiclesList()),m(3),S("required",!1)("selectedLocationName",e.tripForm.transferFrom),m(2),S("required",!1)("selectedLocationName",e.tripForm.transferTo),m(4),R("ngModel",e.tripForm.start),m(4),R("ngModel",e.tripForm.end),m(4),S("value",e.calculatedDiesel),m(4),R("ngModel",e.tripForm.patientName),m(4),R("ngModel",e.tripForm.patientContact),m(2),S("label","\u0627\u0644\u062A\u0634\u062E\u064A\u0635")("placeholder","\u0627\u0628\u062D\u062B \u0639\u0646 \u0627\u0644\u062A\u0634\u062E\u064A\u0635...")("selectedTypeName",e.tripForm.transportationTypeName),m(4),R("ngModel",e.tripForm.transferStatus),m(),Ee(e.transferStatuses),m(5),R("ngModel",e.tripForm.tripType),m(3),Ee(e.tripTypes),m(5),R("ngModel",e.tripForm.totalPrice),m(6),R("ngModel",e.tripForm.payedPrice),m(6),R("ngModel",e.tripForm.otherExpenses),m(4),dt("background-color",e.tripForm.tripType!=="\u0627\u062E\u0631\u0649"&&e.tripForm.tripType!==""?"#e9ecef":"white"),R("ngModel",e.tripForm.paramedicShare),S("readonly",e.tripForm.tripType!=="\u0627\u062E\u0631\u0649"&&e.tripForm.tripType!==""),m(7),R("ngModel",e.tripForm.tripNotes)}}function $5(i,t){if(i&1&&(s(0,"div",29),x(1,"hr",119),s(2,"p",113),d(3,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0627\u0644\u0631\u062D\u0644\u0629"),l(),s(4,"p",129),d(5),l()()),i&2){let e=h();m(5),z(e.tripNotes)}}function Z5(i,t){if(i&1&&(s(0,"div",33)(1,"p",113),d(2,"\u0627\u0644\u0645\u062F\u0629"),l(),s(3,"p",114),d(4),l()()),i&2){let e=h(),n=h(2);m(4),z(n.getTripDuration(e.acceptedAt,e.closedAt))}}function q5(i,t){if(i&1){let e=Q();s(0,"button",130),T("click",function(){b(e);let r=h(3);return C(r.forceCloseTrip())}),x(1,"i",131),d(2," \u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u0631\u062D\u0644\u0629 "),l()}}function Y5(i,t){if(i&1){let e=Q();s(0,"button",132),T("click",function(){b(e);let r=h(3);return C(r.uncloseTrip())}),x(1,"i",133),d(2," \u0625\u0639\u0627\u062F\u0629 \u0641\u062A\u062D \u0627\u0644\u0631\u062D\u0644\u0629 "),l()}}function X5(i,t){if(i&1){let e=Q();s(0,"div",28)(1,"div",33)(2,"p",113),d(3,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E"),l(),s(4,"p",114),d(5),l()(),s(6,"div",33)(7,"p",113),d(8,"YMD"),l(),s(9,"p",114),d(10),l()(),s(11,"div",33)(12,"p",113),d(13,"\u0627\u0644\u0633\u0627\u0626\u0642"),l(),s(14,"p",114),d(15),l()(),s(16,"div",33)(17,"p",113),d(18,"\u0636\u0627\u0628\u0637 \u0627\u0644\u0627\u0633\u0639\u0627\u0641"),l(),s(19,"p",114),d(20),l()(),s(21,"div",46)(22,"p",113),d(23,"\u0646\u0642\u0644 \u0645\u0646"),l(),s(24,"p",114),d(25),l()(),s(26,"div",46)(27,"p",113),d(28,"\u0646\u0642\u0644 \u0627\u0644\u0649"),l(),s(29,"p",114),d(30),l()(),s(31,"div",64)(32,"p",113),d(33,"\u0628\u062F\u0621"),l(),s(34,"p",114),d(35),l()(),s(36,"div",64)(37,"p",113),d(38,"\u0646\u0647\u0627\u064A\u0629"),l(),s(39,"p",114),d(40),l()(),s(41,"div",64)(42,"p",113),d(43,"\u0633\u0648\u0644\u0627\u0631 (\u0643\u064A\u0644\u0648\u0645\u062A\u0631)"),l(),s(44,"p",114),d(45),l()(),s(46,"div",33)(47,"p",113),d(48,"\u0627\u0644\u0645\u0631\u064A\u0636"),l(),s(49,"p",114),d(50),l()(),s(51,"div",33)(52,"p",113),d(53,"\u0631\u0642\u0645 \u0627\u0644\u062A\u0648\u0627\u0635\u0644"),l(),s(54,"p",115),d(55),l()(),s(56,"div",29)(57,"p",113),d(58,"\u0627\u0644\u062A\u0634\u062E\u064A\u0635"),l(),s(59,"p",114),d(60),l()(),s(61,"div",29)(62,"p",113),d(63,"\u0627\u0644\u0646\u0642\u0644"),l(),x(64,"app-status-badge",116),l(),s(65,"div",33)(66,"p",113),d(67,"\u0646\u0648\u0639 \u0627\u0644\u0631\u062D\u0644\u0629"),l(),s(68,"p",114),d(69),l()(),s(70,"div",33)(71,"p",113),d(72,"\u0645\u0635\u0627\u0631\u064A\u0641 \u0623\u062E\u0631\u0649"),l(),s(73,"p",115),d(74),l()(),s(75,"div",29),x(76,"hr",117),s(77,"h6",118),d(78,"\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0645\u0627\u0644\u064A\u0629"),l()(),s(79,"div",33)(80,"p",113),d(81,"\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0643\u0644\u064A \u0627\u0644\u0645\u0641\u062A\u0631\u0636"),l(),s(82,"p",115),d(83),l()(),s(84,"div",33)(85,"p",113),d(86,"\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0645\u062F\u0641\u0648\u0639"),l(),s(87,"p",115),d(88),l()(),H(89,$5,6,1,"div",29),s(90,"div",29),x(91,"hr",119),s(92,"h6",118),d(93,"\u062A\u0648\u0632\u064A\u0639 \u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0645\u062F\u0641\u0648\u0639"),l()(),s(94,"div",33)(95,"p",113),d(96,"\u062D\u0635\u0629 \u0627\u0644\u0636\u0627\u0628\u0637"),l(),s(97,"p",115),d(98),l()(),s(99,"div",33)(100,"p",113),d(101,"\u062D\u0635\u0629 \u0627\u0644\u0633\u0627\u0626\u0642"),l(),s(102,"p",115),d(103),l()(),s(104,"div",33)(105,"p",113),d(106,"\u062D\u0635\u0629 EQ"),l(),s(107,"p",115),d(108),l()(),s(109,"div",29),x(110,"hr",117),s(111,"h6",118),d(112,"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u062A\u062A\u0628\u0639"),l()(),s(113,"div",33)(114,"p",113),d(115,"\u062A\u0645 \u0627\u0644\u0642\u0628\u0648\u0644"),l(),s(116,"p",114),d(117),l()(),s(118,"div",33)(119,"p",113),d(120,"\u062A\u0645 \u0627\u0644\u0625\u063A\u0644\u0627\u0642"),l(),s(121,"p",114),d(122),l()(),H(123,Z5,5,1,"div",33),s(124,"div",33)(125,"p",113),d(126,"\u062D\u0627\u0644\u0629 \u0627\u0644\u0625\u063A\u0644\u0627\u0642"),l(),s(127,"span",120),d(128),l()()(),s(129,"div",121)(130,"button",122),T("click",function(){let r=b(e),a=h(2);return C(a.showDeleteConfirmation(r))}),x(131,"i",123),d(132," \u062D\u0630\u0641 "),l(),s(133,"div",124),H(134,q5,3,0,"button",125)(135,Y5,3,0,"button",126),s(136,"button",127),T("click",function(){b(e);let r=h(2);return C(r.openEditTripModal())}),x(137,"i",128),d(138," \u062A\u0639\u062F\u064A\u0644 "),l()()()}if(i&2){let e=t,n=h(2);m(5),z(n.getFormattedDate(e.day,e.month,e.year)),m(5),z(e.ymdValue&&e.ymdPeriod?e.ymdValue+" "+e.ymdPeriod:"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"),m(5),z(e.driver),m(5),z(e.paramedic),m(5),z(e.transferFrom),m(5),z(e.transferTo),m(5),z(e.start),m(5),z(e.end),m(5),z(e.diesel),m(5),z(e.patientName),m(5),z(e.patientContact||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"),m(5),z(e.transportationTypeName||e.diagnosis||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"),m(4),S("status",e.transferStatus)("type","transfer")("size","medium"),m(5),z(e.tripType||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"),m(5),q("\u20AA",e.otherExpenses.toFixed(2),""),m(9),q("\u20AA",e.totalPrice.toFixed(2),""),m(5),q("\u20AA",e.payedPrice.toFixed(2),""),m(),le(e.tripNotes?89:-1),m(9),q("\u20AA",e.paramedicShare.toFixed(2),""),m(5),q("\u20AA",e.driverShare.toFixed(2),""),m(5),q("\u20AA",e.eqShare.toFixed(2),""),m(9),z(n.formatTimestamp(e.acceptedAt)),m(5),q(" ",n.formatTimestamp(e.closedAt)," "),m(),le(e.acceptedAt&&e.closedAt?123:-1),m(4),fe("bg-success",e.isClosed)("bg-warning",!e.isClosed),m(),q(" ",e.isClosed?"\u0645\u063A\u0644\u0642\u0629":"\u0645\u0641\u062A\u0648\u062D\u0629"," "),m(6),le(e.isClosed?135:134)}}function K5(i,t){if(i&1){let e=Q();x(0,"div",18),s(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",109)(5,"h5",23),d(6,"\u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0631\u062D\u0644\u0629"),l(),s(7,"button",110),T("click",function(){b(e);let r=h();return C(r.closeViewTripModal())}),x(8,"i",111),l()(),s(9,"div",112),H(10,X5,139,32),l()()()()}if(i&2){let e,n=h();m(10),le((e=n.selectedTrip())?10:-1,e)}}function J5(i,t){if(i&1){let e=Q();s(0,"div",6)(1,"button",134),T("click",function(){b(e);let r=h();return C(r.toggleFilterPanel())}),x(2,"i",135),d(3," \u0625\u0638\u0647\u0627\u0631 \u0627\u0644\u0641\u0644\u0627\u062A\u0631 "),l()()}}function Q5(i,t){if(i&1&&(s(0,"option",44),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function eF(i,t){if(i&1&&(s(0,"option",44),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function tF(i,t){if(i&1&&(s(0,"option",44),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function iF(i,t){if(i&1){let e=Q();s(0,"div",29)(1,"label",30),d(2,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E"),l(),s(3,"div",32)(4,"div",64)(5,"select",165),V("ngModelChange",function(r){b(e);let a=h(2);return N(a.dateFilterDay,r)||(a.dateFilterDay=r),C(r)}),s(6,"option",44),d(7,"\u0627\u0644\u064A\u0648\u0645"),l(),Te(8,Q5,2,2,"option",44,pt),l()(),s(10,"div",64)(11,"select",165),V("ngModelChange",function(r){b(e);let a=h(2);return N(a.dateFilterMonth,r)||(a.dateFilterMonth=r),C(r)}),s(12,"option",44),d(13,"\u0627\u0644\u0634\u0647\u0631"),l(),Te(14,eF,2,2,"option",44,pt),l()(),s(16,"div",64)(17,"select",165),V("ngModelChange",function(r){b(e);let a=h(2);return N(a.dateFilterYear,r)||(a.dateFilterYear=r),C(r)}),s(18,"option",44),d(19,"\u0627\u0644\u0633\u0646\u0629"),l(),Te(20,tF,2,2,"option",44,pt),l()()()()}if(i&2){let e=h(2);m(5),R("ngModel",e.dateFilterDay),m(),S("value",null),m(2),Ee(e.getDaysInMonth(e.dateFilterMonth||1,e.dateFilterYear||2023)),m(3),R("ngModel",e.dateFilterMonth),m(),S("value",null),m(2),Ee(e.getMonths()),m(3),R("ngModel",e.dateFilterYear),m(),S("value",null),m(2),Ee(e.getYears())}}function nF(i,t){if(i&1&&(s(0,"option",44),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function rF(i,t){if(i&1&&(s(0,"option",44),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function aF(i,t){if(i&1&&(s(0,"option",44),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function oF(i,t){if(i&1&&(s(0,"option",44),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function sF(i,t){if(i&1&&(s(0,"option",44),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function lF(i,t){if(i&1&&(s(0,"option",44),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function uF(i,t){if(i&1){let e=Q();s(0,"div",29)(1,"label",30),d(2,"\u0645\u0646"),l(),s(3,"div",32)(4,"div",64)(5,"select",165),V("ngModelChange",function(r){b(e);let a=h(2);return N(a.dateFilterDayFrom,r)||(a.dateFilterDayFrom=r),C(r)}),s(6,"option",44),d(7,"\u0627\u0644\u064A\u0648\u0645"),l(),Te(8,nF,2,2,"option",44,pt),l()(),s(10,"div",64)(11,"select",165),V("ngModelChange",function(r){b(e);let a=h(2);return N(a.dateFilterMonthFrom,r)||(a.dateFilterMonthFrom=r),C(r)}),s(12,"option",44),d(13,"\u0627\u0644\u0634\u0647\u0631"),l(),Te(14,rF,2,2,"option",44,pt),l()(),s(16,"div",64)(17,"select",165),V("ngModelChange",function(r){b(e);let a=h(2);return N(a.dateFilterYearFrom,r)||(a.dateFilterYearFrom=r),C(r)}),s(18,"option",44),d(19,"\u0627\u0644\u0633\u0646\u0629"),l(),Te(20,aF,2,2,"option",44,pt),l()()()(),s(22,"div",29)(23,"label",30),d(24,"\u0625\u0644\u0649"),l(),s(25,"div",32)(26,"div",64)(27,"select",165),V("ngModelChange",function(r){b(e);let a=h(2);return N(a.dateFilterDayTo,r)||(a.dateFilterDayTo=r),C(r)}),s(28,"option",44),d(29,"\u0627\u0644\u064A\u0648\u0645"),l(),Te(30,oF,2,2,"option",44,pt),l()(),s(32,"div",64)(33,"select",165),V("ngModelChange",function(r){b(e);let a=h(2);return N(a.dateFilterMonthTo,r)||(a.dateFilterMonthTo=r),C(r)}),s(34,"option",44),d(35,"\u0627\u0644\u0634\u0647\u0631"),l(),Te(36,sF,2,2,"option",44,pt),l()(),s(38,"div",64)(39,"select",165),V("ngModelChange",function(r){b(e);let a=h(2);return N(a.dateFilterYearTo,r)||(a.dateFilterYearTo=r),C(r)}),s(40,"option",44),d(41,"\u0627\u0644\u0633\u0646\u0629"),l(),Te(42,lF,2,2,"option",44,pt),l()()()()}if(i&2){let e=h(2);m(5),R("ngModel",e.dateFilterDayFrom),m(),S("value",null),m(2),Ee(e.getDaysInMonth(e.dateFilterMonthFrom||1,e.dateFilterYearFrom||2023)),m(3),R("ngModel",e.dateFilterMonthFrom),m(),S("value",null),m(2),Ee(e.getMonths()),m(3),R("ngModel",e.dateFilterYearFrom),m(),S("value",null),m(2),Ee(e.getYears()),m(7),R("ngModel",e.dateFilterDayTo),m(),S("value",null),m(2),Ee(e.getDaysInMonth(e.dateFilterMonthTo||1,e.dateFilterYearTo||2023)),m(3),R("ngModel",e.dateFilterMonthTo),m(),S("value",null),m(2),Ee(e.getMonths()),m(3),R("ngModel",e.dateFilterYearTo),m(),S("value",null),m(2),Ee(e.getYears())}}function cF(i,t){if(i&1&&(s(0,"option",44),d(1),l()),i&2){let e=t.$implicit;S("value",e.value),m(),q(" ",e.label," ")}}function dF(i,t){if(i&1){let e=Q();s(0,"button",160),T("click",function(){let r=b(e).$implicit,a=h(2);return C(a.selectStatus(r))}),d(1),l()}if(i&2){let e=t.$implicit,n=h(2);S("ngClass",n.getStatusClass(e)),m(),q(" ",e," ")}}function mF(i,t){if(i&1){let e=Q();s(0,"div",7)(1,"div",136)(2,"h2",137),d(3,"\u062A\u0635\u0641\u064A\u0629 \u0627\u0644\u0631\u062D\u0644\u0627\u062A"),l(),s(4,"button",138),T("click",function(){b(e);let r=h();return C(r.toggleFilterPanel())}),x(5,"i",139),l()(),s(6,"div",140)(7,"div",29)(8,"label",30),d(9,"\u0646\u0648\u0639 \u0627\u0644\u0628\u062D\u062B"),l(),s(10,"div",141)(11,"input",142),V("ngModelChange",function(r){b(e);let a=h();return N(a.dateFilterType,r)||(a.dateFilterType=r),C(r)}),l(),s(12,"label",143),d(13,"\u064A\u0648\u0645 \u0648\u0627\u062D\u062F"),l(),x(14,"div",144),s(15,"input",145),V("ngModelChange",function(r){b(e);let a=h();return N(a.dateFilterType,r)||(a.dateFilterType=r),C(r)}),l(),s(16,"label",146),d(17,"\u0646\u0637\u0627\u0642 \u0632\u0645\u0646\u064A"),l()()(),H(18,iF,22,6,"div",29)(19,uF,44,12),s(20,"div",147)(21,"label",148),d(22,"\u0627\u0644\u0645\u0631\u064A\u0636"),l(),s(23,"input",149),V("ngModelChange",function(r){b(e);let a=h();return N(a.patientFilterValue,r)||(a.patientFilterValue=r),C(r)}),l()(),s(24,"div",147)(25,"label",150),d(26,"\u0646\u0648\u0639 \u0627\u0644\u062A\u062E\u0632\u064A\u0646"),l(),s(27,"select",151),V("ngModelChange",function(r){b(e);let a=h();return N(a.selectedLocationTag,r)||(a.selectedLocationTag=r),C(r)}),s(28,"option",152),d(29,"\u0627\u0644\u0643\u0644"),l(),s(30,"option",153),d(31,"\u0645\u0648\u0627\u0642\u0639 \u0634\u0627\u0626\u0639\u0629"),l(),s(32,"option",154),d(33,"\u0645\u0648\u0627\u0642\u0639 \u0645\u062E\u0635\u0635\u0629"),l()()(),s(34,"div",147)(35,"label",155),d(36,"\u0646\u0648\u0639 \u0627\u0644\u0645\u0648\u0642\u0639"),l(),s(37,"select",156),V("ngModelChange",function(r){b(e);let a=h();return N(a.selectedLocationType,r)||(a.selectedLocationType=r),C(r)}),s(38,"option",152),d(39,"\u0627\u0644\u0643\u0644"),l(),H(40,cF,2,2,"option",157),l()(),s(41,"div",29)(42,"app-location-search",158),T("locationSelected",function(r){b(e);let a=h();return C(a.onTransferToFilterSelected(r))}),l(),s(43,"small",45),d(44,"\u0627\u062E\u062A\u0631 \u0645\u0648\u0642\u0639 \u0644\u0644\u062A\u0635\u0641\u064A\u0629 \u0628\u062F\u0644\u0627\u064B \u0645\u0646 \u0627\u0644\u0643\u062A\u0627\u0628\u0629"),l()()(),s(45,"div",159)(46,"button",160),T("click",function(){b(e);let r=h();return C(r.selectStatus("All"))}),d(47," \u0627\u0644\u0643\u0644 "),l(),Te(48,dF,2,2,"button",161,pt),l(),s(50,"div",162)(51,"button",163),T("click",function(){b(e);let r=h();return C(r.applyFilters())}),d(52,"\u062A\u0637\u0628\u064A\u0642 \u0627\u0644\u0641\u0644\u0627\u062A\u0631"),l(),s(53,"button",164),T("click",function(){b(e);let r=h();return C(r.resetFilters())}),d(54,"\u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 \u0627\u0644\u0641\u0644\u0627\u062A\u0631"),l()()()}if(i&2){let e=h();m(11),R("ngModel",e.dateFilterType),m(4),R("ngModel",e.dateFilterType),m(3),le(e.dateFilterType==="single"?18:-1),m(),le(e.dateFilterType==="range"?19:-1),m(4),R("ngModel",e.patientFilterValue),m(4),R("ngModel",e.selectedLocationTag),m(10),R("ngModel",e.selectedLocationType),m(3),S("ngForOf",e.locationTypes),m(2),S("placeholder","\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0648\u0642\u0639..."),m(4),S("ngClass",e.getStatusClass("All")),m(2),Ee(e.transferStatuses)}}function fF(i,t){if(i&1){let e=Q();s(0,"div",15)(1,"div",166)(2,"div",167),x(3,"div",168),s(4,"div",169)(5,"div",170)(6,"p",171),T("click",function(){let r=b(e).$implicit,a=h();return C(a.quickFilterByPatient(r.patientName))}),d(7),l(),s(8,"p",172),d(9),l()(),s(10,"div",173)(11,"p",174),d(12," \u0627\u0644\u0645\u0631\u0643\u0628\u0629: "),s(13,"span",129),d(14),l()(),s(15,"p",175),T("click",function(){let r=b(e).$implicit,a=h();return C(a.quickFilterByDate(r.day,r.month,r.year))}),d(16),l()(),s(17,"p",176)(18,"span",129),d(19,"\u0627\u0644\u062A\u0634\u062E\u064A\u0635:"),l(),d(20),l(),s(21,"div",177)(22,"span",178),T("click",function(){let r=b(e).$implicit,a=h();return C(a.quickFilterByLocation(r.transferFrom))}),d(23),l(),x(24,"i",179),s(25,"span",178),T("click",function(){let r=b(e).$implicit,a=h();return C(a.quickFilterByLocation(r.transferTo))}),d(26),l()(),s(27,"div",180)(28,"button",181),T("click",function(){let r=b(e).$implicit,a=h();return C(a.viewTripDetails(r))}),x(29,"i",182),d(30," \u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644 "),l(),s(31,"span",183),d(32),l()()()()()()}if(i&2){let e=t.$implicit,n=h();m(3),S("ngStyle",$i(10,L5,n.getStatusColor(e.transferStatus))),m(4),q(" ",e.patientName," "),m(2),q("\u20AA",e.totalPrice.toFixed(2)," "),m(5),z(e.vehicleName||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"),m(2),q(" ",n.getFormattedDate(e.day,e.month,e.year)," "),m(4),q(" ",e.transportationTypeName||e.diagnosis||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"," "),m(3),q(" ",e.transferFrom," "),m(3),q(" ",e.transferTo," "),m(5),S("ngClass",n.getStatusBadgeClass(e.transferStatus)),m(),q(" ",e.transferStatus," ")}}function pF(i,t){i&1&&(s(0,"div",16),x(1,"i",184),s(2,"p",185),d(3,"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0631\u062D\u0644\u0627\u062A \u0645\u0637\u0627\u0628\u0642\u0629 \u0644\u0644\u0641\u0644\u0627\u062A\u0631 \u0627\u0644\u0645\u062D\u062F\u062F\u0629."),l()())}function hF(i,t){if(i&1){let e=Q();s(0,"div",17)(1,"app-pagination",186),T("pageChange",function(r){b(e);let a=h();return C(a.onPageChange(r))})("itemsPerPageChange",function(r){b(e);let a=h();return C(a.onItemsPerPageChange(r))}),l()()}if(i&2){let e=h();m(),S("currentPage",e.currentPage)("totalItems",e.filteredTrips().length)("itemsPerPage",e.itemsPerPage)("maxVisiblePages",5)}}var kc=class i{constructor(t,e,n,r,a,u){this.globalVars=t;this.toastService=e;this.validationService=n;this.tripService=r;this.vehicleService=a;this.exportService=u;this.globalVars.setGlobalHeader("\u0627\u0644\u0631\u062D\u0644\u0627\u062A \u0648\u0627\u0644\u0646\u0642\u0644\u064A\u0627\u062A")}isFilterPanelVisible=Z(!1);today=new Date;thisyear=this.today.getFullYear();thismonth=this.today.getMonth();thisday=this.today.getDate();dateFilterType="single";dateFilterDay=null;dateFilterMonth=null;dateFilterYear=null;dateFilterDayFrom=null;dateFilterMonthFrom=null;dateFilterYearFrom=null;dateFilterDayTo=null;dateFilterMonthTo=null;dateFilterYearTo=null;patientFilterValue="";locationToFilterValue="";selectedStatus="All";selectedLocationTag="all";selectedLocationType="all";filterTransferToId="";filterStatus=Z("All");dateFilter=Z({type:"single"});patientNameFilter=Z("");locationToFilter=Z("");locationTagFilter=Z("all");locationTypes=[{value:"hospital",label:"\u0645\u0633\u062A\u0634\u0641\u0649"},{value:"clinic",label:"\u0639\u064A\u0627\u062F\u0629"},{value:"emergency",label:"\u0637\u0648\u0627\u0631\u0626"},{value:"other",label:"\u0623\u062E\u0631\u0649"}];isAddTripModalOpen=Z(!1);isViewTripModalOpen=Z(!1);isEditTripModalOpen=Z(!1);isDeleteTripModalOpen=Z(!1);isAddingNewTrip=Z(!1);selectedTrip=Z(null);tripToDelete=Z(null);confirmationModalConfig=Z({type:"delete",title:"",message:"",confirmButtonText:"",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621"});tripForm={date:this.getFormattedDateForInput(this.thisday,this.thismonth,this.thisyear),vehicleId:"",vehicleName:"",transferFrom:"",transferFromId:"",transferFromTag:"common",transferTo:"",transferToId:"",transferToTag:"common",start:null,end:null,patientName:"",patientContact:"",ymdNumber:null,ymdPeriod:"\u064A\u0648\u0645",transferStatus:"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0646\u0642\u0644",diagnosis:"",transportationTypeId:"",transportationTypeName:"",tripType:"",otherExpenses:0,totalPrice:0,payedPrice:0,paramedicShare:0,tripNotes:""};getFormattedDateForInput(t,e,n){return`${n}-${String(e).padStart(2,"0")}-${String(t).padStart(2,"0")}`}extractDateParts(t){let e=new Date(t+"T00:00:00");return{day:e.getDate(),month:e.getMonth()+1,year:e.getFullYear()}}get calculatedDiesel(){let t=this.tripForm.start||0,e=this.tripForm.end||0;return Math.max(0,e-t)}vehicleSearchTerm=Z("");vehiclesList=[];transferStatuses=["\u0645\u064A\u062F\u0627\u0646\u064A","\u062A\u0645 \u0627\u0644\u0646\u0642\u0644","\u0628\u0644\u0627\u063A \u0643\u0627\u0630\u0628","\u064A\u0646\u0642\u0644","\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0646\u0642\u0644","\u0635\u064A\u0627\u0646\u0629","\u0631\u0641\u0636 \u0627\u0644\u0646\u0642\u0644","\u0627\u062E\u0631\u0649"];tripTypes=["\u062F\u0627\u062E\u0644\u064A","\u0648\u0633\u0637","\u062E\u0627\u0631\u062C\u064A","\u0627\u062E\u0631\u0649"];filteredVehiclesList=We(()=>{let t=this.vehicleSearchTerm().toLowerCase();return this.vehiclesList.filter(e=>e.vehicleName?.toLowerCase().includes(t)||e.vehicleId?.toLowerCase().includes(t))});ngOnInit(){this.loadVehicles(),this.loadData()}loadVehicles(){this.vehicleService.getVehicles({limit:1e3}).subscribe({next:t=>{this.vehiclesList=t.data.map(e=>({id:e.id,vehicleId:e.vehicleId,vehicleName:e.vehicleName}))},error:t=>{console.error("Error loading vehicles:",t),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A")}})}currentPage=1;itemsPerPage=10;totalRecords=0;isLoading=Z(!1);isExporting=Z(!1);calculateShares(t,e,n){let u=t-e-n-(this.tripForm.otherExpenses||0),p=u/3,g=u/3*2;return{paramedicShare:e,driverShare:p,eqShare:g}}getDateString(t,e,n){return`${n}-${String(e).padStart(2,"0")}-${String(t).padStart(2,"0")}`}trips=Z([]);loadData(){this.isLoading.set(!0);let t={page:this.currentPage,limit:this.itemsPerPage,status:this.filterStatus()!=="All"?this.filterStatus():void 0},e=this.dateFilter();e.type==="single"&&e.single?(t.startDate=e.single.toISOString().split("T")[0],t.endDate=e.single.toISOString().split("T")[0]):e.type==="range"&&e.from&&e.to&&(t.startDate=e.from.toISOString().split("T")[0],t.endDate=e.to.toISOString().split("T")[0]),this.patientNameFilter()&&(t.patientName=this.patientNameFilter()),this.filterTransferToId&&(t.transferToId=this.filterTransferToId);let n=this.locationTagFilter();n&&n!=="all"&&(t.locationTag=n),this.selectedLocationType&&this.selectedLocationType!=="all"&&(t.locationType=this.selectedLocationType),this.tripService.getTrips(t).subscribe({next:r=>{this.trips.set(r.data),this.totalRecords=r.total,this.isLoading.set(!1)},error:r=>{console.error("Error loading trips:",r),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0631\u062D\u0644\u0627\u062A"),this.isLoading.set(!1)}})}filteredTrips=We(()=>this.trips());getPaginatedTrips(){return this.trips()}onPageChange(t){this.currentPage=t,this.loadData()}onItemsPerPageChange(t){this.itemsPerPage=t,this.currentPage=1,this.loadData()}toggleFilterPanel(){this.isFilterPanelVisible.update(t=>!t)}quickFilterByPatient(t){this.patientFilterValue=t,this.patientNameFilter.set(t)}quickFilterByDate(t,e,n){this.dateFilterType="single",this.dateFilterDay=t,this.dateFilterMonth=e,this.dateFilterYear=n;let r=new Date(n,e-1,t);this.dateFilter.set({type:"single",single:r})}onTransferToFilterSelected(t){t?this.filterTransferToId=t.id:this.filterTransferToId="",this.currentPage=1,this.loadData()}quickFilterByLocation(t){this.locationToFilterValue=t,this.locationToFilter.set(t),this.currentPage=1,this.loadData()}getStatusColor(t){switch(t){case"\u062A\u0645 \u0627\u0644\u0646\u0642\u0644":return"#28A745";case"\u0645\u064A\u062F\u0627\u0646\u064A":return"#17A2B8";case"\u0628\u0644\u0627\u063A \u0643\u0627\u0630\u0628":case"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0646\u0642\u0644":case"\u0631\u0641\u0636 \u0627\u0644\u0646\u0642\u0644":return"#DC3545";case"\u0635\u064A\u0627\u0646\u0629":return"#6C757D";case"\u064A\u0646\u0642\u0644":return"#FFC107";default:return"#6C757D"}}getStatusBadgeClass(t){switch(t){case"\u062A\u0645 \u0627\u0644\u0646\u0642\u0644":return"text-bg-success";case"\u0645\u064A\u062F\u0627\u0646\u064A":return"text-bg-info";case"\u0628\u0644\u0627\u063A \u0643\u0627\u0630\u0628":case"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0646\u0642\u0644":case"\u0631\u0641\u0636 \u0627\u0644\u0646\u0642\u0644":return"text-bg-danger";case"\u0635\u064A\u0627\u0646\u0629":return"text-bg-secondary";case"\u064A\u0646\u0642\u0644":return"text-bg-warning";default:return"text-bg-secondary"}}applyFilters(){if(this.filterStatus.set(this.selectedStatus),this.dateFilterType==="single"&&this.dateFilterDay&&this.dateFilterMonth&&this.dateFilterYear){let t=new Date(this.dateFilterYear,this.dateFilterMonth-1,this.dateFilterDay);this.dateFilter.set({type:"single",single:t})}else if(this.dateFilterType==="range"&&this.dateFilterDayFrom&&this.dateFilterMonthFrom&&this.dateFilterYearFrom&&this.dateFilterDayTo&&this.dateFilterMonthTo&&this.dateFilterYearTo){let t=new Date(this.dateFilterYearFrom,this.dateFilterMonthFrom-1,this.dateFilterDayFrom),e=new Date(this.dateFilterYearTo,this.dateFilterMonthTo-1,this.dateFilterDayTo);this.dateFilter.set({type:"range",from:t,to:e})}else this.dateFilter.set({type:"single"});this.patientNameFilter.set(this.patientFilterValue),this.locationToFilter.set(this.locationToFilterValue),this.locationTagFilter.set(this.selectedLocationTag),this.currentPage=1,this.loadData()}resetFilters(){this.dateFilterType="single",this.dateFilterDay=null,this.dateFilterMonth=null,this.dateFilterYear=null,this.dateFilterDayFrom=null,this.dateFilterMonthFrom=null,this.dateFilterYearFrom=null,this.dateFilterDayTo=null,this.dateFilterMonthTo=null,this.dateFilterYearTo=null,this.patientFilterValue="",this.locationToFilterValue="",this.selectedStatus="All",this.selectedLocationTag="all",this.filterStatus.set("All"),this.dateFilter.set({type:"single"}),this.patientNameFilter.set(""),this.locationToFilter.set(""),this.locationTagFilter.set("all"),this.currentPage=1,this.loadData()}selectStatus(t){this.selectedStatus=t,this.filterStatus.set(t),this.currentPage=1,this.loadData()}getStatusClass(t){return this.selectedStatus===t?"btn-primary-custom":"btn-outline-secondary text-dark"}closeAddTripModal(){this.isAddTripModalOpen.set(!1),this.isAddingNewTrip.set(!1)}openAddTripModal(){this.isAddingNewTrip.set(!0),this.tripForm={date:this.getFormattedDateForInput(this.thisday,this.thismonth+1,this.thisyear),vehicleId:"",vehicleName:"",transferFrom:"",transferFromId:"",transferFromTag:"common",transferTo:"",transferToId:"",transferToTag:"common",start:null,end:null,patientName:"",patientContact:"",ymdNumber:null,ymdPeriod:"\u064A\u0648\u0645",transferStatus:"\u064A\u0646\u0642\u0644",diagnosis:"",transportationTypeId:"",transportationTypeName:"",tripType:"",otherExpenses:0,totalPrice:0,payedPrice:0,paramedicShare:0,tripNotes:""},this.vehicleSearchTerm.set(""),this.isAddTripModalOpen.set(!0)}calculateParamedicShare(t,e){let n={\u062F\u0627\u062E\u0644\u064A:20,\u0648\u0633\u0637:60,\u062E\u0627\u0631\u062C\u064A:80};return t==="\u0627\u062E\u0631\u0649"?e??0:n[t]??0}onTripTypeChange(){this.tripForm.tripType&&this.tripForm.tripType!=="\u0627\u062E\u0631\u0649"?this.tripForm.paramedicShare=this.calculateParamedicShare(this.tripForm.tripType):this.tripForm.tripType==="\u0627\u062E\u0631\u0649"||(this.tripForm.paramedicShare=0)}onVehicleSelect(t){let n=t.target.value;if(!n){this.tripForm.vehicleId="",this.tripForm.vehicleName="",this.tripForm.start=null;return}let r=this.vehiclesList.find(a=>a.id===n);r&&(this.tripForm.vehicleId=n,this.tripForm.vehicleName=r.vehicleName)}onTransferFromSelected(t){this.tripForm.transferFrom=t.name,this.tripForm.transferFromTag=t.tag,t.isNew?this.tripForm.transferFromId="":this.tripForm.transferFromId=t.id}onTransferToSelected(t){this.tripForm.transferTo=t.name,this.tripForm.transferToTag=t.tag,t.isNew?this.tripForm.transferToId="":this.tripForm.transferToId=t.id}onTransportationTypeSelected(t){this.tripForm.transportationTypeId=t.id,this.tripForm.transportationTypeName=t.name}addTrip(){let t=this.calculatedDiesel*1,e=this.calculateShares(this.tripForm.totalPrice,this.tripForm.paramedicShare,t),{day:n,month:r,year:a}=this.extractDateParts(this.tripForm.date);this.tripService.createTrip(ve({day:n,month:r,year:a,vehicleId:this.tripForm.vehicleId,vehicleName:this.tripForm.vehicleName,driver:"",paramedic:"",transferFrom:this.tripForm.transferFrom,transferFromId:this.tripForm.transferFromId,transferFromTag:this.tripForm.transferFromTag,transferTo:this.tripForm.transferTo,transferToId:this.tripForm.transferToId,transferToTag:this.tripForm.transferToTag,start:this.tripForm.start||0,end:this.tripForm.end||0,diesel:this.calculatedDiesel,patientName:this.tripForm.patientName,patientContact:this.tripForm.patientContact||void 0,ymdValue:this.tripForm.ymdNumber||0,ymdPeriod:this.tripForm.ymdPeriod,transferStatus:this.tripForm.transferStatus,diagnosis:this.tripForm.diagnosis,transportationTypeId:this.tripForm.transportationTypeId||void 0,transportationTypeName:this.tripForm.transportationTypeName||void 0,tripType:this.tripForm.tripType||void 0,otherExpenses:this.tripForm.otherExpenses,totalPrice:this.tripForm.totalPrice,payedPrice:this.tripForm.payedPrice,tripNotes:this.tripForm.tripNotes},e)).subscribe({next:()=>{this.isAddTripModalOpen.set(!1),this.toastService.success("\u062A\u0645\u062A \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0631\u062D\u0644\u0629 \u0628\u0646\u062C\u0627\u062D"),this.loadData()},error:u=>{console.error("Error creating trip:",u),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0631\u062D\u0644\u0629")}})}openEditTripModal(){this.isAddingNewTrip.set(!1);let t=this.selectedTrip();t&&(this.tripForm={date:this.getFormattedDateForInput(t.day,t.month,t.year),vehicleId:t.vehicleId||"",vehicleName:t.vehicleName||"",transferFrom:t.transferFrom,transferFromId:t.transferFromId||"",transferFromTag:t.transferFromTag||"common",transferTo:t.transferTo,transferToId:t.transferToId||"",transferToTag:t.transferToTag||"common",start:t.start===0?null:t.start,end:t.end===0?null:t.end,patientName:t.patientName,patientContact:t.patientContact||"",ymdNumber:t.ymdValue&&t.ymdValue>0?t.ymdValue:null,ymdPeriod:t.ymdPeriod||"\u064A\u0648\u0645",transferStatus:t.transferStatus,diagnosis:t.diagnosis,transportationTypeId:t.transportationTypeId||"",transportationTypeName:t.transportationTypeName||"",tripType:t.tripType||"",otherExpenses:t.otherExpenses||0,totalPrice:t.totalPrice,payedPrice:t.payedPrice,paramedicShare:t.paramedicShare,tripNotes:t.tripNotes||""},this.vehicleSearchTerm.set(""),this.isViewTripModalOpen.set(!1),this.isEditTripModalOpen.set(!0))}saveEditTrip(){let t=this.selectedTrip();if(t){let e=this.calculatedDiesel*1,n=this.calculateShares(this.tripForm.totalPrice,this.tripForm.paramedicShare,e),{day:r,month:a,year:u}=this.extractDateParts(this.tripForm.date),p=ve({day:r,month:a,year:u,vehicleId:this.tripForm.vehicleId,vehicleName:this.tripForm.vehicleName,transferFrom:this.tripForm.transferFrom,transferFromId:this.tripForm.transferFromId,transferFromTag:this.tripForm.transferFromTag,transferTo:this.tripForm.transferTo,transferToId:this.tripForm.transferToId,transferToTag:this.tripForm.transferToTag,start:this.tripForm.start||0,end:this.tripForm.end||0,diesel:this.calculatedDiesel,patientName:this.tripForm.patientName,patientContact:this.tripForm.patientContact||void 0,ymdValue:this.tripForm.ymdNumber||0,ymdPeriod:this.tripForm.ymdPeriod,transferStatus:this.tripForm.transferStatus,diagnosis:this.tripForm.diagnosis,transportationTypeId:this.tripForm.transportationTypeId||void 0,transportationTypeName:this.tripForm.transportationTypeName||void 0,tripType:this.tripForm.tripType||void 0,otherExpenses:this.tripForm.otherExpenses,totalPrice:this.tripForm.totalPrice,payedPrice:this.tripForm.payedPrice,tripNotes:this.tripForm.tripNotes},n);this.tripService.updateTrip(t.id,p).subscribe({next:g=>{let v=Qe(ve(ve(ve({},t),p),g&&Object.keys(g).length>0?g:{}),{id:t.id});this.selectedTrip.set(v),this.isEditTripModalOpen.set(!1),this.isViewTripModalOpen.set(!0),this.toastService.success("\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0631\u062D\u0644\u0629 \u0628\u0646\u062C\u0627\u062D"),this.loadData()},error:g=>{console.error("Error updating trip:",g),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0631\u062D\u0644\u0629")}})}}viewTripDetails(t){this.selectedTrip.set(t),this.isViewTripModalOpen.set(!0)}closeViewTripModal(){this.isViewTripModalOpen.set(!1),this.selectedTrip.set(null)}closeEditTripModal(){this.isEditTripModalOpen.set(!1),this.isAddingNewTrip.set(!1)}showDeleteConfirmation(t){this.tripToDelete.set(t),this.confirmationModalConfig.set({type:"delete",title:"\u062A\u0623\u0643\u064A\u062F \u062D\u0630\u0641 \u0627\u0644\u0631\u062D\u0644\u0629",message:`\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u0623\u0646\u0643 \u062A\u0631\u064A\u062F \u062D\u0630\u0641 \u0631\u062D\u0644\u0629 \u0627\u0644\u0645\u0631\u064A\u0636 ${t.patientName}\u061F<br>\u0644\u0627 \u064A\u0645\u0643\u0646 \u0627\u0644\u062A\u0631\u0627\u062C\u0639 \u0639\u0646 \u0647\u0630\u0627 \u0627\u0644\u0625\u062C\u0631\u0627\u0621.`,confirmButtonText:"\u062D\u0630\u0641",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621",highlightedText:t.patientName}),this.isDeleteTripModalOpen.set(!0)}closeDeleteConfirmation(){this.tripToDelete.set(null),this.isDeleteTripModalOpen.set(!1)}confirmDeleteTrip(){let t=this.tripToDelete();t&&this.tripService.deleteTrip(t.id).subscribe({next:()=>{this.toastService.success(`\u062A\u0645 \u062D\u0630\u0641 \u0631\u062D\u0644\u0629 \u0627\u0644\u0645\u0631\u064A\u0636: ${t.patientName}`),this.closeDeleteConfirmation(),this.selectedTrip()?.id===t.id&&this.closeViewTripModal(),this.loadData()},error:e=>{console.error("Error deleting trip:",e),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u062D\u0630\u0641 \u0627\u0644\u0631\u062D\u0644\u0629")}})}getFormattedDate(t,e,n){return`${n}/${String(e).padStart(2,"0")}/${String(t).padStart(2,"0")}`}formatTimestamp(t){return t?(typeof t=="string"?new Date(t):t).toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}):"\u063A\u064A\u0631 \u0645\u062A\u0627\u062D"}getTripDuration(t,e){if(!t||!e)return"\u063A\u064A\u0631 \u0645\u062A\u0627\u062D";let n=typeof t=="string"?new Date(t):t,a=(typeof e=="string"?new Date(e):e).getTime()-n.getTime(),u=Math.floor(a/6e4),p=Math.floor(u/60),g=u%60;return`${p}\u0633 ${g}\u062F`}forceCloseTrip(){let t=this.selectedTrip();if(!t)return;if(t.isClosed){this.toastService.error("\u0627\u0644\u0631\u062D\u0644\u0629 \u0645\u063A\u0644\u0642\u0629 \u0628\u0627\u0644\u0641\u0639\u0644");return}if(!["\u062A\u0645 \u0627\u0644\u0646\u0642\u0644","\u0631\u0641\u0636 \u0627\u0644\u0646\u0642\u0644","\u0628\u0644\u0627\u063A \u0643\u0627\u0630\u0628"].includes(t.transferStatus)){this.toastService.error(`\u0644\u0627 \u064A\u0645\u0643\u0646 \u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u0631\u062D\u0644\u0629 \u0628\u062D\u0627\u0644\u0629 "${t.transferStatus}". \u064A\u0631\u062C\u0649 \u062A\u063A\u064A\u064A\u0631 \u0627\u0644\u062D\u0627\u0644\u0629 \u0625\u0644\u0649 \u062D\u0627\u0644\u0629 \u0646\u0647\u0627\u0626\u064A\u0629 \u0623\u0648\u0644\u0627\u064B.`);return}this.tripService.closeTrip(t.id,t.transferStatus).subscribe({next:()=>{this.toastService.success("\u062A\u0645 \u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u0631\u062D\u0644\u0629 \u0628\u0646\u062C\u0627\u062D"),this.selectedTrip.update(n=>n?Qe(ve({},n),{isClosed:!0}):null),this.loadData()},error:n=>{console.error("Error closing trip:",n),this.toastService.error("\u0641\u0634\u0644 \u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u0631\u062D\u0644\u0629")}})}uncloseTrip(){let t=this.selectedTrip();if(t){if(!t.isClosed){this.toastService.error("\u0627\u0644\u0631\u062D\u0644\u0629 \u063A\u064A\u0631 \u0645\u063A\u0644\u0642\u0629");return}this.tripService.uncloseTrip(t.id).subscribe({next:()=>{this.toastService.success("\u062A\u0645 \u0625\u0639\u0627\u062F\u0629 \u0641\u062A\u062D \u0627\u0644\u0631\u062D\u0644\u0629 \u0628\u0646\u062C\u0627\u062D"),this.selectedTrip.update(e=>e?Qe(ve({},e),{isClosed:!1,closedAt:null,closedBy:null}):null),this.loadData()},error:e=>{console.error("Error reopening trip:",e),this.toastService.error("\u0641\u0634\u0644 \u0625\u0639\u0627\u062F\u0629 \u0641\u062A\u062D \u0627\u0644\u0631\u062D\u0644\u0629")}})}}exportToExcel(){this.isExporting.set(!0);let t={status:this.filterStatus()!=="All"?this.filterStatus():void 0},e=this.dateFilter();if(e.type==="single"&&e.single)t.startDate=e.single.toISOString().split("T")[0],t.endDate=e.single.toISOString().split("T")[0];else if(e.type==="range"&&e.from&&e.to)t.startDate=e.from.toISOString().split("T")[0],t.endDate=e.to.toISOString().split("T")[0];else{let n=new Date,r=new Date(n.getFullYear(),n.getMonth(),1),a=new Date(n.getFullYear(),n.getMonth()+1,0);t.startDate=r.toISOString().split("T")[0],t.endDate=a.toISOString().split("T")[0]}this.patientNameFilter()&&(t.patientName=this.patientNameFilter()),this.filterTransferToId&&(t.transferToId=this.filterTransferToId),this.selectedLocationTag!=="all"&&(t.locationTag=this.selectedLocationTag),this.selectedLocationType!=="all"&&(t.locationType=this.selectedLocationType),this.tripService.getAllTripsForExport(t).subscribe({next:n=>{if(n.length===0){this.toastService.error("\u0644\u0627 \u062A\u0648\u062C\u062F \u0631\u062D\u0644\u0627\u062A \u0644\u062A\u0635\u062F\u064A\u0631\u0647\u0627"),this.isExporting.set(!1);return}let r=[{header:"\u0627\u0644\u062A\u0627\u0631\u064A\u062E",key:"formattedDate",width:12},{header:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0631\u064A\u0636",key:"patientName",width:20},{header:"\u0647\u0627\u062A\u0641 \u0627\u0644\u0645\u0631\u064A\u0636",key:"patientContact",width:15},{header:"\u0645\u0646",key:"transferFrom",width:20},{header:"\u0625\u0644\u0649",key:"transferTo",width:20},{header:"\u0627\u0644\u0645\u0631\u0643\u0628\u0629",key:"vehicleName",width:15},{header:"\u0627\u0644\u0633\u0627\u0626\u0642",key:"driver",width:18},{header:"\u0627\u0644\u0645\u0633\u0639\u0641",key:"paramedic",width:18},{header:"\u0646\u0648\u0639 \u0627\u0644\u0631\u062D\u0644\u0629",key:"tripType",width:12},{header:"\u062D\u0627\u0644\u0629 \u0627\u0644\u0646\u0642\u0644",key:"transferStatus",width:15},{header:"\u0627\u0644\u062A\u0634\u062E\u064A\u0635",key:"transportationTypeName",width:25},{header:"\u0627\u0644\u0633\u0639\u0631 \u0627\u0644\u0643\u0627\u0645\u0644",key:"totalPrice",width:12},{header:"\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0645\u062F\u0641\u0648\u0639",key:"payedPrice",width:12},{header:"\u0627\u0644\u062F\u064A\u0632\u0644 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645",key:"diesel",width:12},{header:"\u062D\u0635\u0629 \u0627\u0644\u0645\u0633\u0639\u0641",key:"paramedicShare",width:12},{header:"\u062D\u0635\u0629 \u0627\u0644\u0633\u0627\u0626\u0642",key:"driverShare",width:12},{header:"\u062D\u0635\u0629 \u0627\u0644\u0634\u0631\u0643\u0629",key:"companyShare",width:12},{header:"\u062D\u0635\u0629 \u0627\u0644\u0645\u0627\u0644\u0643",key:"ownerShare",width:12},{header:"\u0645\u0635\u0627\u0631\u064A\u0641 \u0623\u062E\u0631\u0649",key:"otherExpenses",width:12},{header:"\u0627\u0644\u0645\u0644\u0627\u062D\u0638\u0627\u062A",key:"tripNotes",width:30},{header:"\u062A\u0645 \u0627\u0644\u0642\u0628\u0648\u0644 \u0641\u064A",key:"acceptedAt",width:18},{header:"\u062A\u0645 \u0627\u0644\u0625\u063A\u0644\u0627\u0642 \u0641\u064A",key:"closedAt",width:18},{header:"\u0645\u063A\u0644\u0642\u0629\u061F",key:"isClosedText",width:10}],a=n.map(g=>{let v=g.paramedicShare||0,y=g.otherExpenses||0,M=(g.diesel||0)*1,O=(g.totalPrice-v-y-M)/3*2,F=O/2+M,D=O/2;return Qe(ve({},g),{formattedDate:this.exportService.formatDate(g.day,g.month,g.year),diesel:g.diesel||0,otherExpenses:y,companyShare:F,ownerShare:D,tripNotes:g.tripNotes||"",acceptedAt:g.acceptedAt?new Date(g.acceptedAt).toLocaleString("ar-EG"):"",closedAt:g.closedAt?new Date(g.closedAt).toLocaleString("ar-EG"):"",isClosedText:this.exportService.formatBoolean(g.isClosed)})}),u={formattedDate:"\u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A",patientName:"",patientContact:"",transferFrom:"",transferTo:"",vehicleName:"",driver:"",paramedic:"",tripType:"",transferStatus:"",transportationTypeName:"",totalPrice:Number(a.reduce((g,v)=>g+(Number(v.totalPrice)||0),0)).toFixed(2),payedPrice:Number(a.reduce((g,v)=>g+(Number(v.payedPrice)||0),0)).toFixed(2),diesel:Number(a.reduce((g,v)=>g+(Number(v.diesel)||0),0)).toFixed(2),paramedicShare:Number(a.reduce((g,v)=>g+(Number(v.paramedicShare)||0),0)).toFixed(2),driverShare:Number(a.reduce((g,v)=>g+(Number(v.driverShare)||0),0)).toFixed(2),companyShare:Number(a.reduce((g,v)=>g+(Number(v.companyShare)||0),0)).toFixed(2),ownerShare:Number(a.reduce((g,v)=>g+(Number(v.ownerShare)||0),0)).toFixed(2),otherExpenses:Number(a.reduce((g,v)=>g+(Number(v.otherExpenses)||0),0)).toFixed(2),tripNotes:"",acceptedAt:"",closedAt:"",isClosedText:""};a.push(u);let p=this.exportService.generateFilenameWithDates("trips_export",t.startDate,t.endDate);this.exportService.exportToExcel(a,r,p,"\u0627\u0644\u0631\u062D\u0644\u0627\u062A"),this.toastService.success(`\u062A\u0645 \u062A\u0635\u062F\u064A\u0631 ${n.length} \u0631\u062D\u0644\u0629 \u0628\u0646\u062C\u0627\u062D`),this.isExporting.set(!1)},error:n=>{console.error("Error exporting trips:",n),this.toastService.error("\u0641\u0634\u0644 \u062A\u0635\u062F\u064A\u0631 \u0627\u0644\u0631\u062D\u0644\u0627\u062A"),this.isExporting.set(!1)}})}getDaysInMonth(t,e){let n=new Date(e,t,0).getDate();return Array.from({length:n},(r,a)=>a+1)}getMonths(){return Array.from({length:12},(t,e)=>e+1)}getYears(){let t=new Date().getFullYear();return Array.from({length:20},(e,n)=>t-10+n)}static \u0275fac=function(e){return new(e||i)(G(ft),G(Ye),G(cr),G(Ln),G(oi),G(Ms))};static \u0275cmp=Oe({type:i,selectors:[["app-trips"]],decls:24,vars:12,consts:[[1,"d-flex","flex-column","min-vh-100","bg-light"],[3,"confirmed","cancelled","isOpen","config"],["dir","rtl",1,"flex-grow-1","p-3","p-lg-4"],[1,"container-fluid","p-0",2,"max-width","1200px"],[1,"row","g-4"],[1,"col-12","col-lg-5"],[1,"mb-3"],[1,"card","shadow-sm","rounded-xl","p-4","sticky-lg-top","awayFromTop"],[1,"col-12","col-lg-7"],[1,"d-flex","justify-content-end","mb-3","gap-2"],[1,"btn","btn-primary","rounded-pill","shadow-sm","d-flex","align-items-center","gap-2","py-2","px-3","fw-bold",3,"click","disabled"],[1,"fas",3,"ngClass"],[1,"btn","btn-success","rounded-pill","shadow-sm","d-flex","align-items-center","gap-2","py-2","px-3","fw-bold",3,"click"],[1,"fa-solid","fa-circle-plus"],[1,"row","row-cols-1","g-3"],[1,"col"],[1,"col-12","text-center","text-muted","p-5"],[1,"mt-4"],[1,"modal-backdrop","fade","show"],["tabindex","-1","role","dialog",1,"modal","fade","show","d-block"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content","rounded-xl","shadow-lg","border-0"],[1,"modal-header","bg-primary-custom","rounded-top-xl","border-0","justify-content-between","text-white"],[1,"modal-title","fw-bold"],["type","button","data-bs-dismiss","modal","aria-label","Close",2,"background-color","transparent","border","none","color","white",3,"click"],[1,"fa","fa-times"],[1,"modal-body","p-4","text-end",2,"max-height","70vh","overflow-y","auto"],[3,"ngSubmit"],[1,"row","g-3"],[1,"col-12"],[1,"form-label","small","fw-medium"],["type","date","name","tripDate","required","","max","9999-12-31",1,"form-control",3,"ngModelChange","ngModel"],[1,"row","g-2"],[1,"col-6"],["type","number","name","ymdNumber","min","0","max","365","placeholder","\u0627\u0644\u0639\u0645\u0631 (\u0627\u062A\u0631\u0643\u0647 \u0641\u0627\u0631\u063A\u0627\u064B \u0625\u0630\u0627 \u0643\u0627\u0646 0)",1,"form-select",3,"ngModelChange","ngModel"],["name","ymdPeriod","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","\u064A\u0648\u0645"],["value","\u0627\u0633\u0628\u0648\u0639"],["value","\u0634\u0647\u0631"],["value","\u0633\u0646\u0629"],["for","vehicle",1,"form-label","small","fw-medium"],["type","text","placeholder","\u0628\u062D\u062B...",1,"form-control","mb-2",3,"ngModelChange","ngModel","ngModelOptions"],["id","vehicle","name","vehicleId","required","",1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value"],[1,"text-muted"],[1,"col-md-6"],["label","\u0646\u0642\u0644 \u0645\u0646 (\u0627\u062E\u062A\u064A\u0627\u0631\u064A)","placeholder","\u0627\u0628\u062D\u062B \u0639\u0646 \u0645\u0648\u0642\u0639 \u0627\u0644\u0627\u0646\u0637\u0644\u0627\u0642...",3,"locationSelected","required","selectedLocationName"],["label","\u0646\u0642\u0644 \u0627\u0644\u0649 (\u0627\u062E\u062A\u064A\u0627\u0631\u064A)","placeholder","\u0627\u0628\u062D\u062B \u0639\u0646 \u0645\u0648\u0642\u0639 \u0627\u0644\u0648\u0635\u0648\u0644...",3,"locationSelected","required","selectedLocationName"],["for","patientName",1,"form-label","small","fw-medium"],["id","patientName","type","text","placeholder","\u0627\u0633\u0645 \u0627\u0644\u0645\u0631\u064A\u0636","name","patientName","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","patientContact",1,"form-label","small","fw-medium"],["id","patientContact","type","tel","placeholder","05xx xxx xxx","name","patientContact","pattern","05[0-9]{2}\\s?[0-9]{3}\\s?[0-9]{3}",1,"form-control","text-end",2,"direction","ltr",3,"ngModelChange","ngModel"],[1,"col-md-12"],[3,"typeSelected","label","placeholder","selectedTypeName"],["for","transferStatus",1,"form-label","small","fw-medium"],["id","transferStatus","name","transferStatus","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","tripType",1,"form-label","small","fw-medium"],["id","tripType","name","tripType",1,"form-select",3,"ngModelChange","ngModel"],["for","tripNotes",1,"form-label","small","fw-medium"],["id","tripNotes","name","tripNotes","rows","3","placeholder","\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0639\u0627\u0645\u0629 \u0639\u0646 \u0627\u0644\u0631\u062D\u0644\u0629...",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-end","gap-2","mt-4"],["type","button",1,"btn","btn-outline-secondary","rounded-pill","px-4","fw-bold",3,"click"],["type","submit",1,"btn","btn-success","rounded-pill","px-4","fw-bold"],[1,"col-4"],["for","start",1,"form-label","small","fw-medium"],["id","start","type","number","placeholder","","name","start","min","0","required","",1,"form-control","text-end",2,"direction","ltr",3,"ngModelChange","ngModel"],["for","end",1,"form-label","small","fw-medium"],["id","end","type","number","placeholder","","name","end","min","0","required","",1,"form-control","text-end",2,"direction","ltr",3,"ngModelChange","ngModel"],["for","diesel",1,"form-label","small","fw-medium"],["id","diesel","type","number","readonly","",1,"form-control","text-end",2,"direction","ltr","background-color","#e9ecef",3,"value"],["for","totalPrice",1,"form-label","small","fw-medium"],["id","totalPrice","type","number","placeholder","0.00","name","totalPrice","min","0","step","0.01","required","",1,"form-control","text-end",2,"direction","ltr",3,"ngModelChange","ngModel"],["for","payedPrice",1,"form-label","small","fw-medium"],["id","payedPrice","type","number","placeholder","0.00","name","payedPrice","min","0","step","0.01","required","",1,"form-control","text-end",2,"direction","ltr",3,"ngModelChange","ngModel"],["for","otherExpenses",1,"form-label","small","fw-medium"],["id","otherExpenses","type","number","placeholder","0.00","name","otherExpenses","min","0","step","0.01",1,"form-control","text-end",2,"direction","ltr",3,"ngModelChange","ngModel"],["for","paramedicShare",1,"form-label","small","fw-medium"],["id","paramedicShare","type","number","placeholder","0.00","name","paramedicShare","min","0","step","0.01","required","",1,"form-control","text-end",2,"direction","ltr",3,"ngModelChange","ngModel","readonly"],[1,"modal-header","bg-warning","rounded-top-xl","border-0","justify-content-between","text-dark"],["type","button","data-bs-dismiss","modal","aria-label","Close",2,"background-color","transparent","border","none",3,"click"],["for","editVehicle",1,"form-label","small","fw-medium"],["id","editVehicle","name","vehicleId","required","",1,"form-select",3,"ngModelChange","change","ngModel"],["for","editStart",1,"form-label","small","fw-medium"],["id","editStart","type","number","placeholder","","name","start","min","0","required","",1,"form-control","text-end",2,"direction","ltr",3,"ngModelChange","ngModel"],["for","editEnd",1,"form-label","small","fw-medium"],["id","editEnd","type","number","placeholder","","name","end","min","0","required","",1,"form-control","text-end",2,"direction","ltr",3,"ngModelChange","ngModel"],["for","editDiesel",1,"form-label","small","fw-medium"],["id","editDiesel","type","number","readonly","",1,"form-control","text-end",2,"direction","ltr","background-color","#e9ecef",3,"value"],["for","editPatientName",1,"form-label","small","fw-medium"],["id","editPatientName","type","text","placeholder","\u0627\u0633\u0645 \u0627\u0644\u0645\u0631\u064A\u0636","name","patientName","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","editPatientContact",1,"form-label","small","fw-medium"],["id","editPatientContact","type","tel","placeholder","05xx xxx xxx","name","patientContact","pattern","05[0-9]{2}\\s?[0-9]{3}\\s?[0-9]{3}",1,"form-control","text-end",2,"direction","ltr",3,"ngModelChange","ngModel"],["for","editTransferStatus",1,"form-label","small","fw-medium"],["id","editTransferStatus","name","transferStatus","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","editTripType",1,"form-label","small","fw-medium"],["id","editTripType","name","tripType",1,"form-select",3,"ngModelChange","ngModel"],["for","editTotalPrice",1,"form-label","small","fw-medium"],["id","editTotalPrice","type","number","placeholder","0.00","name","totalPrice","min","0","step","0.01","required","",1,"form-control","text-end",2,"direction","ltr",3,"ngModelChange","ngModel"],["for","editPayedPrice",1,"form-label","small","fw-medium"],["id","editPayedPrice","type","number","placeholder","0.00","name","payedPrice","min","0","step","0.01","required","",1,"form-control","text-end",2,"direction","ltr",3,"ngModelChange","ngModel"],["for","editOtherExpenses",1,"form-label","small","fw-medium"],["id","editOtherExpenses","type","number","placeholder","0.00","name","otherExpenses","min","0","step","0.01",1,"form-control","text-end",2,"direction","ltr",3,"ngModelChange","ngModel"],["for","editParamedicShare",1,"form-label","small","fw-medium"],["id","editParamedicShare","type","number","placeholder","0.00","name","paramedicShare","min","0","step","0.01","required","",1,"form-control","text-end",2,"direction","ltr",3,"ngModelChange","ngModel","readonly"],[1,"row","g-3","mt-1"],["for","editTripNotes",1,"form-label","small","fw-medium"],["id","editTripNotes","name","tripNotes","rows","3","placeholder","\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0639\u0627\u0645\u0629 \u0639\u0646 \u0627\u0644\u0631\u062D\u0644\u0629...",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-warning","rounded-pill","px-4","fw-bold"],[1,"modal-header","bg-primary-custom","rounded-top-xl","border-0","justify-content-between"],["type","button","data-bs-dismiss","modal","aria-label","Close",2,"border","none","background","none",3,"click"],[1,"fas","fa-times"],[1,"modal-body","p-4","text-end",2,"overflow","auto"],[1,"text-muted","small","mb-1"],[1,"fw-bold"],["dir","ltr",1,"fw-bold"],[3,"status","type","size"],[1,"my-3"],[1,"fw-bold","mb-3"],[1,"my-2"],[1,"badge"],[1,"d-flex","justify-content-between","gap-2","mt-4"],["type","button",1,"btn","btn-danger","rounded-pill","px-4","fw-bold",3,"click"],[1,"fa-solid","fa-trash","me-1"],[1,"d-flex","gap-2"],["type","button",1,"btn","btn-success","rounded-pill","px-4","fw-bold"],["type","button",1,"btn","btn-primary","rounded-pill","px-4","fw-bold"],["type","button",1,"btn","btn-warning","rounded-pill","px-4","fw-bold",3,"click"],[1,"fa-solid","fa-edit","me-1"],[1,"fw-medium"],["type","button",1,"btn","btn-success","rounded-pill","px-4","fw-bold",3,"click"],[1,"fa-solid","fa-lock","me-1"],["type","button",1,"btn","btn-primary","rounded-pill","px-4","fw-bold",3,"click"],[1,"fa-solid","fa-lock-open","me-1"],[1,"btn","btn-success","w-100","fw-bold","py-2","rounded-xl","shadow-sm",3,"click"],[1,"fa-solid","fa-filter","me-2"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"h5","fw-bold","mb-0","text-end"],["type","button",1,"btn","btn-sm","btn-outline-secondary","rounded-circle",2,"width","32px","height","32px",3,"click"],[1,"fa-solid","fa-times"],[1,"row","g-3","mb-3","text-end"],["role","group",1,"btn-group","w-100"],["type","radio","name","dateFilterType","id","singleDate","value","single",1,"btn-check","rounded-3",3,"ngModelChange","ngModel"],["for","singleDate",1,"btn","btn-outline-primary"],[2,"width","10px"],["type","radio","name","dateFilterType","id","rangeDate","value","range",1,"btn-check","rounded-3",3,"ngModelChange","ngModel"],["for","rangeDate",1,"btn","btn-outline-primary"],[1,"col-sm-6","col-12"],["for","patientFilter",1,"form-label","small","fw-medium"],["id","patientFilter","type","text","placeholder","\u0627\u0633\u0645 \u0627\u0644\u0645\u0631\u064A\u0636...",1,"form-control","text-end",3,"ngModelChange","ngModel"],["for","locationTagFilter",1,"form-label","small","fw-medium"],["id","locationTagFilter",1,"form-select",3,"ngModelChange","ngModel"],["value","all"],["value","common"],["value","custom"],["for","locationTypeFilter",1,"form-label","small","fw-medium"],["id","locationTypeFilter",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"locationSelected","placeholder"],[1,"d-flex","gap-2","mb-4","pb-1","justify-content-center","flex-wrap"],["type","button",1,"btn","btn-sm","rounded-pill","flex-shrink-0","fw-medium",3,"click","ngClass"],["type","button",1,"btn","btn-sm","rounded-pill","flex-shrink-0","fw-medium",3,"ngClass"],[1,"d-grid","gap-2"],[1,"btn","btn-success","fw-bold","py-2",3,"click"],[1,"btn","btn-outline-secondary",3,"click"],[1,"form-select",3,"ngModelChange","ngModel"],["dir","rtl",1,"card","shadow-sm","rounded-xl","overflow-hidden","cursor-pointer"],[1,"d-flex"],[1,"flex-shrink-0",2,"width","8px",3,"ngStyle"],[1,"card-body","p-4","flex-grow-1","text-end"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],["title","\u0627\u0646\u0642\u0631 \u0644\u0644\u0628\u062D\u062B \u0639\u0646 \u0647\u0630\u0627 \u0627\u0644\u0645\u0631\u064A\u0636",1,"h6","fw-bold","m-0","text-dark","clickable-field",3,"click"],["dir","ltr",1,"h6","fw-bold","m-0","text-dark"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"text-muted","small","m-0"],["title","\u0627\u0646\u0642\u0631 \u0644\u0644\u062A\u0635\u0641\u064A\u0629 \u062D\u0633\u0628 \u0647\u0630\u0627 \u0627\u0644\u062A\u0627\u0631\u064A\u062E",1,"text-muted","small","m-0","clickable-field",3,"click"],[1,"text-muted","small","mb-3"],[1,"d-flex","align-items-center","gap-2","small","fw-medium","text-dark","justify-content-end","mb-3"],["title","\u0627\u0646\u0642\u0631 \u0644\u0644\u062A\u0635\u0641\u064A\u0629 \u062D\u0633\u0628 \u0645\u0648\u0642\u0639 \u0627\u0644\u0648\u0635\u0648\u0644 (\u0646\u0642\u0644 \u0627\u0644\u0649)",1,"clickable-field",3,"click"],[1,"fa-solid","fa-arrow-left"],[1,"d-flex","justify-content-between","align-items-center"],[1,"btn","btn-sm","btn-outline-primary","rounded-pill",3,"click"],[1,"fa-solid","fa-info-circle","me-1"],[1,"badge","rounded-pill","fw-bold",3,"ngClass"],[1,"fa-solid","fa-inbox","fs-1","mb-3"],[1,"h5"],[3,"pageChange","itemsPerPageChange","currentPage","totalItems","itemsPerPage","maxVisiblePages"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"app-confirmation-modal",1),T("confirmed",function(){return n.confirmDeleteTrip()})("cancelled",function(){return n.closeDeleteConfirmation()}),l(),H(2,W5,84,21)(3,G5,115,29)(4,K5,11,1),s(5,"main",2)(6,"div",3)(7,"div",4)(8,"div",5),H(9,J5,4,0,"div",6)(10,mF,55,10,"div",7),l(),s(11,"div",8)(12,"div",9)(13,"button",10),T("click",function(){return n.exportToExcel()}),x(14,"i",11),d(15),l(),s(16,"button",12),T("click",function(){return n.openAddTripModal()}),x(17,"i",13),d(18," \u0625\u0636\u0627\u0641\u0629 \u0631\u062D\u0644\u0629 \u062C\u062F\u064A\u062F\u0629 "),l()(),s(19,"div",14),Te(20,fF,33,12,"div",15,op,!1,pF,4,0,"div",16),l(),H(23,hF,2,4,"div",17),l()()()()()),e&2&&(m(),S("isOpen",n.isDeleteTripModalOpen())("config",n.confirmationModalConfig()),m(),le(n.isAddTripModalOpen()?2:-1),m(),le(n.isEditTripModalOpen()&&n.selectedTrip()?3:-1),m(),le(n.isViewTripModalOpen()&&n.selectedTrip()?4:-1),m(5),le(n.isFilterPanelVisible()?-1:9),m(),le(n.isFilterPanelVisible()?10:-1),m(3),S("disabled",n.isExporting()),m(),S("ngClass",n.isExporting()?"fa-spinner fa-spin":"fa-file-excel"),m(),q(" ",n.isExporting()?"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u0635\u062F\u064A\u0631...":"\u062A\u0635\u062F\u064A\u0631 Excel"," "),m(5),Ee(n.getPaginatedTrips()),m(3),le(n.filteredTrips().length>0?23:-1))},dependencies:[Le,Ft,ai,na,tt,Kt,Ot,Lt,et,vi,At,Gl,ot,Xt,Zt,vf,xi,aa,rt,$t,Mi,Wr,Wi,ss,us],styles:[".fa-inbox[_ngcontent-%COMP%]{color:#6c757d;opacity:.5}.btn-check[_ngcontent-%COMP%]:checked + .btn-outline-primary[_ngcontent-%COMP%]{background-color:#1193d4;border-color:#1193d4;color:#fff}.modal-body[_ngcontent-%COMP%]{max-height:70vh}.btn-warning[_ngcontent-%COMP%]{background-color:#ffc107;border-color:#ffc107;color:#212529}.btn-warning[_ngcontent-%COMP%]:hover{background-color:#e0a800;border-color:#d39e00}.form-control.mb-2[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{font-size:.875rem}[dir=rtl][_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{text-align:right}.clickable-field[_ngcontent-%COMP%]{cursor:pointer;transition:all .2s ease;text-decoration:underline;text-decoration-style:dotted;text-decoration-color:#1193d44d;text-underline-offset:2px}.clickable-field[_ngcontent-%COMP%]:hover{color:#1193d4;text-decoration-color:#1193d4;text-decoration-style:solid}.card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.btn-primary-custom[_ngcontent-%COMP%]{transition:all .3s ease}.btn-primary-custom[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #00000026}@media (min-width: 992px){.sticky-lg-top[_ngcontent-%COMP%]{max-height:78vh;top:70px;overflow:auto}}"],changeDetection:0})};var Pc=class i{constructor(t){this.http=t}API_URL=`${xt.apiEndpoint}/statistics`;getStatistics(t){let e=Nt(t);return this.http.get(this.API_URL,{params:e})}getWeeklyStats(){return this.getStatistics({period:"week"})}getMonthlyStats(){return this.getStatistics({period:"month"})}getCustomRangeStats(t,e){return this.getStatistics({period:"custom",startDate:t,endDate:e})}getMonthlyBreakdown(t){let e=Nt(Qe(ve({},t),{export:"monthly"}));return this.http.get(this.API_URL,{params:e})}getYearlyBreakdown(t,e){return this.getMonthlyBreakdown({period:"yearly",year:t,vehicleId:e})}getCustomRangeBreakdown(t,e,n){return this.getMonthlyBreakdown({period:"custom",startDate:t,endDate:e,vehicleId:n})}static \u0275fac=function(e){return new(e||i)(Ue(It))};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})};var sp=(i,t)=>({"btn-primary":i,"btn-light text-dark":t}),_F=(i,t)=>({height:i,"background-color":t}),vF=(i,t)=>({"fw-bold text-dark":i,"text-secondary":t}),xF=(i,t)=>t.title,yF=(i,t)=>t.day,f2=(i,t)=>t.label,bF=(i,t)=>t.id;function CF(i,t){if(i&1){let e=Q();s(0,"div",9)(1,"div",36)(2,"div",37)(3,"label",38),d(4,"\u0645\u0646 \u062A\u0627\u0631\u064A\u062E"),l(),s(5,"input",39),V("ngModelChange",function(r){b(e);let a=h();return N(a.customStartDate,r)||(a.customStartDate=r),C(r)}),l()(),s(6,"div",37)(7,"label",38),d(8,"\u0625\u0644\u0649 \u062A\u0627\u0631\u064A\u062E"),l(),s(9,"input",39),V("ngModelChange",function(r){b(e);let a=h();return N(a.customEndDate,r)||(a.customEndDate=r),C(r)}),l()(),s(10,"div",37)(11,"button",40),T("click",function(){b(e);let r=h();return C(r.applyCustomRange())}),x(12,"i",41),d(13," \u062A\u0637\u0628\u064A\u0642 "),l()()()()}if(i&2){let e=h();m(5),R("ngModel",e.customStartDate),S("disabled",e.isLoading()),m(4),R("ngModel",e.customEndDate),S("disabled",e.isLoading()),m(2),S("disabled",e.isLoading())}}function wF(i,t){i&1&&(s(0,"div",10)(1,"div",42)(2,"span",43),d(3,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),l()(),s(4,"p",44),d(5,"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0625\u062D\u0635\u0627\u0626\u064A\u0627\u062A..."),l()())}function SF(i,t){if(i&1&&(s(0,"div",12)(1,"div",45)(2,"p",46),d(3),l(),s(4,"p",47),d(5),l(),s(6,"p",48),d(7),l()()()),i&2){let e=t.$implicit;m(3),z(e.title),m(2),z(e.value),m(),S("ngClass",e.trendClass),m(),z(e.trend)}}function TF(i,t){if(i&1&&(s(0,"div",21),x(1,"div",49),s(2,"p",50),d(3),l()()),i&2){let e=t.$implicit;m(),S("ngStyle",xr(3,_F,e.countPercentage+"%",e.isPeak?"#005A9C":"rgba(0, 90, 156, 0.2)")),m(),S("ngClass",xr(6,vF,e.isPeak,!e.isPeak)),m(),z(e.day)}}function EF(i,t){if(i&1&&(em(),x(0,"circle",27)),i&2){let e=t.$implicit,n=h();Pn("class","text-"+e.color)("stroke-dasharray",e.percentage+", 100")("stroke-dashoffset",n.calculateOffset(e.label))}}function AF(i,t){if(i&1&&(s(0,"div",32),x(1,"div",51),s(2,"span",52),d(3),l(),s(4,"span",53),d(5),l()()),i&2){let e=t.$implicit;m(),S("ngClass","bg-"+e.color),m(2),z(e.label),m(2),z(e.value)}}function MF(i,t){if(i&1){let e=Q();s(0,"div",64)(1,"label",38),d(2,"\u0627\u0644\u0633\u0646\u0629"),l(),s(3,"input",82),V("ngModelChange",function(r){b(e);let a=h(2);return N(a.exportYear,r)||(a.exportYear=r),C(r)}),l(),s(4,"small",74),d(5,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0633\u0646\u0629 \u0644\u062A\u0635\u062F\u064A\u0631 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0634\u0647\u0631\u064A\u0629"),l()()}if(i&2){let e=h(2);m(3),R("ngModel",e.exportYear)}}function FF(i,t){if(i&1){let e=Q();s(0,"div",70)(1,"div",83)(2,"label",38),d(3,"\u0645\u0646 \u062A\u0627\u0631\u064A\u062E"),l(),s(4,"input",84),V("ngModelChange",function(r){b(e);let a=h(2);return N(a.exportStartDate,r)||(a.exportStartDate=r),C(r)}),l()(),s(5,"div",83)(6,"label",38),d(7,"\u0625\u0644\u0649 \u062A\u0627\u0631\u064A\u062E"),l(),s(8,"input",85),V("ngModelChange",function(r){b(e);let a=h(2);return N(a.exportEndDate,r)||(a.exportEndDate=r),C(r)}),l()()()}if(i&2){let e=h(2);m(4),R("ngModel",e.exportStartDate),m(4),R("ngModel",e.exportEndDate)}}function kF(i,t){if(i&1&&(s(0,"option",73),d(1),l()),i&2){let e=t.$implicit;S("value",e.id),m(),vt("",e.vehicleName," (",e.vehicleId,")")}}function PF(i,t){i&1&&(s(0,"li"),d(1,"\u0642\u0631\u0627\u0621\u0627\u062A \u0627\u0644\u0639\u062F\u0627\u062F \u0627\u0644\u0634\u0647\u0631\u064A\u0629 \u0644\u0644\u0645\u0631\u0643\u0628\u0629 \u0627\u0644\u0645\u062D\u062F\u062F\u0629"),l())}function DF(i,t){i&1&&(x(0,"i",86),d(1," \u062C\u0627\u0631\u064A \u0627\u0644\u062A\u0635\u062F\u064A\u0631... "))}function IF(i,t){i&1&&(x(0,"i",87),d(1," \u062A\u0635\u062F\u064A\u0631 Excel "))}function OF(i,t){if(i&1){let e=Q();x(0,"div",54),s(1,"div",55)(2,"div",56)(3,"div",57)(4,"div",58)(5,"h5",59),x(6,"i",60),d(7," \u062A\u0635\u062F\u064A\u0631 \u0627\u0644\u062A\u0642\u0631\u064A\u0631 \u0627\u0644\u0633\u0646\u0648\u064A "),l(),s(8,"button",61),T("click",function(){b(e);let r=h();return C(r.closeExportModal())}),l()(),s(9,"div",62)(10,"form",63),T("ngSubmit",function(){b(e);let r=h();return C(r.exportAnnualStatement())}),s(11,"div",64)(12,"label",38),d(13,"\u0646\u0648\u0639 \u0627\u0644\u0641\u062A\u0631\u0629"),l(),s(14,"div",65)(15,"input",66),T("change",function(){b(e);let r=h();return C(r.exportPeriodType.set("yearly"))}),l(),s(16,"label",67),d(17,"\u0633\u0646\u0648\u064A"),l(),s(18,"input",68),T("change",function(){b(e);let r=h();return C(r.exportPeriodType.set("custom"))}),l(),s(19,"label",69),d(20,"\u0641\u062A\u0631\u0629 \u0645\u062E\u0635\u0635\u0629"),l()()(),H(21,MF,6,1,"div",64)(22,FF,9,2,"div",70),s(23,"div",64)(24,"label",38),d(25,"\u0627\u0644\u0645\u0631\u0643\u0628\u0629 (\u0627\u062E\u062A\u064A\u0627\u0631\u064A)"),l(),s(26,"select",71),V("ngModelChange",function(r){b(e);let a=h();return N(a.exportVehicleId,r)||(a.exportVehicleId=r),C(r)}),s(27,"option",72),d(28,"\u0643\u0644 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A"),l(),Te(29,kF,2,3,"option",73,bF),l(),s(31,"small",74),d(32,"\u0627\u062E\u062A\u0631 \u0645\u0631\u0643\u0628\u0629 \u0645\u062D\u062F\u062F\u0629 \u0623\u0648 \u0627\u062A\u0631\u0643 \u0627\u0644\u062D\u0642\u0644 \u0641\u0627\u0631\u063A\u0627\u064B \u0644\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A"),l()(),s(33,"div",75),x(34,"i",76),s(35,"strong"),d(36,"\u0633\u064A\u062A\u0645 \u062A\u0635\u062F\u064A\u0631:"),l(),s(37,"ul",77)(38,"li"),d(39,"\u0645\u0644\u062E\u0635 \u0634\u0647\u0631\u064A (\u0627\u0644\u0648\u0642\u0648\u062F\u060C \u0627\u0644\u0635\u064A\u0627\u0646\u0629\u060C \u0627\u0644\u0631\u062D\u0644\u0627\u062A\u060C \u0627\u0644\u0625\u064A\u0631\u0627\u062F\u0627\u062A)"),l(),s(40,"li"),d(41,"\u062A\u0641\u0635\u064A\u0644 \u062D\u0627\u0644\u0627\u062A \u0627\u0644\u0631\u062D\u0644\u0627\u062A \u062D\u0633\u0628 \u0627\u0644\u0634\u0647\u0631"),l(),s(42,"li"),d(43,"\u0627\u0644\u062A\u0648\u0632\u064A\u0639 \u0627\u0644\u0645\u0627\u0644\u064A (\u0627\u0644\u0645\u0633\u0639\u0641\u064A\u0646\u060C \u0627\u0644\u0633\u0627\u0626\u0642\u064A\u0646\u060C \u0627\u0644\u0634\u0631\u0643\u0629\u060C \u0627\u0644\u0645\u0627\u0644\u0643)"),l(),H(44,PF,2,0,"li"),l()(),s(45,"div",78)(46,"button",79),T("click",function(){b(e);let r=h();return C(r.closeExportModal())}),x(47,"i",80),d(48," \u0625\u0644\u063A\u0627\u0621 "),l(),s(49,"button",81),H(50,DF,2,0)(51,IF,2,0),l()()()()()()()}if(i&2){let e=h();m(15),S("checked",e.exportPeriodType()==="yearly"),m(3),S("checked",e.exportPeriodType()==="custom"),m(3),le(e.exportPeriodType()==="yearly"?21:-1),m(),le(e.exportPeriodType()==="custom"?22:-1),m(4),R("ngModel",e.exportVehicleId),m(3),Ee(e.vehicles()),m(15),le(e.exportVehicleId()?44:-1),m(2),S("disabled",e.isExporting()),m(3),S("disabled",e.isExporting()),m(),le(e.isExporting()?50:51)}}var Dc=class i{constructor(t,e,n,r,a){this.globalVarsService=t;this.statsService=e;this.toastService=n;this.exportService=r;this.vehicleService=a;this.globalVarsService.setGlobalHeader("\u0627\u0644\u0625\u062D\u0635\u0627\u0626\u064A\u0627\u062A")}ngOnInit(){this.loadStats(),this.loadVehicles()}selectedRange=Z("week");customStartDate=Z("");customEndDate=Z("");isLoading=Z(!1);statsData=Z(null);isExportModalOpen=Z(!1);isExporting=Z(!1);exportYear=Z(new Date().getFullYear());exportStartDate=Z("");exportEndDate=Z("");exportVehicleId=Z("");exportPeriodType=Z("yearly");vehicles=Z([]);formatCurrency(t){return`${Math.round(t).toLocaleString("en-US")}\u20AA`}loadStats(){this.isLoading.set(!0);let t=this.selectedRange(),e={period:t};if(t==="custom"){let n=this.customStartDate(),r=this.customEndDate();if(!n||!r){this.toastService.error("\u0627\u0644\u0631\u062C\u0627\u0621 \u062A\u062D\u062F\u064A\u062F \u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0628\u062F\u0627\u064A\u0629 \u0648\u0627\u0644\u0646\u0647\u0627\u064A\u0629"),this.isLoading.set(!1);return}e.startDate=n,e.endDate=r}this.statsService.getStatistics(e).subscribe({next:n=>{this.statsData.set(n),this.isLoading.set(!1)},error:n=>{console.error("Error loading statistics:",n),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0625\u062D\u0635\u0627\u0626\u064A\u0627\u062A"),this.isLoading.set(!1)}})}stats=We(()=>{let t=this.statsData();if(!t)return[{title:"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0631\u062D\u0644\u0627\u062A",value:"...",trend:"...",trendClass:"text-secondary"},{title:"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0625\u064A\u0631\u0627\u062F\u0627\u062A",value:"...",trend:"...",trendClass:"text-secondary"},{title:"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u062A\u0643\u0627\u0644\u064A\u0641",value:"...",trend:"...",trendClass:"text-secondary"},{title:"\u0635\u0627\u0641\u064A \u0627\u0644\u0623\u0631\u0628\u0627\u062D",value:"...",trend:"...",trendClass:"text-secondary"}];let e=(t.fuel.totalCost||0)+(t.maintenance.totalCost||0)+(t.revenue.totalDriverShare||0)+(t.revenue.totalParamedicShare||0)+(t.revenue.totalOtherExpenses||0),n=(t.revenue.totalRevenue||0)-e;return[{title:"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0631\u062D\u0644\u0627\u062A",value:(t.trips.total||0).toLocaleString("en-US"),trend:"N/A",trendClass:"text-secondary"},{title:"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0625\u064A\u0631\u0627\u062F\u0627\u062A",value:this.formatCurrency(t.revenue.totalRevenue||0),trend:"N/A",trendClass:"text-secondary"},{title:"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u062A\u0643\u0627\u0644\u064A\u0641",value:this.formatCurrency(e),trend:"N/A",trendClass:"text-secondary"},{title:"\u0635\u0627\u0641\u064A \u0627\u0644\u0623\u0631\u0628\u0627\u062D",value:this.formatCurrency(n),trend:"N/A",trendClass:n>=0?"text-success-up":"text-danger-down"}]});transportations=We(()=>[]);costBreakdown=We(()=>{let t=this.statsData();if(!t)return[];let e=t.fuel.totalCost||0,n=t.maintenance.totalCost||0,r=t.revenue.totalDriverShare||0,a=t.revenue.totalParamedicShare||0,u=t.revenue.totalOtherExpenses||0,p=e+n+r+a+u;return p===0?[]:[{label:"\u0627\u0644\u0648\u0642\u0648\u062F",value:this.formatCurrency(e),percentage:Math.round(e/p*100),color:"info"},{label:"\u0627\u0644\u0635\u064A\u0627\u0646\u0629",value:this.formatCurrency(n),percentage:Math.round(n/p*100),color:"success"},{label:"\u062D\u0635\u0629 \u0627\u0644\u0633\u0627\u0626\u0642\u064A\u0646",value:this.formatCurrency(r),percentage:Math.round(r/p*100),color:"warning"},{label:"\u062D\u0635\u0629 \u0627\u0644\u0645\u0633\u0639\u0641\u064A\u0646",value:this.formatCurrency(a),percentage:Math.round(a/p*100),color:"danger"},{label:"\u0645\u0635\u0627\u0631\u064A\u0641 \u0623\u062E\u0631\u0649",value:this.formatCurrency(u),percentage:Math.round(u/p*100),color:"secondary"}].filter(g=>g.percentage>0)});transportationsTitle=We(()=>{switch(this.selectedRange()){case"month":return"\u0627\u0644\u0631\u062D\u0644\u0627\u062A \u062D\u0633\u0628 \u0627\u0644\u0623\u0633\u0628\u0648\u0639";case"custom":return"\u0627\u0644\u0631\u062D\u0644\u0627\u062A \u062E\u0644\u0627\u0644 \u0627\u0644\u0641\u062A\u0631\u0629 \u0627\u0644\u0645\u062E\u0635\u0635\u0629";case"week":default:return"\u0627\u0644\u0631\u062D\u0644\u0627\u062A \u062D\u0633\u0628 \u0627\u0644\u064A\u0648\u0645"}});totalCostValue=We(()=>{let t=this.stats().find(e=>e.title==="\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u062A\u0643\u0627\u0644\u064A\u0641");return t?t.value:"0\u20AA"});onRangeChange(t){this.selectedRange.set(t),t!=="custom"&&this.loadStats()}applyCustomRange(){let t=this.customStartDate(),e=this.customEndDate();if(!t||!e){this.toastService.error("\u0627\u0644\u0631\u062C\u0627\u0621 \u062A\u062D\u062F\u064A\u062F \u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0628\u062F\u0627\u064A\u0629 \u0648\u0627\u0644\u0646\u0647\u0627\u064A\u0629");return}if(new Date(t)>new Date(e)){this.toastService.error("\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0628\u062F\u0627\u064A\u0629 \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0642\u0628\u0644 \u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0646\u0647\u0627\u064A\u0629");return}this.loadStats()}refreshStats(){this.loadStats()}calculateOffset(t){let e=this.costBreakdown(),n=0,r=e.findIndex(a=>a.label===t);if(r===-1)return"0";for(let a=0;a<r;a++)n+=e[a].percentage;return"-"+n}loadVehicles(){this.vehicleService.getVehicles({limit:1e3}).subscribe({next:t=>{this.vehicles.set(t.data)},error:t=>{console.error("Error loading vehicles:",t)}})}openExportModal(){this.isExportModalOpen.set(!0)}closeExportModal(){this.isExportModalOpen.set(!1)}exportAnnualStatement(){let t=this.exportPeriodType(),e=this.exportVehicleId();if(t==="yearly"){let r=this.exportYear();if(!r||r<2020||r>2100){this.toastService.error("\u0627\u0644\u0631\u062C\u0627\u0621 \u0625\u062F\u062E\u0627\u0644 \u0633\u0646\u0629 \u0635\u062D\u064A\u062D\u0629");return}}else if(t==="custom"){let r=this.exportStartDate(),a=this.exportEndDate();if(!r||!a){this.toastService.error("\u0627\u0644\u0631\u062C\u0627\u0621 \u062A\u062D\u062F\u064A\u062F \u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0628\u062F\u0627\u064A\u0629 \u0648\u0627\u0644\u0646\u0647\u0627\u064A\u0629");return}}this.isExporting.set(!0),(t==="yearly"?this.statsService.getYearlyBreakdown(this.exportYear(),e||void 0):this.statsService.getCustomRangeBreakdown(this.exportStartDate(),this.exportEndDate(),e||void 0)).subscribe({next:r=>{this.generateExcelReport(r),this.isExporting.set(!1),this.closeExportModal()},error:r=>{console.error("Error fetching monthly breakdown:",r),this.toastService.error("\u0641\u0634\u0644 \u062C\u0644\u0628 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0644\u0644\u062A\u0635\u062F\u064A\u0631"),this.isExporting.set(!1)}})}generateExcelReport(t){let e=[],n=[{header:"\u0627\u0644\u0634\u0647\u0631",key:"monthName",width:12},{header:"\u0627\u0644\u0633\u0646\u0629",key:"year",width:10},{header:"\u0639\u062F\u062F \u0627\u0644\u0631\u062D\u0644\u0627\u062A",key:"totalTrips",width:12},{header:"\u0627\u0644\u0625\u064A\u0631\u0627\u062F\u0627\u062A (\u20AA)",key:"totalRevenue",width:15},{header:"\u0627\u0644\u0648\u0642\u0648\u062F (\u0644\u062A\u0631)",key:"fuelLiters",width:12},{header:"\u062A\u0643\u0644\u0641\u0629 \u0627\u0644\u0648\u0642\u0648\u062F (\u20AA)",key:"fuelCost",width:15},{header:"\u0627\u0644\u0635\u064A\u0627\u0646\u0629 (\u20AA)",key:"maintenanceCost",width:15},{header:"\u062D\u0635\u0629 \u0627\u0644\u0645\u0633\u0639\u0641\u064A\u0646 (\u20AA)",key:"paramedicShare",width:15},{header:"\u062D\u0635\u0629 \u0627\u0644\u0633\u0627\u0626\u0642\u064A\u0646 (\u20AA)",key:"driverShare",width:15},{header:"\u062D\u0635\u0629 \u0627\u0644\u0634\u0631\u0643\u0629 (\u20AA)",key:"companyShare",width:15},{header:"\u062D\u0635\u0629 \u0627\u0644\u0645\u0627\u0644\u0643 (\u20AA)",key:"ownerShare",width:15}];t.vehicleId&&n.push({header:"\u0642\u0631\u0627\u0621\u0629 \u0627\u0644\u0639\u062F\u0627\u062F (\u0628\u062F\u0627\u064A\u0629)",key:"odometerStart",width:18},{header:"\u0642\u0631\u0627\u0621\u0629 \u0627\u0644\u0639\u062F\u0627\u062F (\u0646\u0647\u0627\u064A\u0629)",key:"odometerEnd",width:18},{header:"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0643\u064A\u0644\u0648\u0645\u062A\u0631\u0627\u062A",key:"totalKm",width:18});let r=t.monthlyBreakdown.map(E=>ve({monthName:E.monthName,year:E.year,totalTrips:E.trips.total,totalRevenue:E.revenue.totalRevenue.toFixed(2),fuelLiters:E.fuel.totalLiters.toFixed(2),fuelCost:E.fuel.totalCost.toFixed(2),maintenanceCost:E.maintenance.totalCost.toFixed(2),paramedicShare:E.revenue.totalParamedicShare.toFixed(2),driverShare:E.revenue.totalDriverShare.toFixed(2),companyShare:E.revenue.totalCompanyShare.toFixed(2),ownerShare:E.revenue.totalOwnerShare.toFixed(2)},E.odometer?{odometerStart:E.odometer.startReading,odometerEnd:E.odometer.endReading,totalKm:E.odometer.totalKm}:{}));r.push({monthName:"\u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A",year:"",totalTrips:t.totals.trips.total,totalRevenue:t.totals.revenue.totalRevenue.toFixed(2),fuelLiters:t.totals.fuel.totalLiters.toFixed(2),fuelCost:t.totals.fuel.totalCost.toFixed(2),maintenanceCost:t.totals.maintenance.totalCost.toFixed(2),paramedicShare:t.totals.revenue.totalParamedicShare.toFixed(2),driverShare:t.totals.revenue.totalDriverShare.toFixed(2),companyShare:t.totals.revenue.totalCompanyShare.toFixed(2),ownerShare:t.totals.revenue.totalOwnerShare.toFixed(2)}),e.push({name:"\u0645\u0644\u062E\u0635 \u0634\u0647\u0631\u064A",data:r,columns:n});let a=[{header:"\u0627\u0644\u0634\u0647\u0631",key:"monthName",width:12},{header:"\u0627\u0644\u0633\u0646\u0629",key:"year",width:10}],u=new Set;t.monthlyBreakdown.forEach(E=>{Object.keys(E.trips.statusBreakdown).forEach(A=>u.add(A))}),u.forEach(E=>{a.push({header:E,key:E,width:12})});let p=t.monthlyBreakdown.map(E=>{let A={monthName:E.monthName,year:E.year};return u.forEach(O=>{A[O]=E.trips.statusBreakdown[O]||0}),A}),g={monthName:"\u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A",year:""};u.forEach(E=>{g[E]=t.totals.trips.statusBreakdown[E]||0}),p.push(g),e.push({name:"\u062D\u0627\u0644\u0627\u062A \u0627\u0644\u0631\u062D\u0644\u0627\u062A",data:p,columns:a});let v=[{header:"\u0627\u0644\u0634\u0647\u0631",key:"monthName",width:12},{header:"\u0627\u0644\u0633\u0646\u0629",key:"year",width:10},{header:"\u0627\u0644\u0645\u0633\u0639\u0641\u064A\u0646 (\u20AA)",key:"paramedicShare",width:15},{header:"\u0627\u0644\u0633\u0627\u0626\u0642\u064A\u0646 (\u20AA)",key:"driverShare",width:15},{header:"\u0627\u0644\u0634\u0631\u0643\u0629 (\u20AA)",key:"companyShare",width:15},{header:"\u0627\u0644\u0645\u0627\u0644\u0643 (\u20AA)",key:"ownerShare",width:15},{header:"\u0627\u0644\u0642\u0631\u0648\u0636 (\u20AA)",key:"loanAmount",width:15}],y=t.monthlyBreakdown.map(E=>({monthName:E.monthName,year:E.year,paramedicShare:E.revenue.totalParamedicShare.toFixed(2),driverShare:E.revenue.totalDriverShare.toFixed(2),companyShare:E.revenue.totalCompanyShare.toFixed(2),ownerShare:E.revenue.totalOwnerShare.toFixed(2),loanAmount:E.revenue.loanAmount.toFixed(2)}));y.push({monthName:"\u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A",year:"",paramedicShare:t.totals.revenue.totalParamedicShare.toFixed(2),driverShare:t.totals.revenue.totalDriverShare.toFixed(2),companyShare:t.totals.revenue.totalCompanyShare.toFixed(2),ownerShare:t.totals.revenue.totalOwnerShare.toFixed(2),loanAmount:t.totals.revenue.loanAmount.toFixed(2)}),e.push({name:"\u0627\u0644\u062A\u0648\u0632\u064A\u0639 \u0627\u0644\u0645\u0627\u0644\u064A",data:y,columns:v});let M=t.vehicleId?`annual_statement_vehicle_${t.vehicleId}_${t.period.startDate}`:`annual_statement_${t.period.startDate}`;this.exportService.exportToExcelMultiSheet(e,M),this.toastService.success("\u062A\u0645 \u062A\u0635\u062F\u064A\u0631 \u0627\u0644\u062A\u0642\u0631\u064A\u0631 \u0627\u0644\u0633\u0646\u0648\u064A \u0628\u0646\u062C\u0627\u062D")}static \u0275fac=function(e){return new(e||i)(G(ft),G(Pc),G(Ye),G(Ms),G(oi))};static \u0275cmp=Oe({type:i,selectors:[["app-stats"]],decls:54,vars:25,consts:[["dir","rtl",1,"d-flex","flex-column","min-vh-100","bg-white","text-right",2,"font-family","'Inter', sans-serif"],[1,"flex-grow-1","p-4",2,"background-color","#f8f9fa"],[1,"d-flex","gap-2","overflow-auto","pb-3","flex-nowrap","align-items-center"],[1,"btn","rounded-pill","px-4",3,"click","ngClass","disabled"],[1,"btn","btn-light","rounded-pill","px-4","text-dark","d-flex","align-items-center","gap-2",3,"click","ngClass","disabled"],[1,"fas","fa-calendar-alt"],[1,"btn","btn-outline-primary","rounded-pill","px-3",3,"click","disabled"],[1,"fas","fa-sync-alt"],[1,"me-2"],[1,"card","shadow-sm","rounded-3","p-3","mb-3"],[1,"text-center","py-5"],[1,"row","g-3","mb-4"],[1,"col-6"],[1,"row","g-4"],[1,"col-12","col-lg-6"],[1,"card","shadow-sm","rounded-3","p-4"],[1,"h6","fw-bold","text-dark","mb-2"],[1,"d-flex","align-items-baseline","gap-2","mb-3"],[1,"h2","fw-bold","text-dark","my-0"],[1,"small","fw-medium","text-success","my-0"],[1,"d-grid","gap-2","pt-3",2,"min-height","160px","grid-auto-flow","column","grid-auto-columns","1fr","align-items","end"],[1,"d-flex","flex-column","align-items-center","justify-content-end","gap-2","h-100"],[1,"h6","fw-bold","text-dark","mb-4"],[1,"d-flex","flex-column","align-items-center","gap-4","flex-sm-row"],[1,"position-relative","d-flex","align-items-center","justify-content-center",2,"height","160px","width","160px"],["viewBox","0 0 36 36",1,"w-100","h-100",2,"transform","rotate(-90deg)"],["cx","18","cy","18","r","15.9155","fill","transparent","stroke","currentColor","stroke-width","4",1,"text-secondary","opacity-50"],["cx","18","cy","18","r","15.9155","fill","transparent","stroke","currentColor","stroke-width","4"],[1,"position-absolute","d-flex","flex-column","align-items-center"],[1,"text-muted","small"],[1,"h4","fw-bold","text-dark"],[1,"d-flex","flex-column","gap-3","w-100","w-sm-auto"],[1,"d-flex","align-items-center","gap-2"],[1,"position-fixed","bottom-0","start-0","p-4"],[1,"btn","btn-primary","rounded-circle","shadow-lg","d-flex","align-items-center","justify-content-center",2,"width","56px","height","56px",3,"click"],[1,"fas","fa-download","fa-lg"],[1,"row","g-3","align-items-end"],[1,"col-md-4"],[1,"form-label","fw-medium"],["type","date",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"btn","btn-primary","w-100",3,"click","disabled"],[1,"fas","fa-check","me-2"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-3","text-secondary"],[1,"card","shadow-sm","rounded-3","h-100","p-3"],[1,"text-secondary","small","fw-medium","mb-1"],[1,"h3","fw-bold","text-dark","mb-0"],[1,"small","fw-medium",3,"ngClass"],[1,"w-100","rounded",3,"ngStyle"],[1,"small","my-0",3,"ngClass"],[1,"rounded-circle",2,"height","12px","width","12px",3,"ngClass"],[1,"text-dark","small","me-auto"],[1,"small","fw-bold","text-dark"],[1,"modal-backdrop","fade","show"],["tabindex","-1","role","dialog",1,"modal","fade","show","d-block"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content","rounded-xl","shadow-lg","border-0"],[1,"modal-header","bg-success","rounded-top-xl","border-0","text-white"],[1,"modal-title","fw-bold"],[1,"fas","fa-file-excel"],["type","button",1,"btn-close","btn-close-white",2,"margin-left","0","margin-right","auto",3,"click"],[1,"modal-body","p-4"],[3,"ngSubmit"],[1,"mb-3"],["role","group",1,"btn-group","w-100"],["type","radio","name","exportPeriodType","id","yearlyPeriod",1,"btn-check",3,"change","checked"],["for","yearlyPeriod",1,"btn","btn-outline-primary"],["type","radio","name","exportPeriodType","id","customPeriod",1,"btn-check",3,"change","checked"],["for","customPeriod",1,"btn","btn-outline-primary"],[1,"row","g-3","mb-3"],["name","exportVehicleId",1,"form-select",3,"ngModelChange","ngModel"],["value",""],[3,"value"],[1,"text-muted"],[1,"alert","alert-info","border-0","rounded-3"],[1,"fas","fa-info-circle","me-2"],[1,"mb-0","mt-2","p-3"],[1,"d-flex","justify-content-end","gap-2"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],[1,"fas","fa-times","me-2"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","number","name","exportYear","min","2020","max","2100","placeholder","\u0645\u062B\u0627\u0644: 2025","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-6"],["type","date","name","exportStartDate","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","date","name","exportEndDate","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"fas","fa-spinner","fa-spin","me-2"],[1,"fas","fa-file-excel","me-2"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"main",1)(2,"div",2)(3,"button",3),T("click",function(){return n.onRangeChange("week")}),d(4," \u0647\u0630\u0627 \u0627\u0644\u0623\u0633\u0628\u0648\u0639 "),l(),s(5,"button",3),T("click",function(){return n.onRangeChange("month")}),d(6," \u0647\u0630\u0627 \u0627\u0644\u0634\u0647\u0631 "),l(),s(7,"button",4),T("click",function(){return n.onRangeChange("custom")}),d(8," \u0646\u0637\u0627\u0642 \u0645\u062E\u0635\u0635 "),x(9,"i",5),l(),s(10,"button",6),T("click",function(){return n.refreshStats()}),x(11,"i",7),s(12,"span",8),d(13,"\u062A\u062D\u062F\u064A\u062B"),l()()(),H(14,CF,14,5,"div",9)(15,wF,6,0,"div",10),s(16,"section",11),Te(17,SF,8,4,"div",12,xF),l(),s(19,"section",13)(20,"div",14)(21,"div",15)(22,"p",16),d(23),l(),s(24,"div",17)(25,"p",18),d(26),l(),s(27,"p",19),d(28),l()(),s(29,"div",20),Te(30,TF,4,9,"div",21,yF),l()()(),s(32,"div",14)(33,"div",15)(34,"p",22),d(35,"\u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u062A\u0643\u0627\u0644\u064A\u0641"),l(),s(36,"div",23)(37,"div",24),em(),s(38,"svg",25),x(39,"circle",26),Te(40,EF,1,3,":svg:circle",27,f2),l(),mh(),s(42,"div",28)(43,"span",29),d(44,"\u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A"),l(),s(45,"span",30),d(46),l()()(),s(47,"div",31),Te(48,AF,6,3,"div",32,f2),l()()()()()(),s(50,"div",33)(51,"button",34),T("click",function(){return n.openExportModal()}),x(52,"i",35),l()(),H(53,OF,52,9),l()),e&2&&(m(3),S("ngClass",xr(16,sp,n.selectedRange()==="week",n.selectedRange()!=="week"))("disabled",n.isLoading()),m(2),S("ngClass",xr(19,sp,n.selectedRange()==="month",n.selectedRange()!=="month"))("disabled",n.isLoading()),m(2),S("ngClass",xr(22,sp,n.selectedRange()==="custom",n.selectedRange()!=="custom"))("disabled",n.isLoading()),m(3),S("disabled",n.isLoading()),m(),fe("fa-spin",n.isLoading()),m(3),le(n.selectedRange()==="custom"?14:-1),m(),le(n.isLoading()?15:-1),m(2),Ee(n.stats()),m(6),z(n.transportationsTitle()),m(3),z(n.stats()[0].value),m(2),z(n.stats()[0].trend),m(2),Ee(n.transportations()),m(10),Ee(n.costBreakdown()),m(6),z(n.totalCostValue()),m(2),Ee(n.costBreakdown()),m(5),le(n.isExportModalOpen()?53:-1))},dependencies:[Le,Ft,na,tt,Kt,Ot,Lt,et,vi,At,ot,Xt,Zt,xi,aa,rt,$t],styles:["[_nghost-%COMP%]{--bs-primary: #005A9C;--bs-danger: #dc3545;--bs-dark: #212529;--bs-light: #f8f9fa;--bs-secondary: #6c757d;--bs-info: #0d6efd;--bs-success: #198754;--bs-warning: #ffc107;--bs-purple-custom: #6f42c1}.bg-info[_ngcontent-%COMP%]{background-color:#0d6efd!important}.bg-success[_ngcontent-%COMP%]{background-color:#198754!important}.bg-warning[_ngcontent-%COMP%]{background-color:#ffc107!important}.bg-secondary[_ngcontent-%COMP%]{background-color:#6c757d!important}svg[_ngcontent-%COMP%]   circle.text-info[_ngcontent-%COMP%]{stroke:#0d6efd}svg[_ngcontent-%COMP%]   circle.text-success[_ngcontent-%COMP%]{stroke:#198754}svg[_ngcontent-%COMP%]   circle.text-warning[_ngcontent-%COMP%]{stroke:#ffc107}.text-success-up[_ngcontent-%COMP%]{color:var(--bs-success)!important}.text-danger-down[_ngcontent-%COMP%]{color:var(--bs-danger)!important}.card[_ngcontent-%COMP%]{border:none}"],changeDetection:0})};var p2=i=>({"background-color":i}),LF=(i,t)=>t.id;function RF(i,t){if(i&1&&(s(0,"option",40),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function NF(i,t){if(i&1){let e=Q();x(0,"div",20),s(1,"div",21)(2,"div",22)(3,"div",23)(4,"div",24)(5,"h5",25),d(6,"\u0625\u0636\u0627\u0641\u0629 \u0645\u0631\u0643\u0628\u0629 \u062C\u062F\u064A\u062F\u0629"),l(),s(7,"button",26),T("click",function(){b(e);let r=h();return C(r.isAddVehicleModalOpen.set(!1))}),x(8,"i",27),l()(),s(9,"div",28)(10,"form",29),T("ngSubmit",function(){b(e);let r=h();return C(r.addVehicle())}),s(11,"div",30)(12,"div",31)(13,"label",32),d(14,"\u0631\u0642\u0645 \u0627\u0644\u0645\u0631\u0643\u0628\u0629"),l(),s(15,"input",33),V("ngModelChange",function(r){b(e);let a=h();return N(a.vehicleForm.vehicleId,r)||(a.vehicleForm.vehicleId=r),C(r)}),l()(),s(16,"div",31)(17,"label",34),d(18,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0631\u0643\u0628\u0629"),l(),s(19,"input",35),V("ngModelChange",function(r){b(e);let a=h();return N(a.vehicleForm.vehicleName,r)||(a.vehicleForm.vehicleName=r),C(r)}),l()(),s(20,"div",31)(21,"label",36),d(22,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A"),l(),s(23,"textarea",37),V("ngModelChange",function(r){b(e);let a=h();return N(a.vehicleForm.notes,r)||(a.vehicleForm.notes=r),C(r)}),l()(),s(24,"div",31)(25,"label",38),d(26,"\u0627\u0644\u062D\u0627\u0644\u0629"),l(),s(27,"select",39),V("ngModelChange",function(r){b(e);let a=h();return N(a.vehicleForm.status,r)||(a.vehicleForm.status=r),C(r)}),Te(28,RF,2,2,"option",40,pt),l()()(),s(30,"div",41)(31,"button",42),T("click",function(){b(e);let r=h();return C(r.isAddVehicleModalOpen.set(!1))}),d(32,"\u0625\u0644\u063A\u0627\u0621"),l(),s(33,"button",43),d(34,"\u0625\u0636\u0627\u0641\u0629"),l()()()()()()()}if(i&2){let e=h();m(15),R("ngModel",e.vehicleForm.vehicleId),m(4),R("ngModel",e.vehicleForm.vehicleName),m(4),R("ngModel",e.vehicleForm.notes),m(4),R("ngModel",e.vehicleForm.status),m(),Ee(e.vehicleStatuses)}}function VF(i,t){if(i&1&&(s(0,"option",40),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function BF(i,t){if(i&1){let e=Q();x(0,"div",20),s(1,"div",21)(2,"div",22)(3,"div",23)(4,"div",44)(5,"h5",25),d(6,"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0631\u0643\u0628\u0629"),l(),s(7,"button",45),T("click",function(){b(e);let r=h();return C(r.closeEditVehicleModal())}),x(8,"i",27),l()(),s(9,"div",28)(10,"form",29),T("ngSubmit",function(){b(e);let r=h();return C(r.saveEditVehicle())}),s(11,"div",30)(12,"div",31)(13,"label",46),d(14,"\u0631\u0642\u0645 \u0627\u0644\u0645\u0631\u0643\u0628\u0629"),l(),s(15,"input",47),V("ngModelChange",function(r){b(e);let a=h();return N(a.vehicleForm.vehicleId,r)||(a.vehicleForm.vehicleId=r),C(r)}),l()(),s(16,"div",31)(17,"label",48),d(18,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0631\u0643\u0628\u0629"),l(),s(19,"input",49),V("ngModelChange",function(r){b(e);let a=h();return N(a.vehicleForm.vehicleName,r)||(a.vehicleForm.vehicleName=r),C(r)}),l()(),s(20,"div",31)(21,"label",50),d(22,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A"),l(),s(23,"textarea",51),V("ngModelChange",function(r){b(e);let a=h();return N(a.vehicleForm.notes,r)||(a.vehicleForm.notes=r),C(r)}),l()(),s(24,"div",31)(25,"label",52),d(26,"\u0627\u0644\u062D\u0627\u0644\u0629"),l(),s(27,"select",53),V("ngModelChange",function(r){b(e);let a=h();return N(a.vehicleForm.status,r)||(a.vehicleForm.status=r),C(r)}),Te(28,VF,2,2,"option",40,pt),l()()(),s(30,"div",41)(31,"button",42),T("click",function(){b(e);let r=h();return C(r.closeEditVehicleModal())}),d(32,"\u0625\u0644\u063A\u0627\u0621"),l(),s(33,"button",54),d(34,"\u062D\u0641\u0638 \u0627\u0644\u062A\u063A\u064A\u064A\u0631\u0627\u062A"),l()()()()()()()}if(i&2){let e=h();m(15),R("ngModel",e.vehicleForm.vehicleId),m(4),R("ngModel",e.vehicleForm.vehicleName),m(4),R("ngModel",e.vehicleForm.notes),m(4),R("ngModel",e.vehicleForm.status),m(),Ee(e.vehicleStatuses)}}function UF(i,t){if(i&1&&(s(0,"div",31)(1,"p",58),d(2,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A"),l(),s(3,"p",67),d(4),l()()),i&2){let e=h();m(4),z(e.notes)}}function WF(i,t){if(i&1){let e=Q();s(0,"div",30)(1,"div",31)(2,"p",58),d(3,"\u0631\u0642\u0645 \u0627\u0644\u0645\u0631\u0643\u0628\u0629"),l(),s(4,"p",59),d(5),l()(),s(6,"div",31)(7,"p",58),d(8,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0631\u0643\u0628\u0629"),l(),s(9,"p",59),d(10),l()(),H(11,UF,5,1,"div",31),s(12,"div",31)(13,"p",58),d(14,"\u0627\u0644\u062D\u0627\u0644\u0629"),l(),x(15,"app-status-badge",60),l()(),s(16,"div",61)(17,"button",62),T("click",function(){let r=b(e),a=h(2);return C(a.showDeleteConfirmation(r))}),x(18,"i",63),d(19," \u062D\u0630\u0641 "),l(),s(20,"div",64)(21,"button",42),T("click",function(){b(e);let r=h(2);return C(r.closeViewVehicleModal())}),d(22,"\u0625\u063A\u0644\u0627\u0642"),l(),s(23,"button",65),T("click",function(){b(e);let r=h(2);return C(r.openEditVehicleModal())}),x(24,"i",66),d(25," \u062A\u0639\u062F\u064A\u0644 "),l()()()}if(i&2){let e=t;m(5),z(e.vehicleId),m(5),z(e.vehicleName),m(),le(e.notes?11:-1),m(4),S("status",e.status)("type","vehicle")("size","medium")}}function jF(i,t){if(i&1){let e=Q();x(0,"div",20),s(1,"div",21)(2,"div",22)(3,"div",23)(4,"div",55)(5,"h5",25),d(6,"\u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0645\u0631\u0643\u0628\u0629"),l(),s(7,"button",56),T("click",function(){b(e);let r=h();return C(r.closeViewVehicleModal())}),x(8,"i",57),l()(),s(9,"div",28),H(10,WF,26,6),l()()()()}if(i&2){let e,n=h();m(10),le((e=n.selectedVehicle())?10:-1,e)}}function HF(i,t){if(i&1){let e=Q();s(0,"button",14),T("click",function(){let r=b(e).$implicit,a=h();return C(a.selectStatus(r))}),x(1,"i",68),d(2),l()}if(i&2){let e=t.$implicit,n=h();S("ngClass",n.getStatusClass(e)),m(),S("ngClass",n.getStatusIcon(e)),m(),q(" ",e," ")}}function zF(i,t){if(i&1&&(s(0,"div",77)(1,"p",58),d(2,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A"),l(),s(3,"p",75),d(4),l()()),i&2){let e=h().$implicit;m(4),z(e.notes)}}function GF(i,t){if(i&1){let e=Q();s(0,"div",17)(1,"div",69),T("click",function(){let r=b(e).$implicit,a=h();return C(a.viewVehicleDetails(r))}),s(2,"div",70),x(3,"div",71),s(4,"div",72)(5,"div",73)(6,"div")(7,"h5",74),d(8),l(),s(9,"p",75),d(10),l()(),s(11,"span",76),x(12,"i",68),d(13),l()(),H(14,zF,5,1,"div",77),l()()()()}if(i&2){let e=t.$implicit,n=h();m(3),S("ngStyle",$i(7,p2,n.getStatusColor(e.status))),m(5),z(e.vehicleId),m(2),z(e.vehicleName),m(),S("ngStyle",$i(9,p2,n.getStatusBadgeClass(e.status))),m(),S("ngClass",n.getStatusIcon(e.status)),m(),q(" ",e.status," "),m(),le(e.notes?14:-1)}}function $F(i,t){i&1&&(s(0,"div",18),x(1,"i",78),s(2,"p",79),d(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u0631\u0643\u0628\u0627\u062A \u0645\u062A\u0627\u062D\u0629"),l()())}var Ic=class i{constructor(t,e,n,r){this.globalVars=t;this.route=e;this.toastService=n;this.vehicleService=r;this.globalVars.setGlobalHeader("\u0623\u0633\u0637\u0648\u0644 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A")}searchTerm=Z("");selectedStatus="All";filterStatus=Z("All");queryFilterType=Z(null);queryFilterValue=Z(null);isAddVehicleModalOpen=Z(!1);isViewVehicleModalOpen=Z(!1);isEditVehicleModalOpen=Z(!1);isDeleteVehicleModalOpen=Z(!1);selectedVehicle=Z(null);vehicleToDelete=Z(null);confirmationModalConfig=Z({type:"delete",title:"",message:"",confirmButtonText:"",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621"});vehicleForm={vehicleId:"",vehicleName:"",notes:"",status:"\u0645\u062A\u0627\u062D\u0629"};currentPage=1;itemsPerPage=10;totalRecords=0;isLoading=Z(!1);vehicleStatuses=["\u0645\u062A\u0627\u062D\u0629","\u0641\u064A \u0627\u0644\u0637\u0631\u064A\u0642 \u0644\u0644\u0645\u0631\u064A\u0636","\u0641\u064A \u0627\u0644\u0645\u0648\u0642\u0639","\u0641\u064A \u0627\u0644\u0637\u0631\u064A\u0642 \u0644\u0644\u0645\u0633\u062A\u0634\u0641\u0649","\u0641\u064A \u0627\u0644\u0648\u062C\u0647\u0629","\u062E\u0627\u0631\u062C \u0627\u0644\u062E\u062F\u0645\u0629","\u0625\u0646\u0647\u0627\u0621 \u0627\u0644\u062E\u062F\u0645\u0629"];colors=["White","Red","Yellow","Silver","Blue"];ngOnInit(){this.route.queryParams.subscribe(t=>{t.filterType&&t.filterValue&&(this.queryFilterType.set(t.filterType),this.queryFilterValue.set(t.filterValue),this.searchTerm.set(t.filterValue))}),this.loadData()}vehicles=Z([]);loadData(){this.isLoading.set(!0),this.vehicleService.getVehicles({page:this.currentPage,limit:this.itemsPerPage,search:this.searchTerm()||void 0,status:this.filterStatus()!=="All"?this.filterStatus():void 0}).subscribe({next:t=>{this.vehicles.set(t.data),this.totalRecords=t.total,this.isLoading.set(!1)},error:t=>{console.error("Error loading vehicles:",t),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A"),this.isLoading.set(!1)}})}filteredVehicles=We(()=>this.vehicles());getPaginatedAmbulances(){return this.vehicles()}onPageChange(t){this.currentPage=t,this.loadData()}onItemsPerPageChange(t){this.itemsPerPage=t,this.currentPage=1,this.loadData()}selectStatus(t){this.selectedStatus=t,this.filterStatus.set(t),this.currentPage=1,this.loadData()}onSearchChange(){this.currentPage=1,this.loadData()}getStatusClass(t){return this.selectedStatus===t?"btn-primary-custom":"btn-outline-secondary"}getStatusColor(t){switch(t){case"\u0645\u062A\u0627\u062D\u0629":return"#28A745";case"\u0641\u064A \u0627\u0644\u0637\u0631\u064A\u0642 \u0644\u0644\u0645\u0631\u064A\u0636":return"#17A2B8";case"\u062E\u0627\u0631\u062C \u0627\u0644\u062E\u062F\u0645\u0629":return"#6C757D";default:return"#FD7E14"}}getStatusBadgeClass(t){return{\u0645\u062A\u0627\u062D\u0629:"#28a745","\u0641\u064A \u0627\u0644\u0637\u0631\u064A\u0642 \u0644\u0644\u0645\u0631\u064A\u0636":"#e2af19ff","\u0641\u064A \u0627\u0644\u0645\u0648\u0642\u0639":"#17a2b8","\u0641\u064A \u0627\u0644\u0637\u0631\u064A\u0642 \u0644\u0644\u0645\u0633\u062A\u0634\u0641\u0649":"#fd7e14","\u0641\u064A \u0627\u0644\u0648\u062C\u0647\u0629":"#6f42c1","\u062E\u0627\u0631\u062C \u0627\u0644\u062E\u062F\u0645\u0629":"#dc3545","\u0625\u0646\u0647\u0627\u0621 \u0627\u0644\u062E\u062F\u0645\u0629":"#6c757d"}[t]||"#6C757D"}getStatusIcon(t){switch(t){case"\u0645\u062A\u0627\u062D\u0629":return"fa-circle-check";case"\u0641\u064A \u0627\u0644\u0637\u0631\u064A\u0642 \u0644\u0644\u0645\u0631\u064A\u0636":return"fa-truck-medical";case"\u062E\u0627\u0631\u062C \u0627\u0644\u062E\u062F\u0645\u0629":return"fa-wrench";default:return"fa-circle"}}openAddVehicleModal(){this.vehicleForm={vehicleId:"",vehicleName:"",notes:"",status:"\u0645\u062A\u0627\u062D\u0629"},this.isAddVehicleModalOpen.set(!0)}addVehicle(){this.vehicleService.createVehicle({vehicleId:this.vehicleForm.vehicleId,vehicleName:this.vehicleForm.vehicleName,type:"Type I Truck",currentDriver:null,notes:this.vehicleForm.notes,status:this.vehicleForm.status}).subscribe({next:()=>{this.isAddVehicleModalOpen.set(!1),this.toastService.success("\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0631\u0643\u0628\u0629 \u0628\u0646\u062C\u0627\u062D"),this.loadData()},error:t=>{console.error("Error creating vehicle:",t),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0631\u0643\u0628\u0629")}})}openEditVehicleModal(){let t=this.selectedVehicle();t&&(this.vehicleForm={vehicleId:t.vehicleId,vehicleName:t.vehicleName,notes:t.notes,status:t.status},this.isViewVehicleModalOpen.set(!1),this.isEditVehicleModalOpen.set(!0))}saveEditVehicle(){let t=this.selectedVehicle();if(t){let e={vehicleId:this.vehicleForm.vehicleId,vehicleName:this.vehicleForm.vehicleName,type:t.type,currentDriver:null,notes:this.vehicleForm.notes,status:this.vehicleForm.status};this.vehicleService.updateVehicle(t.id,e).subscribe({next:n=>{let r=Qe(ve(ve(ve({},t),e),n&&Object.keys(n).length>0?n:{}),{id:t.id});this.selectedVehicle.set(r),this.isEditVehicleModalOpen.set(!1),this.isViewVehicleModalOpen.set(!0),this.toastService.success("\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u0631\u0643\u0628\u0629 \u0628\u0646\u062C\u0627\u062D"),this.loadData()},error:n=>{console.error("Error updating vehicle:",n),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u0631\u0643\u0628\u0629")}})}}viewVehicleDetails(t){this.selectedVehicle.set(t),this.isViewVehicleModalOpen.set(!0)}closeViewVehicleModal(){this.isViewVehicleModalOpen.set(!1),this.selectedVehicle.set(null)}closeEditVehicleModal(){this.isEditVehicleModalOpen.set(!1)}showDeleteConfirmation(t){this.vehicleToDelete.set(t),this.confirmationModalConfig.set({type:"delete",title:"\u062A\u0623\u0643\u064A\u062F \u062D\u0630\u0641 \u0627\u0644\u0645\u0631\u0643\u0628\u0629",message:`\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u0623\u0646\u0643 \u062A\u0631\u064A\u062F \u062D\u0630\u0641 \u0627\u0644\u0645\u0631\u0643\u0628\u0629 ${t.vehicleName} (${t.vehicleId})\u061F<br>\u0644\u0627 \u064A\u0645\u0643\u0646 \u0627\u0644\u062A\u0631\u0627\u062C\u0639 \u0639\u0646 \u0647\u0630\u0627 \u0627\u0644\u0625\u062C\u0631\u0627\u0621.`,confirmButtonText:"\u062D\u0630\u0641",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621",highlightedText:t.vehicleName}),this.isDeleteVehicleModalOpen.set(!0)}closeDeleteConfirmation(){this.vehicleToDelete.set(null),this.isDeleteVehicleModalOpen.set(!1)}confirmDeleteVehicle(){let t=this.vehicleToDelete();t&&this.vehicleService.deleteVehicle(t.id).subscribe({next:()=>{this.toastService.success(`\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0645\u0631\u0643\u0628\u0629: ${t.vehicleName}`),this.closeDeleteConfirmation(),this.selectedVehicle()?.id===t.id&&this.closeViewVehicleModal(),this.loadData()},error:e=>{console.error("Error deleting vehicle:",e),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u062D\u0630\u0641 \u0627\u0644\u0645\u0631\u0643\u0628\u0629")}})}static \u0275fac=function(e){return new(e||i)(G(ft),G(Ai),G(Ye),G(oi))};static \u0275cmp=Oe({type:i,selectors:[["app-fleet"]],decls:27,vars:11,consts:[[1,"d-flex","flex-column","min-vh-100","bg-light"],[3,"confirmed","cancelled","isOpen","config"],["dir","rtl",1,"flex-grow-1","p-3","p-lg-4"],[1,"container-fluid",2,"max-width","1200px"],[1,"row","g-3","mb-4"],[1,"col-12","col-md-8"],[1,"input-group","shadow-sm"],[1,"input-group-text","bg-white","border-end-0"],[1,"fa-solid","fa-search","text-muted"],["type","text","placeholder","\u0627\u0644\u0628\u062D\u062B \u0628\u0631\u0642\u0645 \u0627\u0644\u0645\u0631\u0643\u0628\u0629 \u0623\u0648 \u0627\u0644\u0633\u0627\u0626\u0642...",1,"form-control","border-start-0",3,"ngModelChange","ngModel"],[1,"col-12","col-md-4","d-flex","justify-content-end"],[1,"btn","btn-success","rounded-pill","shadow-sm","d-flex","align-items-center","gap-2","py-2","px-3","fw-bold",3,"click"],[1,"fa-solid","fa-circle-plus"],[1,"d-flex","gap-2","mb-4","overflow-auto","pb-2"],["type","button",1,"btn","btn-sm","rounded-pill","flex-shrink-0","fw-medium",3,"click","ngClass"],["type","button",1,"btn","btn-sm","rounded-pill","flex-shrink-0","fw-medium",3,"ngClass"],[1,"row","row-cols-1","row-cols-md-2","row-cols-lg-3","g-4"],[1,"col"],[1,"col-12","text-center","text-muted","p-5"],[3,"pageChange","itemsPerPageChange","totalItems","currentPage","itemsPerPage"],[1,"modal-backdrop","fade","show"],["tabindex","-1","role","dialog",1,"modal","fade","show","d-block"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","rounded-xl","shadow-lg","border-0"],[1,"modal-header","bg-primary-custom","rounded-top-xl","border-0","justify-content-between","text-white"],[1,"modal-title","fw-bold"],["type","button","data-bs-dismiss","modal","aria-label","Close",2,"background-color","transparent","color","white","border","none",3,"click"],[1,"fa","fa-times"],[1,"modal-body","p-4","text-end"],[3,"ngSubmit"],[1,"row","g-3"],[1,"col-12"],["for","vehicleId",1,"form-label","small","fw-medium"],["id","vehicleId","type","text","placeholder","\u0645\u062B\u0627\u0644: AMB-001","name","vehicleId","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","vehicleName",1,"form-label","small","fw-medium"],["id","vehicleName","type","text","placeholder","\u0645\u062B\u0627\u0644: \u0625\u0633\u0639\u0627\u0641 \u0627\u0644\u0646\u062C\u0648\u0645","name","vehicleName","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","notes",1,"form-label","small","fw-medium"],["id","notes","rows","3","placeholder","\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629...","name","notes",1,"form-control",3,"ngModelChange","ngModel"],["for","status",1,"form-label","small","fw-medium"],["id","status","name","status","required","",1,"form-select",3,"ngModelChange","ngModel"],[3,"value"],[1,"d-flex","justify-content-end","gap-2","mt-4"],["type","button",1,"btn","btn-outline-secondary","rounded-pill","px-4","fw-bold",3,"click"],["type","submit",1,"btn","btn-success","rounded-pill","px-4","fw-bold"],[1,"modal-header","bg-warning","rounded-top-xl","border-0","justify-content-between","text-dark"],["type","button","data-bs-dismiss","modal","aria-label","Close",2,"background-color","transparent","border","none",3,"click"],["for","editVehicleId",1,"form-label","small","fw-medium"],["id","editVehicleId","type","text","placeholder","\u0645\u062B\u0627\u0644: AMB-001","name","vehicleId","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","editVehicleName",1,"form-label","small","fw-medium"],["id","editVehicleName","type","text","placeholder","\u0645\u062B\u0627\u0644: \u0625\u0633\u0639\u0627\u0641 \u0627\u0644\u0646\u062C\u0648\u0645","name","vehicleName","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","editNotes",1,"form-label","small","fw-medium"],["id","editNotes","rows","3","placeholder","\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629...","name","notes",1,"form-control",3,"ngModelChange","ngModel"],["for","editStatus",1,"form-label","small","fw-medium"],["id","editStatus","name","status","required","",1,"form-select",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-warning","rounded-pill","px-4","fw-bold"],[1,"modal-header","bg-primary-custom","rounded-top-xl","border-0","justify-content-between"],["type","button","data-bs-dismiss","modal","aria-label","Close",2,"border","none","background","none",3,"click"],[1,"fas","fa-times"],[1,"text-muted","small","mb-1"],[1,"h5","fw-bold"],[3,"status","type","size"],[1,"d-flex","justify-content-between","gap-2","mt-4"],["type","button",1,"btn","btn-danger","rounded-pill","px-4","fw-bold",3,"click"],[1,"fa-solid","fa-trash","me-1"],[1,"d-flex","gap-2"],["type","button",1,"btn","btn-warning","rounded-pill","px-4","fw-bold",3,"click"],[1,"fa-solid","fa-edit","me-1"],[1,"text-muted"],[1,"fa-solid","me-1",3,"ngClass"],[1,"card","shadow-sm","rounded-xl","overflow-hidden","h-100","cursor-pointer","hover-lift",3,"click"],[1,"d-flex"],[1,"flex-shrink-0",2,"width","6px",3,"ngStyle"],[1,"card-body","p-4","flex-grow-1","text-end"],[1,"d-flex","justify-content-between","align-items-start","mb-3"],[1,"fw-bold","m-0"],[1,"text-muted","small","m-0"],[1,"badge","rounded-pill","fw-bold",3,"ngStyle"],[1,"mb-3"],[1,"fa-solid","fa-inbox","fs-1","mb-3"],[1,"h5"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"app-confirmation-modal",1),T("confirmed",function(){return n.confirmDeleteVehicle()})("cancelled",function(){return n.closeDeleteConfirmation()}),l(),H(2,NF,35,4)(3,BF,35,4)(4,jF,11,1),s(5,"main",2)(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6)(10,"span",7),x(11,"i",8),l(),s(12,"input",9),V("ngModelChange",function(a){return N(n.searchTerm,a)||(n.searchTerm=a),a}),T("ngModelChange",function(){return n.onSearchChange()}),l()()(),s(13,"div",10)(14,"button",11),T("click",function(){return n.openAddVehicleModal()}),x(15,"i",12),d(16," \u0625\u0636\u0627\u0641\u0629 \u0645\u0631\u0643\u0628\u0629 "),l()()(),s(17,"div",13)(18,"button",14),T("click",function(){return n.selectStatus("All")}),d(19," \u0627\u0644\u0643\u0644 "),l(),Te(20,HF,3,3,"button",15,pt),l(),s(22,"div",16),Te(23,GF,15,11,"div",17,LF,!1,$F,4,0,"div",18),l(),s(26,"app-pagination",19),T("pageChange",function(a){return n.onPageChange(a)})("itemsPerPageChange",function(a){return n.onItemsPerPageChange(a)}),l()()()()),e&2&&(m(),S("isOpen",n.isDeleteVehicleModalOpen())("config",n.confirmationModalConfig()),m(),le(n.isAddVehicleModalOpen()?2:-1),m(),le(n.isEditVehicleModalOpen()&&n.selectedVehicle()?3:-1),m(),le(n.isViewVehicleModalOpen()&&n.selectedVehicle()?4:-1),m(8),R("ngModel",n.searchTerm),m(6),S("ngClass",n.getStatusClass("All")),m(2),Ee(n.vehicleStatuses),m(3),Ee(n.getPaginatedAmbulances()),m(3),S("totalItems",n.filteredVehicles().length)("currentPage",n.currentPage)("itemsPerPage",n.itemsPerPage))},dependencies:[Le,Ft,na,tt,Kt,Ot,Lt,et,At,ot,Xt,Zt,rt,$t,Mi,Wr,Wi],styles:[".hover-lift[_ngcontent-%COMP%]{transition:all .3s ease}.hover-lift[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 16px #0000001a!important}.badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.4rem .75rem}.fa-inbox[_ngcontent-%COMP%]{color:#6c757d;opacity:.5}.input-group-text[_ngcontent-%COMP%]{border-radius:.5rem 0 0 .5rem}.form-control[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #1193d440;border-color:#1193d4}.btn-primary-custom[_ngcontent-%COMP%]{background-color:#1193d4;border-color:#1193d4;color:#fff}.btn-primary-custom[_ngcontent-%COMP%]:hover{background-color:#0d7ab8;border-color:#0d7ab8}.btn-outline-secondary[_ngcontent-%COMP%]{color:#6c757d;border-color:#dee2e6}.btn-outline-secondary[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;color:#495057}.modal-backdrop[_ngcontent-%COMP%]{background-color:#00000080}.modal-content[_ngcontent-%COMP%]{border:none}.overflow-auto[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px}.overflow-auto[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.overflow-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.overflow-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}@media (max-width: 768px){.card-body[_ngcontent-%COMP%]{padding:1rem!important}}"],changeDetection:0})};var Fs=class i{constructor(t){this.http=t}API_URL=`${xt.apiEndpoint}/maintenance-types`;searchMaintenanceTypes(t){let e=new Ki().set("searchTerm",t);return this.http.get(`${this.API_URL}/search`,{params:e}).pipe(Be(n=>n||[]))}getMaintenanceTypes(t){return this.http.get(this.API_URL,{params:t})}createMaintenanceType(t){return this.http.post(this.API_URL,t)}updateMaintenanceType(t,e){return this.http.put(`${this.API_URL}/${t}`,e)}deleteMaintenanceType(t){return this.http.delete(`${this.API_URL}/${t}`)}toggleMaintenanceTypeStatus(t){return this.http.get(`${this.API_URL}/${t}`).pipe(Be(e=>{let n=e.isActive;return this.http.put(`${this.API_URL}/${t}`,{isActive:!n})}))}static \u0275fac=function(e){return new(e||i)(Ue(It))};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})};var ZF=(i,t)=>t.id;function qF(i,t){i&1&&(s(0,"div",4)(1,"div",6)(2,"span",7),d(3,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),l()()())}function YF(i,t){if(i&1&&(s(0,"span",14),d(1),l()),i&2){let e=h().$implicit;m(),q("",e.estimatedCost," \u0634\u064A\u0643\u0644")}}function XF(i,t){if(i&1&&(s(0,"span",15),d(1),l()),i&2){let e=h().$implicit;m(),z(e.description)}}function KF(i,t){if(i&1&&(s(0,"span",15),x(1,"i",16),d(2),l()),i&2){let e=h().$implicit;m(2),q(" ",e.estimatedDuration," \u0633\u0627\u0639\u0629 ")}}function JF(i,t){if(i&1){let e=Q();s(0,"a",10),T("click",function(){let r=b(e).$implicit,a=h(3);return C(a.selectType(r))}),s(1,"div",11)(2,"div",12)(3,"span",13),d(4),l(),H(5,YF,2,1,"span",14),l(),H(6,XF,2,1,"span",15)(7,KF,3,1,"span",15),l()()}if(i&2){let e=t.$implicit;m(4),z(e.name),m(),le(e.estimatedCost?5:-1),m(),le(e.description?6:-1),m(),le(e.estimatedDuration?7:-1)}}function QF(i,t){if(i&1&&Te(0,JF,8,4,"a",9,ZF),i&2){let e=h(2);Ee(e.filteredTypes())}}function ek(i,t){i&1&&(s(0,"div",8),d(1," \u0644\u0627 \u062A\u0648\u062C\u062F \u0646\u062A\u0627\u0626\u062C "),l())}function tk(i,t){if(i&1&&(s(0,"div",5),H(1,QF,2,0)(2,ek,2,0,"div",8),l()),i&2){let e=h();m(),le(e.filteredTypes().length>0?1:-1),m(),le(e.filteredTypes().length===0&&e.searchTerm().length>=1?2:-1)}}var ks=class i{constructor(t){this.maintenanceTypeService=t}label="\u0646\u0648\u0639 \u0627\u0644\u0635\u064A\u0627\u0646\u0629";placeholder="\u0627\u0628\u062D\u062B \u0639\u0646 \u0646\u0648\u0639 \u0627\u0644\u0635\u064A\u0627\u0646\u0629...";required=!1;selectedTypeId="";selectedTypeName="";typeSelected=new di;searchTerm=Z("");maintenanceTypes=Z([]);isDropdownOpen=Z(!1);isLoading=Z(!1);filteredTypes=We(()=>this.searchTerm().toLowerCase().trim().length<1?[]:this.maintenanceTypes());ngOnInit(){this.selectedTypeName&&this.searchTerm.set(this.selectedTypeName)}onSearchChange(){let t=this.searchTerm().trim();t.length>=1?(this.performSearch(t),this.isDropdownOpen.set(!0)):this.isDropdownOpen.set(!1)}performSearch(t){this.isLoading.set(!0),this.maintenanceTypeService.searchMaintenanceTypes(t).subscribe({next:e=>{console.log("Search results:",e),this.maintenanceTypes.set(e),this.isLoading.set(!1)},error:e=>{console.error("Error searching maintenance types:",e),this.isLoading.set(!1)}})}selectType(t){this.searchTerm.set(t.name),this.isDropdownOpen.set(!1),this.typeSelected.emit({id:t.id,name:t.name,estimatedCost:t.estimatedCost,estimatedDuration:t.estimatedDuration})}onFocus(){this.searchTerm().trim().length>=1&&this.filteredTypes().length>0&&this.isDropdownOpen.set(!0)}onBlur(){setTimeout(()=>{this.isDropdownOpen.set(!1)},200)}static \u0275fac=function(e){return new(e||i)(G(Fs))};static \u0275cmp=Oe({type:i,selectors:[["app-maintenance-type-search"]],inputs:{label:"label",placeholder:"placeholder",required:"required",selectedTypeId:"selectedTypeId",selectedTypeName:"selectedTypeName"},outputs:{typeSelected:"typeSelected"},decls:7,vars:6,consts:[[1,"maintenance-type-search-container"],[1,"form-label","small","fw-medium"],[1,"position-relative"],["type","text","autocomplete","off",1,"form-control",3,"ngModelChange","focus","blur","placeholder","ngModel","required"],[1,"position-absolute","top-50","end-0","translate-middle-y","me-2"],[1,"dropdown-menu","show","w-100","mt-1","shadow-sm",2,"max-height","300px","overflow-y","auto"],["role","status",1,"spinner-border","spinner-border-sm","text-primary"],[1,"visually-hidden"],[1,"dropdown-item","text-muted","text-center"],["href","javascript:void(0)",1,"dropdown-item"],["href","javascript:void(0)",1,"dropdown-item",3,"click"],[1,"d-flex","flex-column"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fw-medium"],[1,"badge","bg-success"],[1,"text-muted","small"],[1,"fa","fa-clock-o","me-1"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"label",1),d(2),l(),s(3,"div",2)(4,"input",3),V("ngModelChange",function(a){return N(n.searchTerm,a)||(n.searchTerm=a),a}),T("ngModelChange",function(){return n.onSearchChange()})("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()}),l(),H(5,qF,4,0,"div",4)(6,tk,3,2,"div",5),l()()),e&2&&(m(2),z(n.label),m(2),S("placeholder",n.placeholder),R("ngModel",n.searchTerm),S("required",n.required),m(),le(n.isLoading()?5:-1),m(),le(n.isDropdownOpen()&&!n.isLoading()?6:-1))},dependencies:[Le,tt,et,ot,Zt,rt],styles:[".maintenance-type-search-container[_ngcontent-%COMP%]{position:relative}.dropdown-menu[_ngcontent-%COMP%]{z-index:1050;border:1px solid #dee2e6;border-radius:.375rem}.dropdown-item[_ngcontent-%COMP%]{padding:.5rem 1rem;cursor:pointer;transition:background-color .15s ease-in-out}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.dropdown-item[_ngcontent-%COMP%]:active{background-color:#e9ecef}.dropdown-divider[_ngcontent-%COMP%]{margin:.25rem 0}"]})};var Ps=class i{constructor(t){this.http=t}API_URL=`${xt.apiEndpoint}/maintenance`;getMaintenanceRecords(t){let e=Nt(t);return this.http.get(this.API_URL,{params:e})}getMaintenanceRecordById(t){return this.http.get(`${this.API_URL}/${t}`)}createMaintenanceRecord(t){return this.http.post(this.API_URL,t)}updateMaintenanceRecord(t,e){return this.http.put(`${this.API_URL}/${t}`,e)}deleteMaintenanceRecord(t){return this.http.delete(`${this.API_URL}/${t}`)}getLastOdometerReading(t,e){let n=Nt({vehicleId:t,maintenanceTypeId:e});return this.http.get(`${this.API_URL}/last-odometer`,{params:n})}static \u0275fac=function(e){return new(e||i)(Ue(It))};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})};var _2=()=>({standalone:!0}),Ds=(i,t)=>t.id;function ik(i,t){if(i&1&&(s(0,"option",11),d(1),l()),i&2){let e=t.$implicit;S("value",e.id),m(),vt("",e.vehicleName," (",e.vehicleId,")")}}function nk(i,t){if(i&1&&(s(0,"option",11),d(1),l()),i&2){let e=t.$implicit;S("value",e.id),m(),q(" ",e.arabicName||e.name," ")}}function rk(i,t){if(i&1&&(s(0,"option",11),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function ak(i,t){if(i&1&&(s(0,"div",39)(1,"div",65),x(2,"i",66),s(3,"strong"),d(4,"\u0627\u0644\u0643\u064A\u0644\u0648\u0645\u062A\u0631\u0627\u062A \u0627\u0644\u0645\u0642\u0637\u0648\u0639\u0629:"),l(),d(5),l()()),i&2){let e=h(2);m(5),q(" ",e.calculatedKm," \u0643\u0645 ")}}function ok(i,t){if(i&1){let e=Q();x(0,"div",28),s(1,"div",29)(2,"div",30)(3,"div",31)(4,"div",32)(5,"h5",33),d(6,"\u0625\u0636\u0627\u0641\u0629 \u0633\u062C\u0644 \u0635\u064A\u0627\u0646\u0629 \u062C\u062F\u064A\u062F"),l(),s(7,"button",34),T("click",function(){b(e);let r=h();return C(r.isAddRecordModalOpen.set(!1))}),x(8,"i",35),l()(),s(9,"div",36)(10,"form",37),T("ngSubmit",function(){b(e);let r=h();return C(r.addRecord())}),s(11,"div",38)(12,"div",39)(13,"label",7),d(14,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E"),l(),s(15,"input",40),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.date,r)||(a.recordForm.date=r),C(r)}),l()(),s(16,"div",39)(17,"label",41),d(18,"\u0627\u0644\u0645\u0631\u0643\u0628\u0629"),l(),s(19,"input",42),V("ngModelChange",function(r){b(e);let a=h();return N(a.vehicleSearchTerm,r)||(a.vehicleSearchTerm=r),C(r)}),l(),s(20,"select",43),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.vehicleId,r)||(a.recordForm.vehicleId=r),C(r)}),T("change",function(r){b(e);let a=h();return C(a.onVehicleSelected(r))}),s(21,"option",44),d(22,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0631\u0643\u0628\u0629"),l(),Te(23,ik,2,3,"option",11,Ds),l(),s(25,"small",45),d(26),l()(),s(27,"div",39)(28,"label",46),d(29,"\u0627\u0644\u0633\u0627\u0626\u0642 (\u0627\u062E\u062A\u064A\u0627\u0631\u064A)"),l(),s(30,"select",47),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.driverId,r)||(a.recordForm.driverId=r),C(r)}),s(31,"option",44),d(32,"\u062A\u0644\u0642\u0627\u0626\u064A (\u0627\u0644\u0633\u0627\u0626\u0642 \u0627\u0644\u062D\u0627\u0644\u064A \u0644\u0644\u0645\u0631\u0643\u0628\u0629)"),l(),Te(33,nk,2,2,"option",11,Ds),l(),s(35,"small",45),d(36,"\u0625\u0630\u0627 \u062A\u0631\u0643\u062A \u0641\u0627\u0631\u063A\u0627\u064B\u060C \u0633\u064A\u062A\u0645 \u062A\u0639\u064A\u064A\u0646 \u0627\u0644\u0633\u0627\u0626\u0642 \u0627\u0644\u062D\u0627\u0644\u064A \u0644\u0644\u0645\u0631\u0643\u0628\u0629"),l()(),s(37,"div",39)(38,"app-maintenance-type-search",48),T("typeSelected",function(r){b(e);let a=h();return C(a.onMaintenanceTypeSelected(r))}),l()(),s(39,"div",49)(40,"label",50),d(41,"\u0627\u0644\u062A\u0643\u0644\u0641\u0629 (\u20AA)"),l(),s(42,"input",51),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.cost,r)||(a.recordForm.cost=r),C(r)}),l()(),s(43,"div",49)(44,"label",52),d(45,"\u0627\u0644\u062D\u0627\u0644\u0629"),l(),s(46,"select",53),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.status,r)||(a.recordForm.status=r),C(r)}),Te(47,rk,2,2,"option",11,pt),l()(),s(49,"div",39)(50,"label",54),d(51,"\u0645\u0648\u0642\u0639 \u0627\u0644\u062E\u062F\u0645\u0629"),l(),s(52,"input",55),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.serviceLocation,r)||(a.recordForm.serviceLocation=r),C(r)}),l()(),s(53,"div",49)(54,"label",56),d(55,"\u0639\u062F\u0627\u062F \u0627\u0644\u0645\u0633\u0627\u0641\u0627\u062A (\u0642\u0628\u0644)"),l(),s(56,"input",57),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.odometerBefore,r)||(a.recordForm.odometerBefore=r),C(r)}),l()(),s(57,"div",49)(58,"label",58),d(59,"\u0639\u062F\u0627\u062F \u0627\u0644\u0645\u0633\u0627\u0641\u0627\u062A (\u0628\u0639\u062F)"),l(),s(60,"input",59),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.odometerAfter,r)||(a.recordForm.odometerAfter=r),C(r)}),l()(),H(61,ak,6,1,"div",39),s(62,"div",39)(63,"label",60),d(64,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A"),l(),s(65,"textarea",61),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.notes,r)||(a.recordForm.notes=r),C(r)}),l()()(),s(66,"div",62)(67,"button",63),T("click",function(){b(e);let r=h();return C(r.isAddRecordModalOpen.set(!1))}),d(68,"\u0625\u0644\u063A\u0627\u0621"),l(),s(69,"button",64),d(70,"\u0625\u0636\u0627\u0641\u0629"),l()()()()()()()}if(i&2){let e=h();m(15),R("ngModel",e.recordForm.date),m(4),R("ngModel",e.vehicleSearchTerm),S("ngModelOptions",Ei(18,_2)),m(),R("ngModel",e.recordForm.vehicleId),m(3),Ee(e.filteredVehicles()),m(3),vt(" \u0639\u0631\u0636 ",e.filteredVehicles().length," \u0645\u0646 ",e.vehiclesList.length," \u0645\u0631\u0643\u0628\u0629 "),m(4),R("ngModel",e.recordForm.driverId),m(3),Ee(e.driversList),m(5),S("label","\u0646\u0648\u0639 \u0627\u0644\u0635\u064A\u0627\u0646\u0629")("placeholder","\u0627\u0628\u062D\u062B \u0639\u0646 \u0646\u0648\u0639 \u0627\u0644\u0635\u064A\u0627\u0646\u0629...")("selectedTypeId","")("selectedTypeName",e.recordForm.type),m(4),R("ngModel",e.recordForm.cost),m(4),R("ngModel",e.recordForm.status),m(),Ee(e.maintenanceStatuses),m(5),R("ngModel",e.recordForm.serviceLocation),m(4),R("ngModel",e.recordForm.odometerBefore),m(4),R("ngModel",e.recordForm.odometerAfter),m(),le(e.calculatedKm>0?61:-1),m(4),R("ngModel",e.recordForm.notes)}}function sk(i,t){if(i&1&&(s(0,"option",11),d(1),l()),i&2){let e=t.$implicit;S("value",e.id),m(),vt("",e.vehicleName," (",e.vehicleId,")")}}function lk(i,t){if(i&1&&(s(0,"option",11),d(1),l()),i&2){let e=t.$implicit;S("value",e.id),m(),q(" ",e.arabicName||e.name," ")}}function uk(i,t){if(i&1&&(s(0,"option",11),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function ck(i,t){if(i&1){let e=Q();x(0,"div",28),s(1,"div",29)(2,"div",30)(3,"div",31)(4,"div",67)(5,"h5",68),d(6,"\u062A\u0639\u062F\u064A\u0644 \u0633\u062C\u0644 \u0627\u0644\u0635\u064A\u0627\u0646\u0629"),l(),s(7,"button",34),T("click",function(){b(e);let r=h();return C(r.closeEditRecordModal())}),x(8,"i",35),l()(),s(9,"div",36)(10,"form",37),T("ngSubmit",function(){b(e);let r=h();return C(r.saveEditRecord())}),s(11,"div",38)(12,"div",39)(13,"label",7),d(14,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E"),l(),s(15,"input",40),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.date,r)||(a.recordForm.date=r),C(r)}),l()(),s(16,"div",39)(17,"label",69),d(18,"\u0627\u0644\u0645\u0631\u0643\u0628\u0629"),l(),s(19,"input",70),V("ngModelChange",function(r){b(e);let a=h();return N(a.vehicleSearchTerm,r)||(a.vehicleSearchTerm=r),C(r)}),l(),s(20,"select",71),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.vehicleId,r)||(a.recordForm.vehicleId=r),C(r)}),s(21,"option",44),d(22,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0631\u0643\u0628\u0629"),l(),Te(23,sk,2,3,"option",11,Ds),l(),s(25,"small",45),d(26),l()(),s(27,"div",39)(28,"label",72),d(29,"\u0627\u0644\u0633\u0627\u0626\u0642 (\u0627\u062E\u062A\u064A\u0627\u0631\u064A)"),l(),s(30,"select",73),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.driverId,r)||(a.recordForm.driverId=r),C(r)}),s(31,"option",44),d(32,"\u062A\u0644\u0642\u0627\u0626\u064A (\u0627\u0644\u0633\u0627\u0626\u0642 \u0627\u0644\u062D\u0627\u0644\u064A \u0644\u0644\u0645\u0631\u0643\u0628\u0629)"),l(),Te(33,lk,2,2,"option",11,Ds),l(),s(35,"small",45),d(36,"\u0625\u0630\u0627 \u062A\u0631\u0643\u062A \u0641\u0627\u0631\u063A\u0627\u064B\u060C \u0633\u064A\u062A\u0645 \u062A\u0639\u064A\u064A\u0646 \u0627\u0644\u0633\u0627\u0626\u0642 \u0627\u0644\u062D\u0627\u0644\u064A \u0644\u0644\u0645\u0631\u0643\u0628\u0629"),l()(),s(37,"div",39)(38,"app-maintenance-type-search",48),T("typeSelected",function(r){b(e);let a=h();return C(a.onMaintenanceTypeSelected(r))}),l()(),s(39,"div",49)(40,"label",74),d(41,"\u0627\u0644\u062A\u0643\u0644\u0641\u0629 (\u20AA)"),l(),s(42,"input",75),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.cost,r)||(a.recordForm.cost=r),C(r)}),l()(),s(43,"div",49)(44,"label",76),d(45,"\u0627\u0644\u062D\u0627\u0644\u0629"),l(),s(46,"select",77),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.status,r)||(a.recordForm.status=r),C(r)}),Te(47,uk,2,2,"option",11,pt),l()(),s(49,"div",39)(50,"label",78),d(51,"\u0645\u0648\u0642\u0639 \u0627\u0644\u062E\u062F\u0645\u0629"),l(),s(52,"input",79),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.serviceLocation,r)||(a.recordForm.serviceLocation=r),C(r)}),l()(),s(53,"div",49)(54,"label",80),d(55,"\u0639\u062F\u0627\u062F \u0627\u0644\u0645\u0633\u0627\u0641\u0627\u062A (\u0642\u0628\u0644)"),l(),s(56,"input",81),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.odometerBefore,r)||(a.recordForm.odometerBefore=r),C(r)}),l()(),s(57,"div",49)(58,"label",82),d(59,"\u0639\u062F\u0627\u062F \u0627\u0644\u0645\u0633\u0627\u0641\u0627\u062A (\u0628\u0639\u062F)"),l(),s(60,"input",83),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.odometerAfter,r)||(a.recordForm.odometerAfter=r),C(r)}),l()(),s(61,"div",39)(62,"label",84),d(63,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A"),l(),s(64,"textarea",85),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.notes,r)||(a.recordForm.notes=r),C(r)}),l()()(),s(65,"div",62)(66,"button",63),T("click",function(){b(e);let r=h();return C(r.closeEditRecordModal())}),d(67,"\u0625\u0644\u063A\u0627\u0621"),l(),s(68,"button",86),d(69,"\u062D\u0641\u0638 \u0627\u0644\u062A\u063A\u064A\u064A\u0631\u0627\u062A"),l()()()()()()()}if(i&2){let e=h();m(15),R("ngModel",e.recordForm.date),m(4),R("ngModel",e.vehicleSearchTerm),S("ngModelOptions",Ei(17,_2)),m(),R("ngModel",e.recordForm.vehicleId),m(3),Ee(e.filteredVehicles()),m(3),vt(" \u0639\u0631\u0636 ",e.filteredVehicles().length," \u0645\u0646 ",e.vehiclesList.length," \u0645\u0631\u0643\u0628\u0629 "),m(4),R("ngModel",e.recordForm.driverId),m(3),Ee(e.driversList),m(5),S("label","\u0646\u0648\u0639 \u0627\u0644\u0635\u064A\u0627\u0646\u0629")("placeholder","\u0627\u0628\u062D\u062B \u0639\u0646 \u0646\u0648\u0639 \u0627\u0644\u0635\u064A\u0627\u0646\u0629...")("selectedTypeId",e.recordForm.maintenanceTypeId)("selectedTypeName",e.recordForm.type),m(4),R("ngModel",e.recordForm.cost),m(4),R("ngModel",e.recordForm.status),m(),Ee(e.maintenanceStatuses),m(5),R("ngModel",e.recordForm.serviceLocation),m(4),R("ngModel",e.recordForm.odometerBefore),m(4),R("ngModel",e.recordForm.odometerAfter),m(4),R("ngModel",e.recordForm.notes)}}function dk(i,t){if(i&1){let e=Q();s(0,"div",38)(1,"div",39)(2,"div",91)(3,"div")(4,"p",92),d(5,"\u0627\u0644\u0645\u0631\u0643\u0628\u0629"),l(),s(6,"h5",93),T("click",function(r){let a=b(e);return h(2).navigateToFleet(a.vehicleInternalId),C(r.stopPropagation())}),d(7),l()(),x(8,"app-status-badge",94),l()(),s(9,"div",49)(10,"p",92),d(11,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E"),l(),s(12,"p",95),d(13),l()(),s(14,"div",49)(15,"p",92),d(16,"\u0646\u0648\u0639 \u0627\u0644\u0635\u064A\u0627\u0646\u0629"),l(),s(17,"p",95),d(18),l()(),s(19,"div",39)(20,"p",92),d(21,"\u0627\u0644\u062A\u0643\u0644\u0641\u0629"),l(),s(22,"p",96),d(23),l()(),s(24,"div",39)(25,"p",92),d(26,"\u0645\u0648\u0642\u0639 \u0627\u0644\u062E\u062F\u0645\u0629"),l(),s(27,"p",95),d(28),l()(),s(29,"div",39)(30,"p",92),d(31,"\u0639\u062F\u0627\u062F \u0627\u0644\u0645\u0633\u0627\u0641\u0627\u062A"),l(),s(32,"p",95),d(33),l()(),s(34,"div",39)(35,"p",92),d(36,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A"),l(),s(37,"p",97),d(38),l()()(),s(39,"div",98)(40,"button",99),T("click",function(){let r=b(e),a=h(2);return C(a.deleteRecord(r.id))}),x(41,"i",100),d(42," \u062D\u0630\u0641 "),l(),s(43,"div",101)(44,"button",63),T("click",function(){b(e);let r=h(2);return C(r.closeViewRecordModal())}),d(45,"\u0625\u063A\u0644\u0627\u0642"),l(),s(46,"button",102),T("click",function(){b(e);let r=h(2);return C(r.openEditRecordModal())}),x(47,"i",103),d(48," \u062A\u0639\u062F\u064A\u0644 "),l()()()}if(i&2){let e=t,n=h(2);m(7),z(e.vehicleName||e.vehicleId),m(),S("status",e.status)("type","maintenance"),m(5),z(n.formatDate(e.date)),m(5),z(e.maintenanceTypeName||e.type||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"),m(5),q("\u20AA",e.cost.toFixed(2),""),m(5),z(e.serviceLocation),m(5),vt(" \u0642\u0628\u0644: ",e.odometerBefore.toLocaleString()," \u0645\u064A\u0644 / \u0628\u0639\u062F: ",e.odometerAfter.toLocaleString()," \u0645\u064A\u0644 "),m(5),z(e.notes)}}function mk(i,t){if(i&1){let e=Q();x(0,"div",28),s(1,"div",29)(2,"div",30)(3,"div",31)(4,"div",87)(5,"h5",68),d(6,"\u062A\u0641\u0627\u0635\u064A\u0644 \u0633\u062C\u0644 \u0627\u0644\u0635\u064A\u0627\u0646\u0629"),l(),s(7,"button",88),T("click",function(){b(e);let r=h();return C(r.closeViewRecordModal())}),x(8,"i",89),l()(),s(9,"div",90),H(10,dk,49,10),l()()()()}if(i&2){let e,n=h();m(10),le((e=n.selectedRecord())?10:-1,e)}}function fk(i,t){if(i&1&&(s(0,"option",11),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function pk(i,t){if(i&1&&(s(0,"option",11),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function hk(i,t){if(i&1&&(s(0,"option",11),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function gk(i,t){if(i&1&&(s(0,"option",11),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function _k(i,t){if(i&1&&(s(0,"option",11),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function vk(i,t){if(i&1&&(s(0,"option",11),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function xk(i,t){if(i&1&&(s(0,"option",11),d(1),l()),i&2){let e=t.$implicit;S("value",e.id),m(),vt("",e.vehicleName," (",e.vehicleId,")")}}function yk(i,t){if(i&1&&(x(0,"i",121),d(1),gt(2,"number")),i&2){let e=h().$implicit;m(),q(" ",Ya(2,1,e.kmSinceMaintenance)," \u0643\u0645 ")}}function bk(i,t){i&1&&(s(0,"span",97),d(1,"---"),l())}function Ck(i,t){if(i&1){let e=Q();s(0,"div",22)(1,"div",104),T("click",function(){let r=b(e).$implicit,a=h();return C(a.viewRecordDetails(r))}),s(2,"div",105)(3,"div",106)(4,"div",107)(5,"h5",108)(6,"span",109),T("click",function(r){let a=b(e).$implicit;return h().navigateToFleet(a.vehicleInternalId),C(r.stopPropagation())}),d(7),l(),s(8,"i",110),T("click",function(r){let a=b(e).$implicit,u=h();return C(u.filterByVehicle(a.vehicleId,r))}),l()(),s(9,"p",111),d(10),l()(),x(11,"app-status-badge",94),l()(),s(12,"div",112)(13,"div",5)(14,"div",49)(15,"p",92),d(16,"\u0646\u0648\u0639 \u0627\u0644\u0635\u064A\u0627\u0646\u0629"),l(),s(17,"p",113)(18,"span",114),T("click",function(r){let a=b(e).$implicit,u=h();return C(u.filterByMaintenanceType(a.maintenanceTypeId,r))}),d(19),l(),s(20,"i",115),T("click",function(r){let a=b(e).$implicit,u=h();return C(u.filterByMaintenanceType(a.maintenanceTypeId,r))}),l()()(),s(21,"div",49)(22,"p",92),d(23,"\u0627\u0644\u062A\u0643\u0644\u0641\u0629"),l(),s(24,"p",116),d(25),l()(),s(26,"div",39)(27,"p",92),d(28,"\u0645\u0648\u0642\u0639 \u0627\u0644\u062E\u062F\u0645\u0629"),l(),s(29,"p",113),x(30,"i",117),s(31,"span",118),T("click",function(r){let a=b(e).$implicit,u=h();return C(u.filterByServiceLocation(a.serviceLocation,r))}),d(32),l(),s(33,"i",119),T("click",function(r){let a=b(e).$implicit,u=h();return C(u.filterByServiceLocation(a.serviceLocation,r))}),l()()(),s(34,"div",39)(35,"p",92),d(36,"\u0639\u062F\u0627\u062F \u0627\u0644\u0645\u0633\u0627\u0641\u0627\u062A"),l(),s(37,"p",113),d(38),l()(),s(39,"div",39)(40,"p",92),d(41,"\u0643\u0645 \u0645\u0646\u0630 \u0627\u0644\u0635\u064A\u0627\u0646\u0629"),l(),s(42,"p",113),H(43,yk,3,3)(44,bk,2,0,"span",97),l()(),s(45,"div",39)(46,"p",92),d(47,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A"),l(),s(48,"p",120),d(49),l()()()()()()}if(i&2){let e=t.$implicit,n=h();m(7),z(e.vehicleName||e.vehicleId),m(3),z(n.formatDate(e.date)),m(),S("status",e.status)("type","maintenance"),m(8),z(e.maintenanceTypeName||e.type||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"),m(6),q("\u20AA",e.cost.toFixed(2),""),m(7),z(e.serviceLocation),m(6),vt(" \u0642\u0628\u0644: ",e.odometerBefore.toLocaleString()," \u0645\u064A\u0644 / \u0628\u0639\u062F: ",e.odometerAfter.toLocaleString()," \u0645\u064A\u0644 "),m(5),le(e.kmSinceMaintenance!==null&&e.kmSinceMaintenance!==void 0?43:44),m(6),z(e.notes)}}function wk(i,t){i&1&&(s(0,"div",23),x(1,"i",122),s(2,"h5",123),d(3,"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0633\u062C\u0644\u0627\u062A"),l(),s(4,"p"),d(5,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0633\u062C\u0644\u0627\u062A \u062A\u0637\u0627\u0628\u0642 \u0645\u0639\u0627\u064A\u064A\u0631 \u0627\u0644\u0628\u062D\u062B \u0627\u0644\u0645\u062D\u062F\u062F\u0629."),l()())}function Sk(i,t){if(i&1){let e=Q();s(0,"div",24)(1,"app-pagination",124),T("pageChange",function(r){b(e);let a=h();return C(a.onPageChange(r))})("itemsPerPageChange",function(r){b(e);let a=h();return C(a.onItemsPerPageChange(r))}),l()()}if(i&2){let e=h();m(),S("currentPage",e.currentPage)("totalItems",e.totalRecords)("itemsPerPage",e.itemsPerPage)}}var Oc=class i{constructor(t,e,n,r,a,u,p){this.globalVars=t;this.toastService=e;this.validationService=n;this.maintenanceService=r;this.vehicleService=a;this.driverService=u;this.router=p;this.globalVars.setGlobalHeader("\u0633\u062C\u0644 \u0627\u0644\u0635\u064A\u0627\u0646\u0629"),H0(()=>{this.searchTerm(),this.searchDebounceTimer&&clearTimeout(this.searchDebounceTimer),this.searchDebounceTimer=setTimeout(()=>{this.currentPage=1,this.loadData()},500)})}searchTerm=Z("");maintenanceTypeFilter=Z("");startDay=1;startMonth=1;startYear=2020;endDay=new Date().getDate();endMonth=new Date().getMonth()+1;endYear=new Date().getFullYear();selectedVehicle="\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A";selectedMaintenanceType="";dateFilterFrom=Z(null);dateFilterTo=Z(null);vehicleFilter=Z("\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A");serviceLocationFilter=Z("");isAddRecordModalOpen=Z(!1);isViewRecordModalOpen=Z(!1);isEditRecordModalOpen=Z(!1);selectedRecord=Z(null);recordForm={date:new Date().toISOString().split("T")[0],vehicleId:"",maintenanceTypeId:"",type:"",cost:0,serviceLocation:"",odometerBefore:0,odometerAfter:0,notes:"",status:"\u0645\u062C\u062F\u0648\u0644\u0629",driverId:""};get calculatedKm(){let t=this.recordForm.odometerBefore||0,e=this.recordForm.odometerAfter||0;return Math.max(0,e-t)}vehiclesList=[];vehicleSearchTerm=Z("");filteredVehicles=We(()=>{let t=this.vehicleSearchTerm().toLowerCase();return t?this.vehiclesList.filter(e=>e.vehicleName.toLowerCase().includes(t)||e.vehicleId.toLowerCase().includes(t)):this.vehiclesList});driversList=[];selectedDriverId="";maintenanceTypes=["\u062A\u063A\u064A\u064A\u0631 \u0627\u0644\u0632\u064A\u062A","\u062A\u062F\u0648\u064A\u0631 \u0627\u0644\u0625\u0637\u0627\u0631\u0627\u062A","\u062E\u062F\u0645\u0629 \u0627\u0644\u0641\u0631\u0627\u0645\u0644","\u0625\u0635\u0644\u0627\u062D \u0627\u0644\u0645\u062D\u0631\u0643","\u0641\u062D\u0635 \u062F\u0648\u0631\u064A","\u0635\u064A\u0627\u0646\u0629 \u0643\u0647\u0631\u0628\u0627\u0626\u064A\u0629","\u0635\u064A\u0627\u0646\u0629 \u0646\u0638\u0627\u0645 \u0627\u0644\u062A\u0628\u0631\u064A\u062F","\u0627\u0633\u062A\u0628\u062F\u0627\u0644 \u0627\u0644\u0628\u0637\u0627\u0631\u064A\u0629","\u0623\u062E\u0631\u0649"];maintenanceStatuses=["\u0645\u0643\u062A\u0645\u0644\u0629","\u0645\u062C\u062F\u0648\u0644\u0629","\u0642\u064A\u062F \u0627\u0644\u062A\u0646\u0641\u064A\u0630"];currentPage=1;itemsPerPage=10;totalRecords=0;isLoading=Z(!1);searchDebounceTimer=null;ngOnInit(){this.loadVehicles(),this.loadDrivers(),this.loadData()}records=Z([]);loadVehicles(){this.vehicleService.getVehicles({limit:1e3}).subscribe({next:t=>{this.vehiclesList=t.data},error:t=>{console.error("Error loading vehicles:",t),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A")}})}loadDrivers(){this.driverService.getAllDrivers().subscribe({next:t=>{this.driversList=t.data},error:t=>{console.error("Error loading drivers:",t),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0633\u0627\u0626\u0642\u064A\u0646")}})}loadData(){this.isLoading.set(!0);let t={page:this.currentPage,limit:this.itemsPerPage,vehicleInternalId:this.vehicleFilter()!=="\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A"?this.vehicleFilter():void 0},e=this.dateFilterFrom(),n=this.dateFilterTo();if(e&&n){let r=new Date(e),a=new Date(n);r.setDate(r.getDate()+1),a.setDate(a.getDate()+1),t.startDate=r.toISOString().split("T")[0],t.endDate=a.toISOString().split("T")[0]}this.maintenanceTypeFilter()&&this.maintenanceTypeFilter()!==""&&(t.maintenanceType=this.maintenanceTypeFilter()),this.searchTerm().trim()&&(t.search=this.searchTerm().trim()),this.maintenanceService.getMaintenanceRecords(t).subscribe({next:r=>{this.records.set(r.data),this.totalRecords=r.total,this.isLoading.set(!1)},error:r=>{console.error("Error loading maintenance records:",r),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0633\u062C\u0644\u0627\u062A \u0627\u0644\u0635\u064A\u0627\u0646\u0629"),this.isLoading.set(!1)}})}getPaginatedMaintenanceRecords(){return this.records()}onPageChange(t){this.currentPage=t,this.loadData()}onItemsPerPageChange(t){this.itemsPerPage=t,this.currentPage=1,this.loadData()}applyFilters(){let t=new Date(this.startYear,this.startMonth-1,this.startDay),e=new Date(this.endYear,this.endMonth-1,this.endDay);this.dateFilterFrom.set(t),this.dateFilterTo.set(e),this.vehicleFilter.set(this.selectedVehicle),this.currentPage=1,this.loadData()}clearFilters(){this.startDay=1,this.startMonth=1,this.startYear=new Date().getFullYear(),this.endDay=31,this.endMonth=12,this.endYear=new Date().getFullYear(),this.selectedVehicle="\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A",this.selectedMaintenanceType="",this.searchTerm.set(""),this.dateFilterFrom.set(null),this.dateFilterTo.set(null),this.vehicleFilter.set("\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A"),this.serviceLocationFilter.set(""),this.maintenanceTypeFilter.set(""),this.currentPage=1,this.loadData()}getStatusColor(t){switch(t){case"\u0645\u0643\u062A\u0645\u0644\u0629":return"#34C759";case"\u0645\u062C\u062F\u0648\u0644\u0629":return"#007AFF";case"\u0642\u064A\u062F \u0627\u0644\u062A\u0646\u0641\u064A\u0630":return"#FF9500";default:return"#6C757D"}}getStatusBadgeClass(t){switch(t){case"\u0645\u0643\u062A\u0645\u0644\u0629":return"text-bg-success";case"\u0645\u062C\u062F\u0648\u0644\u0629":return"text-bg-primary";case"\u0642\u064A\u062F \u0627\u0644\u062A\u0646\u0641\u064A\u0630":return"text-bg-warning";default:return"text-bg-secondary"}}getStatusIcon(t){switch(t){case"\u0645\u0643\u062A\u0645\u0644\u0629":return"fa-circle-check";case"\u0645\u062C\u062F\u0648\u0644\u0629":return"fa-calendar-check";case"\u0642\u064A\u062F \u0627\u0644\u062A\u0646\u0641\u064A\u0630":return"fa-hourglass-half";default:return"fa-circle"}}formatDate(t){if(!t)return"---";let e;if(typeof t=="string")e=new Date(t);else if(t instanceof Date)e=t;else return"\u062A\u0627\u0631\u064A\u062E \u063A\u064A\u0631 \u0635\u0627\u0644\u062D";return isNaN(e.getTime())?"\u062A\u0627\u0631\u064A\u062E \u063A\u064A\u0631 \u0635\u0627\u0644\u062D":e.toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"})}onMaintenanceTypeSelected(t){this.recordForm.maintenanceTypeId=t.id,this.recordForm.type=t.name,t.estimatedCost&&(this.recordForm.cost=t.estimatedCost),this.recordForm.vehicleId&&this.recordForm.maintenanceTypeId&&this.loadLastOdometerReading()}onFilterMaintenanceTypeSelected(t){t?(this.selectedMaintenanceType=t.name,this.maintenanceTypeFilter.set(t.id)):(this.selectedMaintenanceType="",this.maintenanceTypeFilter.set(""))}onVehicleSelected(t){let n=t.target.value;this.recordForm.vehicleId=n,this.recordForm.vehicleId&&this.recordForm.maintenanceTypeId&&this.loadLastOdometerReading()}loadLastOdometerReading(){!this.recordForm.vehicleId||!this.recordForm.maintenanceTypeId||this.maintenanceService.getLastOdometerReading(this.recordForm.vehicleId,this.recordForm.maintenanceTypeId).subscribe({next:t=>{t.success&&t.data.lastOdometerAfter!==null?this.recordForm.odometerBefore=t.data.lastOdometerAfter:this.recordForm.odometerBefore=0},error:t=>{console.error("Error loading last odometer reading:",t),this.recordForm.odometerBefore=0}})}openAddRecordModal(){this.recordForm={date:new Date().toISOString().split("T")[0],vehicleId:"",maintenanceTypeId:"",type:"",cost:0,serviceLocation:"",odometerBefore:0,odometerAfter:0,notes:"",status:"\u0645\u062C\u062F\u0648\u0644\u0629",driverId:""},this.isAddRecordModalOpen.set(!0)}addRecord(){let t=this.recordForm.date;console.log("Adding record with date:",t);let e={ambulanceId:this.recordForm.vehicleId,type:this.recordForm.maintenanceTypeId,description:this.recordForm.notes,cost:this.recordForm.cost,date:t},n=this.validationService.validateMaintenanceRecord(e);if(!n.valid){n.errors.forEach(r=>{this.toastService.error(r)});return}this.maintenanceService.createMaintenanceRecord({vehicleId:this.recordForm.vehicleId,date:t,maintenanceTypeId:this.recordForm.maintenanceTypeId,cost:this.recordForm.cost,serviceLocation:this.recordForm.serviceLocation,odometerBefore:this.recordForm.odometerBefore,odometerAfter:this.recordForm.odometerAfter,notes:this.recordForm.notes,status:this.recordForm.status,driverId:this.recordForm.driverId||void 0}).subscribe({next:()=>{this.isAddRecordModalOpen.set(!1),this.toastService.success("\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 \u0633\u062C\u0644 \u0627\u0644\u0635\u064A\u0627\u0646\u0629 \u0628\u0646\u062C\u0627\u062D"),this.loadData()},error:r=>{console.error("Error creating maintenance record:",r),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u0625\u0636\u0627\u0641\u0629 \u0633\u062C\u0644 \u0627\u0644\u0635\u064A\u0627\u0646\u0629")}})}openEditRecordModal(){let t=this.selectedRecord();if(t){let n=(typeof t.date=="string"?new Date(t.date):t.date).toISOString().split("T")[0];this.recordForm={date:n,vehicleId:t.vehicleId,maintenanceTypeId:t.maintenanceTypeId||"",type:t.maintenanceTypeName||t.type||"",cost:t.cost,serviceLocation:t.serviceLocation,odometerBefore:t.odometerBefore,odometerAfter:t.odometerAfter,notes:t.notes,status:t.status,driverId:t.driverId||""},this.isViewRecordModalOpen.set(!1),this.isEditRecordModalOpen.set(!0)}}saveEditRecord(){let t=this.selectedRecord();if(t){let e=this.recordForm.date;console.log("Updating record with date:",e);let n={ambulanceId:this.recordForm.vehicleId,type:this.recordForm.maintenanceTypeId,description:this.recordForm.notes,cost:this.recordForm.cost,date:e},r=this.validationService.validateMaintenanceRecord(n);if(!r.valid){r.errors.forEach(u=>{this.toastService.error(u)});return}let a={vehicleId:this.recordForm.vehicleId,date:e,maintenanceTypeId:this.recordForm.maintenanceTypeId,cost:this.recordForm.cost,serviceLocation:this.recordForm.serviceLocation,odometerBefore:this.recordForm.odometerBefore,odometerAfter:this.recordForm.odometerAfter,notes:this.recordForm.notes,status:this.recordForm.status,driverId:this.recordForm.driverId||void 0};this.maintenanceService.updateMaintenanceRecord(t.id,a).subscribe({next:u=>{let p=Qe(ve(ve(ve({},t),a),u&&Object.keys(u).length>0?u:{}),{id:t.id});this.selectedRecord.set(p),this.isEditRecordModalOpen.set(!1),this.isViewRecordModalOpen.set(!0),this.toastService.success("\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0633\u062C\u0644 \u0627\u0644\u0635\u064A\u0627\u0646\u0629 \u0628\u0646\u062C\u0627\u062D"),this.loadData()},error:u=>{console.error("Error updating maintenance record:",u),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u062A\u062D\u062F\u064A\u062B \u0633\u062C\u0644 \u0627\u0644\u0635\u064A\u0627\u0646\u0629")}})}}viewRecordDetails(t){this.selectedRecord.set(t),this.isViewRecordModalOpen.set(!0)}closeViewRecordModal(){this.isViewRecordModalOpen.set(!1),this.selectedRecord.set(null)}closeEditRecordModal(){this.isEditRecordModalOpen.set(!1)}isDeleteRecordModalOpen=Z(!1);recordIdToDelete=Z(null);deleteRecordModalConfig=Z({type:"delete",title:"\u062A\u0623\u0643\u064A\u062F \u062D\u0630\u0641 \u0633\u062C\u0644 \u0627\u0644\u0635\u064A\u0627\u0646\u0629",message:"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0633\u062C\u0644 \u0627\u0644\u0635\u064A\u0627\u0646\u0629 \u0647\u0630\u0627 \u0628\u0634\u0643\u0644 \u0646\u0647\u0627\u0626\u064A\u061F \u0644\u0627 \u064A\u0645\u0643\u0646 \u0627\u0644\u062A\u0631\u0627\u062C\u0639 \u0639\u0646 \u0647\u0630\u0627 \u0627\u0644\u0625\u062C\u0631\u0627\u0621.",confirmButtonText:"\u0646\u0639\u0645\u060C \u0627\u062D\u0630\u0641 \u0627\u0644\u0633\u062C\u0644",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621"});deleteRecord(t){this.recordIdToDelete.set(t);let e={type:"delete",title:"\u062A\u0623\u0643\u064A\u062F \u062D\u0630\u0641 \u0633\u062C\u0644 \u0627\u0644\u0635\u064A\u0627\u0646\u0629",message:"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0633\u062C\u0644 \u0627\u0644\u0635\u064A\u0627\u0646\u0629 \u0647\u0630\u0627 \u0628\u0634\u0643\u0644 \u0646\u0647\u0627\u0626\u064A\u061F \u0644\u0627 \u064A\u0645\u0643\u0646 \u0627\u0644\u062A\u0631\u0627\u062C\u0639 \u0639\u0646 \u0647\u0630\u0627 \u0627\u0644\u0625\u062C\u0631\u0627\u0621.",confirmButtonText:"\u0646\u0639\u0645\u060C \u0627\u062D\u0630\u0641 \u0627\u0644\u0633\u062C\u0644",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621"};this.deleteRecordModalConfig.set(e),this.isDeleteRecordModalOpen.set(!0)}handleDeleteRecordConfirmation(t){let e=this.recordIdToDelete();this.isDeleteRecordModalOpen.set(!1),this.recordIdToDelete.set(null),t&&e&&this.maintenanceService.deleteMaintenanceRecord(e).subscribe({next:()=>{this.closeViewRecordModal(),this.toastService.success("\u062A\u0645 \u062D\u0630\u0641 \u0633\u062C\u0644 \u0627\u0644\u0635\u064A\u0627\u0646\u0629 \u0628\u0646\u062C\u0627\u062D"),this.loadData()},error:n=>{console.error("Error deleting maintenance record:",n),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u062D\u0630\u0641 \u0633\u062C\u0644 \u0627\u0644\u0635\u064A\u0627\u0646\u0629")}})}navigateToFleet(t){t&&this.router.navigate(["admin/vehicles"],{queryParams:{filterType:"id",filterValue:t}})}filterByVehicle(t,e){e&&e.stopPropagation(),this.selectedVehicle=t,this.vehicleFilter.set(t),this.currentPage=1,this.loadData()}filterByMaintenanceType(t,e){e&&e.stopPropagation(),this.selectedMaintenanceType=t,this.maintenanceTypeFilter.set(t),this.currentPage=1,this.loadData()}filterByServiceLocation(t,e){e&&e.stopPropagation(),this.searchTerm.set(t)}getDaysInMonth(t,e){let n=new Date(e,t,0).getDate();return Array.from({length:n},(r,a)=>a+1)}getMonths(){return Array.from({length:12},(t,e)=>e+1)}getYears(){let t=new Date().getFullYear(),e=2020,n=[];for(let r=e;r<=t+10;r++)n.push(r);return n}static \u0275fac=function(e){return new(e||i)(G(ft),G(Ye),G(cr),G(Ps),G(oi),G(Ci),G(Xe))};static \u0275cmp=Oe({type:i,selectors:[["app-maintenance-history"]],decls:67,vars:19,consts:[[1,"d-flex","flex-column","min-vh-100","bg-light"],["dir","rtl",1,"flex-grow-1","p-3","p-lg-4"],[1,"container-fluid",2,"max-width","1200px"],[1,"card","shadow-sm","rounded-xl","p-4","mb-4"],[1,"fw-bold","mb-3","text-end"],[1,"row","g-3","text-end"],[1,"col-md-6"],[1,"form-label","small","fw-medium"],[1,"row","g-2"],[1,"col-4"],[1,"form-select",3,"ngModelChange","ngModel"],[3,"value"],["for","vehicleFilter",1,"form-label","small","fw-medium"],["id","vehicleFilter",1,"form-select",3,"ngModelChange","ngModel"],["value","\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A"],[3,"typeSelected","label","placeholder","required","selectedTypeId","selectedTypeName"],[1,"d-flex","gap-2","mt-4"],[1,"btn","btn-primary-custom","fw-bold","px-4",3,"click"],[1,"fa-solid","fa-filter","me-2"],[1,"btn","btn-outline-secondary","px-4",3,"click"],[1,"fa-solid","fa-times","me-2"],[1,"row","row-cols-1","g-4"],[1,"col"],[1,"col-12","text-center","text-muted","p-5"],[1,"mt-4"],[1,"fab","shadow-lg",3,"click"],[1,"fa-solid","fa-plus","fa-lg"],[3,"confirmed","cancelled","isOpen","config"],[1,"modal-backdrop","fade","show"],["tabindex","-1","role","dialog",1,"modal","fade","show","d-block"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content","rounded-xl","shadow-lg","border-0"],[1,"modal-header","bg-primary-custom","rounded-top-xl","border-0","justify-content-between","text-white"],[1,"modal-title","fw-bold","text-dark"],["type","button","data-bs-dismiss","modal","aria-label","Close",2,"background-color","transparent","border","none",3,"click"],[1,"fa","fa-times"],[1,"modal-body","p-4","text-end",2,"max-height","70vh","overflow-y","auto"],[3,"ngSubmit"],[1,"row","g-3"],[1,"col-12"],["type","date","name","recordDate","required","","max","9999-12-31",1,"form-control",3,"ngModelChange","ngModel"],["for","vehicleSearch",1,"form-label","small","fw-medium"],["type","text","id","vehicleSearch","placeholder","\u0628\u062D\u062B \u0639\u0646 \u0645\u0631\u0643\u0628\u0629...",1,"form-control","mb-2",3,"ngModelChange","ngModel","ngModelOptions"],["id","vehicleId","name","vehicleId","required","",1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[1,"text-muted","d-block","mt-1"],["for","driverSelect",1,"form-label","small","fw-medium"],["id","driverSelect","name","driverId",1,"form-select",3,"ngModelChange","ngModel"],[3,"typeSelected","label","placeholder","selectedTypeId","selectedTypeName"],[1,"col-6"],["for","cost",1,"form-label","small","fw-medium"],["id","cost","type","number","placeholder","0.00","name","cost","min","0","step","0.01","required","",1,"form-control","text-end",2,"direction","ltr",3,"ngModelChange","ngModel"],["for","status",1,"form-label","small","fw-medium"],["id","status","name","status","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","serviceLocation",1,"form-label","small","fw-medium"],["id","serviceLocation","type","text","placeholder","\u0627\u0633\u0645 \u0645\u0631\u0643\u0632 \u0627\u0644\u0635\u064A\u0627\u0646\u0629","name","serviceLocation","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","odometerBefore",1,"form-label","small","fw-medium"],["id","odometerBefore","type","number","placeholder","0","name","odometerBefore","min","0","required","",1,"form-control","text-end",2,"direction","ltr",3,"ngModelChange","ngModel"],["for","odometerAfter",1,"form-label","small","fw-medium"],["id","odometerAfter","type","number","placeholder","0","name","odometerAfter","min","0","required","",1,"form-control","text-end",2,"direction","ltr",3,"ngModelChange","ngModel"],["for","notes",1,"form-label","small","fw-medium"],["id","notes","rows","3","placeholder","\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629...","name","notes",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-end","gap-2","mt-4"],["type","button",1,"btn","btn-outline-secondary","rounded-pill","px-4","fw-bold",3,"click"],["type","submit",1,"btn","btn-success","rounded-pill","px-4","fw-bold"],[1,"alert","alert-info","mb-0","py-2"],[1,"fa","fa-road","me-2"],[1,"modal-header","bg-warning","rounded-top-xl","border-0","justify-content-between","text-dark"],[1,"modal-title","fw-bold"],["for","editVehicleSearch",1,"form-label","small","fw-medium"],["type","text","id","editVehicleSearch","placeholder","\u0628\u062D\u062B \u0639\u0646 \u0645\u0631\u0643\u0628\u0629...",1,"form-control","mb-2",3,"ngModelChange","ngModel","ngModelOptions"],["id","editVehicleId","name","vehicleId","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","editDriverSelect",1,"form-label","small","fw-medium"],["id","editDriverSelect","name","driverId",1,"form-select",3,"ngModelChange","ngModel"],["for","editCost",1,"form-label","small","fw-medium"],["id","editCost","type","number","placeholder","0.00","name","cost","min","0","step","0.01","required","",1,"form-control","text-end",2,"direction","ltr",3,"ngModelChange","ngModel"],["for","editStatus",1,"form-label","small","fw-medium"],["id","editStatus","name","status","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","editServiceLocation",1,"form-label","small","fw-medium"],["id","editServiceLocation","type","text","placeholder","\u0627\u0633\u0645 \u0645\u0631\u0643\u0632 \u0627\u0644\u0635\u064A\u0627\u0646\u0629","name","serviceLocation","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","editOdometerBefore",1,"form-label","small","fw-medium"],["id","editOdometerBefore","type","number","placeholder","0","name","odometerBefore","min","0","required","",1,"form-control","text-end",2,"direction","ltr",3,"ngModelChange","ngModel"],["for","editOdometerAfter",1,"form-label","small","fw-medium"],["id","editOdometerAfter","type","number","placeholder","0","name","odometerAfter","min","0","required","",1,"form-control","text-end",2,"direction","ltr",3,"ngModelChange","ngModel"],["for","editNotes",1,"form-label","small","fw-medium"],["id","editNotes","rows","3","placeholder","\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629...","name","notes",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-warning","rounded-pill","px-4","fw-bold"],[1,"modal-header","bg-primary-custom","rounded-top-xl","border-0","justify-content-between"],["type","button","data-bs-dismiss","modal","aria-label","Close",2,"border","none","background","none",3,"click"],[1,"fas","fa-times"],[1,"modal-body","p-4","text-end"],[1,"d-flex","justify-content-between","align-items-start","mb-3"],[1,"text-muted","small","mb-1"],[1,"fw-bold","cursor-pointer","text-primary-hover",3,"click"],["size","medium",3,"status","type"],[1,"fw-bold"],["dir","ltr",1,"h4","fw-bold","text-primary"],[1,"text-muted"],[1,"d-flex","justify-content-between","gap-2","mt-4"],["type","button",1,"btn","btn-danger","rounded-pill","px-4","fw-bold",3,"click"],[1,"fa-solid","fa-trash","me-1"],[1,"d-flex","gap-2"],["type","button",1,"btn","btn-warning","rounded-pill","px-4","fw-bold",3,"click"],[1,"fa-solid","fa-edit","me-1"],[1,"card","shadow-sm","rounded-xl","overflow-hidden","cursor-pointer","hover-lift",3,"click"],[1,"card-header","bg-white","border-bottom","p-3"],[1,"d-flex","justify-content-between","align-items-start"],[1,"text-end"],[1,"fw-bold","mb-1"],["title","\u0639\u0631\u0636 \u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0645\u0631\u0643\u0628\u0629",1,"cursor-pointer","text-primary-hover",3,"click"],["title","\u0641\u0644\u062A\u0631\u0629 \u062D\u0633\u0628 \u0647\u0630\u0647 \u0627\u0644\u0645\u0631\u0643\u0628\u0629",1,"fa-solid","fa-filter","ms-2","text-muted","cursor-pointer",2,"font-size","0.8rem",3,"click"],[1,"text-muted","small","mb-0"],[1,"card-body","p-4"],[1,"fw-semibold","mb-0"],["title","\u0641\u0644\u062A\u0631\u0629 \u062D\u0633\u0628 \u0647\u0630\u0627 \u0627\u0644\u0646\u0648\u0639",1,"cursor-pointer","text-primary-hover",3,"click"],["title","\u0641\u0644\u062A\u0631\u0629 \u062D\u0633\u0628 \u0647\u0630\u0627 \u0627\u0644\u0646\u0648\u0639",1,"fa-solid","fa-filter","ms-1","text-muted","cursor-pointer",2,"font-size","0.7rem",3,"click"],["dir","ltr",1,"fw-semibold","fs-5","mb-0","text-primary"],[1,"fa-solid","fa-location-dot","text-danger","me-1"],["title","\u0627\u0644\u0628\u062D\u062B \u0639\u0646 \u0647\u0630\u0627 \u0627\u0644\u0645\u0648\u0642\u0639",1,"cursor-pointer","text-primary-hover",3,"click"],["title","\u0627\u0644\u0628\u062D\u062B \u0639\u0646 \u0647\u0630\u0627 \u0627\u0644\u0645\u0648\u0642\u0639",1,"fa-solid","fa-filter","ms-1","text-muted","cursor-pointer",2,"font-size","0.7rem",3,"click"],[1,"text-muted","mb-0"],[1,"fa-solid","fa-road","text-primary","me-1"],[1,"fa-solid","fa-search","fs-1","mb-3","opacity-50"],[1,"fw-bold","mb-2"],[3,"pageChange","itemsPerPageChange","currentPage","totalItems","itemsPerPage"]],template:function(e,n){e&1&&(s(0,"div",0),H(1,ok,71,19)(2,ck,70,18)(3,mk,11,1),s(4,"main",1)(5,"div",2)(6,"div",3)(7,"h5",4),d(8,"\u062A\u0635\u0641\u064A\u0629 \u0627\u0644\u0633\u062C\u0644\u0627\u062A"),l(),s(9,"div",5)(10,"div",6)(11,"label",7),d(12,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0628\u062F\u0627\u064A\u0629"),l(),s(13,"div",8)(14,"div",9)(15,"select",10),V("ngModelChange",function(a){return N(n.startDay,a)||(n.startDay=a),a}),Te(16,fk,2,2,"option",11,pt),l()(),s(18,"div",9)(19,"select",10),V("ngModelChange",function(a){return N(n.startMonth,a)||(n.startMonth=a),a}),Te(20,pk,2,2,"option",11,pt),l()(),s(22,"div",9)(23,"select",10),V("ngModelChange",function(a){return N(n.startYear,a)||(n.startYear=a),a}),Te(24,hk,2,2,"option",11,pt),l()()()(),s(26,"div",6)(27,"label",7),d(28,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0646\u0647\u0627\u064A\u0629"),l(),s(29,"div",8)(30,"div",9)(31,"select",10),V("ngModelChange",function(a){return N(n.endDay,a)||(n.endDay=a),a}),Te(32,gk,2,2,"option",11,pt),l()(),s(34,"div",9)(35,"select",10),V("ngModelChange",function(a){return N(n.endMonth,a)||(n.endMonth=a),a}),Te(36,_k,2,2,"option",11,pt),l()(),s(38,"div",9)(39,"select",10),V("ngModelChange",function(a){return N(n.endYear,a)||(n.endYear=a),a}),Te(40,vk,2,2,"option",11,pt),l()()()(),s(42,"div",6)(43,"label",12),d(44,"\u0627\u0644\u0645\u0631\u0643\u0628\u0629"),l(),s(45,"select",13),V("ngModelChange",function(a){return N(n.selectedVehicle,a)||(n.selectedVehicle=a),a}),s(46,"option",14),d(47,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A"),l(),Te(48,xk,2,3,"option",11,Ds),l()(),s(50,"div",6)(51,"app-maintenance-type-search",15),T("typeSelected",function(a){return n.onFilterMaintenanceTypeSelected(a)}),l()()(),s(52,"div",16)(53,"button",17),T("click",function(){return n.applyFilters()}),x(54,"i",18),d(55," \u062A\u0637\u0628\u064A\u0642 \u0627\u0644\u0641\u0644\u0627\u062A\u0631 "),l(),s(56,"button",19),T("click",function(){return n.clearFilters()}),x(57,"i",20),d(58," \u0645\u0633\u062D "),l()()(),s(59,"div",21),Te(60,Ck,50,11,"div",22,Ds,!1,wk,6,0,"div",23),l(),H(63,Sk,2,3,"div",24),l()(),s(64,"button",25),T("click",function(){return n.openAddRecordModal()}),x(65,"i",26),l()(),s(66,"app-confirmation-modal",27),T("confirmed",function(){return n.handleDeleteRecordConfirmation(!0)})("cancelled",function(){return n.handleDeleteRecordConfirmation(!1)}),l()),e&2&&(m(),le(n.isAddRecordModalOpen()?1:-1),m(),le(n.isEditRecordModalOpen()&&n.selectedRecord()?2:-1),m(),le(n.isViewRecordModalOpen()&&n.selectedRecord()?3:-1),m(12),R("ngModel",n.startDay),m(),Ee(n.getDaysInMonth(n.startMonth,n.startYear)),m(3),R("ngModel",n.startMonth),m(),Ee(n.getMonths()),m(3),R("ngModel",n.startYear),m(),Ee(n.getYears()),m(7),R("ngModel",n.endDay),m(),Ee(n.getDaysInMonth(n.endMonth,n.endYear)),m(3),R("ngModel",n.endMonth),m(),Ee(n.getMonths()),m(3),R("ngModel",n.endYear),m(),Ee(n.getYears()),m(5),R("ngModel",n.selectedVehicle),m(3),Ee(n.vehiclesList),m(3),S("label","\u0646\u0648\u0639 \u0627\u0644\u0635\u064A\u0627\u0646\u0629")("placeholder","\u0627\u0628\u062D\u062B \u0639\u0646 \u0646\u0648\u0639 \u0627\u0644\u0635\u064A\u0627\u0646\u0629... (\u0627\u062E\u062A\u064A\u0627\u0631\u064A)")("required",!1)("selectedTypeId",n.maintenanceTypeFilter())("selectedTypeName",n.selectedMaintenanceType),m(9),Ee(n.getPaginatedMaintenanceRecords()),m(3),le(n.totalRecords>0?63:-1),m(3),S("isOpen",n.isDeleteRecordModalOpen())("config",n.deleteRecordModalConfig()))},dependencies:[Le,wn,tt,Kt,Ot,Lt,et,vi,At,ot,Xt,Zt,xi,rt,$t,Mi,Wr,ks,Wi],styles:[".hover-lift[_ngcontent-%COMP%]{transition:all .3s ease}.hover-lift[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 16px #0000001a!important}.badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.4rem .75rem}.fa-search[_ngcontent-%COMP%], .fa-inbox[_ngcontent-%COMP%]{color:#6c757d;opacity:.5}.card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgba(0,0,0,.05)}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #1193d440;border-color:#1193d4}.btn-primary-custom[_ngcontent-%COMP%]{background-color:#1193d4;border-color:#1193d4;color:#fff}.btn-primary-custom[_ngcontent-%COMP%]:hover{background-color:#0d7ab8;border-color:#0d7ab8}.fab[_ngcontent-%COMP%]{position:fixed;bottom:2rem;left:2rem;width:56px;height:56px;border-radius:50%;background-color:#1193d4;color:#fff;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;z-index:1000}.fab[_ngcontent-%COMP%]:hover{background-color:#0d7ab8;transform:scale(1.1);box-shadow:0 12px 24px #0003!important}.fab[_ngcontent-%COMP%]:active{transform:scale(.95)}.modal-backdrop[_ngcontent-%COMP%]{background-color:#00000080}.modal-content[_ngcontent-%COMP%]{border:none}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa}.text-primary[_ngcontent-%COMP%]{color:#1193d4!important}[dir=rtl][_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{text-align:right}@media (max-width: 768px){.card-body[_ngcontent-%COMP%]{padding:1rem!important}.fab[_ngcontent-%COMP%]{bottom:1rem;left:1rem;width:48px;height:48px}}.row.g-2[_ngcontent-%COMP%]{--bs-gutter-x: .5rem;--bs-gutter-y: .5rem}.text-success[_ngcontent-%COMP%]{color:#34c759!important}.text-danger[_ngcontent-%COMP%]{color:#dc3545!important}.text-warning[_ngcontent-%COMP%]{color:#ff9500!important}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}"],changeDetection:0})};var Is=class i{constructor(t){this.http=t}API_URL=`${xt.apiEndpoint}/fuel`;getFuelRecords(t){let e=Nt(t);return this.http.get(this.API_URL,{params:e}).pipe(Be(n=>Qe(ve({},n),{data:n.data.map(r=>Qe(ve({},r),{date:new Date(r.date)}))})))}getFuelRecordById(t){return this.http.get(`${this.API_URL}/${t}`).pipe(Be(e=>Qe(ve({},e),{date:new Date(e.date)})))}createFuelRecord(t){let e=this.mapToBackendFormat(t);return this.http.post(this.API_URL,e).pipe(Be(n=>Qe(ve({},n),{date:new Date(n.date)})))}updateFuelRecord(t,e){let n=this.mapToBackendFormat(e);return this.http.put(`${this.API_URL}/${t}`,n).pipe(Be(r=>Qe(ve({},r),{date:new Date(r.date)})))}deleteFuelRecord(t){return this.http.delete(`${this.API_URL}/${t}`)}mapToBackendFormat(t){let e={};if(t.ambulanceId!==void 0&&(e.vehicleId=t.ambulanceId),t.driverInternalId!==void 0&&(e.driverId=t.driverInternalId),t.date){let n=t.date instanceof Date?t.date:new Date(t.date);e.date=n.toISOString().split("T")[0]}return t.odometerBefore!==void 0&&(e.odometerBefore=t.odometerBefore),t.odometerAfter!==void 0&&(e.odometerAfter=t.odometerAfter),t.fuelAmount!==void 0&&(e.fuelAmount=t.fuelAmount),t.cost!==void 0&&(e.cost=t.cost),t.notes!==void 0&&(e.notes=t.notes),e}static \u0275fac=function(e){return new(e||i)(Ue(It))};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})};var Lc=()=>({standalone:!0}),Os=(i,t)=>t.id;function Tk(i,t){if(i&1&&(s(0,"option",11),d(1),l()),i&2){let e=t.$implicit;S("value",e.id),m(),vt("",e.vehicleName," (",e.vehicleId,")")}}function Ek(i,t){if(i&1&&(s(0,"option",11),d(1),l()),i&2){let e=t.$implicit;S("value",e.id),m(),z(e.arabicName)}}function Ak(i,t){if(i&1){let e=Q();x(0,"div",27),s(1,"div",28)(2,"div",29)(3,"div",30)(4,"div",31)(5,"h5",32),d(6,"\u0625\u0636\u0627\u0641\u0629 \u0633\u062C\u0644 \u0648\u0642\u0648\u062F \u062C\u062F\u064A\u062F"),l(),s(7,"button",33),T("click",function(){b(e);let r=h();return C(r.isAddRecordModalOpen.set(!1))}),x(8,"i",34),l()(),s(9,"div",35)(10,"form",36),T("ngSubmit",function(){b(e);let r=h();return C(r.addRecord())}),s(11,"div",37)(12,"div",38)(13,"label",7),d(14,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E"),l(),s(15,"input",39),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.date,r)||(a.recordForm.date=r),C(r)}),l()(),s(16,"div",38)(17,"label",40),d(18,"\u0627\u0644\u0645\u0631\u0643\u0628\u0629"),l(),s(19,"input",41),V("ngModelChange",function(r){b(e);let a=h();return N(a.vehicleSearchTerm,r)||(a.vehicleSearchTerm=r),C(r)}),l(),s(20,"select",42),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.ambulanceId,r)||(a.recordForm.ambulanceId=r),C(r)}),T("change",function(r){b(e);let a=h();return C(a.onVehicleSelect(r))}),s(21,"option",43),d(22,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0631\u0643\u0628\u0629"),l(),Te(23,Tk,2,3,"option",11,Os),l(),s(25,"small",44),d(26),l()(),s(27,"div",38)(28,"label",45),d(29,"\u0627\u0644\u0633\u0627\u0626\u0642"),l(),s(30,"input",46),V("ngModelChange",function(r){b(e);let a=h();return N(a.driverSearchTerm,r)||(a.driverSearchTerm=r),C(r)}),l(),s(31,"select",47),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.driverInternalId,r)||(a.recordForm.driverInternalId=r),C(r)}),T("change",function(r){b(e);let a=h();return C(a.onDriverSelect(r))}),s(32,"option",43),d(33,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0633\u0627\u0626\u0642"),l(),Te(34,Ek,2,2,"option",11,Os),l(),s(36,"small",44),d(37),l()(),s(38,"div",48)(39,"label",49),d(40,"\u0639\u062F\u0627\u062F \u0627\u0644\u0645\u0633\u0627\u0641\u0627\u062A (\u0642\u0628\u0644)"),l(),s(41,"input",50),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.odometerBefore,r)||(a.recordForm.odometerBefore=r),C(r)}),l()(),s(42,"div",48)(43,"label",51),d(44,"\u0639\u062F\u0627\u062F \u0627\u0644\u0645\u0633\u0627\u0641\u0627\u062A (\u0628\u0639\u062F)"),l(),s(45,"input",52),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.odometerAfter,r)||(a.recordForm.odometerAfter=r),C(r)}),l()(),s(46,"div",48)(47,"label",53),d(48,"\u0643\u0645\u064A\u0629 \u0627\u0644\u0648\u0642\u0648\u062F (\u0644\u062A\u0631)"),l(),s(49,"input",54),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.fuelAmount,r)||(a.recordForm.fuelAmount=r),C(r)}),l()(),s(50,"div",48)(51,"label",55),d(52,"\u0627\u0644\u062A\u0643\u0644\u0641\u0629 (\u20AA)"),l(),s(53,"input",56),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.cost,r)||(a.recordForm.cost=r),C(r)}),l()(),s(54,"div",38)(55,"label",57),d(56,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A"),l(),s(57,"textarea",58),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.notes,r)||(a.recordForm.notes=r),C(r)}),l()()(),s(58,"div",59)(59,"button",60),T("click",function(){b(e);let r=h();return C(r.isAddRecordModalOpen.set(!1))}),d(60,"\u0625\u0644\u063A\u0627\u0621"),l(),s(61,"button",61),d(62,"\u0625\u0636\u0627\u0641\u0629"),l()()()()()()()}if(i&2){let e=h();m(15),R("ngModel",e.recordForm.date),m(4),R("ngModel",e.vehicleSearchTerm),S("ngModelOptions",Ei(16,Lc)),m(),R("ngModel",e.recordForm.ambulanceId),m(3),Ee(e.filteredVehicles()),m(3),vt(" \u0639\u0631\u0636 ",e.filteredVehicles().length," \u0645\u0646 ",e.vehiclesList.length," \u0645\u0631\u0643\u0628\u0629 "),m(4),R("ngModel",e.driverSearchTerm),S("ngModelOptions",Ei(17,Lc)),m(),R("ngModel",e.recordForm.driverInternalId),m(3),Ee(e.filteredDrivers()),m(3),vt(" \u0639\u0631\u0636 ",e.filteredDrivers().length," \u0645\u0646 ",e.driversList.length," \u0633\u0627\u0626\u0642 "),m(4),R("ngModel",e.recordForm.odometerBefore),m(4),R("ngModel",e.recordForm.odometerAfter),m(4),R("ngModel",e.recordForm.fuelAmount),m(4),R("ngModel",e.recordForm.cost),m(4),R("ngModel",e.recordForm.notes)}}function Mk(i,t){if(i&1&&(s(0,"option",11),d(1),l()),i&2){let e=t.$implicit;S("value",e.id),m(),vt("",e.vehicleName," (",e.vehicleId,")")}}function Fk(i,t){if(i&1&&(s(0,"option",11),d(1),l()),i&2){let e=t.$implicit;S("value",e.id),m(),z(e.arabicName)}}function kk(i,t){if(i&1){let e=Q();x(0,"div",27),s(1,"div",28)(2,"div",29)(3,"div",30)(4,"div",62)(5,"h5",63),d(6,"\u062A\u0639\u062F\u064A\u0644 \u0633\u062C\u0644 \u0627\u0644\u0648\u0642\u0648\u062F"),l(),s(7,"button",33),T("click",function(){b(e);let r=h();return C(r.closeEditRecordModal())}),x(8,"i",34),l()(),s(9,"div",35)(10,"form",36),T("ngSubmit",function(){b(e);let r=h();return C(r.saveEditRecord())}),s(11,"div",37)(12,"div",38)(13,"label",7),d(14,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E"),l(),s(15,"input",39),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.date,r)||(a.recordForm.date=r),C(r)}),l()(),s(16,"div",38)(17,"label",64),d(18,"\u0627\u0644\u0645\u0631\u0643\u0628\u0629"),l(),s(19,"input",65),V("ngModelChange",function(r){b(e);let a=h();return N(a.vehicleSearchTerm,r)||(a.vehicleSearchTerm=r),C(r)}),l(),s(20,"select",66),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.ambulanceId,r)||(a.recordForm.ambulanceId=r),C(r)}),T("change",function(r){b(e);let a=h();return C(a.onVehicleSelect(r))}),s(21,"option",43),d(22,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0631\u0643\u0628\u0629"),l(),Te(23,Mk,2,3,"option",11,Os),l(),s(25,"small",44),d(26),l()(),s(27,"div",38)(28,"label",67),d(29,"\u0627\u0644\u0633\u0627\u0626\u0642"),l(),s(30,"input",68),V("ngModelChange",function(r){b(e);let a=h();return N(a.driverSearchTerm,r)||(a.driverSearchTerm=r),C(r)}),l(),s(31,"select",69),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.driverInternalId,r)||(a.recordForm.driverInternalId=r),C(r)}),T("change",function(r){b(e);let a=h();return C(a.onDriverSelect(r))}),s(32,"option",43),d(33,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0633\u0627\u0626\u0642"),l(),Te(34,Fk,2,2,"option",11,Os),l(),s(36,"small",44),d(37),l()(),s(38,"div",48)(39,"label",70),d(40,"\u0639\u062F\u0627\u062F \u0627\u0644\u0645\u0633\u0627\u0641\u0627\u062A (\u0642\u0628\u0644)"),l(),s(41,"input",71),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.odometerBefore,r)||(a.recordForm.odometerBefore=r),C(r)}),l()(),s(42,"div",48)(43,"label",72),d(44,"\u0639\u062F\u0627\u062F \u0627\u0644\u0645\u0633\u0627\u0641\u0627\u062A (\u0628\u0639\u062F)"),l(),s(45,"input",73),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.odometerAfter,r)||(a.recordForm.odometerAfter=r),C(r)}),l()(),s(46,"div",48)(47,"label",74),d(48,"\u0643\u0645\u064A\u0629 \u0627\u0644\u0648\u0642\u0648\u062F (\u0644\u062A\u0631)"),l(),s(49,"input",75),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.fuelAmount,r)||(a.recordForm.fuelAmount=r),C(r)}),l()(),s(50,"div",48)(51,"label",76),d(52,"\u0627\u0644\u062A\u0643\u0644\u0641\u0629 (\u20AA)"),l(),s(53,"input",77),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.cost,r)||(a.recordForm.cost=r),C(r)}),l()(),s(54,"div",38)(55,"label",78),d(56,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A"),l(),s(57,"textarea",79),V("ngModelChange",function(r){b(e);let a=h();return N(a.recordForm.notes,r)||(a.recordForm.notes=r),C(r)}),l()()(),s(58,"div",59)(59,"button",60),T("click",function(){b(e);let r=h();return C(r.closeEditRecordModal())}),d(60,"\u0625\u0644\u063A\u0627\u0621"),l(),s(61,"button",80),d(62,"\u062D\u0641\u0638 \u0627\u0644\u062A\u063A\u064A\u064A\u0631\u0627\u062A"),l()()()()()()()}if(i&2){let e=h();m(15),R("ngModel",e.recordForm.date),m(4),R("ngModel",e.vehicleSearchTerm),S("ngModelOptions",Ei(16,Lc)),m(),R("ngModel",e.recordForm.ambulanceId),m(3),Ee(e.filteredVehicles()),m(3),vt(" \u0639\u0631\u0636 ",e.filteredVehicles().length," \u0645\u0646 ",e.vehiclesList.length," \u0645\u0631\u0643\u0628\u0629 "),m(4),R("ngModel",e.driverSearchTerm),S("ngModelOptions",Ei(17,Lc)),m(),R("ngModel",e.recordForm.driverInternalId),m(3),Ee(e.filteredDrivers()),m(3),vt(" \u0639\u0631\u0636 ",e.filteredDrivers().length," \u0645\u0646 ",e.driversList.length," \u0633\u0627\u0626\u0642 "),m(4),R("ngModel",e.recordForm.odometerBefore),m(4),R("ngModel",e.recordForm.odometerAfter),m(4),R("ngModel",e.recordForm.fuelAmount),m(4),R("ngModel",e.recordForm.cost),m(4),R("ngModel",e.recordForm.notes)}}function Pk(i,t){if(i&1&&(s(0,"div",38)(1,"p",86),d(2,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A"),l(),s(3,"div",97),x(4,"i",98),s(5,"p",99),d(6),l()()()),i&2){let e=h();m(6),z(e.notes)}}function Dk(i,t){if(i&1){let e=Q();s(0,"div",37)(1,"div",38)(2,"div",85)(3,"div")(4,"p",86),d(5,"\u0627\u0644\u0625\u0633\u0639\u0627\u0641"),l(),s(6,"h5",87),d(7),l()(),s(8,"span",88),x(9,"i",89),d(10," \u0648\u0642\u0648\u062F "),l()()(),s(11,"div",48)(12,"p",86),d(13,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E"),l(),s(14,"p",87),d(15),l()(),s(16,"div",48)(17,"p",86),d(18,"\u0631\u0642\u0645 \u0627\u0644\u0625\u0633\u0639\u0627\u0641"),l(),s(19,"p",87),d(20),l()(),s(21,"div",48)(22,"p",86),d(23,"\u0627\u0633\u0645 \u0627\u0644\u0633\u0627\u0626\u0642"),l(),s(24,"p",87),d(25),l()(),s(26,"div",38)(27,"p",86),d(28,"\u0639\u062F\u0627\u062F \u0627\u0644\u0645\u0633\u0627\u0641\u0627\u062A"),l(),s(29,"p",87),d(30),l()(),s(31,"div",48)(32,"p",86),d(33,"\u0643\u0645\u064A\u0629 \u0627\u0644\u0648\u0642\u0648\u062F"),l(),s(34,"p",87),d(35),l()(),s(36,"div",48)(37,"p",86),d(38,"\u0627\u0644\u062A\u0643\u0644\u0641\u0629"),l(),s(39,"p",90),d(40),l()(),H(41,Pk,7,1,"div",38),l(),s(42,"div",91)(43,"button",92),T("click",function(){let r=b(e),a=h(2);return C(a.deleteRecord(r.id))}),x(44,"i",93),d(45," \u062D\u0630\u0641 "),l(),s(46,"div",94)(47,"button",60),T("click",function(){b(e);let r=h(2);return C(r.closeViewRecordModal())}),d(48,"\u0625\u063A\u0644\u0627\u0642"),l(),s(49,"button",95),T("click",function(){b(e);let r=h(2);return C(r.openEditRecordModal())}),x(50,"i",96),d(51," \u062A\u0639\u062F\u064A\u0644 "),l()()()}if(i&2){let e=t,n=h(2);m(7),z(e.ambulanceName),m(8),z(n.formatDate(e.date)),m(5),z(e.ambulanceNumber),m(5),z(e.driverName),m(5),vt(" \u0642\u0628\u0644: ",e.odometerBefore.toLocaleString()," \u0645\u064A\u0644 / \u0628\u0639\u062F: ",e.odometerAfter.toLocaleString()," \u0645\u064A\u0644 "),m(5),q("",e.fuelAmount.toFixed(1)," \u0644\u062A\u0631"),m(5),q("\u20AA",e.cost.toFixed(2),""),m(),le(e.notes?41:-1)}}function Ik(i,t){if(i&1){let e=Q();x(0,"div",27),s(1,"div",28)(2,"div",29)(3,"div",30)(4,"div",81)(5,"h5",63),d(6,"\u062A\u0641\u0627\u0635\u064A\u0644 \u0633\u062C\u0644 \u0627\u0644\u0648\u0642\u0648\u062F"),l(),s(7,"button",82),T("click",function(){b(e);let r=h();return C(r.closeViewRecordModal())}),x(8,"i",83),l()(),s(9,"div",84),H(10,Dk,52,9),l()()()()}if(i&2){let e,n=h();m(10),le((e=n.selectedRecord())?10:-1,e)}}function Ok(i,t){if(i&1&&(s(0,"option",11),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function Lk(i,t){if(i&1&&(s(0,"option",11),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function Rk(i,t){if(i&1&&(s(0,"option",11),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function Nk(i,t){if(i&1&&(s(0,"option",11),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function Vk(i,t){if(i&1&&(s(0,"option",11),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function Bk(i,t){if(i&1&&(s(0,"option",11),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function Uk(i,t){if(i&1&&(s(0,"option",11),d(1),l()),i&2){let e=t.$implicit;S("value",e.id),m(),vt("",e.vehicleName," (",e.vehicleId,")")}}function Wk(i,t){if(i&1&&(s(0,"div",38)(1,"div",114),x(2,"i",98),s(3,"p",115),d(4),l()()()),i&2){let e=h().$implicit;m(4),z(e.notes)}}function jk(i,t){if(i&1){let e=Q();s(0,"div",21)(1,"div",100),T("click",function(){let r=b(e).$implicit,a=h();return C(a.viewRecordDetails(r))}),s(2,"div",101)(3,"div",102)(4,"div",103)(5,"h5",104)(6,"span",105),T("click",function(r){let a=b(e).$implicit;return h().navigateToFleet(a.ambulanceId),C(r.stopPropagation())}),d(7),l(),s(8,"i",106),T("click",function(r){let a=b(e).$implicit,u=h();return C(u.filterByVehicle(a.ambulanceId,r))}),l()(),s(9,"p",107),d(10),l()(),s(11,"span",88),x(12,"i",89),d(13),l()()(),s(14,"div",108)(15,"div",5)(16,"div",48)(17,"p",86),d(18,"\u0631\u0642\u0645 \u0627\u0644\u0625\u0633\u0639\u0627\u0641"),l(),s(19,"p",109),d(20),l()(),s(21,"div",48)(22,"p",86),d(23,"\u0627\u0633\u0645 \u0627\u0644\u0633\u0627\u0626\u0642"),l(),s(24,"p",109)(25,"span",110),T("click",function(r){let a=b(e).$implicit,u=h();return C(u.filterByDriver(a.driverName,r))}),d(26),l(),s(27,"i",111),T("click",function(r){let a=b(e).$implicit,u=h();return C(u.filterByDriver(a.driverName,r))}),l()()(),s(28,"div",48)(29,"p",86),d(30,"\u0627\u0644\u062A\u0643\u0644\u0641\u0629"),l(),s(31,"p",112),d(32),l()(),s(33,"div",38)(34,"p",86),d(35,"\u0639\u062F\u0627\u062F \u0627\u0644\u0645\u0633\u0627\u0641\u0627\u062A"),l(),s(36,"p",109),x(37,"i",113),d(38),l()(),H(39,Wk,5,1,"div",38),l()()()()}if(i&2){let e=t.$implicit,n=h();m(7),z(e.ambulanceName),m(3),z(n.formatDate(e.date)),m(3),q(" ",e.fuelAmount.toFixed(1)," \u0644\u062A\u0631 "),m(7),q(" ",e.ambulanceNumber," "),m(6),z(e.driverName),m(6),q(" \u20AA ",e.cost.toFixed(2)," "),m(6),vt(" \u0642\u0628\u0644: ",e.odometerBefore.toLocaleString()," \u0645\u064A\u0644 / \u0628\u0639\u062F: ",e.odometerAfter.toLocaleString()," \u0645\u064A\u0644 "),m(),le(e.notes?39:-1)}}function Hk(i,t){i&1&&(s(0,"div",22),x(1,"i",116),s(2,"h5",117),d(3,"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0633\u062C\u0644\u0627\u062A"),l(),s(4,"p"),d(5,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0633\u062C\u0644\u0627\u062A \u062A\u0637\u0627\u0628\u0642 \u0645\u0639\u0627\u064A\u064A\u0631 \u0627\u0644\u0628\u062D\u062B \u0627\u0644\u0645\u062D\u062F\u062F\u0629."),l()())}function zk(i,t){if(i&1){let e=Q();s(0,"div",23)(1,"app-pagination",118),T("pageChange",function(r){b(e);let a=h();return C(a.onPageChange(r))})("itemsPerPageChange",function(r){b(e);let a=h();return C(a.onItemsPerPageChange(r))}),l()()}if(i&2){let e=h();m(),S("currentPage",e.currentPage)("totalItems",e.totalRecords)("itemsPerPage",e.itemsPerPage)}}var Rc=class i{constructor(t,e,n,r,a,u,p){this.globalVars=t;this.router=e;this.toastService=n;this.validationService=r;this.fuelService=a;this.vehicleService=u;this.driverService=p;this.globalVars.setGlobalHeader("\u0633\u062C\u0644 \u0627\u0644\u0648\u0642\u0648\u062F"),H0(()=>{this.searchTerm(),this.searchDebounceTimer&&clearTimeout(this.searchDebounceTimer),this.searchDebounceTimer=setTimeout(()=>{this.currentPage=1,this.loadData()},500)})}searchTerm=Z("");startDay=1;startMonth=1;startYear=2020;endDay=new Date().getDate();endMonth=new Date().getMonth()+1;endYear=new Date().getFullYear();selectedVehicle="\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A";dateFilterFrom=Z(null);dateFilterTo=Z(null);vehicleFilter=Z("\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A");isAddRecordModalOpen=Z(!1);isViewRecordModalOpen=Z(!1);isEditRecordModalOpen=Z(!1);selectedRecord=Z(null);recordForm={date:new Date().toISOString().split("T")[0],ambulanceName:"",ambulanceNumber:"",ambulanceId:"",driverId:"",driverName:"",driverInternalId:"",odometerBefore:0,odometerAfter:0,fuelAmount:0,cost:0,notes:""};vehiclesList=[];vehicleSearchTerm=Z("");filteredVehicles=We(()=>{let t=this.vehicleSearchTerm().toLowerCase();return t?this.vehiclesList.filter(e=>e.vehicleName.toLowerCase().includes(t)||e.vehicleId.toLowerCase().includes(t)):this.vehiclesList});driversList=[];driverSearchTerm=Z("");filteredDrivers=We(()=>{let t=this.driverSearchTerm().toLowerCase();return t?this.driversList.filter(e=>e.arabicName?.toLowerCase().includes(t)||e.name?.toLowerCase().includes(t)):this.driversList});currentPage=1;itemsPerPage=10;totalRecords=0;isLoading=Z(!1);searchDebounceTimer=null;ngOnInit(){this.loadVehicles(),this.loadDrivers(),this.loadData()}loadVehicles(){this.vehicleService.getVehicles({limit:1e3}).subscribe({next:t=>{this.vehiclesList=t.data},error:t=>{console.error("Error loading vehicles:",t),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A")}})}loadDrivers(){this.driverService.getDrivers({limit:1e3}).subscribe({next:t=>{this.driversList=t.data},error:t=>{console.error("Error loading drivers:",t),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0633\u0627\u0626\u0642\u064A\u0646")}})}records=Z([]);loadData(){this.isLoading.set(!0);let t={page:this.currentPage,limit:this.itemsPerPage,vehicleInternalId:this.vehicleFilter()!=="\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A"?this.vehicleFilter():void 0},e=this.dateFilterFrom(),n=this.dateFilterTo();e&&n&&(t.startDate=e.toISOString().split("T")[0],t.endDate=n.toISOString().split("T")[0]),this.searchTerm().trim()&&(t.search=this.searchTerm().trim()),this.fuelService.getFuelRecords(t).subscribe({next:r=>{this.records.set(r.data),this.totalRecords=r.total,this.isLoading.set(!1)},error:r=>{console.error("Error loading fuel records:",r),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0633\u062C\u0644\u0627\u062A \u0627\u0644\u0648\u0642\u0648\u062F"),this.isLoading.set(!1)}})}getPaginatedFuelRecords(){return this.records()}onPageChange(t){this.currentPage=t,this.loadData()}onItemsPerPageChange(t){this.itemsPerPage=t,this.currentPage=1,this.loadData()}applyFilters(){let t=new Date(this.startYear,this.startMonth-1,this.startDay),e=new Date(this.endYear,this.endMonth-1,this.endDay);this.dateFilterFrom.set(t),this.dateFilterTo.set(e),this.vehicleFilter.set(this.selectedVehicle),this.currentPage=1,this.loadData()}clearFilters(){this.startDay=1,this.startMonth=1,this.startYear=new Date().getFullYear(),this.endDay=31,this.endMonth=12,this.endYear=new Date().getFullYear(),this.selectedVehicle="\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A",this.searchTerm.set(""),this.dateFilterFrom.set(null),this.dateFilterTo.set(null),this.vehicleFilter.set("\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A"),this.currentPage=1,this.loadData()}formatDate(t){if(!t)return"---";let e;if(typeof t=="string")e=new Date(t);else if(t instanceof Date)e=new Date(t.getTime());else return"\u062A\u0627\u0631\u064A\u062E \u063A\u064A\u0631 \u0635\u0627\u0644\u062D";return isNaN(e.getTime())?"\u062A\u0627\u0631\u064A\u062E \u063A\u064A\u0631 \u0635\u0627\u0644\u062D":(e.setDate(e.getDate()+1),e.toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"}))}openAddRecordModal(){this.recordForm={date:new Date().toISOString().split("T")[0],ambulanceName:"",ambulanceNumber:"",ambulanceId:"",driverId:"",driverName:"",driverInternalId:"",odometerBefore:0,odometerAfter:0,fuelAmount:0,cost:0,notes:""},this.isAddRecordModalOpen.set(!0)}addRecord(){let t=new Date(this.recordForm.date+"T00:00:00"),e={ambulanceId:this.recordForm.ambulanceName,liters:this.recordForm.fuelAmount,cost:this.recordForm.cost,date:t,mileage:this.recordForm.odometerAfter},n=this.validationService.validateFuelRecord(e);if(!n.valid){n.errors.forEach(r=>{this.toastService.error(r,3e3)});return}if(this.recordForm.odometerAfter<=this.recordForm.odometerBefore){this.toastService.error("\u0639\u062F\u0627\u062F \u0627\u0644\u0645\u0633\u0627\u0641\u0627\u062A (\u0628\u0639\u062F) \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0623\u0643\u0628\u0631 \u0645\u0646 \u0639\u062F\u0627\u062F \u0627\u0644\u0645\u0633\u0627\u0641\u0627\u062A (\u0642\u0628\u0644)",3e3);return}this.fuelService.createFuelRecord({ambulanceName:this.recordForm.ambulanceName,ambulanceNumber:this.recordForm.ambulanceNumber,ambulanceId:this.recordForm.ambulanceId,driverId:this.recordForm.driverId,driverName:this.recordForm.driverName,driverInternalId:this.recordForm.driverInternalId,date:t,odometerBefore:this.recordForm.odometerBefore,odometerAfter:this.recordForm.odometerAfter,fuelAmount:this.recordForm.fuelAmount,cost:this.recordForm.cost,notes:this.recordForm.notes}).subscribe({next:r=>{this.isAddRecordModalOpen.set(!1),this.toastService.success(`\u0633\u062C\u0644 \u0648\u0642\u0648\u062F \u062C\u062F\u064A\u062F (${r.ambulanceNumber}) \u062A\u0645\u062A \u0625\u0636\u0627\u0641\u062A\u0647 \u0628\u0646\u062C\u0627\u062D`,3e3),this.loadData()},error:r=>{console.error("Error creating fuel record:",r),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u0625\u0636\u0627\u0641\u0629 \u0633\u062C\u0644 \u0627\u0644\u0648\u0642\u0648\u062F")}})}openEditRecordModal(){let t=this.selectedRecord();if(t){let e=t.date.toISOString().split("T")[0];this.recordForm={date:e,ambulanceName:t.ambulanceName,ambulanceNumber:t.ambulanceNumber,ambulanceId:t.ambulanceId||"",driverId:t.driverId,driverName:t.driverName,driverInternalId:t.driverInternalId||"",odometerBefore:t.odometerBefore,odometerAfter:t.odometerAfter,fuelAmount:t.fuelAmount,cost:t.cost,notes:t.notes||""},this.isViewRecordModalOpen.set(!1),this.isEditRecordModalOpen.set(!0)}}saveEditRecord(){let t=new Date(this.recordForm.date+"T00:00:00"),e=this.selectedRecord();if(e){let n={ambulanceId:this.recordForm.ambulanceName,liters:this.recordForm.fuelAmount,cost:this.recordForm.cost,date:t,mileage:this.recordForm.odometerAfter},r=this.validationService.validateFuelRecord(n);if(!r.valid){r.errors.forEach(u=>{this.toastService.error(u,3e3)});return}if(this.recordForm.odometerAfter<=this.recordForm.odometerBefore){this.toastService.error("\u0639\u062F\u0627\u062F \u0627\u0644\u0645\u0633\u0627\u0641\u0627\u062A (\u0628\u0639\u062F) \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0623\u0643\u0628\u0631 \u0645\u0646 \u0639\u062F\u0627\u062F \u0627\u0644\u0645\u0633\u0627\u0641\u0627\u062A (\u0642\u0628\u0644)",3e3);return}let a={ambulanceName:this.recordForm.ambulanceName,ambulanceNumber:this.recordForm.ambulanceNumber,ambulanceId:this.recordForm.ambulanceId,driverId:this.recordForm.driverId,driverName:this.recordForm.driverName,driverInternalId:this.recordForm.driverInternalId,date:t,odometerBefore:this.recordForm.odometerBefore,odometerAfter:this.recordForm.odometerAfter,fuelAmount:this.recordForm.fuelAmount,cost:this.recordForm.cost,notes:this.recordForm.notes};this.fuelService.updateFuelRecord(e.id,a).subscribe({next:u=>{let p=Qe(ve(ve(ve({},e),a),u&&Object.keys(u).length>0?u:{}),{id:e.id});this.selectedRecord.set(p),this.isEditRecordModalOpen.set(!1),this.isViewRecordModalOpen.set(!0),this.toastService.info(`\u062A\u0645 \u062A\u0639\u062F\u064A\u0644 \u0633\u062C\u0644 \u0627\u0644\u0648\u0642\u0648\u062F (${this.recordForm.ambulanceNumber}) \u0644\u0644\u0633\u0627\u0626\u0642 ${this.recordForm.driverName}`,3e3),this.loadData()},error:u=>{console.error("Error updating fuel record:",u),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u062A\u062D\u062F\u064A\u062B \u0633\u062C\u0644 \u0627\u0644\u0648\u0642\u0648\u062F")}})}}viewRecordDetails(t){this.selectedRecord.set(t),this.isViewRecordModalOpen.set(!0)}closeViewRecordModal(){this.isViewRecordModalOpen.set(!1),this.selectedRecord.set(null)}closeEditRecordModal(){this.isEditRecordModalOpen.set(!1)}isDeleteFuelRecordModalOpen=Z(!1);recordIdToDelete=Z(null);deletedRecordDetails=Z(null);deleteFuelRecordModalConfig=Z({type:"delete",title:"\u062A\u0623\u0643\u064A\u062F \u062D\u0630\u0641 \u0633\u062C\u0644 \u062A\u0639\u0628\u0626\u0629 \u0627\u0644\u0648\u0642\u0648\u062F",message:"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0633\u062C\u0644 \u0628\u0634\u0643\u0644 \u0646\u0647\u0627\u0626\u064A\u061F \u0644\u0627 \u064A\u0645\u0643\u0646 \u0627\u0644\u062A\u0631\u0627\u062C\u0639 \u0639\u0646 \u0647\u0630\u0627 \u0627\u0644\u0625\u062C\u0631\u0627\u0621.",confirmButtonText:"\u0646\u0639\u0645\u060C \u0627\u062D\u0630\u0641 \u0627\u0644\u0633\u062C\u0644",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621"});deleteRecord(t){let e=this.records().find(r=>r.id===t);if(!e){this.toastService.error("\u0641\u0634\u0644 \u0641\u064A \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0627\u0644\u0633\u062C\u0644 \u0644\u0644\u062D\u0630\u0641.");return}this.recordIdToDelete.set(t),this.deletedRecordDetails.set({ambulanceNumber:e.ambulanceNumber,driverName:e.driverName});let n={type:"delete",title:"\u062A\u0623\u0643\u064A\u062F \u062D\u0630\u0641 \u0633\u062C\u0644 \u062A\u0639\u0628\u0626\u0629 \u0627\u0644\u0648\u0642\u0648\u062F",message:`\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0633\u062C\u0644 \u0627\u0644\u0648\u0642\u0648\u062F \u0644\u0644\u0645\u0631\u0643\u0628\u0629 \u0631\u0642\u0645: ${e.ambulanceNumber} \u0648\u0627\u0644\u0633\u0627\u0626\u0642: ${e.driverName}\u061F \u0644\u0627 \u064A\u0645\u0643\u0646 \u0627\u0644\u062A\u0631\u0627\u062C\u0639 \u0639\u0646 \u0647\u0630\u0627 \u0627\u0644\u0625\u062C\u0631\u0627\u0621.`,highlightedText:`${e.ambulanceNumber}`,confirmButtonText:"\u0646\u0639\u0645\u060C \u0627\u062D\u0630\u0641 \u0627\u0644\u0633\u062C\u0644",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621"};this.deleteFuelRecordModalConfig.set(n),this.isDeleteFuelRecordModalOpen.set(!0)}handleDeleteFuelRecordConfirmation(t){let e=this.recordIdToDelete(),n=this.deletedRecordDetails();this.isDeleteFuelRecordModalOpen.set(!1),this.recordIdToDelete.set(null),this.deletedRecordDetails.set(null),t&&e&&this.fuelService.deleteFuelRecord(e).subscribe({next:()=>{this.closeViewRecordModal(),n?this.toastService.success(`\u062A\u0645 \u062D\u0630\u0641 \u0633\u062C\u0644 \u0627\u0644\u0648\u0642\u0648\u062F (${n.ambulanceNumber}) \u0644\u0644\u0633\u0627\u0626\u0642 ${n.driverName}`,3e3):this.toastService.success("\u062A\u0645 \u062D\u0630\u0641 \u0633\u062C\u0644 \u0648\u0642\u0648\u062F \u0628\u0646\u062C\u0627\u062D",3e3),this.loadData()},error:r=>{console.error("Error deleting fuel record:",r),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u062D\u0630\u0641 \u0633\u062C\u0644 \u0627\u0644\u0648\u0642\u0648\u062F")}})}navigateToFleet(t){t&&this.router.navigate(["admin/vehicles"],{queryParams:{filterType:"id",filterValue:t}})}navigateToDriver(t){this.router.navigate(["admin/drivers-list"],{queryParams:{filterValue:t}})}filterByVehicle(t,e){e&&e.stopPropagation(),this.selectedVehicle=t,this.vehicleFilter.set(t),this.currentPage=1,this.loadData()}filterByDriver(t,e){e&&e.stopPropagation(),this.searchTerm.set(t)}onVehicleSelect(t){let n=t.target.value;if(!n){this.recordForm.ambulanceId="",this.recordForm.ambulanceName="",this.recordForm.ambulanceNumber="";return}let r=this.vehiclesList.find(a=>a.id===n);r&&(this.recordForm.ambulanceId=r.id,this.recordForm.ambulanceName=r.vehicleName,this.recordForm.ambulanceNumber=r.vehicleId)}onDriverSelect(t){let n=t.target.value;if(!n){this.recordForm.driverInternalId="",this.recordForm.driverId="",this.recordForm.driverName="";return}let r=this.driversList.find(a=>a.id===n);r&&(this.recordForm.driverInternalId=r.id,this.recordForm.driverId=r.driver_code,this.recordForm.driverName=r.arabicName)}getDaysInMonth(t,e){let n=new Date(e,t,0).getDate();return Array.from({length:n},(r,a)=>a+1)}getMonths(){return Array.from({length:12},(t,e)=>e+1)}getYears(){let t=new Date().getFullYear();return Array.from({length:20},(e,n)=>t-10+n)}static \u0275fac=function(e){return new(e||i)(G(ft),G(Xe),G(Ye),G(cr),G(Is),G(oi),G(Ci))};static \u0275cmp=Oe({type:i,selectors:[["app-fuel-history"]],decls:65,vars:14,consts:[[1,"d-flex","flex-column","min-vh-100","bg-light"],["dir","rtl",1,"flex-grow-1","p-3","p-lg-4"],[1,"container-fluid",2,"max-width","1200px"],[1,"card","shadow-sm","rounded-xl","p-4","mb-4"],[1,"fw-bold","mb-3","text-end"],[1,"row","g-3","text-end"],[1,"col-md-6"],[1,"form-label","small","fw-medium"],[1,"row","g-2"],[1,"col-4"],[1,"form-select",3,"ngModelChange","ngModel"],[3,"value"],["for","vehicleFilter",1,"form-label","small","fw-medium"],["id","vehicleFilter",1,"form-select",3,"ngModelChange","ngModel"],["value","\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A"],[1,"d-flex","gap-2","mt-4"],[1,"btn","btn-primary-custom","fw-bold","px-4",3,"click"],[1,"fa-solid","fa-filter","me-2"],[1,"btn","btn-outline-secondary","px-4",3,"click"],[1,"fa-solid","fa-times","me-2"],[1,"row","row-cols-1","g-4"],[1,"col"],[1,"col-12","text-center","text-muted","p-5"],[1,"mt-4"],[1,"fab","shadow-lg",3,"click"],[1,"fa-solid","fa-plus","fa-lg"],[3,"confirmed","cancelled","isOpen","config"],[1,"modal-backdrop","fade","show"],["tabindex","-1","role","dialog",1,"modal","fade","show","d-block"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content","rounded-xl","shadow-lg","border-0"],[1,"modal-header","bg-primary-custom","rounded-top-xl","border-0","justify-content-between","text-white"],[1,"modal-title","fw-bold","text-dark"],["type","button","data-bs-dismiss","modal","aria-label","Close",2,"background-color","transparent","border","none",3,"click"],[1,"fa","fa-times"],[1,"modal-body","p-4","text-end",2,"max-height","70vh","overflow-y","auto"],[3,"ngSubmit"],[1,"row","g-3"],[1,"col-12"],["type","date","name","fuelDate","required","","max","9999-12-31",1,"form-control",3,"ngModelChange","ngModel"],["for","vehicleSearch",1,"form-label","small","fw-medium"],["type","text","id","vehicleSearch","placeholder","\u0628\u062D\u062B \u0639\u0646 \u0645\u0631\u0643\u0628\u0629...",1,"form-control","mb-2",3,"ngModelChange","ngModel","ngModelOptions"],["id","ambulanceName","name","ambulanceName","required","",1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[1,"text-muted","d-block","mt-1"],["for","driverSearch",1,"form-label","small","fw-medium"],["type","text","id","driverSearch","placeholder","\u0628\u062D\u062B \u0639\u0646 \u0633\u0627\u0626\u0642...",1,"form-control","mb-2",3,"ngModelChange","ngModel","ngModelOptions"],["id","driverId","name","driverId","required","",1,"form-select",3,"ngModelChange","change","ngModel"],[1,"col-6"],["for","odometerBefore",1,"form-label","small","fw-medium"],["id","odometerBefore","type","number","placeholder","0","name","odometerBefore","min","0","required","",1,"form-control","text-end",2,"direction","ltr",3,"ngModelChange","ngModel"],["for","odometerAfter",1,"form-label","small","fw-medium"],["id","odometerAfter","type","number","placeholder","0","name","odometerAfter","min","0","required","",1,"form-control","text-end",2,"direction","ltr",3,"ngModelChange","ngModel"],["for","fuelAmount",1,"form-label","small","fw-medium"],["id","fuelAmount","type","number","placeholder","0.0","name","fuelAmount","min","0","step","0.1","required","",1,"form-control","text-end",2,"direction","ltr",3,"ngModelChange","ngModel"],["for","cost",1,"form-label","small","fw-medium"],["id","cost","type","number","placeholder","0.00","name","cost","min","0","step","0.01","required","",1,"form-control","text-end",2,"direction","ltr",3,"ngModelChange","ngModel"],["for","notes",1,"form-label","small","fw-medium"],["id","notes","rows","3","placeholder","\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629...","name","notes",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-end","gap-2","mt-4"],["type","button",1,"btn","btn-outline-secondary","rounded-pill","px-4","fw-bold",3,"click"],["type","submit",1,"btn","btn-success","rounded-pill","px-4","fw-bold"],[1,"modal-header","bg-warning","rounded-top-xl","border-0","justify-content-between","text-dark"],[1,"modal-title","fw-bold"],["for","editVehicleSearch",1,"form-label","small","fw-medium"],["type","text","id","editVehicleSearch","placeholder","\u0628\u062D\u062B \u0639\u0646 \u0645\u0631\u0643\u0628\u0629...",1,"form-control","mb-2",3,"ngModelChange","ngModel","ngModelOptions"],["id","editAmbulanceName","name","ambulanceName","required","",1,"form-select",3,"ngModelChange","change","ngModel"],["for","editDriverSearch",1,"form-label","small","fw-medium"],["type","text","id","editDriverSearch","placeholder","\u0628\u062D\u062B \u0639\u0646 \u0633\u0627\u0626\u0642...",1,"form-control","mb-2",3,"ngModelChange","ngModel","ngModelOptions"],["id","editDriverId","name","driverId","required","",1,"form-select",3,"ngModelChange","change","ngModel"],["for","editOdometerBefore",1,"form-label","small","fw-medium"],["id","editOdometerBefore","type","number","placeholder","0","name","odometerBefore","min","0","required","",1,"form-control","text-end",2,"direction","ltr",3,"ngModelChange","ngModel"],["for","editOdometerAfter",1,"form-label","small","fw-medium"],["id","editOdometerAfter","type","number","placeholder","0","name","odometerAfter","min","0","required","",1,"form-control","text-end",2,"direction","ltr",3,"ngModelChange","ngModel"],["for","editFuelAmount",1,"form-label","small","fw-medium"],["id","editFuelAmount","type","number","placeholder","0.0","name","fuelAmount","min","0","step","0.1","required","",1,"form-control","text-end",2,"direction","ltr",3,"ngModelChange","ngModel"],["for","editCost",1,"form-label","small","fw-medium"],["id","editCost","type","number","placeholder","0.00","name","cost","min","0","step","0.01","required","",1,"form-control","text-end",2,"direction","ltr",3,"ngModelChange","ngModel"],["for","editNotes",1,"form-label","small","fw-medium"],["id","editNotes","rows","3","placeholder","\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629...","name","notes",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-warning","rounded-pill","px-4","fw-bold"],[1,"modal-header","bg-primary-custom","rounded-top-xl","border-0","justify-content-between"],["type","button","data-bs-dismiss","modal","aria-label","Close",2,"border","none","background","none",3,"click"],[1,"fas","fa-times"],[1,"modal-body","p-4","text-end"],[1,"d-flex","justify-content-between","align-items-start","mb-3"],[1,"text-muted","small","mb-1"],[1,"fw-bold"],[1,"badge","bg-success","rounded-pill","fw-bold"],[1,"fa-solid","fa-gas-pump","me-1"],["dir","ltr",1,"h4","fw-bold","text-success"],[1,"d-flex","justify-content-between","gap-2","mt-4"],["type","button",1,"btn","btn-danger","rounded-pill","px-4","fw-bold",3,"click"],[1,"fa-solid","fa-trash","me-1"],[1,"d-flex","gap-2"],["type","button",1,"btn","btn-warning","rounded-pill","px-4","fw-bold",3,"click"],[1,"fa-solid","fa-edit","me-1"],["role","alert",1,"alert","alert-info","d-flex","align-items-start"],[1,"fa-solid","fa-sticky-note","me-2","mt-1"],[1,"mb-0"],[1,"card","shadow-sm","rounded-xl","overflow-hidden","cursor-pointer-cu","hover-lift",3,"click"],[1,"card-header","bg-white","border-bottom","p-3"],[1,"d-flex","justify-content-between","align-items-start"],[1,"text-end"],[1,"fw-bold","mb-1"],["title","\u0639\u0631\u0636 \u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0645\u0631\u0643\u0628\u0629",1,"cursor-pointer","text-primary-hover",3,"click"],["title","\u0641\u0644\u062A\u0631\u0629 \u062D\u0633\u0628 \u0647\u0630\u0647 \u0627\u0644\u0645\u0631\u0643\u0628\u0629",1,"fa-solid","fa-filter","ms-2","text-muted","cursor-pointer",2,"font-size","0.8rem",3,"click"],[1,"text-muted","small","mb-0"],[1,"card-body","p-4"],[1,"fw-semibold","mb-0"],["title","\u0627\u0644\u0628\u062D\u062B \u0639\u0646 \u0647\u0630\u0627 \u0627\u0644\u0633\u0627\u0626\u0642",1,"cursor-pointer","text-primary-hover",3,"click"],["title","\u0627\u0644\u0628\u062D\u062B \u0639\u0646 \u0647\u0630\u0627 \u0627\u0644\u0633\u0627\u0626\u0642",1,"fa-solid","fa-filter","ms-1","text-muted","cursor-pointer",2,"font-size","0.7rem",3,"click"],["dir","ltr",1,"fw-semibold","fs-5","mb-0","text-success"],[1,"fa-solid","fa-gauge-high","text-danger","me-1"],["role","alert",1,"alert","alert-info","d-flex","align-items-start","mb-0"],[1,"mb-0","small"],[1,"fa-solid","fa-search","fs-1","mb-3","opacity-50"],[1,"fw-bold","mb-2"],[3,"pageChange","itemsPerPageChange","currentPage","totalItems","itemsPerPage"]],template:function(e,n){e&1&&(s(0,"div",0),H(1,Ak,63,18)(2,kk,63,18)(3,Ik,11,1),s(4,"main",1)(5,"div",2)(6,"div",3)(7,"h5",4),d(8,"\u062A\u0635\u0641\u064A\u0629 \u0627\u0644\u0633\u062C\u0644\u0627\u062A"),l(),s(9,"div",5)(10,"div",6)(11,"label",7),d(12,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0628\u062F\u0627\u064A\u0629"),l(),s(13,"div",8)(14,"div",9)(15,"select",10),V("ngModelChange",function(a){return N(n.startDay,a)||(n.startDay=a),a}),Te(16,Ok,2,2,"option",11,pt),l()(),s(18,"div",9)(19,"select",10),V("ngModelChange",function(a){return N(n.startMonth,a)||(n.startMonth=a),a}),Te(20,Lk,2,2,"option",11,pt),l()(),s(22,"div",9)(23,"select",10),V("ngModelChange",function(a){return N(n.startYear,a)||(n.startYear=a),a}),Te(24,Rk,2,2,"option",11,pt),l()()()(),s(26,"div",6)(27,"label",7),d(28,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0646\u0647\u0627\u064A\u0629"),l(),s(29,"div",8)(30,"div",9)(31,"select",10),V("ngModelChange",function(a){return N(n.endDay,a)||(n.endDay=a),a}),Te(32,Nk,2,2,"option",11,pt),l()(),s(34,"div",9)(35,"select",10),V("ngModelChange",function(a){return N(n.endMonth,a)||(n.endMonth=a),a}),Te(36,Vk,2,2,"option",11,pt),l()(),s(38,"div",9)(39,"select",10),V("ngModelChange",function(a){return N(n.endYear,a)||(n.endYear=a),a}),Te(40,Bk,2,2,"option",11,pt),l()()()(),s(42,"div",6)(43,"label",12),d(44,"\u0627\u0644\u0645\u0631\u0643\u0628\u0629"),l(),s(45,"select",13),V("ngModelChange",function(a){return N(n.selectedVehicle,a)||(n.selectedVehicle=a),a}),s(46,"option",14),d(47,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A"),l(),Te(48,Uk,2,3,"option",11,Os),l()()(),s(50,"div",15)(51,"button",16),T("click",function(){return n.applyFilters()}),x(52,"i",17),d(53," \u062A\u0637\u0628\u064A\u0642 \u0627\u0644\u0641\u0644\u0627\u062A\u0631 "),l(),s(54,"button",18),T("click",function(){return n.clearFilters()}),x(55,"i",19),d(56," \u0645\u0633\u062D "),l()()(),s(57,"div",20),Te(58,jk,40,9,"div",21,Os,!1,Hk,6,0,"div",22),l(),H(61,zk,2,3,"div",23),l()(),s(62,"button",24),T("click",function(){return n.openAddRecordModal()}),x(63,"i",25),l()(),s(64,"app-confirmation-modal",26),T("confirmed",function(){return n.handleDeleteFuelRecordConfirmation(!0)})("cancelled",function(){return n.handleDeleteFuelRecordConfirmation(!1)}),l()),e&2&&(m(),le(n.isAddRecordModalOpen()?1:-1),m(),le(n.isEditRecordModalOpen()&&n.selectedRecord()?2:-1),m(),le(n.isViewRecordModalOpen()&&n.selectedRecord()?3:-1),m(12),R("ngModel",n.startDay),m(),Ee(n.getDaysInMonth(n.startMonth,n.startYear)),m(3),R("ngModel",n.startMonth),m(),Ee(n.getMonths()),m(3),R("ngModel",n.startYear),m(),Ee(n.getYears()),m(7),R("ngModel",n.endDay),m(),Ee(n.getDaysInMonth(n.endMonth,n.endYear)),m(3),R("ngModel",n.endMonth),m(),Ee(n.getMonths()),m(3),R("ngModel",n.endYear),m(),Ee(n.getYears()),m(5),R("ngModel",n.selectedVehicle),m(3),Ee(n.vehiclesList),m(10),Ee(n.getPaginatedFuelRecords()),m(3),le(n.totalRecords>0?61:-1),m(3),S("isOpen",n.isDeleteFuelRecordModalOpen())("config",n.deleteFuelRecordModalConfig()))},dependencies:[Le,tt,Kt,Ot,Lt,et,vi,At,ot,Xt,Zt,xi,rt,$t,Mi,Wi],styles:['.hover-lift[_ngcontent-%COMP%]{transition:all .3s ease}.hover-lift[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 16px #0000001a!important}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer;transition:all .2s ease}.cursor-pointer[_ngcontent-%COMP%]:hover{text-decoration:underline;opacity:.8}.badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.4rem .75rem}.fa-search[_ngcontent-%COMP%], .fa-inbox[_ngcontent-%COMP%]{color:#6c757d;opacity:.5}.card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgba(0,0,0,.05)}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #1193d440;border-color:#1193d4}.btn-primary-custom[_ngcontent-%COMP%]{background-color:#1193d4;border-color:#1193d4;color:#fff}.btn-primary-custom[_ngcontent-%COMP%]:hover{background-color:#0d7ab8;border-color:#0d7ab8}.fab[_ngcontent-%COMP%]{position:fixed;bottom:2rem;left:2rem;width:56px;height:56px;border-radius:50%;background-color:#1193d4;color:#fff;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;z-index:1000}.fab[_ngcontent-%COMP%]:hover{background-color:#0d7ab8;transform:scale(1.1);box-shadow:0 12px 24px #0003!important}.fab[_ngcontent-%COMP%]:active{transform:scale(.95)}.modal-backdrop[_ngcontent-%COMP%]{background-color:#00000080}.modal-content[_ngcontent-%COMP%]{border:none}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa}.text-success[_ngcontent-%COMP%]{color:#28a745!important}.text-primary[_ngcontent-%COMP%]{color:#1193d4!important}.alert-info[_ngcontent-%COMP%]{background-color:#d1ecf1;border-color:#bee5eb;color:#0c5460}[dir=rtl][_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{text-align:right}.input-group-text[_ngcontent-%COMP%]{background-color:#fff}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-right:1px solid #ced4da}@media (max-width: 768px){.card-body[_ngcontent-%COMP%]{padding:1rem!important}.fab[_ngcontent-%COMP%]{bottom:1rem;left:1rem;width:48px;height:48px}.modal-dialog[_ngcontent-%COMP%]{margin:.5rem}}.row.g-2[_ngcontent-%COMP%]{--bs-gutter-x: .5rem;--bs-gutter-y: .5rem}.fa-truck-medical[_ngcontent-%COMP%]{color:#dc3545}.fa-gas-pump[_ngcontent-%COMP%]{color:#28a745}.fa-gauge-high[_ngcontent-%COMP%]{color:#dc3545}.fa-dollar-sign[_ngcontent-%COMP%]{color:#28a745}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.badge.bg-success[_ngcontent-%COMP%]{background-color:#28a745!important}.modal-header.bg-primary-custom[_ngcontent-%COMP%]{background-color:#1193d4!important}.modal-header.bg-warning[_ngcontent-%COMP%]{background-color:#ffc107!important}.hover-lift[_ngcontent-%COMP%]:hover   .card-header[_ngcontent-%COMP%]{border-bottom-color:#1193d4}.rounded-xl[_ngcontent-%COMP%]{border-radius:1rem!important}.rounded-top-xl[_ngcontent-%COMP%]{border-top-left-radius:1rem!important;border-top-right-radius:1rem!important}.rounded-pill[_ngcontent-%COMP%]{border-radius:50rem!important}.small[_ngcontent-%COMP%]{font-size:.875rem}.fw-medium[_ngcontent-%COMP%]{font-weight:500}.fw-semibold[_ngcontent-%COMP%]{font-weight:600}.opacity-50[_ngcontent-%COMP%]{opacity:.5}.gap-2[_ngcontent-%COMP%]{gap:.5rem}.gap-3[_ngcontent-%COMP%]{gap:1rem}.cursor-pointer-cu[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{cursor:pointer}[style*="direction: ltr"][_ngcontent-%COMP%]{direction:ltr;text-align:left}'],changeDetection:0})};var Ls=class i{constructor(t){this.http=t}apiUrl=`${xt.apiEndpoint}/transactions`;getUserTransactions(t,e){let n=Nt(e);return this.http.get(`${this.apiUrl}/${t}`,{params:n})}processPayment(t,e,n){return this.http.post(`${this.apiUrl}/${t}/pay`,{amount:e,description:n})}createAdjustment(t,e,n){return this.http.post(`${this.apiUrl}/adjustments`,{originalTransactionId:t,adjustmentAmount:e,adjustmentReason:n})}markAsCollected(t,e,n){return this.http.patch(`${this.apiUrl}/${t}/collect`,{collectionNotes:e,receiptUrl:n})}getAdjustmentHistory(t){return this.http.get(`${this.apiUrl}/${t}/adjustments`)}getCollectionSummary(t){return this.http.get(`${this.apiUrl}/collection-summary/${t}`)}static \u0275fac=function(e){return new(e||i)(Ue(It))};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})};var Gk=(i,t)=>t.id;function $k(i,t){i&1&&(s(0,"div",32)(1,"div",35)(2,"span",36),d(3,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),l()(),s(4,"p",37),d(5,"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062A..."),l()())}function Zk(i,t){i&1&&(s(0,"div",32),x(1,"i",38),s(2,"p",39),d(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u0639\u0627\u0645\u0644\u0627\u062A"),l()())}function qk(i,t){if(i&1&&(s(0,"span"),d(1),l()),i&2){let e=h().$implicit,n=h(2);gn(n.getDirectionBadgeClass(e.transactionDirection)),m(),q(" ",n.getDirectionLabel(e.transactionDirection)," ")}}function Yk(i,t){if(i&1&&(s(0,"div")(1,"strong"),d(2),l(),x(3,"br"),s(4,"small",39),d(5),l()()),i&2){let e=h().$implicit;m(2),z(e.patientName),m(3),vt(" ",e.transferFrom," \u2190 ",e.transferTo," ")}}function Xk(i,t){if(i&1&&(s(0,"span"),d(1),l()),i&2){let e=h().$implicit;m(),z(e.description)}}function Kk(i,t){if(i&1&&(s(0,"tr")(1,"td",42),d(2),l(),s(3,"td")(4,"span"),d(5),l()(),s(6,"td"),H(7,qk,2,3,"span",43),l(),s(8,"td"),H(9,Yk,6,3,"div")(10,Xk,2,1,"span"),l(),s(11,"td")(12,"span"),d(13),l()(),s(14,"td"),d(15),l(),s(16,"td")(17,"span"),d(18),l()()()),i&2){let e=t.$implicit,n=h(2);m(2),z(n.formatDate(e.createdAt)),m(2),_i("badge ",n.getTransactionTypeClass(e.transactionType),""),m(),q(" ",e.transactionType," "),m(2),le(e.transactionDirection?7:-1),m(2),le(e.patientName?9:10),m(3),_i("fw-bold ",n.getAmountClass(e.amount),""),m(),vt(" ",e.amount>=0?"+":"","",e.amount.toFixed(2)," \u20AA "),m(2),q("",e.balanceBefore.toFixed(2)," \u20AA"),m(2),_i("fw-bold ",n.getAmountClass(e.balanceAfter),""),m(),q(" ",e.balanceAfter.toFixed(2)," \u20AA ")}}function Jk(i,t){if(i&1&&(s(0,"div",33)(1,"table",40)(2,"thead",41)(3,"tr")(4,"th"),d(5,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E"),l(),s(6,"th"),d(7,"\u0627\u0644\u0646\u0648\u0639"),l(),s(8,"th"),d(9,"\u0627\u0644\u0627\u062A\u062C\u0627\u0647"),l(),s(10,"th"),d(11,"\u0627\u0644\u0648\u0635\u0641"),l(),s(12,"th"),d(13,"\u0627\u0644\u0645\u0628\u0644\u063A"),l(),s(14,"th"),d(15,"\u0627\u0644\u0631\u0635\u064A\u062F \u0642\u0628\u0644"),l(),s(16,"th"),d(17,"\u0627\u0644\u0631\u0635\u064A\u062F \u0628\u0639\u062F"),l()()(),s(18,"tbody"),Te(19,Kk,19,17,"tr",null,Gk),l()()()),i&2){let e=h();m(19),Ee(e.transactions())}}function Qk(i,t){if(i&1){let e=Q();s(0,"div",34)(1,"app-pagination",44),T("pageChange",function(r){b(e);let a=h();return C(a.onPageChange(r))}),l()()}if(i&2){let e=h();m(),S("currentPage",e.currentPage)("totalItems",e.totalRecords)("itemsPerPage",e.itemsPerPage)}}var Nc=class i{constructor(t,e,n,r){this.route=t;this.router=e;this.transactionService=n;this.globalVarsService=r}userId="";userType="";userName="";transactions=Z([]);isLoading=Z(!1);currentPage=1;itemsPerPage=20;totalRecords=0;filterType="";filterStartDate="";filterEndDate="";ngOnInit(){this.route.params.subscribe(t=>{this.userId=t.id}),this.route.queryParams.subscribe(t=>{this.userType=t.type||"",this.userName=t.name||"",this.globalVarsService.setGlobalHeader(`\u0633\u062C\u0644 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062A - ${this.userName}`),this.loadTransactions()})}loadTransactions(){this.isLoading.set(!0);let t={page:this.currentPage,limit:this.itemsPerPage};this.filterType&&(t.type=this.filterType),this.filterStartDate&&(t.startDate=this.filterStartDate),this.filterEndDate&&(t.endDate=this.filterEndDate),this.transactionService.getUserTransactions(this.userId,t).subscribe({next:e=>{this.transactions.set(e.data),this.totalRecords=e.total,this.isLoading.set(!1)},error:e=>{console.error("Error loading transactions:",e),this.isLoading.set(!1)}})}onPageChange(t){this.currentPage=t,this.loadTransactions()}applyFilters(){this.currentPage=1,this.loadTransactions()}resetFilters(){this.filterType="",this.filterStartDate="",this.filterEndDate="",this.currentPage=1,this.loadTransactions()}goBack(){this.router.navigate([`/admin/${this.userType}s-list`])}formatDate(t){return new Date(t).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}getTransactionTypeClass(t){switch(t){case"\u0631\u062D\u0644\u0629":return"bg-success";case"\u062F\u0641\u0639":return"bg-info";case"\u0633\u062D\u0628":return"bg-warning";default:return"bg-secondary"}}getAmountClass(t){return t>=0?"text-success":"text-danger"}viewTrip(t){this.router.navigate(["/admin/trips",t])}getDirectionLabel(t){switch(t){case"receivable":return"\u0627\u0644\u0634\u0631\u0643\u0629 \u0645\u062F\u064A\u0646\u0629";case"payable":return"\u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u0645\u062F\u064A\u0646";case"neutral":return"\u0645\u062D\u0627\u064A\u062F";default:return""}}getDirectionBadgeClass(t){switch(t){case"receivable":return"badge bg-success";case"payable":return"badge bg-danger";case"neutral":return"badge bg-secondary";default:return""}}static \u0275fac=function(e){return new(e||i)(G(Ai),G(Xe),G(Ls),G(ft))};static \u0275cmp=Oe({type:i,selectors:[["app-transaction-history"]],decls:54,vars:6,consts:[["dir","rtl",1,"container-fluid","py-4"],[1,"row","mb-4"],[1,"col-12"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fw-bold","mb-0"],[1,"fas","fa-file-invoice-dollar","me-2","text-primary"],[1,"text-muted","mb-0"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-arrow-right","me-2"],[1,"card","border-0","shadow-sm","mb-4"],[1,"card-body"],[1,"row","g-3"],[1,"col-12","col-md-4"],["for","filterType",1,"form-label","small","fw-medium"],["id","filterType",1,"form-select",3,"ngModelChange","ngModel"],["value",""],["value","\u0631\u062D\u0644\u0629"],["value","\u062F\u0641\u0639"],["value","\u0633\u062D\u0628"],["for","filterStartDate",1,"form-label","small","fw-medium"],["id","filterStartDate","type","date",1,"form-control",3,"ngModelChange","ngModel"],["for","filterEndDate",1,"form-label","small","fw-medium"],["id","filterEndDate","type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","gap-2","justify-content-end"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-filter","me-2"],[1,"fas","fa-redo","me-2"],[1,"card","border-0","shadow-sm"],[1,"card-header","bg-white","border-bottom"],[1,"mb-0","fw-bold"],[1,"fas","fa-list","me-2","text-primary"],[1,"card-body","p-0"],[1,"text-center","py-5"],[1,"table-responsive"],[1,"mt-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"text-muted","mt-3"],[1,"fas","fa-inbox","fa-3x","text-muted","mb-3"],[1,"text-muted"],[1,"table","table-hover","mb-0"],[1,"table-light"],[1,"small"],[3,"class"],[3,"pageChange","currentPage","totalItems","itemsPerPage"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"h2",4),x(6,"i",5),d(7," \u0633\u062C\u0644 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062A "),l(),s(8,"p",6),d(9),l()(),s(10,"button",7),T("click",function(){return n.goBack()}),x(11,"i",8),d(12," \u0627\u0644\u0639\u0648\u062F\u0629 "),l()()()(),s(13,"div",9)(14,"div",10)(15,"div",11)(16,"div",12)(17,"label",13),d(18,"\u0646\u0648\u0639 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629"),l(),s(19,"select",14),V("ngModelChange",function(a){return N(n.filterType,a)||(n.filterType=a),a}),s(20,"option",15),d(21,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0623\u0646\u0648\u0627\u0639"),l(),s(22,"option",16),d(23,"\u0631\u062D\u0644\u0629"),l(),s(24,"option",17),d(25,"\u062F\u0641\u0639"),l(),s(26,"option",18),d(27,"\u0633\u062D\u0628"),l()()(),s(28,"div",12)(29,"label",19),d(30,"\u0645\u0646 \u062A\u0627\u0631\u064A\u062E"),l(),s(31,"input",20),V("ngModelChange",function(a){return N(n.filterStartDate,a)||(n.filterStartDate=a),a}),l()(),s(32,"div",12)(33,"label",21),d(34,"\u0625\u0644\u0649 \u062A\u0627\u0631\u064A\u062E"),l(),s(35,"input",22),V("ngModelChange",function(a){return N(n.filterEndDate,a)||(n.filterEndDate=a),a}),l()(),s(36,"div",2)(37,"div",23)(38,"button",24),T("click",function(){return n.applyFilters()}),x(39,"i",25),d(40," \u062A\u0637\u0628\u064A\u0642 \u0627\u0644\u0641\u0644\u0627\u062A\u0631 "),l(),s(41,"button",7),T("click",function(){return n.resetFilters()}),x(42,"i",26),d(43," \u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 "),l()()()()()(),s(44,"div",27)(45,"div",28)(46,"h5",29),x(47,"i",30),d(48," \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062A "),l()(),s(49,"div",31),H(50,$k,6,0,"div",32)(51,Zk,4,0,"div",32)(52,Jk,21,0,"div",33),l()(),H(53,Qk,2,3,"div",34),l()),e&2&&(m(9),z(n.userName),m(10),R("ngModel",n.filterType),m(12),R("ngModel",n.filterStartDate),m(4),R("ngModel",n.filterEndDate),m(15),le(n.isLoading()?50:n.transactions().length===0?51:52),m(3),le(n.totalRecords>n.itemsPerPage?53:-1))},dependencies:[Le,tt,Ot,Lt,et,At,ot,rt,Mi],styles:[".bg-gradient-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2)}.bg-gradient-warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f093fb,#f5576c)}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;text-align:right}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;text-align:right}"]})};function eP(i,t){if(i&1&&(s(0,"div",24),x(1,"i",25),d(2),l()),i&2){let e=h();m(2),q(" ",e.errorMessage," ")}}function tP(i,t){i&1&&(s(0,"span"),d(1,"\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644"),l())}function iP(i,t){i&1&&(s(0,"span"),x(1,"i",26),d(2," \u062C\u0627\u0631\u064A \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644... "),l())}var Vc=class i{constructor(t,e){this.router=t;this.authService=e}employeeId="";password="";showPassword=!1;isLoading=!1;errorMessage="";togglePasswordVisibility(){this.showPassword=!this.showPassword}onSubmit(){if(!this.employeeId||!this.password){this.errorMessage="\u0627\u0644\u0631\u062C\u0627\u0621 \u0625\u062F\u062E\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u0648\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631";return}this.isLoading=!0,this.errorMessage="",this.authService.login({username:this.employeeId,password:this.password}).subscribe({next:()=>{this.isLoading=!1,this.router.navigate(["/user/driver-dashboard"])},error:t=>{this.isLoading=!1,this.errorMessage=t.message||"\u0641\u0634\u0644 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644. \u0627\u0644\u0631\u062C\u0627\u0621 \u0627\u0644\u062A\u062D\u0642\u0642 \u0645\u0646 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0648\u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062E\u0631\u0649."}})}static \u0275fac=function(e){return new(e||i)(G(Xe),G(Pt))};static \u0275cmp=Oe({type:i,selectors:[["app-login"]],decls:33,vars:9,consts:[["loginForm","ngForm"],["dir","rtl",1,"login-container"],[1,"container"],[1,"row","justify-content-center"],[1,"col-12","col-sm-10","col-md-6","col-lg-5","col-xl-4"],[1,"text-center","mb-4"],[1,"logo-icon","mx-auto","mb-4"],[1,"fas","fa-ambulance"],[1,"h2","fw-bold","mb-2"],[1,"text-muted"],[3,"ngSubmit"],[1,"mb-3"],["for","employeeId",1,"form-label","text-end","d-block"],[1,"input-group"],["type","text","id","employeeId","name","employeeId","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0644\u0645\u0639\u0631\u0641 \u0627\u0644\u062E\u0627\u0635 \u0628\u0643","required","","dir","ltr",1,"form-control",3,"ngModelChange","ngModel"],[1,"input-group-text"],[1,"fas","fa-user"],["for","password",1,"form-label","text-end","d-block"],["type","button","aria-label","\u062A\u0628\u062F\u064A\u0644 \u0631\u0624\u064A\u0629 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631",1,"btn","btn-outline-secondary",3,"click"],["id","password","name","password","placeholder","\u0623\u062F\u062E\u0644 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u062E\u0627\u0635\u0629 \u0628\u0643","required","","dir","ltr",1,"form-control",3,"ngModelChange","type","ngModel"],[1,"fas","fa-lock"],["class","alert alert-danger text-end mb-3","role","alert",4,"ngIf"],["type","submit",1,"btn","btn-primary","w-100","py-3","fw-bold",3,"disabled"],[4,"ngIf"],["role","alert",1,"alert","alert-danger","text-end","mb-3"],[1,"fas","fa-exclamation-circle","me-2"],[1,"fas","fa-spinner","fa-spin","me-2"]],template:function(e,n){if(e&1){let r=Q();s(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),x(6,"i",7),l(),s(7,"h1",8),d(8,"\u0625\u062F\u0627\u0631\u0629 \u0633\u064A\u0627\u0631\u0627\u062A \u0627\u0644\u0625\u0633\u0639\u0627\u0641"),l(),s(9,"p",9),d(10,"\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644 \u0625\u0644\u0649 \u062D\u0633\u0627\u0628\u0643"),l()(),s(11,"form",10,0),T("ngSubmit",function(){return b(r),C(n.onSubmit())}),s(13,"div",11)(14,"label",12),d(15,"\u0645\u0639\u0631\u0641 \u0627\u0644\u0645\u0648\u0638\u0641"),l(),s(16,"div",13)(17,"input",14),V("ngModelChange",function(u){return b(r),N(n.employeeId,u)||(n.employeeId=u),C(u)}),l(),s(18,"span",15),x(19,"i",16),l()()(),s(20,"div",11)(21,"label",17),d(22,"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"),l(),s(23,"div",13)(24,"button",18),T("click",function(){return b(r),C(n.togglePasswordVisibility())}),x(25,"i"),l(),s(26,"input",19),V("ngModelChange",function(u){return b(r),N(n.password,u)||(n.password=u),C(u)}),l(),s(27,"span",15),x(28,"i",20),l()()(),H(29,eP,3,1,"div",21),s(30,"button",22),H(31,tP,2,0,"span",23)(32,iP,3,0,"span",23),l()()()()()()}if(e&2){let r=Rr(12);m(17),R("ngModel",n.employeeId),m(8),gn(n.showPassword?"fas fa-eye-slash":"fas fa-eye"),m(),S("type",n.showPassword?"text":"password"),R("ngModel",n.password),m(3),S("ngIf",n.errorMessage),m(),S("disabled",!r.valid||n.isLoading),m(),S("ngIf",!n.isLoading),m(),S("ngIf",n.isLoading)}},dependencies:[tt,Kt,et,ot,Xt,Zt,rt,$t,Le,kt],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;background-color:#f6f7f8;padding:1rem}.logo-icon[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:64px;height:64px;background-color:#1193d433;border-radius:50%}.logo-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;color:#1193d4}.btn-primary[_ngcontent-%COMP%]{background-color:#1193d4;border-color:#1193d4}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0e7bb0;border-color:#0e7bb0}.btn-outline-secondary[_ngcontent-%COMP%]{color:#617c89;border-color:#dbe2e6}.btn-outline-secondary[_ngcontent-%COMP%]:hover{background-color:#f6f7f8;color:#1193d4;border-color:#1193d4}.input-group-text[_ngcontent-%COMP%]{background-color:#fff;border-color:#dbe2e6;color:#617c89}.form-control[_ngcontent-%COMP%]:focus{border-color:#1193d4;box-shadow:0 0 0 .25rem #1193d440}a[_ngcontent-%COMP%]{color:#1193d4}a[_ngcontent-%COMP%]:hover{color:#0e7bb0}@media (prefers-color-scheme: dark){.login-container[_ngcontent-%COMP%]{background-color:#fff}}"]})};var $r=Jp(lp());var b2=(i,t)=>t.id;function nP(i,t){i&1&&(s(0,"div",2),x(1,"div",27),s(2,"span",28),d(3,"\u062C\u0627\u0631\u064A \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u0648\u0627\u0642\u0639..."),l()())}function rP(i,t){if(i&1&&(s(0,"span",20),d(1),l()),i&2){let e=h();m(),q(" ",e.formatLastUpdate()," ")}}function aP(i,t){if(i&1){let e=Q();s(0,"div",31),T("click",function(){let r=b(e).$implicit,a=h(2);return C(a.centerOnVehicle(r))}),s(1,"div",32)(2,"div",33),x(3,"div",34),l(),s(4,"div",35)(5,"div",36)(6,"h6",37),d(7),l(),s(8,"span",38),d(9),l()()()()()}if(i&2){let e,n=t.$implicit,r=h(2);fe("selected",((e=r.selectedVehicle())==null?null:e.id)===n.id),m(3),dt("background-color",r.getStatusColor(n.status)),m(4),z(n.vehicleName),m(),dt("color",r.getStatusColor(n.status)),m(),q(" ",n.status," ")}}function oP(i,t){if(i&1&&(s(0,"div",29),d(1,"\u0639\u0644\u0649 \u0627\u0644\u062E\u0631\u064A\u0637\u0629"),l(),Te(2,aP,10,8,"div",30,b2)),i&2){let e=h();m(2),Ee(e.filteredVehiclesWithLocation())}}function sP(i,t){if(i&1&&(s(0,"div",40)(1,"div",32)(2,"div",33),x(3,"div",41),l(),s(4,"div",42)(5,"h6",43),d(6),l(),s(7,"small",44),d(8,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A \u0645\u0648\u0642\u0639"),l()()()()),i&2){let e=t.$implicit;m(6),z(e.vehicleName)}}function lP(i,t){if(i&1&&(s(0,"div",39),d(1,"\u063A\u064A\u0631 \u0645\u062A\u0635\u0644 / \u0628\u062F\u0648\u0646 \u0645\u0648\u0642\u0639"),l(),Te(2,sP,9,1,"div",40,b2)),i&2){let e=h();m(2),Ee(e.filteredVehiclesWithoutLocation())}}function uP(i,t){i&1&&(s(0,"div",22),x(1,"i",45),s(2,"p"),d(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u0631\u0643\u0628\u0627\u062A"),l()())}function cP(i,t){if(i&1){let e=Q();s(0,"div",26)(1,"button",46),T("click",function(){b(e);let r=h();return C(r.selectedVehicle.set(null))}),x(2,"i",47),l(),s(3,"div",48)(4,"div",49),x(5,"i",50),l(),s(6,"div")(7,"h5",51),d(8),l(),s(9,"span",52),d(10),l()()(),s(11,"div",53)(12,"div",54),x(13,"i",55),s(14,"span"),d(15),gt(16,"date"),l()(),s(17,"div",54),x(18,"i",56),s(19,"span",57),d(20),gt(21,"number"),gt(22,"number"),l()()()()}if(i&2){let e=h();m(4),dt("background-color",e.getStatusColor(e.selectedVehicle().status)+"20"),m(),dt("color",e.getStatusColor(e.selectedVehicle().status)),m(3),z(e.selectedVehicle().vehicleName),m(),dt("background-color",e.getStatusColor(e.selectedVehicle().status)),m(),q(" ",e.selectedVehicle().status," "),m(5),q("\u0622\u062E\u0631 \u062A\u062D\u062F\u064A\u062B: ",kh(16,11,e.selectedVehicle().lastLocationUpdate,"mediumTime","","ar-EG"),""),m(5),vt(" ",Bt(21,16,e.selectedVehicle().latitude,"1.4-4"),", ",Bt(22,19,e.selectedVehicle().longitude,"1.4-4")," ")}}var Uc=class i{constructor(t,e,n){this.vehicleService=t;this.toastService=e;this.globalVars=n;this.globalVars.setGlobalHeader("\u062E\u0631\u064A\u0637\u0629 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A"),this.checkScreenSize()}map;markers=new Map;refreshInterval;isMobileView=!1;vehicles=Z([]);searchText=Z("");isLoading=Z(!1);lastUpdate=Z(null);selectedVehicle=Z(null);isSidebarOpen=Z(!0);filteredVehicles=We(()=>{let t=this.searchText().toLowerCase(),e=this.vehicles();return t?e.filter(n=>n.vehicleName.toLowerCase().includes(t)||n.driverName&&n.driverName.toLowerCase().includes(t)):e});filteredVehiclesWithLocation=We(()=>this.filteredVehicles().filter(t=>t.latitude&&t.longitude));filteredVehiclesWithoutLocation=We(()=>this.filteredVehicles().filter(t=>!t.latitude||!t.longitude));PALESTINE_CENTER=[31.5,35];DEFAULT_ZOOM=9;STATUS_COLORS={\u0645\u062A\u0627\u062D\u0629:"#28a745","\u0641\u064A \u0627\u0644\u0637\u0631\u064A\u0642 \u0644\u0644\u0645\u0631\u064A\u0636":"#e2af19ff","\u0641\u064A \u0627\u0644\u0645\u0648\u0642\u0639":"#17a2b8","\u0641\u064A \u0627\u0644\u0637\u0631\u064A\u0642 \u0644\u0644\u0645\u0633\u062A\u0634\u0641\u0649":"#fd7e14","\u0641\u064A \u0627\u0644\u0648\u062C\u0647\u0629":"#6f42c1","\u062E\u0627\u0631\u062C \u0627\u0644\u062E\u062F\u0645\u0629":"#dc3545","\u0625\u0646\u0647\u0627\u0621 \u0627\u0644\u062E\u062F\u0645\u0629":"#6c757d",\u0635\u064A\u0627\u0646\u0629:"#343a40"};ngOnInit(){}ngAfterViewInit(){this.initMap(),this.loadVehicleLocations(),this.refreshInterval=setInterval(()=>{this.loadVehicleLocations()},3e4)}ngOnDestroy(){this.refreshInterval&&clearInterval(this.refreshInterval),this.map&&this.map.remove()}onResize(){this.checkScreenSize()}checkScreenSize(){this.isMobileView=window.innerWidth<=768}toggleSidebar(){this.isSidebarOpen.update(t=>!t)}initMap(){this.map=$r.map("vehicle-map",{center:this.PALESTINE_CENTER,zoom:this.DEFAULT_ZOOM,zoomControl:!1}),$r.control.zoom({position:"topleft"}).addTo(this.map),$r.tileLayer("https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",{attribution:"&copy; OpenStreetMap &copy; CARTO",maxZoom:20}).addTo(this.map)}loadVehicleLocations(){this.isLoading.set(!0),this.vehicleService.getAllVehicleLocations().subscribe({next:t=>{this.vehicles.set(t),this.updateMarkers(t),this.lastUpdate.set(new Date),this.isLoading.set(!1)},error:t=>{console.error(t),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0645\u0648\u0627\u0642\u0639 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A"),this.isLoading.set(!1)}})}updateMarkers(t){let e=new Set(t.map(n=>n.id));this.markers.forEach((n,r)=>{e.has(r)||(n.remove(),this.markers.delete(r))}),t.forEach(n=>{if(!n.latitude||!n.longitude)return;let r=[n.latitude,n.longitude],a=this.selectedVehicle()?.id===n.id;if(this.markers.has(n.id)){let u=this.markers.get(n.id);u.setLatLng(r),u.setIcon(this.createModernIcon(n,a)),u.setZIndexOffset(a?1e3:0)}else{let u=$r.marker(r,{icon:this.createModernIcon(n,!1)}).addTo(this.map);u.on("click",()=>{this.centerOnVehicle(n)}),this.markers.set(n.id,u)}})}createModernIcon(t,e){let n=this.STATUS_COLORS[t.status]||"#6c757d",r=e?`<div class="marker-pulse" style="background-color: ${n}"></div>`:"";return $r.divIcon({className:"custom-marker-wrapper",html:`
        <div style="position: relative;">
          ${r}
          <div class="marker-pin-modern" style="color: ${n}; border-color: white;">
            <i class="fas fa-ambulance" style="font-size: 1.5rem;"></i>
          </div>
        </div>
      `,iconSize:[40,40],iconAnchor:[20,40]})}centerOnVehicle(t){t.latitude&&t.longitude&&(this.selectedVehicle.set(t),this.isMobileView&&this.isSidebarOpen.set(!1),this.map.flyTo([t.latitude,t.longitude],15,{duration:1.5}),this.updateMarkers(this.vehicles()))}centerOnPalestine(){this.map.flyTo(this.PALESTINE_CENTER,this.DEFAULT_ZOOM,{duration:1}),this.selectedVehicle.set(null),this.searchText.set(""),this.updateMarkers(this.vehicles())}getStatusColor(t){return this.STATUS_COLORS[t]||"#6c757d"}getVehiclesWithLocation(){return this.vehicles().filter(t=>t.latitude&&t.longitude)}formatLastUpdate(){return this.lastUpdate()?.toLocaleTimeString("ar-EG")||""}static \u0275fac=function(e){return new(e||i)(G(oi),G(Ye),G(ft))};static \u0275cmp=Oe({type:i,selectors:[["app-vehicle-map"]],hostBindings:function(e,n){e&1&&T("resize",function(a){return n.onResize(a)},!1,yh)},decls:33,vars:20,consts:[["dir","rtl",1,"vehicle-map-container"],["id","vehicle-map",1,"map-view"],[1,"loading-overlay"],["title","\u0639\u0631\u0636 \u0627\u0644\u0642\u0627\u0626\u0645\u0629",1,"btn","btn-primary","btn-float-toggle","shadow",3,"click"],[1,"fas","fa-list-ul"],[1,"floating-sidebar"],[1,"sidebar-header"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"fw-bold","mb-0","text-dark"],[1,"d-flex","gap-2"],["title","\u062A\u062D\u062F\u064A\u062B",1,"btn","btn-icon","btn-light","shadow-sm",3,"click","disabled"],[1,"fas","fa-sync-alt"],["title","\u0625\u062E\u0641\u0627\u0621",1,"btn","btn-icon","btn-light","shadow-sm","mobile-toggle",3,"click"],[1,"fas"],[1,"search-box","mb-3"],[1,"fas","fa-search","text-muted"],["type","text","placeholder","\u0628\u062D\u062B \u0639\u0646 \u0645\u0631\u0643\u0628\u0629 \u0623\u0648 \u0633\u0627\u0626\u0642...",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","gap-2","overflow-auto","pb-2","stats-scroller"],[1,"badge","bg-white","text-dark","border","shadow-sm"],[1,"badge","bg-success","bg-opacity-10","text-success","border-success","border-opacity-10"],["dir","ltr",1,"badge","bg-light","text-muted","border"],[1,"vehicle-list-wrapper","custom-scrollbar"],[1,"text-center","py-5","text-muted"],[1,"sidebar-footer"],[1,"btn","btn-primary","w-100","shadow-sm",3,"click"],[1,"fas","fa-expand-arrows-alt","me-2"],[1,"vehicle-detail-card","fade-in-up"],["role","status",1,"spinner-border","text-primary"],[1,"mt-2","fw-medium"],[1,"list-group-label"],[1,"vehicle-card",3,"selected"],[1,"vehicle-card",3,"click"],[1,"d-flex","align-items-center","gap-3"],[1,"status-indicator"],[1,"status-dot"],[1,"flex-grow-1","min-width-0"],[1,"d-flex","justify-content-between","align-items-center"],[1,"vehicle-name","mb-0"],[1,"status-badge"],[1,"list-group-label","mt-3"],[1,"vehicle-card","offline"],[1,"status-dot","bg-secondary"],[1,"flex-grow-1"],[1,"vehicle-name","mb-0","text-muted"],[1,"text-muted"],[1,"fas","fa-truck-medical","fa-3x","mb-3","opacity-25"],[1,"btn-close-card",3,"click"],[1,"fas","fa-times"],[1,"detail-header"],[1,"icon-box"],[1,"fas","fa-ambulance",2,"font-size","1.4rem"],[1,"mb-0","fw-bold"],[1,"badge","rounded-pill"],[1,"detail-body","mt-3"],[1,"info-row"],[1,"fas","fa-clock","text-muted"],[1,"fas","fa-map-marker-alt","text-muted"],["dir","ltr",1,"coordinates"]],template:function(e,n){e&1&&(s(0,"div",0),x(1,"div",1),H(2,nP,4,0,"div",2),s(3,"button",3),T("click",function(){return n.toggleSidebar()}),x(4,"i",4),l(),s(5,"div",5)(6,"div",6)(7,"div",7)(8,"h5",8),d(9,"\u0645\u0631\u0627\u0642\u0628\u0629 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A"),l(),s(10,"div",9)(11,"button",10),T("click",function(){return n.loadVehicleLocations()}),x(12,"i",11),l(),s(13,"button",12),T("click",function(){return n.toggleSidebar()}),x(14,"i",13),l()()(),s(15,"div",14),x(16,"i",15),s(17,"input",16),T("ngModelChange",function(a){return n.searchText.set(a)}),l()(),s(18,"div",17)(19,"span",18),d(20),l(),s(21,"span",19),d(22),l(),H(23,rP,2,1,"span",20),l()(),s(24,"div",21),H(25,oP,4,0)(26,lP,4,0)(27,uP,4,0,"div",22),l(),s(28,"div",23)(29,"button",24),T("click",function(){return n.centerOnPalestine()}),x(30,"i",25),d(31," \u0639\u0631\u0636 \u0643\u0644 \u0627\u0644\u062E\u0631\u064A\u0637\u0629 "),l()()(),H(32,cP,23,22,"div",26),l()),e&2&&(m(2),le(n.isLoading()?2:-1),m(),fe("show",!n.isSidebarOpen()),m(2),fe("closed",!n.isSidebarOpen()),m(6),S("disabled",n.isLoading()),m(),fe("fa-spin",n.isLoading()),m(2),fe("fa-chevron-right",!n.isMobileView)("fa-chevron-down",n.isMobileView),m(3),S("ngModel",n.searchText()),m(3),q(" \u0627\u0644\u0643\u0644: ",n.vehicles().length," "),m(2),q(" \u0646\u0634\u0637: ",n.getVehiclesWithLocation().length," "),m(),le(n.lastUpdate()?23:-1),m(2),le(n.filteredVehiclesWithLocation().length>0?25:-1),m(),le(n.filteredVehiclesWithoutLocation().length>0?26:-1),m(),le(n.vehicles().length===0&&!n.isLoading()?27:-1),m(5),le(n.selectedVehicle()?32:-1))},dependencies:[Le,wn,cl,tt,et,ot,rt],styles:[".vehicle-map-container[_ngcontent-%COMP%]{position:relative;height:calc(100vh - 80px);width:100%;overflow:hidden;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.map-view[_ngcontent-%COMP%]{width:100%;height:100%;z-index:1}.floating-sidebar[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;width:380px;max-height:calc(100% - 40px);background:#fffffff2;backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border-radius:16px;box-shadow:0 8px 32px #0000001a;display:flex;flex-direction:column;z-index:1000;border:1px solid rgba(255,255,255,.4);transition:transform .4s cubic-bezier(.25,.8,.25,1)}.floating-sidebar.closed[_ngcontent-%COMP%]{transform:translate(120%)}.btn-float-toggle[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;z-index:999;width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.2rem;opacity:0;transform:scale(.8);transition:all .3s ease;pointer-events:none}.btn-float-toggle.show[_ngcontent-%COMP%]{opacity:1;transform:scale(1);pointer-events:auto}.sidebar-header[_ngcontent-%COMP%]{padding:1.25rem;background:#ffffff80;border-bottom:1px solid rgba(0,0,0,.05)}.search-box[_ngcontent-%COMP%]{position:relative}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;right:15px;top:50%;transform:translateY(-50%);z-index:2}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:15px;padding-right:40px;border-radius:10px;border:1px solid #e9ecef;background:#f8f9fa;transition:all .2s}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background:#fff;box-shadow:0 0 0 4px #0d6efd1a;border-color:#0d6efd}.vehicle-list-wrapper[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:1rem}.list-group-label[_ngcontent-%COMP%]{font-size:.75rem;text-transform:uppercase;color:#6c757d;font-weight:700;margin-bottom:.75rem;padding-left:.5rem}.vehicle-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1rem;margin-bottom:.75rem;border:1px solid transparent;box-shadow:0 2px 6px #00000005;cursor:pointer;transition:all .2s ease}.vehicle-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000014}.vehicle-card.selected[_ngcontent-%COMP%]{border-color:#0d6efd;background:#f0f7ff}.vehicle-card.offline[_ngcontent-%COMP%]{opacity:.7;background:#f8f9fa}.vehicle-name[_ngcontent-%COMP%]{font-weight:600;color:#212529}.status-badge[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600}.status-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;box-shadow:0 0 0 2px #fffc}.sidebar-footer[_ngcontent-%COMP%]{padding:1rem;background:#fff;border-top:1px solid rgba(0,0,0,.05)}.vehicle-detail-card[_ngcontent-%COMP%]{position:absolute;bottom:30px;left:30px;width:320px;background:#fff;border-radius:16px;padding:1.5rem;box-shadow:0 10px 40px #00000026;z-index:1000;animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.165,.84,.44,1)}.btn-close-card[_ngcontent-%COMP%]{position:absolute;top:15px;left:15px;background:none;border:none;color:#adb5bd;cursor:pointer}.detail-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1rem}.icon-box[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.25rem}.info-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:.75rem;color:#495057;font-size:.95rem}.info-row[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:20px;text-align:center}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#fff9;backdrop-filter:blur(2px);z-index:2000;display:flex;flex-direction:column;align-items:center;justify-content:center}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#0000001a;border-radius:20px}@keyframes _ngcontent-%COMP%_pulse{0%{transform:translate(-50%,-50%) scale(1);opacity:1}to{transform:translate(-50%,-50%) scale(2.5);opacity:0}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}@media (max-width: 767px){.leaflet-top[_ngcontent-%COMP%]{top:60px}.floating-sidebar[_ngcontent-%COMP%]{position:fixed;inset:auto 0 0;width:100%;max-height:50vh;border-radius:20px 20px 0 0;border-bottom:none;box-shadow:0 -5px 20px #0000001a}.floating-sidebar.closed[_ngcontent-%COMP%]{transform:translateY(100%)}.btn-float-toggle[_ngcontent-%COMP%]{inset:auto 20px 20px auto}.vehicle-detail-card[_ngcontent-%COMP%]{width:auto;left:10px;right:10px;bottom:60px}}"]})};var Wc=class i{constructor(t){this.http=t}API_URL=`${xt.apiEndpoint}/audit-logs`;getAuditLogs(t){let e=Nt(t);return this.http.get(this.API_URL,{params:e})}getDriverActivityLogs(t,e,n){return this.getAuditLogs({entityType:"driver",userId:t,startDate:e,endDate:n,sortBy:"created_at",sortOrder:"DESC"})}getTripChangeLogs(t){return this.getAuditLogs({entityType:"trip",sortBy:"created_at",sortOrder:"DESC"})}getFinancialChangeLogs(t,e){return this.getAuditLogs({isFinancialChange:!0,startDate:t,endDate:e,sortBy:"created_at",sortOrder:"DESC"})}static \u0275fac=function(e){return new(e||i)(Ue(It))};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})};var mP=(i,t,e)=>[i,t,e];function fP(i,t){if(i&1&&(s(0,"option",27),d(1),l()),i&2){let e=t.$implicit,n=h();S("value",e),m(),q(" ",n.entityTypeLabels[e]," ")}}function pP(i,t){if(i&1&&(s(0,"option",27),d(1),l()),i&2){let e=t.$implicit,n=h();S("value",e),m(),q(" ",n.actionTypeLabels[e]," ")}}function hP(i,t){i&1&&(s(0,"div",28)(1,"div",29)(2,"span",30),d(3,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),l()()())}function gP(i,t){i&1&&(s(0,"div",28),x(1,"i",31),s(2,"p",32),d(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0633\u062C\u0644\u0627\u062A \u0645\u062A\u0627\u062D\u0629"),l()())}function _P(i,t){if(i&1&&(s(0,"span",42),d(1),l()),i&2){let e=t.$implicit;m(),q(" ",e," ")}}function vP(i,t){if(i&1&&(s(0,"div",53)(1,"small",32),x(2,"i",56),d(3),l()()),i&2){let e=h(2).$implicit;m(3),q(" \u0645\u0644\u0627\u062D\u0638\u0627\u062A: ",e.notes," ")}}function xP(i,t){if(i&1&&(s(0,"tr",43)(1,"td",44)(2,"div",45)(3,"div",46)(4,"div",47)(5,"h6",48),d(6,"\u0627\u0644\u0642\u064A\u0645 \u0627\u0644\u0642\u062F\u064A\u0645\u0629"),l(),s(7,"pre",49),d(8),l()(),s(9,"div",50),x(10,"i",51),l(),s(11,"div",47)(12,"h6",52),d(13,"\u0627\u0644\u0642\u064A\u0645 \u0627\u0644\u062C\u062F\u064A\u062F\u0629"),l(),s(14,"pre",49),d(15),l()()(),s(16,"div",14)(17,"div",53)(18,"small",32),x(19,"i",54),d(20),l()(),H(21,vP,4,1,"div",55),l()()()()),i&2){let e=h().$implicit,n=h(2);m(8),z(n.getValueDisplay(e.oldValues)),m(7),z(n.getValueDisplay(e.newValues)),m(5),q(" IP: ",e.ipAddress||"-"," "),m(),S("ngIf",e.notes)}}function yP(i,t){if(i&1){let e=Q();Si(0),s(1,"tr")(2,"td",36),d(3),l(),s(4,"td")(5,"div"),d(6),l()(),s(7,"td")(8,"span",37),d(9),l()(),s(10,"td")(11,"div"),d(12),l(),s(13,"small",32),d(14),l()(),s(15,"td"),H(16,_P,2,1,"span",38),l(),s(17,"td")(18,"button",39),T("click",function(){let r=b(e).$implicit,a=h(2);return C(a.toggleRow(r.id))}),x(19,"i",40),l()()(),H(20,xP,22,4,"tr",41),Ti()}if(i&2){let e=t.$implicit,n=h(2);m(3),z(n.formatDate(e.createdAt)),m(3),z(e.userName||"\u0646\u0638\u0627\u0645"),m(2),fe("bg-success",e.actionType==="driver_login")("bg-danger",e.actionType==="driver_logout")("bg-info",e.actionType==="status_change")("bg-primary",e.actionType==="create")("bg-warning",e.actionType==="update")("TA-bg",e.actionType==="trip_accepted")("bg-sever",e.actionType==="logout_without_checklist")("TC-bg",e.actionType==="trip_closed")("cl-bg",e.actionType==="checklist_completed")("UT-bg",e.actionType==="update-trip")("MA-bg",e.actionType==="createM"),m(),q(" ",n.getActionTypeLabel(e.actionType)," "),m(3),z(n.getEntityTypeLabel(e.entityType)),m(2),q("",(e.entityId==null?null:e.entityId.substring(0,8))||"-","..."),m(2),S("ngForOf",e.changedFields),m(3),fe("fa-chevron-down",!n.isExpanded(e.id))("fa-chevron-up",n.isExpanded(e.id)),m(),S("ngIf",n.isExpanded(e.id))}}function bP(i,t){if(i&1&&(s(0,"div",33)(1,"table",34)(2,"thead")(3,"tr")(4,"th"),d(5,"\u0627\u0644\u0648\u0642\u062A"),l(),s(6,"th"),d(7,"\u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645"),l(),s(8,"th"),d(9,"\u0627\u0644\u0639\u0645\u0644\u064A\u0629"),l(),s(10,"th"),d(11,"\u0627\u0644\u0643\u064A\u0627\u0646"),l(),s(12,"th"),d(13,"\u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u062A\u063A\u064A\u0631\u0629"),l(),s(14,"th"),d(15,"\u062A\u0641\u0627\u0635\u064A\u0644"),l()()(),s(16,"tbody"),H(17,yP,21,33,"ng-container",35),l()()()),i&2){let e=h();m(17),S("ngForOf",e.logs())}}function CP(i,t){i&1&&(s(0,"li",64)(1,"span",65),d(2,"..."),l()())}function wP(i,t){if(i&1){let e=Q();s(0,"li",59)(1,"button",60),T("click",function(){let r=b(e).$implicit,a=h(2);return C(a.goToPage(r))}),d(2),l()()}if(i&2){let e=t.$implicit,n=h(2);fe("active",e===n.currentPage)("d-none",e<2||e>=n.totalPages),m(2),z(e)}}function SP(i,t){i&1&&(s(0,"li",64)(1,"span",65),d(2,"..."),l()())}function TP(i,t){if(i&1){let e=Q();s(0,"li",59)(1,"button",60),T("click",function(){b(e);let r=h(2);return C(r.goToPage(r.totalPages))}),d(2),l()()}if(i&2){let e=h(2);fe("active",e.currentPage===e.totalPages),m(2),z(e.totalPages)}}function EP(i,t){if(i&1){let e=Q();s(0,"div",57)(1,"div"),d(2),l(),s(3,"nav")(4,"ul",58)(5,"li",59)(6,"button",60),T("click",function(){b(e);let r=h();return C(r.prevPage())}),d(7,"\u0627\u0644\u0633\u0627\u0628\u0642"),l()(),s(8,"li",59)(9,"button",60),T("click",function(){b(e);let r=h();return C(r.goToPage(1))}),d(10,"1"),l()(),H(11,CP,3,0,"li",61)(12,wP,3,5,"li",62)(13,SP,3,0,"li",61)(14,TP,3,3,"li",63),s(15,"li",59)(16,"button",60),T("click",function(){b(e);let r=h();return C(r.nextPage())}),d(17,"\u0627\u0644\u062A\u0627\u0644\u064A"),l()()()()()}if(i&2){let e=h();m(2),ya(" \u0639\u0631\u0636 ",(e.currentPage-1)*e.limit+1," - ",e.Math.min(e.currentPage*e.limit,e.total)," \u0645\u0646 ",e.total," "),m(3),fe("disabled",e.currentPage===1),m(3),fe("active",e.currentPage===1),m(3),S("ngIf",e.currentPage>3),m(),S("ngForOf",No(13,mP,e.currentPage-1,e.currentPage,e.currentPage+1)),m(),S("ngIf",e.currentPage<e.totalPages-2),m(),S("ngIf",e.totalPages>1),m(),fe("disabled",e.currentPage===e.totalPages)}}var jc=class i{constructor(t,e,n){this.auditLogService=t;this.toastService=e;this.globalVarsService=n;this.globalVarsService.setGlobalHeader("\u0633\u062C\u0644 \u0627\u0644\u062A\u062F\u0642\u064A\u0642")}logs=Z([]);loading=Z(!1);Math=Math;currentPage=1;limit=50;total=0;totalPages=0;filters={startDate:this.getDateDaysAgo(7),endDate:this.getTodayDate(),entityType:"",actionType:"",isFinancialChange:void 0};expandedRows=new Set;entityTypeLabels={driver:"\u0633\u0627\u0626\u0642",vehicle:"\u0645\u0631\u0643\u0628\u0629",trip:"\u0631\u062D\u0644\u0629",paramedic:"\u0645\u0633\u0639\u0641",user:"\u0645\u0633\u062A\u062E\u062F\u0645",fuel_record:"\u0648\u0642\u0648\u062F",maintenance_record:"\u0635\u064A\u0627\u0646\u0629"};actionTypeLabels={driver_login:"\u062A\u0633\u062C\u064A\u0644 \u062F\u062E\u0648\u0644 \u0627\u0644\u0633\u0627\u0626\u0642",driver_logout:"\u062A\u0633\u062C\u064A\u0644 \u062E\u0631\u0648\u062C \u0627\u0644\u0633\u0627\u0626\u0642",status_change:"\u062A\u063A\u064A\u064A\u0631 \u0627\u0644\u062D\u0627\u0644\u0629",create:"\u0625\u0646\u0634\u0627\u0621",update:"\u062A\u0639\u062F\u064A\u0644",delete:"\u062D\u0630\u0641",logout_without_checklist:"\u062A\u0633\u062C\u064A\u0644 \u062E\u0631\u0648\u062C \u0645\u0646 \u062F\u0648\u0646 \u0627\u0644\u062A\u0634\u0643\u0644\u0633\u062A",trip_accepted:"\u0642\u0628\u0648\u0644 \u0631\u062D\u0644\u0629",trip_closed:"\u0625\u0646\u0647\u0627\u0621 \u0631\u062D\u0644\u0629",checklist_completed:"\u0627\u062F\u062E\u0627\u0644 \u062A\u0634\u0643\u0644\u0633\u062A",trip_unclosed:"\u0627\u0639\u0627\u062F\u0629 \u0641\u062A\u062D \u0631\u062D\u0644\u0629 \u0645\u0646 \u0627\u0644\u0645\u062F\u064A\u0631","update-trip":"\u062A\u0639\u062F\u064A\u0644 \u0639\u0644\u0649 \u0631\u062D\u0644\u0629",createM:"\u0627\u0636\u0627\u0641\u0629 \u0635\u064A\u0627\u0646\u0629",medical_form_accessed:"\u0639\u0631\u0636 \u0646\u0645\u0648\u0630\u062C \u0637\u0628\u064A",medical_form_completed:"\u0625\u0643\u0645\u0627\u0644 \u0646\u0645\u0648\u0630\u062C \u0637\u0628\u064A",medical_form_unlocked:"\u0641\u062A\u062D \u0646\u0645\u0648\u0630\u062C \u0637\u0628\u064A \u0645\u063A\u0644\u0642",medical_form_created:"\u0625\u0646\u0634\u0627\u0621 \u0646\u0645\u0648\u0630\u062C \u0637\u0628\u064A"};entityTypeKeys=Object.keys(this.entityTypeLabels);actionTypeKeys=Object.keys(this.actionTypeLabels);ngOnInit(){this.loadLogs()}loadLogs(){this.loading.set(!0);let t=Qe(ve({},this.filters),{page:this.currentPage,limit:this.limit});this.auditLogService.getAuditLogs(t).subscribe({next:e=>{this.logs.set(e.data),this.total=e.total,this.totalPages=e.totalPages,this.loading.set(!1)},error:e=>{console.error("Failed to load audit logs:",e),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0633\u062C\u0644 \u0627\u0644\u062A\u062F\u0642\u064A\u0642"),this.loading.set(!1)}})}applyFilters(){this.currentPage=1,this.loadLogs()}resetFilters(){this.filters={startDate:this.getDateDaysAgo(7),endDate:this.getTodayDate(),entityType:"",actionType:"",isFinancialChange:void 0},this.currentPage=1,this.loadLogs()}toggleRow(t){this.expandedRows.has(t)?this.expandedRows.delete(t):this.expandedRows.add(t)}isExpanded(t){return this.expandedRows.has(t)}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.loadLogs())}prevPage(){this.currentPage>1&&(this.currentPage--,this.loadLogs())}goToPage(t){t>=1&&t<=this.totalPages&&(this.currentPage=t,this.loadLogs())}getDateDaysAgo(t){let e=new Date;return e.setDate(e.getDate()-t),e.toISOString().split("T")[0]}getTodayDate(){return new Date().toISOString().split("T")[0]}getEntityTypeLabel(t){return this.entityTypeLabels[t]||t}getActionTypeLabel(t){return this.actionTypeLabels[t]||t}formatDate(t){return new Date(t).toLocaleString("ar-EG",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}getChangedFieldsDisplay(t){return t.changedFields.join(", ")}getValueDisplay(t){return t==null?"-":typeof t=="object"?JSON.stringify(t,null,2):String(t)}getDirectionLabel(t){switch(t){case"receivable":return"\u0627\u0644\u0634\u0631\u0643\u0629 \u0645\u062F\u064A\u0646\u0629";case"payable":return"\u0627\u0644\u0633\u0627\u0626\u0642/\u0627\u0644\u0645\u0633\u0639\u0641 \u0645\u062F\u064A\u0646";case"neutral":return"\u0645\u062D\u0627\u064A\u062F";default:return"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"}}getDirectionBadgeClass(t){switch(t){case"receivable":return"badge-receivable";case"payable":return"badge-payable";case"neutral":return"badge-neutral";default:return"badge-secondary"}}static \u0275fac=function(e){return new(e||i)(G(Wc),G(Ye),G(ft))};static \u0275cmp=Oe({type:i,selectors:[["app-audit-logs"]],decls:50,vars:11,consts:[[1,"container-fluid","py-4"],[1,"card","mb-4"],[1,"card-header"],[1,"mb-0"],[1,"fas","fa-filter"],[1,"card-body"],[1,"row","g-3"],[1,"col-md-3"],[1,"form-label"],["type","date",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"col-md-2"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"row","mt-3"],[1,"col"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-search"],[1,"btn","btn-secondary","ms-2",3,"click"],[1,"fas","fa-redo"],[1,"card"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"fas","fa-list"],[1,"badge","bg-info"],["class","text-center py-5",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","d-flex justify-content-between align-items-center mt-3",4,"ngIf"],[3,"value"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"fas","fa-inbox","fa-3x","text-muted","mb-3"],[1,"text-muted"],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"text-nowrap"],[1,"badge"],["class","badge bg-secondary me-1",4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"fas"],["class","table-light",4,"ngIf"],[1,"badge","bg-secondary","me-1"],[1,"table-light"],["colspan","7"],[1,"p-3"],[1,"row"],[1,"col-md-5"],[1,"text-danger"],[1,"bg-white","p-2","border","rounded"],[1,"col-md-2","text-center","d-flex","align-items-center","justify-content-center"],[1,"fas","fa-arrow-left","fa-2x","text-primary"],[1,"text-success"],[1,"col-md-6"],[1,"fas","fa-globe"],["class","col-md-6",4,"ngIf"],[1,"fas","fa-sticky-note"],[1,"d-flex","justify-content-between","align-items-center","mt-3"],[1,"pagination","mb-0"],[1,"page-item"],[1,"page-link",3,"click"],["class","page-item disabled",4,"ngIf"],["class","page-item",3,"active","d-none",4,"ngFor","ngForOf"],["class","page-item",3,"active",4,"ngIf"],[1,"page-item","disabled"],[1,"page-link"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5",3),x(4,"i",4),d(5," \u062A\u0635\u0641\u064A\u0629 \u0627\u0644\u0633\u062C\u0644\u0627\u062A"),l()(),s(6,"div",5)(7,"div",6)(8,"div",7)(9,"label",8),d(10,"\u0645\u0646 \u062A\u0627\u0631\u064A\u062E"),l(),s(11,"input",9),V("ngModelChange",function(a){return N(n.filters.startDate,a)||(n.filters.startDate=a),a}),T("change",function(){return n.applyFilters()}),l()(),s(12,"div",7)(13,"label",8),d(14,"\u0625\u0644\u0649 \u062A\u0627\u0631\u064A\u062E"),l(),s(15,"input",9),V("ngModelChange",function(a){return N(n.filters.endDate,a)||(n.filters.endDate=a),a}),T("change",function(){return n.applyFilters()}),l()(),s(16,"div",10)(17,"label",8),d(18,"\u0646\u0648\u0639 \u0627\u0644\u0643\u064A\u0627\u0646"),l(),s(19,"select",11),V("ngModelChange",function(a){return N(n.filters.entityType,a)||(n.filters.entityType=a),a}),T("change",function(){return n.applyFilters()}),s(20,"option",12),d(21,"\u0627\u0644\u0643\u0644"),l(),H(22,fP,2,2,"option",13),l()(),s(23,"div",10)(24,"label",8),d(25,"\u0646\u0648\u0639 \u0627\u0644\u0639\u0645\u0644\u064A\u0629"),l(),s(26,"select",11),V("ngModelChange",function(a){return N(n.filters.actionType,a)||(n.filters.actionType=a),a}),T("change",function(){return n.applyFilters()}),s(27,"option",12),d(28,"\u0627\u0644\u0643\u0644"),l(),H(29,pP,2,2,"option",13),l()()(),s(30,"div",14)(31,"div",15)(32,"button",16),T("click",function(){return n.applyFilters()}),x(33,"i",17),d(34," \u0628\u062D\u062B "),l(),s(35,"button",18),T("click",function(){return n.resetFilters()}),x(36,"i",19),d(37," \u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 "),l()()()()(),s(38,"div",20)(39,"div",21)(40,"h5",3),x(41,"i",22),d(42," \u0633\u062C\u0644\u0627\u062A \u0627\u0644\u062A\u062F\u0642\u064A\u0642"),l(),s(43,"span",23),d(44),l()(),s(45,"div",5),H(46,hP,4,0,"div",24)(47,gP,4,0,"div",24)(48,bP,18,1,"div",25)(49,EP,18,17,"div",26),l()()()),e&2&&(m(11),R("ngModel",n.filters.startDate),m(4),R("ngModel",n.filters.endDate),m(4),R("ngModel",n.filters.entityType),m(3),S("ngForOf",n.entityTypeKeys),m(4),R("ngModel",n.filters.actionType),m(3),S("ngForOf",n.actionTypeKeys),m(15),q("\u0625\u062C\u0645\u0627\u0644\u064A: ",n.total,""),m(2),S("ngIf",n.loading()),m(),S("ngIf",!n.loading()&&n.logs().length===0),m(),S("ngIf",!n.loading()&&n.logs().length>0),m(),S("ngIf",!n.loading()&&n.logs().length>0))},dependencies:[Le,ai,kt,tt,Ot,Lt,et,At,ot,rt],styles:[".table-warning[_ngcontent-%COMP%]{background-color:#fff3cd!important}pre[_ngcontent-%COMP%]{font-size:.875rem;max-height:300px;overflow:auto;direction:ltr;text-align:left}.badge[_ngcontent-%COMP%]{font-size:.875rem}.card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{cursor:pointer}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{vertical-align:middle}.badge[_ngcontent-%COMP%]{background-color:#6495ed}.bg-sever[_ngcontent-%COMP%]{background-color:#8a2be2}.TA-bg[_ngcontent-%COMP%]{background-color:#006400}.TC-bg[_ngcontent-%COMP%]{background-color:#8b0000}.cl-bg[_ngcontent-%COMP%]{background-color:#ff697d}.UT-bg[_ngcontent-%COMP%]{background-color:#d0e22b}.MA-bg[_ngcontent-%COMP%]{background-color:#2542b6}.transaction-receivable[_ngcontent-%COMP%]{background-color:#d4edda;border-left:4px solid #28a745}.transaction-payable[_ngcontent-%COMP%]{background-color:#f8d7da;border-left:4px solid #dc3545}.transaction-neutral[_ngcontent-%COMP%]{background-color:#d1ecf1;border-left:4px solid #17a2b8}.badge-receivable[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.badge-payable[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.badge-neutral[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}"]})};var Na=class i{constructor(t){this.http=t}API_URL=`${xt.apiEndpoint}/vehicle-checklists`;createSession(t,e){return this.http.post(`${this.API_URL}/sessions`,{vehicleId:t,driverId:e})}getCurrentSession(t){let e=new Ki;return t&&(e=e.set("vehicleId",t)),this.http.get(`${this.API_URL}/sessions/current`,{params:e})}dismissReminder(t){return this.http.post(`${this.API_URL}/dismiss`,{sessionId:t})}submitChecklist(t){return this.http.post(this.API_URL,t)}getChecklists(t){let e=new Ki;return Object.entries(t).forEach(([n,r])=>{r!=null&&(e=e.set(n,r.toString()))}),this.http.get(this.API_URL,{params:e})}getChecklistById(t){return this.http.get(`${this.API_URL}/${t}`)}getReminderStatus(t){return this.http.get(`${this.API_URL}/sessions/${t}/reminder-status`)}static \u0275fac=function(e){return new(e||i)(Ue(It))};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})};var cp=(i,t)=>t.id,AP=(i,t)=>t.order;function MP(i,t){if(i&1&&(s(0,"option",15),d(1),l()),i&2){let e=t.$implicit;S("value",e.id),m(),z(e.vehicleName)}}function FP(i,t){if(i&1&&(s(0,"option",15),d(1),l()),i&2){let e=t.$implicit;S("value",e.id),m(),z(e.arabicName)}}function kP(i,t){i&1&&(s(0,"div",24)(1,"div",26)(2,"span",27),d(3,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),l()()())}function PP(i,t){i&1&&(d(0," \u0645\u0645\u062A\u0627\u0632 "),x(1,"i",44))}function DP(i,t){i&1&&(d(0," \u062C\u064A\u062F "),x(1,"i",45))}function IP(i,t){i&1&&(d(0," \u064A\u062D\u062A\u0627\u062C \u0627\u0646\u062A\u0628\u0627\u0647 "),x(1,"i",46))}function OP(i,t){if(i&1){let e=Q();s(0,"tr",38),T("click",function(){let r=b(e).$implicit,a=h(2);return C(a.viewDetails(r.id))}),s(1,"td")(2,"small"),d(3),l()(),s(4,"td")(5,"strong"),d(6),l()(),s(7,"td"),d(8),l(),s(9,"td",30)(10,"span",39),d(11),l()(),s(12,"td",30)(13,"span",40),d(14),l()(),s(15,"td",30)(16,"span",41),H(17,PP,2,0)(18,DP,2,0)(19,IP,2,0),l()(),s(20,"td",30)(21,"button",42),T("click",function(r){let a=b(e).$implicit;return h(2).viewDetails(a.id),C(r.stopPropagation())}),x(22,"i",43),d(23," \u0639\u0631\u0636 \u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644 "),l()()()}if(i&2){let e=t.$implicit,n=h(2);m(3),z(n.formatDate(e.completedAt)),m(3),z(e.vehicleName),m(2),z(e.driverName),m(3),q(" ",e.totalItems," "),m(2),S("ngClass",e.unavailableItems>0?"bg-danger danger-badge":"bg-success"),m(),q(" ",e.unavailableItems," "),m(2),S("ngClass",n.getStatusBadgeClass(e)),m(),le(e.unavailableItems===0?17:e.unavailableItems<=5?18:19)}}function LP(i,t){if(i&1){let e=Q();s(0,"li",34)(1,"a",35),T("click",function(){let r=b(e).$implicit,a=h(2);return C(a.onPageChange(r))}),d(2),l()()}if(i&2){let e=t.$implicit,n=h(2);fe("active",n.currentPage===e),m(2),z(e)}}function RP(i,t){if(i&1){let e=Q();s(0,"div",28)(1,"table",29)(2,"thead")(3,"tr")(4,"th"),d(5,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E"),l(),s(6,"th"),d(7,"\u0627\u0644\u0645\u0631\u0643\u0628\u0629"),l(),s(8,"th"),d(9,"\u0627\u0644\u0633\u0627\u0626\u0642"),l(),s(10,"th",30),d(11,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0639\u0646\u0627\u0635\u0631"),l(),s(12,"th",30),d(13,"\u063A\u064A\u0631 \u0627\u0644\u0645\u062A\u0648\u0641\u0631\u0629"),l(),s(14,"th",30),d(15,"\u0627\u0644\u062A\u0642\u064A\u064A\u0645"),l(),s(16,"th",30),d(17,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),l()()(),s(18,"tbody"),Te(19,OP,24,8,"tr",31,cp),l()()(),s(21,"nav",32)(22,"ul",33)(23,"li",34)(24,"a",35),T("click",function(){b(e);let r=h();return C(r.onPageChange(r.currentPage-1))}),d(25,"\u0627\u0644\u0633\u0627\u0628\u0642"),l()(),Te(26,LP,3,3,"li",36,pt),s(28,"li",34)(29,"a",35),T("click",function(){b(e);let r=h();return C(r.onPageChange(r.currentPage+1))}),d(30,"\u0627\u0644\u062A\u0627\u0644\u064A"),l()()(),s(31,"p",37),d(32),l()()}if(i&2){let e=h();m(19),Ee(e.checklists()),m(4),fe("disabled",e.currentPage===1),m(3),Ee(e.getPaginationPages()),m(2),fe("disabled",e.currentPage===e.totalPages),m(4),vt(" \u0639\u0631\u0636 ",e.checklists().length," \u0645\u0646 ",e.total," \u0646\u062A\u064A\u062C\u0629 ")}}function NP(i,t){i&1&&(s(0,"div",25),x(1,"i",47),s(2,"h5",5),d(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0642\u0648\u0627\u0626\u0645 \u0641\u062D\u0635 \u0645\u0637\u0627\u0628\u0642\u0629 \u0644\u0644\u0645\u0639\u0627\u064A\u064A\u0631 \u0627\u0644\u0645\u062D\u062F\u062F\u0629"),l()())}function VP(i,t){i&1&&(d(0," \u0645\u062A\u0648\u0641\u0631 "),x(1,"i",105))}function BP(i,t){i&1&&(d(0," \u063A\u064A\u0631 \u0645\u062A\u0648\u0641\u0631 "),x(1,"i",106))}function UP(i,t){if(i&1&&(s(0,"div",2)(1,"div",90)(2,"div",91)(3,"h6",92)(4,"span",93),d(5),l(),d(6),l(),s(7,"span",94),H(8,VP,2,0)(9,BP,2,0),l()(),s(10,"div",95)(11,"div",96)(12,"p",97),x(13,"i",98),d(14," \u0627\u0644\u0641\u0626\u0629: "),s(15,"span",99),d(16),l()()(),s(17,"div",96)(18,"p",97),x(19,"i",100),d(20," \u0627\u0644\u0643\u0645\u064A\u0629: "),s(21,"span",99),d(22),l()()()(),s(23,"div",101)(24,"p",102),x(25,"i",103),d(26," \u0627\u0644\u0645\u0644\u0627\u062D\u0638\u0627\u062A: "),l(),s(27,"p",104),d(28),l()()()()),i&2){let e=t.$implicit;m(),fe("border-danger",!e.isAvailable)("bg-light-red",!e.isAvailable)("border-success",e.isAvailable)("bg-light-green",e.isAvailable),m(4),q("#",e.order,""),m(),q(" ",e.name," "),m(),S("ngClass",e.isAvailable?"bg-success":"bg-danger"),m(),le(e.isAvailable?8:9),m(8),z(e.category),m(6),q(" ",e.quantity!==null?e.quantity:"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"," "),m(),fe("bg-white",!e.isAvailable)("bg-light-subtle",e.isAvailable),m(4),fe("text-danger",!e.isAvailable),m(),q(" ",e.notes||"\u0644\u0627 \u064A\u0648\u062C\u062F \u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0645\u0633\u062C\u0644\u0629."," ")}}function WP(i,t){i&1&&(s(0,"div",2)(1,"div",107),x(2,"i",108),d(3," \u0644\u0627 \u062A\u0648\u062C\u062F \u0639\u0646\u0627\u0635\u0631 \u0645\u0637\u0627\u0628\u0642\u0629 \u0644\u0641\u0644\u062A\u0631 \u0627\u0644\u0639\u0631\u0636 \u0627\u0644\u0645\u062D\u062F\u062F. "),l()())}function jP(i,t){if(i&1&&(s(0,"p",85),d(1),l()),i&2){let e=h(2);m(),z(e.selectedChecklist().generalNotes)}}function HP(i,t){i&1&&(s(0,"p",86),d(1,"\u0644\u0645 \u062A\u0633\u062C\u0644 \u0623\u064A \u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0639\u0627\u0645\u0629 \u0644\u0647\u0630\u0627 \u0627\u0644\u0641\u062D\u0635."),l())}function zP(i,t){if(i&1){let e=Q();x(0,"div",48),s(1,"div",49)(2,"div",50)(3,"div",51)(4,"div",52)(5,"h5",53),x(6,"i",54),d(7," \u062A\u0641\u0627\u0635\u064A\u0644 \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0641\u062D\u0635 ("),s(8,"span",55),d(9),l(),d(10,") "),l(),s(11,"button",56),T("click",function(){b(e);let r=h();return C(r.closeDetailModal())}),l()(),s(12,"div",57)(13,"div",58)(14,"div",59)(15,"p",60),d(16,"\u0627\u0644\u0645\u0631\u0643\u0628\u0629:"),l(),s(17,"p",61),d(18),l()(),s(19,"div",59)(20,"p",60),d(21,"\u0627\u0644\u0633\u0627\u0626\u0642:"),l(),s(22,"p",62),d(23),l()(),s(24,"div",63)(25,"p",60),d(26,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0641\u062D\u0635:"),l(),s(27,"p",62),d(28),l()()(),s(29,"div",64)(30,"div",63)(31,"div",65)(32,"div",66)(33,"h3",67),d(34),l(),s(35,"p",68),d(36,"\u0639\u0646\u0627\u0635\u0631 \u0645\u062A\u0648\u0641\u0631\u0629"),l()()()(),s(37,"div",63)(38,"div",69)(39,"div",66)(40,"h3",70),d(41),l(),s(42,"p",71),d(43,"\u0639\u0646\u0627\u0635\u0631 \u063A\u064A\u0631 \u0645\u062A\u0648\u0641\u0631\u0629"),l()()()(),s(44,"div",63)(45,"div",72)(46,"div",66)(47,"h3",73),d(48),l(),s(49,"p",74),d(50,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0639\u0646\u0627\u0635\u0631"),l()()()()(),s(51,"div",75)(52,"h5",62),x(53,"i",76),d(54," \u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0639\u0646\u0627\u0635\u0631 \u0627\u0644\u0645\u0641\u062D\u0648\u0635\u0629: "),l(),s(55,"div",77)(56,"label",78),d(57,"\u0641\u0644\u062A\u0631\u0629 \u0627\u0644\u0639\u0646\u0627\u0635\u0631:"),l(),s(58,"select",13),V("ngModelChange",function(r){b(e);let a=h();return N(a.itemsFilter,r)||(a.itemsFilter=r),C(r)}),s(59,"option",16),d(60,"\u0627\u0644\u0643\u0644"),l(),s(61,"option",79),d(62,"\u0627\u0644\u0645\u062A\u0648\u0641\u0631\u0629 \u0641\u0642\u0637"),l(),s(63,"option",80),d(64,"\u063A\u064A\u0631 \u0627\u0644\u0645\u062A\u0648\u0641\u0631\u0629 \u0641\u0642\u0637"),l()()()(),s(65,"div",81),Te(66,UP,29,21,"div",2,AP),H(68,WP,4,0,"div",2),l(),s(69,"div",82)(70,"h6",83),x(71,"i",84),s(72,"strong"),d(73,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0639\u0627\u0645\u0629 \u062D\u0648\u0644 \u0627\u0644\u0641\u062D\u0635:"),l()(),H(74,jP,2,1,"p",85)(75,HP,2,0,"p",86),l()(),s(76,"div",87)(77,"button",88),T("click",function(){b(e);let r=h();return C(r.closeDetailModal())}),x(78,"i",89),d(79," \u0625\u063A\u0644\u0627\u0642 "),l()()()()()}if(i&2){let e=h();m(9),z(e.selectedChecklist().vehicleName),m(9),z(e.selectedChecklist().vehicleName),m(5),z(e.selectedChecklist().driverName),m(5),z(e.formatDate(e.selectedChecklist().completedAt)),m(6),z(e.selectedChecklist().availableItems),m(7),z(e.selectedChecklist().unavailableItems),m(7),z(e.selectedChecklist().totalItems),m(10),R("ngModel",e.itemsFilter),m(8),Ee(e.getFilteredItems()),m(2),le(e.getFilteredItems().length===0?68:-1),m(6),le(e.selectedChecklist().generalNotes?74:75)}}var Hc=class i{constructor(t,e,n,r){this.checklistService=t;this.vehicleService=e;this.driverService=n;this.toastService=r}checklists=Z([]);loading=Z(!1);itemsFilter="all";currentPage=1;limit=20;total=0;totalPages=0;Math=Math;filters={startDate:this.getDateDaysAgo(30),endDate:this.getDateTomorrow(),vehicleId:"",driverId:"",completionStatus:"all"};getDateTomorrow(){let t=new Date;return t.setDate(t.getDate()+1),t.toISOString().split("T")[0]}vehicles=Z([]);drivers=Z([]);selectedChecklist=Z(null);showDetailModal=Z(!1);ngOnInit(){this.loadVehicles(),this.loadDrivers(),this.loadChecklists()}loadVehicles(){this.vehicleService.getVehicles({}).subscribe({next:t=>{this.vehicles.set(t.data)},error:t=>{console.error("Failed to load vehicles:",t)}})}getFilteredItems(){let t=this.selectedChecklist();if(!t)return[];let e=t.items||[];switch(this.itemsFilter){case"available":return e.filter(n=>n.isAvailable===!0);case"unavailable":return e.filter(n=>n.isAvailable===!1);case"all":default:return e}}loadDrivers(){this.driverService.getDrivers({}).subscribe({next:t=>{this.drivers.set(t.data)},error:t=>{console.error("Failed to load drivers:",t)}})}loadChecklists(){this.loading.set(!0),this.checklistService.getChecklists(Qe(ve({},this.filters),{page:this.currentPage,limit:this.limit})).subscribe({next:t=>{this.checklists.set(t.data),this.total=t.total,this.totalPages=t.totalPages,this.loading.set(!1)},error:t=>{console.error("Failed to load checklists:",t),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0642\u0648\u0627\u0626\u0645 \u0627\u0644\u0641\u062D\u0635"),this.loading.set(!1)}})}applyFilters(){this.currentPage=1,this.loadChecklists()}resetFilters(){this.filters={startDate:this.getDateDaysAgo(30),endDate:this.getTodayDate(),vehicleId:"",driverId:"",completionStatus:"all"},this.currentPage=1,this.loadChecklists()}viewDetails(t){this.itemsFilter="all",this.checklistService.getChecklistById(t).subscribe({next:e=>{console.log("Loaded checklist details:",e),e.id&&(this.selectedChecklist.set(e),this.showDetailModal.set(!0))},error:e=>{console.error("Failed to load checklist details:",e),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0641\u062D\u0635")}})}closeDetailModal(){this.showDetailModal.set(!1),this.selectedChecklist.set(null)}onPageChange(t){t>=1&&t<=this.totalPages&&(this.currentPage=t,this.loadChecklists())}getPaginationPages(){let t=[],n=Math.max(1,this.currentPage-Math.floor(2.5)),r=Math.min(this.totalPages,n+5-1);r-n<4&&(n=Math.max(1,r-5+1));for(let a=n;a<=r;a++)t.push(a);return t}formatDate(t){return new Date(t).toLocaleString("ar-EG",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}getStatusBadgeClass(t){return t.unavailableItems===0?"bg-success":t.unavailableItems<=5?"bg-warning":"bg-danger"}getDateDaysAgo(t){let e=new Date;return e.setDate(e.getDate()-t),e.toISOString().split("T")[0]}getTodayDate(){return new Date().toISOString().split("T")[0]}static \u0275fac=function(e){return new(e||i)(G(Na),G(oi),G(Ci),G(Ye))};static \u0275cmp=Oe({type:i,selectors:[["app-vehicle-checklists"]],decls:55,vars:9,consts:[[1,"container-fluid","py-4","bg-light-subtle"],[1,"row","justify-content-center"],[1,"col-12"],[1,"card","shadow-lg","checklist-master-card"],[1,"card-header","bg-primary","text-white","p-3","checklist-header"],[1,"mb-0"],[1,"bi","bi-clipboard-data","me-2"],[1,"card-body","p-4"],[1,"row","g-3","mb-4","p-3","rounded-3","filter-box"],[1,"col-md-3"],[1,"form-label","small","text-muted"],["type","date",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"col-md-2"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],["value",""],[3,"value"],["value","all"],["value","completed"],["value","pending"],[1,"col-12","pt-2"],[1,"btn","btn-primary","btn-sm","me-2","search-button",3,"click"],[1,"bi","bi-search","me-1"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"bi","bi-arrow-clockwise","me-1"],[1,"text-center","py-5"],[1,"alert","alert-warning","text-center","mt-4","border-0"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"table-responsive","master-table-container"],[1,"table","table-hover","align-middle","main-checklist-table"],[1,"text-center"],[1,"table-row-clickable"],["aria-label","Pagination",1,"mt-4"],[1,"pagination","justify-content-center"],[1,"page-item"],[1,"page-link",3,"click"],[1,"page-item",3,"active"],[1,"text-center","text-muted","small"],[1,"table-row-clickable",3,"click"],[1,"badge","bg-primary","total-badge"],[1,"badge",3,"ngClass"],[1,"badge","fw-bold",3,"ngClass"],[1,"btn","btn-sm","detail-button",3,"click"],[1,"bi","bi-eye","me-1"],[1,"bi","bi-star-fill"],[1,"bi","bi-info-circle"],[1,"bi","bi-exclamation-triangle-fill"],[1,"bi","bi-exclamation-circle","me-2","fs-5"],[1,"modal-backdrop","fade","show"],["tabindex","-1","role","dialog",1,"modal","fade","show","d-block","detail-modal-v2"],[1,"modal-dialog","modal-xl","modal-dialog-centered","modal-dialog-scrollable"],[1,"modal-content","modal-content-v2"],[1,"modal-header","bg-primary","text-white","p-3","modal-header-v2","justify-content-between"],[1,"modal-title"],[1,"bi","bi-file-text","me-2"],[1,"fw-light"],["type","button",1,"btn-close","btn-close-white","ms-1",3,"click"],[1,"modal-body","p-4"],[1,"row","mb-4","summary-info-box","p-3","rounded-3"],[1,"col-md-4","mb-2","mb-md-0"],[1,"mb-1","text-muted","small"],[1,"mb-0","fw-bold","text-primary"],[1,"mb-0","fw-bold"],[1,"col-md-4"],[1,"row","g-3","mb-4","text-center"],[1,"card","summary-card","border-success","bg-light-green"],[1,"card-body","p-3"],[1,"text-success","mb-1"],[1,"mb-0","small","fw-bold","text-success-emphasis"],[1,"card","summary-card","border-danger","bg-light-red"],[1,"text-danger","mb-1"],[1,"mb-0","small","fw-bold","text-danger-emphasis"],[1,"card","summary-card","border-primary","bg-light-blue"],[1,"text-primary","mb-1"],[1,"mb-0","small","fw-bold","text-primary-emphasis"],[1,"d-flex","justify-content-between","align-items-center","mb-3","border-bottom","pb-2"],[1,"bi","bi-list-check","me-1","text-primary"],[1,"d-flex","align-items-center"],[1,"form-label","mb-0","me-2","small"],["value","available"],["value","unavailable"],[1,"row","g-3","item-detail-grid"],[1,"mt-4","p-3","bg-light","rounded-3","general-notes-box"],[1,"mb-2","border-bottom","pb-1"],[1,"bi","bi-journal-text","me-1","text-primary"],[1,"text-muted","mb-0"],[1,"mb-0","fst-italic","text-muted"],[1,"modal-footer","modal-footer-v2"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"bi","bi-x-circle","me-1"],[1,"card","h-100","p-3","item-card-v2"],[1,"d-flex","justify-content-between","align-items-start","mb-2"],[1,"mb-0","fw-bold","item-name-title"],[1,"text-muted","small","me-2"],[1,"badge","text-uppercase","item-status-badge",3,"ngClass"],[1,"row","g-2","mb-2"],[1,"col-auto"],[1,"mb-0","small"],[1,"bi","bi-tag-fill","me-1","text-secondary"],[1,"fw-normal","text-dark"],[1,"bi","bi-box-fill","me-1","text-secondary"],[1,"item-notes-area","p-2","rounded-2"],[1,"mb-1","small","fw-bold","text-dark"],[1,"bi","bi-chat-left-text-fill","me-1"],[1,"mb-0","small","notes-content"],[1,"bi","bi-check-circle-fill"],[1,"bi","bi-x-octagon-fill"],[1,"alert","alert-info","text-center","mt-3","border-0"],[1,"bi","bi-info-circle","me-2","fs-5"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),x(6,"i",6),d(7," \u0642\u0648\u0627\u0626\u0645 \u0641\u062D\u0635 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A "),l()(),s(8,"div",7)(9,"div",8)(10,"div",9)(11,"label",10),d(12,"\u0645\u0646 \u062A\u0627\u0631\u064A\u062E"),l(),s(13,"input",11),V("ngModelChange",function(a){return N(n.filters.startDate,a)||(n.filters.startDate=a),a}),l()(),s(14,"div",9)(15,"label",10),d(16,"\u0625\u0644\u0649 \u062A\u0627\u0631\u064A\u062E"),l(),s(17,"input",11),V("ngModelChange",function(a){return N(n.filters.endDate,a)||(n.filters.endDate=a),a}),l()(),s(18,"div",12)(19,"label",10),d(20,"\u0627\u0644\u0645\u0631\u0643\u0628\u0629"),l(),s(21,"select",13),V("ngModelChange",function(a){return N(n.filters.vehicleId,a)||(n.filters.vehicleId=a),a}),s(22,"option",14),d(23,"\u0627\u0644\u0643\u0644"),l(),Te(24,MP,2,2,"option",15,cp),l()(),s(26,"div",12)(27,"label",10),d(28,"\u0627\u0644\u0633\u0627\u0626\u0642"),l(),s(29,"select",13),V("ngModelChange",function(a){return N(n.filters.driverId,a)||(n.filters.driverId=a),a}),s(30,"option",14),d(31,"\u0627\u0644\u0643\u0644"),l(),Te(32,FP,2,2,"option",15,cp),l()(),s(34,"div",12)(35,"label",10),d(36,"\u0627\u0644\u062D\u0627\u0644\u0629"),l(),s(37,"select",13),V("ngModelChange",function(a){return N(n.filters.completionStatus,a)||(n.filters.completionStatus=a),a}),s(38,"option",16),d(39,"\u0627\u0644\u0643\u0644"),l(),s(40,"option",17),d(41,"\u0645\u0643\u062A\u0645\u0644"),l(),s(42,"option",18),d(43,"\u0645\u0639\u0644\u0642"),l()()(),s(44,"div",19)(45,"button",20),T("click",function(){return n.applyFilters()}),x(46,"i",21),d(47," \u0628\u062D\u062B "),l(),s(48,"button",22),T("click",function(){return n.resetFilters()}),x(49,"i",23),d(50," \u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 "),l()()(),H(51,kP,4,0,"div",24)(52,RP,33,6)(53,NP,4,0,"div",25),l()()()()(),H(54,zP,80,10)),e&2&&(m(13),R("ngModel",n.filters.startDate),m(4),R("ngModel",n.filters.endDate),m(4),R("ngModel",n.filters.vehicleId),m(3),Ee(n.vehicles()),m(5),R("ngModel",n.filters.driverId),m(3),Ee(n.drivers()),m(5),R("ngModel",n.filters.completionStatus),m(14),le(n.loading()?51:-1),m(),le(!n.loading()&&n.checklists().length>0?52:-1),m(),le(!n.loading()&&n.checklists().length===0?53:-1),m(),le(n.showDetailModal()&&n.selectedChecklist()?54:-1))},dependencies:[Le,Ft,tt,Ot,Lt,et,At,ot,rt],styles:[".bg-light-subtle[_ngcontent-%COMP%]{background-color:#f8f9fa!important}.checklist-master-card[_ngcontent-%COMP%]{border-radius:1rem;overflow:hidden}.checklist-header[_ngcontent-%COMP%]{background-color:#0d6efd!important;border-bottom:3px solid #0a58ca}.filter-box[_ngcontent-%COMP%]{background-color:#f1f5f9;border:1px solid #e0e0e0}.form-select-sm[_ngcontent-%COMP%], .form-control-sm[_ngcontent-%COMP%]{font-size:.875rem}.search-button[_ngcontent-%COMP%]{background-color:#198754;border-color:#198754;font-weight:500}.main-checklist-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#e9ecef;font-weight:600;color:#495057;border-bottom:2px solid #dee2e6}.table-row-clickable[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .2s}.table-row-clickable[_ngcontent-%COMP%]:hover{background-color:#f0f8ff!important}.badge[_ngcontent-%COMP%]{font-size:.9rem;padding:.4rem .8rem;border-radius:.5rem;min-width:80px;display:inline-flex;align-items:center;justify-content:center}.danger-badge[_ngcontent-%COMP%]{background-color:#dc3545!important;animation:_ngcontent-%COMP%_pulse-red 1s infinite alternate}@keyframes _ngcontent-%COMP%_pulse-red{0%{box-shadow:0 0 #dc354566}to{box-shadow:0 0 0 5px #dc354500}}.total-badge[_ngcontent-%COMP%]{background-color:#0d6efd!important}.bg-warning[_ngcontent-%COMP%]{color:#212529!important}.detail-button[_ngcontent-%COMP%]{color:#fff;background-color:#198754;border-radius:5px;transition:all .2s}.detail-modal-v2[_ngcontent-%COMP%]{z-index:1050}.modal-content-v2[_ngcontent-%COMP%]{border-radius:1rem;overflow:hidden}.modal-header-v2[_ngcontent-%COMP%]{background-color:#0d6efd!important}.summary-info-box[_ngcontent-%COMP%]{background-color:#f8f9fa;border:1px solid #e9ecef}.summary-card[_ngcontent-%COMP%]{border-width:2px!important}.bg-light-blue[_ngcontent-%COMP%]{background-color:#e9f0ff!important}.detail-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f1f5f9;font-size:.85rem}.detail-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.85rem;padding:.5rem}.table-danger[_ngcontent-%COMP%]{background-color:#fff0f0!important}.table-success[_ngcontent-%COMP%]{background-color:#e6ffed!important}.item-name-detail[_ngcontent-%COMP%]{color:#333}.item-notes-detail[_ngcontent-%COMP%]{word-break:break-word}.general-notes-box[_ngcontent-%COMP%]{border:1px solid #e9ecef!important}.item-card-v2[_ngcontent-%COMP%]{transition:all .2s ease-in-out;border-radius:.75rem!important;border-left-width:5px!important}.item-name-title[_ngcontent-%COMP%]{color:#0d6efd}.item-status-badge[_ngcontent-%COMP%]{font-size:.8rem;padding:.3rem .6rem;border-radius:.3rem;font-weight:600}.item-notes-area[_ngcontent-%COMP%]{margin-top:.5rem;border:1px solid #dee2e6;min-height:50px}.notes-content[_ngcontent-%COMP%]{white-space:pre-wrap}.bg-light-green[_ngcontent-%COMP%]{background-color:#eaf8ed!important;border-color:#198754!important}.bg-light-red[_ngcontent-%COMP%]{background-color:#fff0f0!important;border-color:#dc3545!important}"]})};var Oi=class i{COOKIE_NAME="selected_vehicle_id";SKIP_COOKIE_NAME="vehicle_selection_skipped";SKIPPED_VALUE="true";constructor(){}getSelectedVehicleId(){let t=document.cookie.split(";");for(let e of t){let[n,r]=e.trim().split("=");if(n===this.COOKIE_NAME)return r}return null}setSelectedVehicleId(t,e=36500){let n=new Date;n.setTime(n.getTime()+e*24*60*60*1e3);let r=`expires=${n.toUTCString()}`;document.cookie=`${this.COOKIE_NAME}=${t};${r};path=/`,this.clearSkipSelection()}hasSelectedVehicle(){return this.getSelectedVehicleId()!==null}clearSelectedVehicle(){document.cookie=`${this.COOKIE_NAME}=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/;`}setSkipSelection(t=36500){let e=new Date;e.setTime(e.getTime()+t*24*60*60*1e3);let n=`expires=${e.toUTCString()}`;document.cookie=`${this.SKIP_COOKIE_NAME}=${this.SKIPPED_VALUE};${n};path=/`,this.clearSelectedVehicle()}hasSkippedSelection(){let t=document.cookie.split(";");for(let e of t){let[n,r]=e.trim().split("=");if(n===this.SKIP_COOKIE_NAME&&r===this.SKIPPED_VALUE)return!0}return!1}clearSkipSelection(){document.cookie=`${this.SKIP_COOKIE_NAME}=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/;`}hasCompletedSelection(){return this.hasSelectedVehicle()||this.hasSkippedSelection()}static \u0275fac=function(e){return new(e||i)};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})};function GP(i,t){if(i&1){let e=Q();s(0,"button",26),T("click",function(){let r=b(e).$implicit,a=h();return C(a.updateDriverStatus(r))}),x(1,"i"),s(2,"span",27),d(3),l()()}if(i&2){let e=t.$implicit;cm("btn ",e.btnClass," ",e.textClass," action-btn p-3 d-flex align-items-center"),m(),_i("",e.icon," fa-fw fa-lg me-3"),m(2),z(e.label)}}function $P(i,t){if(i&1){let e=Q();s(0,"button",26),T("click",function(){let r=b(e).$implicit,a=h();return C(a.updateVehicleStatus(r))}),x(1,"i"),s(2,"span",27),d(3),l()()}if(i&2){let e=t.$implicit;cm("btn ",e.btnClass," ",e.textClass," action-btn p-3 d-flex align-items-center"),m(),_i("",e.icon," fa-fw fa-lg me-3"),m(2),z(e.label)}}function ZP(i,t){if(i&1){let e=Q();s(0,"button",26),T("click",function(){let r=b(e).$implicit,a=h();return C(a.updateVehicleStatus(r))}),x(1,"i"),s(2,"span",27),d(3),l()()}if(i&2){let e=t.$implicit;_i("btn ",e.btnClass," action-btn p-3 d-flex align-items-center"),m(),_i("",e.icon," fa-fw fa-lg me-3"),m(2),z(e.label)}}var zc=class i{constructor(t,e,n,r,a,u){this.globalVarsService=t;this.toastService=e;this.vehicleService=n;this.driverService=r;this.authService=a;this.vehicleCookieService=u;this.globalVarsService.setGlobalHeader("\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u062D\u0627\u0644\u0629"),this.vehicleId=this.vehicleCookieService.getSelectedVehicleId()||""}vehicleId="";driverId="";isAdmin=We(()=>this.authService.isAdmin());currentDriverStatus={title:"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644...",description:"\u062C\u0627\u0631\u064A \u062C\u0644\u0628 \u062D\u0627\u0644\u062A\u0643 \u0627\u0644\u0634\u062E\u0635\u064A\u0629.",icon:"fa-solid fa-spinner fa-spin",alertClass:"alert-primary"};currentVehicleStatus={title:"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644...",description:"\u062C\u0627\u0631\u064A \u062C\u0644\u0628 \u062D\u0627\u0644\u0629 \u0627\u0644\u0645\u0631\u0643\u0628\u0629.",icon:"fa-solid fa-spinner fa-spin",alertClass:"alert-primary"};additionalInfo={startTime:"N/A",currentLocation:"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u062F\u064A\u062B"};driverStatusActions=[{label:"\u0645\u062A\u0627\u062D",icon:"fa-solid fa-user-check",btnClass:"btn-success",textClass:"text-white",status:"\u0645\u062A\u0627\u062D"},{label:"\u0641\u064A \u0631\u062D\u0644\u0629",icon:"fa-solid fa-truck-medical",btnClass:"btn-info",textClass:"text-white",status:"\u0641\u064A \u0631\u062D\u0644\u0629"},{label:"\u063A\u064A\u0631 \u0645\u062A\u0635\u0644",icon:"fa-solid fa-user-slash",btnClass:"btn-secondary",textClass:"text-white",status:"\u063A\u064A\u0631 \u0645\u062A\u0635\u0644"}];mainActions=[{label:"\u0645\u064F\u062A\u0627\u062D",icon:"fa-solid fa-shield-heart",btnClass:"btn-success",textClass:"text-white",status:"\u0645\u062A\u0627\u062D\u0629"},{label:"\u0641\u064A \u0627\u0644\u0637\u0631\u064A\u0642 \u0644\u0644\u0645\u0631\u064A\u0636",icon:"fa-solid fa-route",btnClass:"btn-warning",textClass:"text-dark",status:"\u0641\u064A \u0627\u0644\u0637\u0631\u064A\u0642 \u0644\u0644\u0645\u0631\u064A\u0636"},{label:"\u0641\u064A \u0627\u0644\u0645\u0648\u0642\u0639",icon:"fa-solid fa-location-dot",btnClass:"btn-info",textClass:"text-white",status:"\u0641\u064A \u0627\u0644\u0645\u0648\u0642\u0639"},{label:"\u0641\u064A \u0627\u0644\u0637\u0631\u064A\u0642 \u0644\u0644\u0645\u0633\u062A\u0634\u0641\u0649",icon:"fa-solid fa-truck-medical",btnClass:"btn-info",textClass:"text-white",status:"\u0641\u064A \u0627\u0644\u0637\u0631\u064A\u0642 \u0644\u0644\u0645\u0633\u062A\u0634\u0641\u0649"},{label:"\u0641\u064A \u0627\u0644\u0648\u062C\u0647\u0629",icon:"fa-solid fa-hospital",btnClass:"btn-info",textClass:"text-white",status:"\u0641\u064A \u0627\u0644\u0648\u062C\u0647\u0629"}];offDutyActions=[{label:"\u062E\u0627\u0631\u062C \u0627\u0644\u062E\u062F\u0645\u0629",icon:"fa-solid fa-circle-xmark",btnClass:"btn-secondary",status:"\u062E\u0627\u0631\u062C \u0627\u0644\u062E\u062F\u0645\u0629"},{label:"\u0625\u0646\u0647\u0627\u0621 \u0627\u0644\u0645\u0646\u0627\u0648\u0628\u0629",icon:"fa-solid fa-right-from-bracket",btnClass:"btn-danger",status:"\u0625\u0646\u0647\u0627\u0621 \u0627\u0644\u062E\u062F\u0645\u0629"}];ngOnInit(){this.loadDriverStatus(),this.loadVehicleStatus()}loadDriverStatus(){if(this.authService.isAdmin()){this.currentDriverStatus={title:"\u0645\u0633\u0624\u0648\u0644 \u0627\u0644\u0646\u0638\u0627\u0645",description:"\u0623\u0646\u062A \u0645\u0633\u062C\u0644 \u0643\u0645\u0633\u0624\u0648\u0644 \u0648\u0644\u064A\u0633 \u0643\u0633\u0627\u0626\u0642. \u0644\u0627 \u064A\u0645\u0643\u0646 \u062A\u062D\u062F\u064A\u062B \u062D\u0627\u0644\u0629 \u0627\u0644\u0633\u0627\u0626\u0642.",icon:"fa-solid fa-user-shield",alertClass:"alert-info"};return}this.driverService.getCurrentDriver().subscribe({next:t=>{this.driverId=t.id,this.updateDriverUIStatus(t.arabicStatus)},error:t=>{console.error("Failed to load driver status:",t),this.currentDriverStatus={title:"\u0641\u0634\u0644 \u0627\u0644\u062A\u062D\u0645\u064A\u0644",description:"\u062A\u0639\u0630\u0631 \u062C\u0644\u0628 \u062D\u0627\u0644\u062A\u0643 \u0627\u0644\u0634\u062E\u0635\u064A\u0629 \u0645\u0646 \u0627\u0644\u062E\u0627\u062F\u0645.",icon:"fa-solid fa-wifi-slash",alertClass:"alert-danger"},this.toastService.error("\u0641\u0634\u0644 \u062C\u0644\u0628 \u0627\u0644\u062D\u0627\u0644\u0629 \u0627\u0644\u0634\u062E\u0635\u064A\u0629.",5e3)}})}loadVehicleStatus(){if(!this.vehicleId){this.currentVehicleStatus={title:"\u062E\u0637\u0623",description:"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0645\u064F\u0639\u0631\u0641 \u0627\u0644\u0645\u0631\u0643\u0628\u0629.",icon:"fa-solid fa-triangle-exclamation",alertClass:"alert-danger"},this.toastService.error("Vehicle ID is missing.",5e3);return}this.vehicleService.getVehicleById(this.vehicleId).subscribe({next:t=>{this.updateVehicleUIStatus(t.status),this.additionalInfo.startTime="14:30",this.additionalInfo.currentLocation="\u0645\u064F\u062D\u062F\u062F \u0628\u0648\u0627\u0633\u0637\u0629 GPS"},error:t=>{console.error("Failed to load vehicle status:",t),this.currentVehicleStatus={title:"\u0641\u0634\u0644 \u0627\u0644\u062A\u062D\u0645\u064A\u0644",description:"\u062A\u0639\u0630\u0631 \u062C\u0644\u0628 \u062D\u0627\u0644\u0629 \u0627\u0644\u0645\u0631\u0643\u0628\u0629 \u0645\u0646 \u0627\u0644\u062E\u0627\u062F\u0645.",icon:"fa-solid fa-wifi-slash",alertClass:"alert-danger"},this.toastService.error("\u0641\u0634\u0644 \u062C\u0644\u0628 \u062D\u0627\u0644\u0629 \u0627\u0644\u0645\u0631\u0643\u0628\u0629.",5e3)}})}getDriverStatusDisplayProps(t){let e=this.driverStatusActions.find(n=>n.status===t);if(e){let n=e.btnClass.replace("btn-","alert-");return{title:e.label,icon:e.icon,alertClass:n}}return{title:t,icon:"fa-solid fa-question-circle",alertClass:"alert-secondary"}}updateDriverUIStatus(t){let e=(t||"").trim(),n=this.getDriverStatusDisplayProps(e);switch(this.currentDriverStatus.title=n.title,this.currentDriverStatus.icon=n.icon,this.currentDriverStatus.alertClass=n.alertClass,e){case"\u0645\u062A\u0627\u062D":this.currentDriverStatus.description="\u0623\u0646\u062A \u0645\u062A\u0627\u062D \u0644\u0627\u0633\u062A\u0642\u0628\u0627\u0644 \u0627\u0644\u0631\u062D\u0644\u0627\u062A.";break;case"\u0641\u064A \u0631\u062D\u0644\u0629":this.currentDriverStatus.description="\u0623\u0646\u062A \u062D\u0627\u0644\u064A\u0627\u064B \u0641\u064A \u0631\u062D\u0644\u0629 \u0646\u0634\u0637\u0629.";break;case"\u063A\u064A\u0631 \u0645\u062A\u0635\u0644":this.currentDriverStatus.description="\u0623\u0646\u062A \u063A\u064A\u0631 \u0645\u062A\u0635\u0644 \u062D\u0627\u0644\u064A\u0627\u064B.";break;default:console.warn("Unknown driver status:",e),this.currentDriverStatus.description="\u062D\u0627\u0644\u0629 \u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641\u0629."}}getVehicleStatusDisplayProps(t){let n=[...this.mainActions,...this.offDutyActions].find(r=>r.status===t);if(n){let r=n.btnClass.replace("btn-","alert-");return{title:n.label,icon:n.icon,alertClass:r}}return{title:t,icon:"fa-solid fa-question-circle",alertClass:"alert-secondary"}}updateVehicleUIStatus(t){let e=this.getVehicleStatusDisplayProps(t);switch(this.currentVehicleStatus.title=e.title,this.currentVehicleStatus.icon=e.icon,this.currentVehicleStatus.alertClass=e.alertClass,t){case"\u0645\u062A\u0627\u062D\u0629":this.currentVehicleStatus.description="\u0627\u0644\u0645\u0631\u0643\u0628\u0629 \u062C\u0627\u0647\u0632\u0629 \u0644\u0644\u0627\u0633\u062A\u062C\u0627\u0628\u0629 \u0644\u0644\u062D\u0627\u0644\u0627\u062A.";break;case"\u0641\u064A \u0627\u0644\u0637\u0631\u064A\u0642 \u0644\u0644\u0645\u0631\u064A\u0636":this.currentVehicleStatus.description="\u0627\u0644\u0645\u0631\u0643\u0628\u0629 \u0641\u064A \u0627\u0644\u0637\u0631\u064A\u0642 \u0625\u0644\u0649 \u0645\u0631\u064A\u0636.";break;case"\u0641\u064A \u0627\u0644\u0645\u0648\u0642\u0639":this.currentVehicleStatus.description="\u0627\u0644\u0645\u0631\u0643\u0628\u0629 \u0645\u062A\u0648\u0627\u062C\u062F\u0629 \u0641\u064A \u0645\u0648\u0642\u0639 \u0627\u0644\u0645\u0631\u064A\u0636.";break;case"\u0641\u064A \u0627\u0644\u0637\u0631\u064A\u0642 \u0644\u0644\u0645\u0633\u062A\u0634\u0641\u0649":this.currentVehicleStatus.description="\u0627\u0644\u0645\u0631\u0643\u0628\u0629 \u0641\u064A \u0627\u0644\u0637\u0631\u064A\u0642 \u0644\u0644\u0645\u0633\u062A\u0634\u0641\u0649/\u0627\u0644\u0648\u062C\u0647\u0629.";break;case"\u0641\u064A \u0627\u0644\u0648\u062C\u0647\u0629":this.currentVehicleStatus.description="\u0627\u0644\u0645\u0631\u0643\u0628\u0629 \u0648\u0635\u0644\u062A \u0625\u0644\u0649 \u0627\u0644\u0645\u0633\u062A\u0634\u0641\u0649/\u0627\u0644\u0648\u062C\u0647\u0629.";break;case"\u062E\u0627\u0631\u062C \u0627\u0644\u062E\u062F\u0645\u0629":this.currentVehicleStatus.description="\u0627\u0644\u0645\u0631\u0643\u0628\u0629 \u063A\u064A\u0631 \u0645\u062A\u0627\u062D\u0629 \u0645\u0624\u0642\u062A\u0627\u064B (\u0627\u0633\u062A\u0631\u0627\u062D\u0629\u060C \u0635\u064A\u0627\u0646\u0629\u060C \u0625\u0644\u062E).";break;case"\u0625\u0646\u0647\u0627\u0621 \u0627\u0644\u062E\u062F\u0645\u0629":this.currentVehicleStatus.description="\u062A\u0645 \u0625\u0646\u0647\u0627\u0621 \u062E\u062F\u0645\u0629 \u0627\u0644\u0645\u0631\u0643\u0628\u0629 \u0644\u0647\u0630\u0627 \u0627\u0644\u064A\u0648\u0645.";break;default:this.currentVehicleStatus.description="\u062D\u0627\u0644\u0629 \u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641\u0629."}}updateDriverStatus(t){if(this.authService.isAdmin()){this.toastService.error("\u0644\u0627 \u064A\u0645\u0643\u0646 \u062A\u062D\u062F\u064A\u062B \u062D\u0627\u0644\u0629 \u0627\u0644\u0633\u0627\u0626\u0642 \u0644\u0623\u0646\u0643 \u0645\u0633\u062C\u0644 \u0643\u0645\u0633\u0624\u0648\u0644.",5e3);return}if(!this.driverId){this.toastService.error("\u062A\u0639\u0630\u0631 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u062D\u0627\u0644\u0629: \u0645\u064F\u0639\u0631\u0641 \u0627\u0644\u0633\u0627\u0626\u0642 \u0645\u0641\u0642\u0648\u062F.",5e3);return}this.driverService.updateStatus(this.driverId,t.status).subscribe({next:()=>{this.updateDriverUIStatus(t.status),this.toastService.success(`\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u062D\u0627\u0644\u062A\u0643 \u0625\u0644\u0649: ${t.label}`,3e3)},error:e=>{console.error("Driver status update failed:",e),this.toastService.error(`\u0641\u0634\u0644 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u062D\u0627\u0644\u0629 \u0625\u0644\u0649 ${t.label}.`,5e3)}})}updateVehicleStatus(t){if(!this.vehicleId){this.toastService.error("\u062A\u0639\u0630\u0631 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u062D\u0627\u0644\u0629: \u0645\u064F\u0639\u0631\u0641 \u0627\u0644\u0645\u0631\u0643\u0628\u0629 \u0645\u0641\u0642\u0648\u062F.",5e3);return}let e=["\u062E\u0627\u0631\u062C \u0627\u0644\u062E\u062F\u0645\u0629","\u0625\u0646\u0647\u0627\u0621 \u0627\u0644\u062E\u062F\u0645\u0629"].includes(t.status);this.vehicleService.updateStatus(this.vehicleId,t.status,e).subscribe({next:()=>{this.updateVehicleUIStatus(t.status),this.toastService.success(`\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u062D\u0627\u0644\u0629 \u0627\u0644\u0645\u0631\u0643\u0628\u0629 \u0625\u0644\u0649: ${t.label}`,3e3)},error:n=>{console.error("Vehicle status update failed:",n),this.toastService.error(`\u0641\u0634\u0644 \u062A\u062D\u062F\u064A\u062B \u062D\u0627\u0644\u0629 \u0627\u0644\u0645\u0631\u0643\u0628\u0629 \u0625\u0644\u0649 ${t.label}.`,5e3)}})}static \u0275fac=function(e){return new(e||i)(G(ft),G(Ye),G(oi),G(Ci),G(Pt),G(Oi))};static \u0275cmp=Oe({type:i,selectors:[["app-status-update"]],decls:58,vars:27,consts:[["dir","rtl"],[1,"container-fluid","main-content-padding"],[1,"desktop-layout"],[1,"status-column"],[1,"status-card","mb-4"],[1,"fs-5","fw-bold","mb-3"],[1,"fa-solid","fa-user","me-2"],["role","alert"],[1,"alert-heading","fs-6","fw-bold","mb-1"],[1,"mb-0"],[1,"status-card"],[1,"fa-solid","fa-ambulance","me-2"],[1,"desktop-only-info","mt-4"],[1,"info-card","p-3","bg-light","rounded"],[1,"fs-6","fw-bold","mb-2"],[1,"fa-solid","fa-info-circle","me-2"],[1,"small","text-muted"],[1,"mb-2"],[1,"fa-solid","fa-clock","me-2"],[1,"fa-solid","fa-map-marker-alt","me-2"],[1,"actions-column"],[1,"actions-card","mb-4"],[1,"fs-5","fw-bold","mb-3","card-title"],[1,"action-buttons-grid"],["type","button",3,"class","click",4,"ngFor","ngForOf"],[1,"actions-card"],["type","button",3,"click"],[1,"fw-bold","fs-6","mx-2"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"main",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),x(6,"i",6),d(7," \u062D\u0627\u0644\u062A\u064A \u0627\u0644\u0634\u062E\u0635\u064A\u0629 "),l(),s(8,"div",7)(9,"div"),x(10,"i"),l(),s(11,"div")(12,"h4",8),d(13),l(),s(14,"p",9),d(15),l()()()(),s(16,"div",10)(17,"h3",5),x(18,"i",11),d(19," \u062D\u0627\u0644\u0629 \u0627\u0644\u0645\u0631\u0643\u0628\u0629 "),l(),s(20,"div",7)(21,"div"),x(22,"i"),l(),s(23,"div")(24,"h4",8),d(25),l(),s(26,"p",9),d(27),l()()(),s(28,"div",12)(29,"div",13)(30,"h4",14),x(31,"i",15),d(32," \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629 "),l(),s(33,"div",16)(34,"p",17),x(35,"i",18),d(36),l(),s(37,"p",9),x(38,"i",19),d(39),l()()()()()(),s(40,"div",20)(41,"div",21)(42,"h3",22),x(43,"i",6),d(44," \u062A\u062D\u062F\u064A\u062B \u062D\u0627\u0644\u062A\u064A \u0627\u0644\u0634\u062E\u0635\u064A\u0629 "),l(),s(45,"div",23),H(46,GP,4,8,"button",24),l()(),s(47,"div",21)(48,"h3",22),x(49,"i",11),d(50," \u062A\u062D\u062F\u064A\u062B \u062D\u0627\u0644\u0629 \u0627\u0644\u0645\u0631\u0643\u0628\u0629 "),l(),s(51,"div",23),H(52,$P,4,8,"button",24),l()(),s(53,"div",25)(54,"h3",22),d(55,"\u062E\u064A\u0627\u0631\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629"),l(),s(56,"div",23),H(57,ZP,4,7,"button",24),l()()()()()()),e&2&&(m(8),_i("alert ",n.currentDriverStatus.alertClass," d-flex align-items-center current-status-alert"),m(),_i("status-icon-wrapper ",n.currentDriverStatus.alertClass," me-3"),m(),_i("",n.currentDriverStatus.icon," fa-xl"),m(3),z(n.currentDriverStatus.title),m(2),z(n.currentDriverStatus.description),m(5),_i("alert ",n.currentVehicleStatus.alertClass," d-flex align-items-center current-status-alert"),m(),_i("status-icon-wrapper ",n.currentVehicleStatus.alertClass," me-3"),m(),_i("",n.currentVehicleStatus.icon," fa-xl"),m(3),z(n.currentVehicleStatus.title),m(2),z(n.currentVehicleStatus.description),m(9),q(" \u0648\u0642\u062A \u0628\u062F\u0621 \u0627\u0644\u062D\u0627\u0644\u0629: ",n.additionalInfo.startTime," "),m(3),q(" \u0627\u0644\u0645\u0648\u0642\u0639 \u0627\u0644\u062D\u0627\u0644\u064A: ",n.additionalInfo.currentLocation," "),m(7),S("ngForOf",n.driverStatusActions),m(6),S("ngForOf",n.mainActions),m(5),S("ngForOf",n.offDutyActions))},dependencies:[Le,ai],styles:[".desktop-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:100;box-shadow:0 2px 4px #0000001a}.avatar-icon-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:50%;border:2px solid var(--bs-primary);color:var(--bs-primary);background-color:var(--bs-light)}.user-name[_ngcontent-%COMP%]{min-width:60px;text-align:left}.status-icon-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:50px;height:50px;border-radius:50%;flex-shrink:0}.status-icon-wrapper.alert-warning[_ngcontent-%COMP%]{background-color:var(--bs-warning);color:var(--bs-dark)}.status-icon-wrapper.alert-success[_ngcontent-%COMP%]{background-color:var(--bs-success);color:var(--bs-white)}.status-icon-wrapper.alert-info[_ngcontent-%COMP%]{background-color:var(--bs-info);color:var(--bs-white)}.alert-warning[_ngcontent-%COMP%]   .status-icon-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--bs-dark)}.current-status-alert[_ngcontent-%COMP%]{border-radius:12px;border:none;box-shadow:0 2px 8px #0000001a}.main-content-padding[_ngcontent-%COMP%]{padding:1.5rem;padding-bottom:100px}.action-btn[_ngcontent-%COMP%]{border-radius:10px;transition:all .3s ease;text-align:start!important;border:none;box-shadow:0 2px 4px #0000001a}.action-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.action-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.desktop-layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.status-column[_ngcontent-%COMP%], .actions-column[_ngcontent-%COMP%]{width:100%}.action-buttons-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1rem}.card-title[_ngcontent-%COMP%], .desktop-only-info[_ngcontent-%COMP%]{display:none}@media (min-width: 768px){.main-content-padding[_ngcontent-%COMP%]{padding:2rem}.action-buttons-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:1rem}.desktop-header[_ngcontent-%COMP%]{position:static}}@media (min-width: 992px){.main-content-padding[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:3rem 2rem}.desktop-layout[_ngcontent-%COMP%]{flex-direction:row;gap:2rem;align-items:flex-start}.status-column[_ngcontent-%COMP%]{width:40%;position:sticky;top:2rem}.actions-column[_ngcontent-%COMP%]{width:60%}.status-card[_ngcontent-%COMP%], .actions-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2rem;box-shadow:0 4px 16px #0000001a}.card-title[_ngcontent-%COMP%]{display:block;color:var(--bs-dark);border-bottom:1px solid var(--bs-primary);padding-bottom:.75rem}.desktop-only-info[_ngcontent-%COMP%]{display:block}.info-card[_ngcontent-%COMP%]{border:1px solid #e9ecef}.current-status-alert[_ngcontent-%COMP%]{font-size:1.1rem}.action-buttons-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (min-width: 1200px){.main-content-padding[_ngcontent-%COMP%]{padding:3rem}.actions-column[_ngcontent-%COMP%]   .action-buttons-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:1.25rem}.status-card[_ngcontent-%COMP%], .actions-card[_ngcontent-%COMP%]{padding:2.5rem}}@media (min-width: 1400px){.main-content-padding[_ngcontent-%COMP%]{max-width:1600px}.desktop-layout[_ngcontent-%COMP%]{gap:3rem}}.btn-info[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}@media print{.desktop-header[_ngcontent-%COMP%]{position:static}.action-btn[_ngcontent-%COMP%]{box-shadow:none;border:1px solid #dee2e6}.desktop-layout[_ngcontent-%COMP%]{flex-direction:column}.status-column[_ngcontent-%COMP%], .actions-column[_ngcontent-%COMP%]{width:100%}}"]})};var qP=()=>[];function YP(i,t){if(i&1&&(s(0,"option",38),d(1),l()),i&2){let e=t.$implicit;S("value",e.value),m(),q(" ",e.name," ")}}function XP(i,t){if(i&1&&(s(0,"option",38),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),q(" ",e," ")}}function KP(i,t){if(i&1&&(s(0,"option",38),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),q(" ",e," ")}}function JP(i,t){i&1&&(s(0,"div",39)(1,"div",40)(2,"span",41),d(3,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),l()()())}function QP(i,t){i&1&&(s(0,"div",39),x(1,"i",42),s(2,"p",43),d(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0631\u062D\u0644\u0627\u062A \u0633\u0627\u0628\u0642\u0629"),l()())}function eD(i,t){if(i&1){let e=Q();s(0,"div",47)(1,"div",48),T("click",function(){let r=b(e).$implicit,a=h(2);return C(a.viewTripDetails(r))}),s(2,"div",49),x(3,"div",50),s(4,"div",51)(5,"div",52)(6,"h6",53),x(7,"i",54),d(8),s(9,"small",43),d(10),l()(),s(11,"h6",55),d(12),l()(),s(13,"div",56)(14,"p",57),x(15,"i",58),d(16),l(),s(17,"p",57),x(18,"i",59),d(19),l()(),s(20,"div",60)(21,"p",61),x(22,"i",62),d(23," \u0627\u0644\u0633\u0627\u0626\u0642: "),s(24,"span",63),d(25),l()(),s(26,"p",57),x(27,"i",64),d(28," \u0627\u0644\u0636\u0627\u0628\u0637: "),s(29,"span",63),d(30),l()()(),s(31,"p",65),x(32,"i",66),s(33,"span",67),d(34,"\u0627\u0644\u062A\u0634\u062E\u064A\u0635:"),l(),d(35),l(),s(36,"div",68)(37,"span"),x(38,"i",69),d(39),l(),x(40,"i",70),s(41,"span"),x(42,"i",71),d(43),l()(),s(44,"div",16)(45,"div")(46,"small",43),x(47,"i",72),d(48),l()(),s(49,"span"),d(50),l()()()()()()}if(i&2){let e=t.$implicit,n=h(2);m(3),dt("background-color",n.getStatusColor(e.transferStatus)),m(5),q(" ",e.patientName," "),m(2),q("(",e.patientAge," \u0633\u0646\u0629)"),m(2),q("\u20AA",(e.driverShare||0).toFixed(2),""),m(4),q(" ",n.formatDate(e.day,e.month,e.year)," "),m(3),vt(" ",n.formatTime(e.start)," - ",n.formatTime(e.end)," "),m(6),z(e.driver),m(5),z(e.paramedic),m(5),q(" ",e.diagnosis," "),m(4),q(" ",e.transferFrom," "),m(4),q(" ",e.transferTo," "),m(5),q(" \u0633\u0648\u0644\u0627\u0631: ",e.diesel.toFixed(1)," \u0644\u062A\u0631 "),m(),_i("badge rounded-pill ",n.getStatusBadgeClass(e.transferStatus),""),m(),q(" ",e.transferStatus," ")}}function tD(i,t){i&1&&(s(0,"div",73),x(1,"i",74),s(2,"p",75),d(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0631\u062D\u0644\u0627\u062A \u0641\u064A \u0647\u0630\u0647 \u0627\u0644\u0641\u062A\u0631\u0629"),l()())}function iD(i,t){if(i&1&&(s(0,"div",44),H(1,eD,51,18,"div",45)(2,tD,4,0,"div",46),l()),i&2){let e=h();m(),S("ngForOf",e.getPaginatedTrips()),m(),S("ngIf",e.filteredTrips.length===0)}}function nD(i,t){if(i&1){let e=Q();s(0,"li",79)(1,"button",80),T("click",function(){let r=b(e).index,a=h(2);return C(a.goToPage(r+1))}),d(2),l()()}if(i&2){let e=t.index,n=h(2);fe("active",n.currentPage===e+1),m(2),q(" ",e+1," ")}}function rD(i,t){if(i&1){let e=Q();s(0,"div",76)(1,"nav",77)(2,"ul",78)(3,"li",79)(4,"button",80),T("click",function(){b(e);let r=h();return C(r.previousPage())}),x(5,"i",81),l()(),H(6,nD,3,3,"li",82),s(7,"li",79)(8,"button",80),T("click",function(){b(e);let r=h();return C(r.nextPage())}),x(9,"i",83),l()()()()()}if(i&2){let e=h();m(3),fe("disabled",e.currentPage===1),m(3),S("ngForOf",Ei(5,qP).constructor(e.totalPages)),m(),fe("disabled",e.currentPage===e.totalPages)}}var Gc=class i{constructor(t,e,n,r,a){this.tripService=t;this.authService=e;this.toastService=n;this.vehicleCookieService=r;this.router=a;let u=this.authService.currentUser();this.driverId=u?.id||"",this.vehicleId=this.vehicleCookieService.getSelectedVehicleId()||""}trips=[];filteredTrips=[];selectedStatus="All";searchTerm="";selectedMonth=new Date().getMonth()+1;selectedYear=new Date().getFullYear();historyView="vehicle";vehicleId="";driverId="";isLoading=!1;totalTrips=0;totalEarnings=0;completedTrips=0;currentPage=1;itemsPerPage=10;totalPages=1;transferStatuses=["\u0645\u064A\u062F\u0627\u0646\u064A","\u062A\u0645 \u0627\u0644\u0646\u0642\u0644","\u0628\u0644\u0627\u063A \u0643\u0627\u0630\u0628","\u064A\u0646\u0642\u0644","\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0646\u0642\u0644","\u0635\u064A\u0627\u0646\u0629","\u0631\u0641\u0636 \u0627\u0644\u0646\u0642\u0644","\u0627\u062E\u0631\u0649"];months=[{value:1,name:"\u064A\u0646\u0627\u064A\u0631"},{value:2,name:"\u0641\u0628\u0631\u0627\u064A\u0631"},{value:3,name:"\u0645\u0627\u0631\u0633"},{value:4,name:"\u0623\u0628\u0631\u064A\u0644"},{value:5,name:"\u0645\u0627\u064A\u0648"},{value:6,name:"\u064A\u0648\u0646\u064A\u0648"},{value:7,name:"\u064A\u0648\u0644\u064A\u0648"},{value:8,name:"\u0623\u063A\u0633\u0637\u0633"},{value:9,name:"\u0633\u0628\u062A\u0645\u0628\u0631"},{value:10,name:"\u0623\u0643\u062A\u0648\u0628\u0631"},{value:11,name:"\u0646\u0648\u0641\u0645\u0628\u0631"},{value:12,name:"\u062F\u064A\u0633\u0645\u0628\u0631"}];years=[];ngOnInit(){this.generateYears(),this.loadTrips()}generateYears(){let t=new Date().getFullYear();for(let e=t;e>=t-5;e--)this.years.push(e)}toggleHistoryView(){this.historyView=this.historyView==="vehicle"?"driver":"vehicle",this.loadTrips()}loadTrips(){this.isLoading=!0,(this.historyView==="vehicle"?this.tripService.getVehicleHistoricalTrips(this.vehicleId):this.tripService.getDriverHistoricalTrips(this.driverId)).subscribe({next:e=>{this.trips=e,this.applyFilters(),this.calculateStatistics(),this.isLoading=!1},error:e=>{console.error("Failed to load trips:",e),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0631\u062D\u0644\u0627\u062A \u0627\u0644\u0633\u0627\u0628\u0642\u0629"),this.isLoading=!1}})}viewTripDetails(t){this.router.navigate(["/user/trip-form",t.id],{queryParams:{mode:"view"}})}applyFilters(){this.filteredTrips=this.trips.filter(t=>{let e=this.selectedStatus==="All"||t.transferStatus===this.selectedStatus,n=t.month===this.selectedMonth,r=t.year===this.selectedYear,a=this.searchTerm===""||t.patientName.includes(this.searchTerm)||t.transferFrom.includes(this.searchTerm)||t.transferTo.includes(this.searchTerm);return e&&n&&r&&a}),this.totalPages=Math.ceil(this.filteredTrips.length/this.itemsPerPage),this.currentPage=1}calculateStatistics(){this.totalTrips=this.filteredTrips.length,this.completedTrips=this.filteredTrips.filter(t=>t.transferStatus==="\u062A\u0645 \u0627\u0644\u0646\u0642\u0644").length,this.totalEarnings=this.filteredTrips.reduce((t,e)=>t+(e.driverShare||0),0)}getPaginatedTrips(){let t=(this.currentPage-1)*this.itemsPerPage,e=t+this.itemsPerPage;return this.filteredTrips.slice(t,e)}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}previousPage(){this.currentPage>1&&this.currentPage--}goToPage(t){this.currentPage=t}getStatusBadgeClass(t){return{"\u062A\u0645 \u0627\u0644\u0646\u0642\u0644":"bg-success",\u0645\u064A\u062F\u0627\u0646\u064A:"bg-primary",\u064A\u0646\u0642\u0644:"bg-info","\u0628\u0644\u0627\u063A \u0643\u0627\u0630\u0628":"bg-warning","\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0646\u0642\u0644":"bg-danger",\u0635\u064A\u0627\u0646\u0629:"bg-secondary","\u0631\u0641\u0636 \u0627\u0644\u0646\u0642\u0644":"bg-dark",\u0627\u062E\u0631\u0649:"bg-secondary"}[t]||"bg-secondary"}getStatusColor(t){return{"\u062A\u0645 \u0627\u0644\u0646\u0642\u0644":"#28A745",\u0645\u064A\u062F\u0627\u0646\u064A:"#007BFF",\u064A\u0646\u0642\u0644:"#17A2B8","\u0628\u0644\u0627\u063A \u0643\u0627\u0630\u0628":"#FFC107","\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0646\u0642\u0644":"#DC3545",\u0635\u064A\u0627\u0646\u0629:"#6C757D","\u0631\u0641\u0636 \u0627\u0644\u0646\u0642\u0644":"#343A40",\u0627\u062E\u0631\u0649:"#6C757D"}[t]||"#6C757D"}formatTime(t){let e=Math.floor(t/60),n=t%60;return`${e.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}formatDate(t,e,n){return`${t}/${e}/${n}`}formatDistance(t){return t.end-t.start}static \u0275fac=function(e){return new(e||i)(G(Ln),G(Pt),G(Ye),G(Oi),G(Xe))};static \u0275cmp=Oe({type:i,selectors:[["app-trips-history"]],decls:80,vars:19,consts:[["dir","rtl",1,"container-fluid","py-4"],[1,"row","mb-4"],[1,"col-12"],[1,"d-flex","justify-content-between","align-items-center","flex-wrap","gap-3"],[1,"fw-bold","mb-0"],[1,"fas","fa-history","me-2","text-primary"],["role","group",1,"btn-group"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"fas","fa-car","me-2"],[1,"fas","fa-user","me-2"],[1,"alert","alert-info","mt-3","mb-0"],[1,"fas","fa-info-circle","me-2"],[1,"row","mb-4","g-3"],[1,"col-12","col-md-4"],[1,"card","border-0","shadow-sm","bg-primary","text-white"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-1","opacity-75"],[1,"fas","fa-route","fa-2x","opacity-50"],[1,"card","border-0","shadow-sm","bg-success","text-white"],[1,"fas","fa-check-circle","fa-2x","opacity-50"],[1,"card","border-0","shadow-sm","bg-info","text-white"],[1,"fas","fa-dollar-sign","fa-2x","opacity-50"],[1,"card","border-0","shadow-sm","mb-4"],[1,"row","g-3"],[1,"form-label","fw-bold"],[1,"fas","fa-search","me-2"],["type","text","placeholder","\u0627\u0628\u062D\u062B \u0639\u0646 \u0645\u0631\u064A\u0636 \u0623\u0648 \u0645\u0648\u0642\u0639...",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-6","col-md-2"],[1,"fas","fa-calendar-alt","me-2"],[1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"fas","fa-calendar","me-2"],[1,"fas","fa-filter","me-2"],["value","All"],["class","text-center py-5",4,"ngIf"],["class","row row-cols-1 g-3",4,"ngIf"],["class","mt-4",4,"ngIf"],[3,"value"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"fas","fa-inbox","fa-3x","text-muted","mb-3"],[1,"text-muted"],[1,"row","row-cols-1","g-3"],["class","col",4,"ngFor","ngForOf"],["class","col-12 text-center text-muted py-5",4,"ngIf"],[1,"col"],["dir","rtl",1,"card","shadow-sm","rounded-xl","border-0","overflow-hidden","h-100",2,"cursor","pointer",3,"click"],[1,"d-flex"],[1,"flex-shrink-0",2,"width","6px"],[1,"card-body","p-4","flex-grow-1","text-end"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"fw-bold","m-0","text-dark"],[1,"fas","fa-user-injured","me-2","text-muted"],["dir","ltr",1,"fw-bold","m-0","text-success"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"text-muted","small","m-0"],[1,"fas","fa-calendar-day","me-1"],[1,"fas","fa-clock","me-1"],[1,"mb-3"],[1,"text-muted","small","mb-1"],[1,"fas","fa-user","me-1"],[1,"fw-medium","text-dark"],[1,"fas","fa-user-md","me-1"],[1,"text-muted","small","mb-3"],[1,"fas","fa-notes-medical","me-1"],[1,"fw-medium"],[1,"d-flex","align-items-center","gap-2","small","fw-medium","text-dark","justify-content-end","mb-3","pb-3","border-bottom"],[1,"fas","fa-map-marker-alt","me-1","text-danger"],[1,"fas","fa-arrow-left"],[1,"fas","fa-map-marker-alt","me-1","text-success"],[1,"fas","fa-gas-pump","me-1"],[1,"col-12","text-center","text-muted","py-5"],[1,"fas","fa-inbox","fa-3x","mb-3"],[1,"h5","mb-0"],[1,"mt-4"],["aria-label","\u0627\u0644\u062A\u0646\u0642\u0644 \u0628\u064A\u0646 \u0627\u0644\u0635\u0641\u062D\u0627\u062A"],[1,"pagination","justify-content-center","mb-0"],[1,"page-item"],[1,"page-link",3,"click"],[1,"fas","fa-chevron-right"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"fas","fa-chevron-left"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),x(5,"i",5),d(6," \u0633\u062C\u0644 \u0627\u0644\u0631\u062D\u0644\u0627\u062A "),l(),s(7,"div",6)(8,"button",7),T("click",function(){return n.toggleHistoryView()}),x(9,"i",8),d(10," \u0631\u062D\u0644\u0627\u062A \u0627\u0644\u0645\u0631\u0643\u0628\u0629 "),l(),s(11,"button",7),T("click",function(){return n.toggleHistoryView()}),x(12,"i",9),d(13," \u0631\u062D\u0644\u0627\u062A\u064A "),l()()(),s(14,"div",10),x(15,"i",11),d(16),l()()(),s(17,"div",12)(18,"div",13)(19,"div",14)(20,"div",15)(21,"div",16)(22,"div")(23,"p",17),d(24,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0631\u062D\u0644\u0627\u062A"),l(),s(25,"h3",4),d(26),l()(),x(27,"i",18),l()()()(),s(28,"div",13)(29,"div",19)(30,"div",15)(31,"div",16)(32,"div")(33,"p",17),d(34,"\u0627\u0644\u0631\u062D\u0644\u0627\u062A \u0627\u0644\u0645\u0643\u062A\u0645\u0644\u0629"),l(),s(35,"h3",4),d(36),l()(),x(37,"i",20),l()()()(),s(38,"div",13)(39,"div",21)(40,"div",15)(41,"div",16)(42,"div")(43,"p",17),d(44,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0623\u0631\u0628\u0627\u062D"),l(),s(45,"h3",4),d(46),l()(),x(47,"i",22),l()()()()(),s(48,"div",23)(49,"div",15)(50,"div",24)(51,"div",13)(52,"label",25),x(53,"i",26),d(54," \u0628\u062D\u062B "),l(),s(55,"input",27),V("ngModelChange",function(a){return N(n.searchTerm,a)||(n.searchTerm=a),a}),T("ngModelChange",function(){return n.applyFilters(),n.calculateStatistics()}),l()(),s(56,"div",28)(57,"label",25),x(58,"i",29),d(59," \u0627\u0644\u0634\u0647\u0631 "),l(),s(60,"select",30),V("ngModelChange",function(a){return N(n.selectedMonth,a)||(n.selectedMonth=a),a}),T("ngModelChange",function(){return n.loadTrips()}),H(61,YP,2,2,"option",31),l()(),s(62,"div",28)(63,"label",25),x(64,"i",32),d(65," \u0627\u0644\u0633\u0646\u0629 "),l(),s(66,"select",30),V("ngModelChange",function(a){return N(n.selectedYear,a)||(n.selectedYear=a),a}),T("ngModelChange",function(){return n.loadTrips()}),H(67,XP,2,2,"option",31),l()(),s(68,"div",13)(69,"label",25),x(70,"i",33),d(71," \u062D\u0627\u0644\u0629 \u0627\u0644\u0646\u0642\u0644 "),l(),s(72,"select",30),V("ngModelChange",function(a){return N(n.selectedStatus,a)||(n.selectedStatus=a),a}),T("ngModelChange",function(){return n.applyFilters(),n.calculateStatistics()}),s(73,"option",34),d(74,"\u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0627\u0644\u0627\u062A"),l(),H(75,KP,2,2,"option",31),l()()()()(),H(76,JP,4,0,"div",35)(77,QP,4,0,"div",35)(78,iD,3,2,"div",36)(79,rD,10,6,"div",37),l()),e&2&&(m(8),fe("active",n.historyView==="vehicle"),m(3),fe("active",n.historyView==="driver"),m(5),q(" ",n.historyView==="vehicle"?"\u0639\u0631\u0636 \u062C\u0645\u064A\u0639 \u0627\u0644\u0631\u062D\u0644\u0627\u062A \u0644\u0647\u0630\u0647 \u0627\u0644\u0645\u0631\u0643\u0628\u0629 (\u062C\u0645\u064A\u0639 \u0627\u0644\u0633\u0627\u0626\u0642\u064A\u0646)":"\u0639\u0631\u0636 \u0631\u062D\u0644\u0627\u062A\u064A \u0641\u0642\u0637 (\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A)"," "),m(10),z(n.totalTrips),m(10),z(n.completedTrips),m(10),q("$",n.totalEarnings.toFixed(2),""),m(9),R("ngModel",n.searchTerm),m(5),R("ngModel",n.selectedMonth),m(),S("ngForOf",n.months),m(5),R("ngModel",n.selectedYear),m(),S("ngForOf",n.years),m(5),R("ngModel",n.selectedStatus),m(3),S("ngForOf",n.transferStatuses),m(),S("ngIf",n.isLoading),m(),S("ngIf",!n.isLoading&&n.getPaginatedTrips().length===0),m(),S("ngIf",!n.isLoading&&n.getPaginatedTrips().length>0),m(),S("ngIf",n.totalPages>1))},dependencies:[tt,Ot,Lt,et,At,ot,rt,Le,ai,kt],styles:[".table[_ngcontent-%COMP%]{font-size:.95rem}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;border-bottom:2px solid #dee2e6;padding:1rem .75rem}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;padding:.75rem}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#1193d40d}.badge[_ngcontent-%COMP%]{padding:.5rem .75rem;font-weight:500;font-size:.85rem}.card[_ngcontent-%COMP%]{transition:transform .2s ease-in-out}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#1193d4;box-shadow:0 0 0 .25rem #1193d440}.text-primary[_ngcontent-%COMP%]{color:#1193d4!important}.bg-primary[_ngcontent-%COMP%]{background-color:#1193d4!important}.page-link[_ngcontent-%COMP%]{color:#1193d4}.page-link[_ngcontent-%COMP%]:hover{color:#0d7ab8;background-color:#1193d41a}.page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#1193d4;border-color:#1193d4}[dir=rtl][_ngcontent-%COMP%]   .me-2[_ngcontent-%COMP%]{margin-right:0!important;margin-left:.5rem!important}[dir=rtl][_ngcontent-%COMP%]   .text-end[_ngcontent-%COMP%]{text-align:left!important}[dir=rtl][_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{text-align:right}@media (max-width: 768px){.table[_ngcontent-%COMP%]{font-size:.85rem}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem}}@media (min-width: 992px){.container-fluid[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto}}"]})};var aD=()=>[];function oD(i,t){if(i&1&&(s(0,"h6",4),d(1),l()),i&2){let e=h();m(),q(" ",e.formatDate(e.walletSummary.lastPaymentDate)," ")}}function sD(i,t){i&1&&(s(0,"h6",55),d(1," \u0644\u0627 \u062A\u0648\u062C\u062F \u062F\u0641\u0639\u0627\u062A \u0628\u0639\u062F "),l())}function lD(i,t){if(i&1&&(s(0,"option",56),d(1),l()),i&2){let e=t.$implicit;S("value",e.value),m(),q(" ",e.label," ")}}function uD(i,t){if(i&1&&(s(0,"option",56),d(1),l()),i&2){let e=t.$implicit;S("value",e.value),m(),q(" ",e.name," ")}}function cD(i,t){if(i&1&&(s(0,"option",56),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),q(" ",e," ")}}function dD(i,t){if(i&1&&(s(0,"div",57)(1,"div",58)(2,"div",59)(3,"div"),x(4,"i"),l()(),s(5,"div",60)(6,"div",61)(7,"div")(8,"h6",62),d(9),l(),s(10,"p",63),x(11,"i",64),d(12),l()(),s(13,"div",65)(14,"h5",62),d(15),l(),s(16,"span"),d(17),l()()()()()()),i&2){let e=t.$implicit,n=h();m(3),_i("payment-icon ",n.getPaymentColor(e.transactionType),""),m(),_i("fas ",n.getPaymentIcon(e.transactionType)," fa-2x"),m(5),z(e.description),m(3),q(" ",n.formatDate(e.createdAt)," "),m(2),fe("text-success",e.amount>0)("text-danger",e.amount<0),m(),vt(" ",e.amount>0?"+":"","\u20AA",n.Math.abs(e.amount).toFixed(2)," "),m(),_i("badge ",n.getStatusBadgeClass(e.collectionStatus),""),m(),q(" ",e.collectionStatus," ")}}function mD(i,t){i&1&&(s(0,"div",66),x(1,"i",67),s(2,"p",55),d(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u0639\u0627\u0645\u0644\u0627\u062A \u0641\u064A \u0647\u0630\u0647 \u0627\u0644\u0641\u062A\u0631\u0629"),l()())}function fD(i,t){if(i&1){let e=Q();s(0,"li",71)(1,"button",72),T("click",function(){let r=b(e).index,a=h(2);return C(a.goToPage(r+1))}),d(2),l()()}if(i&2){let e=t.index,n=h(2);fe("active",n.currentPage===e+1),m(2),q(" ",e+1," ")}}function pD(i,t){if(i&1){let e=Q();s(0,"div",68)(1,"nav",69)(2,"ul",70)(3,"li",71)(4,"button",72),T("click",function(){b(e);let r=h();return C(r.previousPage())}),x(5,"i",73),l()(),H(6,fD,3,3,"li",74),s(7,"li",71)(8,"button",72),T("click",function(){b(e);let r=h();return C(r.nextPage())}),x(9,"i",75),l()()()()()}if(i&2){let e=h();m(3),fe("disabled",e.currentPage===1),m(3),S("ngForOf",Ei(5,aD).constructor(e.totalPages)),m(),fe("disabled",e.currentPage===e.totalPages)}}function hD(i,t){if(i&1){let e=Q();s(0,"div"),x(1,"div",76),s(2,"div",77)(3,"div",78)(4,"div",79)(5,"div",80)(6,"h5",81),x(7,"i",7),d(8," \u0637\u0644\u0628 \u0633\u062D\u0628 "),l(),s(9,"button",82),T("click",function(){b(e);let r=h();return C(r.closeWithdrawModal())}),l()(),s(10,"div",83)(11,"div",84),x(12,"i",17),d(13," \u0627\u0644\u0631\u0635\u064A\u062F \u0627\u0644\u0645\u062A\u0627\u062D \u0644\u0644\u0633\u062D\u0628: "),s(14,"strong"),d(15),l()(),s(16,"div",85)(17,"label",86),x(18,"i",87),d(19," \u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0645\u0631\u0627\u062F \u0633\u062D\u0628\u0647 "),l(),s(20,"input",88),V("ngModelChange",function(r){b(e);let a=h();return N(a.withdrawAmount,r)||(a.withdrawAmount=r),C(r)}),l()(),s(21,"div",85)(22,"label",39),x(23,"i",89),d(24," \u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u0633\u062D\u0628 "),l(),s(25,"div",90)(26,"input",91),V("ngModelChange",function(r){b(e);let a=h();return N(a.withdrawMethod,r)||(a.withdrawMethod=r),C(r)}),l(),s(27,"label",92),x(28,"i",93),d(29," \u062A\u062D\u0648\u064A\u0644 \u0628\u0646\u0643\u064A "),l()(),s(30,"div",94)(31,"input",95),V("ngModelChange",function(r){b(e);let a=h();return N(a.withdrawMethod,r)||(a.withdrawMethod=r),C(r)}),l(),s(32,"label",96),x(33,"i",97),d(34," \u0633\u062D\u0628 \u0646\u0642\u062F\u064A "),l()()()(),s(35,"div",98)(36,"button",99),T("click",function(){b(e);let r=h();return C(r.closeWithdrawModal())}),x(37,"i",100),d(38," \u0625\u0644\u063A\u0627\u0621 "),l(),s(39,"button",101),T("click",function(){b(e);let r=h();return C(r.submitWithdraw())}),x(40,"i",102),d(41," \u062A\u0623\u0643\u064A\u062F \u0627\u0644\u0637\u0644\u0628 "),l()()()()()()}if(i&2){let e=h();m(15),q("$",e.walletSummary.currentBalance.toFixed(2),""),m(5),R("ngModel",e.withdrawAmount),S("max",e.walletSummary.currentBalance),m(6),R("ngModel",e.withdrawMethod),m(5),R("ngModel",e.withdrawMethod),m(8),S("disabled",e.withdrawAmount<=0||e.withdrawAmount>e.walletSummary.currentBalance)}}var $c=class i{constructor(t,e,n){this.toastService=t;this.transactionService=e;this.authService=n}walletSummary={amountReceivable:0,amountPayable:0,netBalance:0,pendingBalance:0,totalEarnings:0,totalWithdrawals:0,lastPaymentDate:null};Math=Math;collectionSummary=null;payments=[];filteredPayments=[];selectedType="All";selectedMonth=new Date().getMonth()+1;selectedYear=new Date().getFullYear();currentPage=1;itemsPerPage=10;totalPages=1;totalItems=0;loading=!1;userId=null;paymentTypes=[{value:"All",label:"\u062C\u0645\u064A\u0639 \u0627\u0644\u0639\u0645\u0644\u064A\u0627\u062A"},{value:"\u0631\u062D\u0644\u0629",label:"\u0631\u062D\u0644\u0629"},{value:"\u062F\u0641\u0639",label:"\u062F\u0641\u0639"},{value:"\u0633\u062D\u0628",label:"\u0633\u062D\u0628"},{value:"\u062A\u0639\u062F\u064A\u0644",label:"\u062A\u0639\u062F\u064A\u0644"},{value:"\u0648\u0642\u0648\u062F",label:"\u0648\u0642\u0648\u062F"},{value:"\u0635\u064A\u0627\u0646\u0629",label:"\u0635\u064A\u0627\u0646\u0629"},{value:"\u0645\u0643\u0627\u0641\u0623\u0629",label:"\u0645\u0643\u0627\u0641\u0623\u0629"},{value:"\u062E\u0635\u0645",label:"\u062E\u0635\u0645"}];months=[{value:1,name:"\u064A\u0646\u0627\u064A\u0631"},{value:2,name:"\u0641\u0628\u0631\u0627\u064A\u0631"},{value:3,name:"\u0645\u0627\u0631\u0633"},{value:4,name:"\u0623\u0628\u0631\u064A\u0644"},{value:5,name:"\u0645\u0627\u064A\u0648"},{value:6,name:"\u064A\u0648\u0646\u064A\u0648"},{value:7,name:"\u064A\u0648\u0644\u064A\u0648"},{value:8,name:"\u0623\u063A\u0633\u0637\u0633"},{value:9,name:"\u0633\u0628\u062A\u0645\u0628\u0631"},{value:10,name:"\u0623\u0643\u062A\u0648\u0628\u0631"},{value:11,name:"\u0646\u0648\u0641\u0645\u0628\u0631"},{value:12,name:"\u062F\u064A\u0633\u0645\u0628\u0631"}];years=[];showWithdrawModal=!1;withdrawAmount=0;withdrawMethod="bank";ngOnInit(){this.generateYears();let t=this.authService.currentUser();t&&(this.userId=t.id,this.loadWalletData(),this.loadCollectionSummary(),this.loadPayments())}loadWalletData(){this.userId&&(this.loading=!0,this.transactionService.getUserTransactions(this.userId,{page:1,limit:1}).subscribe({next:t=>{t.data.length>0&&(this.walletSummary.currentBalance=t.data[0].balanceAfter,this.walletSummary.lastPaymentDate=t.data[0].createdAt),this.loading=!1},error:t=>{console.error("Failed to load wallet data:",t),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u062D\u0641\u0638\u0629"),this.loading=!1}}))}loadCollectionSummary(){this.userId&&this.transactionService.getCollectionSummary(this.userId).subscribe({next:t=>{this.collectionSummary=t,this.walletSummary.pendingBalance=t.pendingCollection},error:t=>{console.error("Failed to load collection summary:",t)}})}generateYears(){let t=new Date().getFullYear();for(let e=t;e>=t-5;e--)this.years.push(e)}loadPayments(){if(!this.userId)return;this.loading=!0;let t=`${this.selectedYear}-${String(this.selectedMonth).padStart(2,"0")}-01`,e=new Date(this.selectedYear,this.selectedMonth,0).getDate(),n=`${this.selectedYear}-${String(this.selectedMonth).padStart(2,"0")}-${e}`;this.transactionService.getUserTransactions(this.userId,{page:this.currentPage,limit:this.itemsPerPage,type:this.selectedType!=="All"?this.selectedType:void 0,startDate:t,endDate:n}).subscribe({next:r=>{this.payments=r.data,this.totalItems=r.total,this.totalPages=Math.ceil(r.total/this.itemsPerPage),this.loading=!1},error:r=>{console.error("Failed to load payments:",r),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0633\u062C\u0644 \u0627\u0644\u0639\u0645\u0644\u064A\u0627\u062A"),this.loading=!1}})}applyFilters(){this.currentPage=1,this.loadPayments()}getPaginatedPayments(){return this.payments}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.loadPayments())}previousPage(){this.currentPage>1&&(this.currentPage--,this.loadPayments())}goToPage(t){this.currentPage=t,this.loadPayments()}getPaymentIcon(t){return{\u0631\u062D\u0644\u0629:"fa-route",\u062F\u0641\u0639:"fa-arrow-down",\u0633\u062D\u0628:"fa-arrow-up",\u0645\u0643\u0627\u0641\u0623\u0629:"fa-gift",\u062A\u0639\u062F\u064A\u0644:"fa-edit",\u0648\u0642\u0648\u062F:"fa-gas-pump",\u0635\u064A\u0627\u0646\u0629:"fa-wrench",\u062E\u0635\u0645:"fa-minus-circle"}[t]||"fa-money-bill"}getPaymentColor(t){return{\u0631\u062D\u0644\u0629:"text-primary",\u062F\u0641\u0639:"text-success",\u0633\u062D\u0628:"text-danger",\u0645\u0643\u0627\u0641\u0623\u0629:"text-warning",\u062A\u0639\u062F\u064A\u0644:"text-info",\u0648\u0642\u0648\u062F:"text-secondary",\u0635\u064A\u0627\u0646\u0629:"text-secondary",\u062E\u0635\u0645:"text-danger"}[t]||"text-secondary"}getStatusBadgeClass(t){return{\u0645\u0643\u062A\u0645\u0644:"bg-success",\u0645\u0639\u0644\u0642:"bg-warning",\u0641\u0627\u0634\u0644:"bg-danger"}[t]||"bg-secondary"}formatDate(t){return new Intl.DateTimeFormat("ar-SA",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)}openWithdrawModal(){this.showWithdrawModal=!0,this.withdrawAmount=0}closeWithdrawModal(){this.showWithdrawModal=!1}submitWithdraw(){this.withdrawAmount>0&&this.withdrawAmount<=this.walletSummary.currentBalance&&(console.log("\u0637\u0644\u0628 \u0633\u062D\u0628:",{amount:this.withdrawAmount,method:this.withdrawMethod}),this.toastService.success(`\u062A\u0645 \u0637\u0644\u0628 \u0633\u062D\u0628 \u0645\u0628\u0644\u063A \u20AA${this.withdrawAmount} (${this.withdrawMethod==="bank"?"\u062A\u062D\u0648\u064A\u0644 \u0628\u0646\u0643\u064A":"\u0633\u062D\u0628 \u0646\u0642\u062F\u064A"})`,3e3),this.closeWithdrawModal())}static \u0275fac=function(e){return new(e||i)(G(Ye),G(Ls),G(Pt))};static \u0275cmp=Oe({type:i,selectors:[["app-wallet"]],decls:107,vars:19,consts:[["dir","rtl",1,"container-fluid","py-4"],[1,"row","mb-4"],[1,"col-12"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fw-bold","mb-0"],[1,"fas","fa-wallet","me-2","text-primary"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-money-bill-wave","me-2"],[1,"row","mb-4","g-3"],[1,"col-12","col-lg-4"],[1,"card","border-0","shadow-lg","bg-gradient-success","text-white"],[1,"card-body","p-4"],[1,"d-flex","justify-content-between","align-items-start","mb-3"],[1,"mb-1","opacity-75"],[1,"display-5","fw-bold","mb-0"],[1,"fas","fa-hand-holding-usd","fa-3x","opacity-25"],[1,"mb-0","small","opacity-75"],[1,"fas","fa-info-circle","me-2"],[1,"card","border-0","shadow-lg","bg-gradient-danger","text-white"],[1,"fas","fa-money-bill-wave","fa-3x","opacity-25"],[1,"fas","fa-exclamation-circle","me-2"],[1,"card","border-0","shadow-lg",2,"color","white",3,"ngClass"],[1,"fas","fa-balance-scale","fa-3x","opacity-25"],[1,"fas","fa-calculator","me-2"],[1,"col-6","col-md-3"],[1,"card","border","shadow-sm"],[1,"card-body","text-center"],[1,"fas","fa-arrow-up","fa-2x","text-success","mb-2"],[1,"text-muted","mb-1","small"],[1,"fw-bold","text-success","mb-0"],[1,"fas","fa-arrow-down","fa-2x","text-danger","mb-2"],[1,"fw-bold","text-danger","mb-0"],[1,"col-12","col-md-6"],[1,"fas","fa-calendar-check","fa-2x","text-info","mb-2"],["class","fw-bold mb-0",4,"ngIf"],["class","text-muted mb-0",4,"ngIf"],[1,"card","border-0","shadow-sm","mb-4"],[1,"card-body"],[1,"row","g-3"],[1,"form-label","fw-bold"],[1,"fas","fa-filter","me-2"],[1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"fas","fa-calendar-alt","me-2"],[1,"fas","fa-calendar","me-2"],[1,"card","border-0","shadow-sm"],[1,"card-header","bg-white","border-bottom"],[1,"mb-0","fw-bold"],[1,"fas","fa-list","me-2","text-primary"],[1,"card-body","p-0"],[1,"list-group","list-group-flush"],["class","list-group-item list-group-item-action",4,"ngFor","ngForOf"],["class","list-group-item text-center py-5",4,"ngIf"],["class","card-footer bg-white",4,"ngIf"],[4,"ngIf"],[1,"text-muted","mb-0"],[3,"value"],[1,"list-group-item","list-group-item-action"],[1,"row","align-items-center"],[1,"col-auto"],[1,"col"],[1,"d-flex","justify-content-between","align-items-start"],[1,"mb-1","fw-bold"],[1,"mb-0","small","text-muted"],[1,"fas","fa-calendar","me-1"],[1,"text-end"],[1,"list-group-item","text-center","py-5"],[1,"fas","fa-inbox","fa-3x","text-muted","mb-3","d-block"],[1,"card-footer","bg-white"],["aria-label","\u0627\u0644\u062A\u0646\u0642\u0644 \u0628\u064A\u0646 \u0627\u0644\u0635\u0641\u062D\u0627\u062A"],[1,"pagination","justify-content-center","mb-0"],[1,"page-item"],[1,"page-link",3,"click"],[1,"fas","fa-chevron-right"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"fas","fa-chevron-left"],[1,"modal-backdrop","fade","show"],["tabindex","-1","dir","rtl",1,"modal","fade","show","d-block"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","bg-primary","text-white"],[1,"modal-title","fw-bold"],["type","button",1,"btn-close","btn-close-white",3,"click"],[1,"modal-body"],[1,"alert","alert-info"],[1,"mb-3"],["for","withdrawAmount",1,"form-label","fw-bold"],[1,"fas","fa-dollar-sign","me-2","text-primary"],["type","number","id","withdrawAmount","min","0","step","0.01","placeholder","0.00",1,"form-control","form-control-lg",3,"ngModelChange","ngModel","max"],[1,"fas","fa-university","me-2","text-primary"],[1,"form-check","mb-2"],["type","radio","name","withdrawMethod","id","bank","value","bank",1,"form-check-input",3,"ngModelChange","ngModel"],["for","bank",1,"form-check-label"],[1,"fas","fa-university","me-2"],[1,"form-check"],["type","radio","name","withdrawMethod","id","cash","value","cash",1,"form-check-input",3,"ngModelChange","ngModel"],["for","cash",1,"form-check-label"],[1,"fas","fa-money-bill","me-2"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fas","fa-times","me-2"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"fas","fa-check","me-2"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),x(5,"i",5),d(6," \u0627\u0644\u0645\u062D\u0641\u0638\u0629 "),l(),s(7,"button",6),T("click",function(){return n.openWithdrawModal()}),x(8,"i",7),d(9," \u0637\u0644\u0628 \u0633\u062D\u0628 "),l()()()(),s(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"div")(16,"p",13),d(17,"\u0627\u0644\u0634\u0631\u0643\u0629 \u0645\u062F\u064A\u0646\u0629 \u0644\u0643"),l(),s(18,"h2",14),d(19),l()(),x(20,"i",15),l(),s(21,"p",16),x(22,"i",17),d(23," \u0645\u0628\u0644\u063A \u0645\u0633\u062A\u062D\u0642 \u0644\u0643 \u0645\u0646 \u0627\u0644\u0634\u0631\u0643\u0629 "),l()()()(),s(24,"div",9)(25,"div",18)(26,"div",11)(27,"div",12)(28,"div")(29,"p",13),d(30,"\u0623\u0646\u062A \u0645\u062F\u064A\u0646 \u0644\u0644\u0634\u0631\u0643\u0629"),l(),s(31,"h2",14),d(32),l()(),x(33,"i",19),l(),s(34,"p",16),x(35,"i",20),d(36," \u0645\u0628\u0644\u063A \u0645\u0637\u0644\u0648\u0628 \u0645\u0646\u0643 \u0644\u0644\u0634\u0631\u0643\u0629 "),l()()()(),s(37,"div",9)(38,"div",21)(39,"div",11)(40,"div",12)(41,"div")(42,"p",13),d(43,"\u0627\u0644\u0631\u0635\u064A\u062F \u0627\u0644\u0635\u0627\u0641\u064A"),l(),s(44,"h2",14),d(45),l()(),x(46,"i",22),l(),s(47,"p",16),x(48,"i",23),d(49),l()()()()(),s(50,"div",8)(51,"div",24)(52,"div",25)(53,"div",26),x(54,"i",27),s(55,"p",28),d(56,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0623\u0631\u0628\u0627\u062D"),l(),s(57,"h5",29),d(58),l()()()(),s(59,"div",24)(60,"div",25)(61,"div",26),x(62,"i",30),s(63,"p",28),d(64,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0645\u0633\u062D\u0648\u0628\u0627\u062A"),l(),s(65,"h5",31),d(66),l()()()(),s(67,"div",32)(68,"div",25)(69,"div",26),x(70,"i",33),s(71,"p",28),d(72,"\u0622\u062E\u0631 \u062F\u0641\u0639\u0629"),l(),H(73,oD,2,1,"h6",34)(74,sD,2,0,"h6",35),l()()()(),s(75,"div",36)(76,"div",37)(77,"div",38)(78,"div",32)(79,"label",39),x(80,"i",40),d(81," \u0646\u0648\u0639 \u0627\u0644\u0639\u0645\u0644\u064A\u0629 "),l(),s(82,"select",41),V("ngModelChange",function(a){return N(n.selectedType,a)||(n.selectedType=a),a}),T("ngModelChange",function(){return n.applyFilters()}),H(83,lD,2,2,"option",42),l()(),s(84,"div",24)(85,"label",39),x(86,"i",43),d(87," \u0627\u0644\u0634\u0647\u0631 "),l(),s(88,"select",41),V("ngModelChange",function(a){return N(n.selectedMonth,a)||(n.selectedMonth=a),a}),T("ngModelChange",function(){return n.loadPayments()}),H(89,uD,2,2,"option",42),l()(),s(90,"div",24)(91,"label",39),x(92,"i",44),d(93," \u0627\u0644\u0633\u0646\u0629 "),l(),s(94,"select",41),V("ngModelChange",function(a){return N(n.selectedYear,a)||(n.selectedYear=a),a}),T("ngModelChange",function(){return n.loadPayments()}),H(95,cD,2,2,"option",42),l()()()()(),s(96,"div",45)(97,"div",46)(98,"h5",47),x(99,"i",48),d(100," \u0633\u062C\u0644 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062A "),l()(),s(101,"div",49)(102,"div",50),H(103,dD,18,18,"div",51)(104,mD,4,0,"div",52),l()(),H(105,pD,10,6,"div",53),l()(),H(106,hD,42,6,"div",54)),e&2&&(m(19),q("",n.walletSummary.amountReceivable.toFixed(2)," \u20AA"),m(13),q("",n.walletSummary.amountPayable.toFixed(2)," \u20AA"),m(6),S("ngClass",n.walletSummary.netBalance>=0?"bg-gradient-primary":"bg-gradient-warning"),m(7),q("",n.walletSummary.netBalance.toFixed(2)," \u20AA"),m(4),q(" ",n.walletSummary.netBalance>=0?"\u0627\u0644\u0634\u0631\u0643\u0629 \u062A\u062F\u064A\u0646 \u0644\u0643":"\u0623\u0646\u062A \u062A\u062F\u064A\u0646 \u0644\u0644\u0634\u0631\u0643\u0629"," "),m(9),q("$",n.walletSummary.totalEarnings.toFixed(2),""),m(8),q("$",n.walletSummary.totalWithdrawals.toFixed(2),""),m(7),S("ngIf",n.walletSummary.lastPaymentDate),m(),S("ngIf",!n.walletSummary.lastPaymentDate),m(8),R("ngModel",n.selectedType),m(),S("ngForOf",n.paymentTypes),m(5),R("ngModel",n.selectedMonth),m(),S("ngForOf",n.months),m(5),R("ngModel",n.selectedYear),m(),S("ngForOf",n.years),m(8),S("ngForOf",n.getPaginatedPayments()),m(),S("ngIf",n.filteredPayments.length===0),m(),S("ngIf",n.totalPages>1),m(),S("ngIf",n.showWithdrawModal))},dependencies:[tt,Ot,Lt,et,vi,At,Gl,ot,xi,aa,rt,Le,Ft,ai,kt],styles:[".bg-gradient-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1193d4,#0d7ab8)}.bg-gradient-warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffc107,#ff9800)}.payment-icon[_ngcontent-%COMP%]{width:50px;height:50px;display:flex;align-items:center;justify-content:center;border-radius:50%;background-color:#1193d41a}.list-group-item[_ngcontent-%COMP%]{padding:1rem;transition:background-color .2s ease}.list-group-item[_ngcontent-%COMP%]:hover{background-color:#1193d40d}.badge[_ngcontent-%COMP%]{padding:.35rem .65rem;font-size:.8rem;font-weight:500}.text-primary[_ngcontent-%COMP%]{color:#1193d4!important}.btn-primary[_ngcontent-%COMP%]{background-color:#1193d4;border-color:#1193d4}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0d7ab8;border-color:#0d7ab8}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#1193d4;box-shadow:0 0 0 .25rem #1193d440}.form-check-input[_ngcontent-%COMP%]:checked{background-color:#1193d4;border-color:#1193d4}.page-link[_ngcontent-%COMP%]{color:#1193d4}.page-link[_ngcontent-%COMP%]:hover{color:#0d7ab8;background-color:#1193d41a}.page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#1193d4;border-color:#1193d4}.modal-backdrop[_ngcontent-%COMP%]{z-index:1040}.modal[_ngcontent-%COMP%]{z-index:1050}[dir=rtl][_ngcontent-%COMP%]   .me-2[_ngcontent-%COMP%]{margin-right:0!important;margin-left:.5rem!important}[dir=rtl][_ngcontent-%COMP%]   .me-1[_ngcontent-%COMP%]{margin-right:0!important;margin-left:.25rem!important}[dir=rtl][_ngcontent-%COMP%]   .text-end[_ngcontent-%COMP%]{text-align:left!important}[dir=rtl][_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{margin:0 auto 0 0}@media (max-width: 768px){.display-4[_ngcontent-%COMP%]{font-size:2rem}.payment-icon[_ngcontent-%COMP%]{width:40px;height:40px}.payment-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem!important}}@media (min-width: 992px){.container-fluid[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto}}"]})};function gD(i,t){if(i&1&&(s(0,"option",47),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),q(" ",e," ")}}function _D(i,t){if(i&1&&(s(0,"div",48),x(1,"i",49),s(2,"strong"),d(3),gt(4,"number"),l(),d(5," \u0643\u0645 \u0645\u0646\u0630 \u0622\u062E\u0631 \u0635\u064A\u0627\u0646\u0629 \u0645\u0646 \u0647\u0630\u0627 \u0627\u0644\u0646\u0648\u0639 "),l()),i&2){let e=h();m(3),z(Ya(4,1,e.kmSinceLast))}}function vD(i,t){if(i&1&&(s(0,"div",50),x(1,"i",51),s(2,"strong"),d(3,"\u0627\u0644\u0645\u0633\u0627\u0641\u0629 \u0627\u0644\u0645\u0642\u0637\u0648\u0639\u0629 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u0635\u064A\u0627\u0646\u0629:"),l(),d(4),l()),i&2){let e=h();m(4),q(" ",e.calculateDistance()," \u0643\u0645 ")}}var Zc=class i{constructor(t,e,n,r){this.toastService=t;this.maintenanceService=e;this.vehicleService=n;this.driverService=r}vehicleId="";vehicleInternalId="";close=new di;maintenanceAdded=new di;recordForm={date:new Date().toISOString().split("T")[0],vehicleId:"",maintenanceTypeId:"",type:"",cost:0,serviceLocation:"",odometerBefore:0,odometerAfter:0,notes:"",status:"\u0645\u0643\u062A\u0645\u0644\u0629"};maintenanceStatuses=["\u0645\u0643\u062A\u0645\u0644\u0629","\u0645\u062C\u062F\u0648\u0644\u0629","\u0642\u064A\u062F \u0627\u0644\u062A\u0646\u0641\u064A\u0630"];isSubmitting=!1;kmSinceLast=null;currentDriverId="";currentDriverName="";isLoadingDriver=!0;ngOnInit(){this.loadCurrentDriver(),this.recordForm.vehicleId=this.vehicleInternalId,this.vehicleInternalId&&(this.vehicleService.getVehicleById(this.vehicleInternalId).subscribe({next:t=>{},error:t=>console.error("Failed to load vehicle:",t)}),this.vehicleService.getCurrentOdometer(this.vehicleInternalId).subscribe({next:t=>{this.recordForm.odometerBefore=t.currentOdometer},error:t=>console.error("Failed to load current odometer:",t)}))}loadCurrentDriver(){this.isLoadingDriver=!0,this.driverService.getCurrentDriver().subscribe({next:t=>{this.currentDriverId=t.id,this.currentDriverName=t.arabicName||t.name||"\u0627\u0644\u0633\u0627\u0626\u0642",this.isLoadingDriver=!1},error:t=>{console.error("Error loading current driver:",t),this.isLoadingDriver=!1}})}onMaintenanceTypeSelected(t){this.recordForm.maintenanceTypeId=t.id,this.recordForm.type=t.name,t.estimatedCost&&(this.recordForm.cost=t.estimatedCost),this.recordForm.vehicleId&&this.recordForm.maintenanceTypeId&&this.loadLastOdometerReading()}loadLastOdometerReading(){!this.recordForm.vehicleId||!this.recordForm.maintenanceTypeId||this.maintenanceService.getLastOdometerReading(this.recordForm.vehicleId,this.recordForm.maintenanceTypeId).subscribe({next:t=>{t.success&&t.data&&(this.recordForm.odometerBefore=t.data.currentOdometer,this.kmSinceLast=t.data.kmSinceLast)},error:t=>{console.error("Error loading last odometer reading:",t),this.kmSinceLast=null}})}calculateDistance(){let t=this.recordForm.odometerBefore||0,e=this.recordForm.odometerAfter||0;return Math.max(0,e-t)}onSubmit(){if(!this.isFormValid())return;this.isSubmitting=!0;let t=this.recordForm.date;console.log("Submitting maintenance record for date:",t),this.maintenanceService.createMaintenanceRecord({vehicleId:this.recordForm.vehicleId,date:t,maintenanceTypeId:this.recordForm.maintenanceTypeId,cost:this.recordForm.cost,serviceLocation:this.recordForm.serviceLocation,odometerBefore:this.recordForm.odometerBefore,odometerAfter:this.recordForm.odometerAfter,notes:this.recordForm.notes,status:this.recordForm.status,driverId:this.currentDriverId}).subscribe({next:e=>{this.isSubmitting=!1,this.toastService.success("\u062A\u0645\u062A \u0625\u0636\u0627\u0641\u0629 \u0633\u062C\u0644 \u0627\u0644\u0635\u064A\u0627\u0646\u0629 \u0628\u0646\u062C\u0627\u062D"),this.maintenanceAdded.emit(e)},error:e=>{this.isSubmitting=!1,console.error("Error creating maintenance record:",e),this.toastService.error("\u0641\u0634\u0644 \u062D\u0641\u0638 \u0633\u062C\u0644 \u0627\u0644\u0635\u064A\u0627\u0646\u0629")}})}isFormValid(){return!!(this.recordForm.vehicleId&&this.recordForm.serviceLocation&&this.recordForm.odometerBefore!==void 0&&this.recordForm.odometerAfter!==void 0&&this.recordForm.odometerAfter>=this.recordForm.odometerBefore&&this.recordForm.cost!==void 0&&this.recordForm.cost>=0&&this.recordForm.status)}closeModal(){this.close.emit()}static \u0275fac=function(e){return new(e||i)(G(Ye),G(Ps),G(oi),G(Ci))};static \u0275cmp=Oe({type:i,selectors:[["app-add-maintenance-modal"]],inputs:{vehicleId:"vehicleId",vehicleInternalId:"vehicleInternalId"},outputs:{close:"close",maintenanceAdded:"maintenanceAdded"},decls:70,vars:15,consts:[["maintenanceForm","ngForm"],[1,"modal-backdrop","fade","show"],["tabindex","-1","dir","rtl",1,"modal","fade","show","d-block"],[1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable","modal-lg"],[1,"modal-content"],[1,"modal-header","bg-primary","text-white"],[1,"modal-title","fw-bold"],[1,"fas","fa-wrench","me-2"],["type","button",1,"btn-close","btn-close-white",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"mb-3"],[1,"form-label","fw-bold"],[1,"fas","fa-calendar","me-2","text-primary"],["type","date","name","date","required","","max","9999-12-31",1,"form-control",3,"ngModelChange","ngModel"],["for","status",1,"form-label","fw-bold"],[1,"fas","fa-info-circle","me-2","text-primary"],["id","status","name","status","required","",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"fas","fa-user","me-2","text-primary"],["type","text","readonly","","disabled","",1,"form-control",3,"value"],[1,"text-muted","d-block","mt-1"],[1,"fas","fa-tools","me-2","text-primary"],[3,"typeSelected","selectedTypeName"],["class","alert alert-info mt-2",4,"ngIf"],["for","serviceLocation",1,"form-label","fw-bold"],[1,"fas","fa-map-marker-alt","me-2","text-primary"],["type","text","id","serviceLocation","name","serviceLocation","placeholder","\u0627\u0633\u0645 \u0627\u0644\u0648\u0631\u0634\u0629 \u0623\u0648 \u0627\u0644\u0645\u0631\u0643\u0632","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"row","mb-3"],[1,"col-6"],["for","odometerBefore",1,"form-label","fw-bold"],[1,"fas","fa-tachometer-alt","me-2","text-primary"],["type","number","id","odometerBefore","name","odometerBefore","min","0","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","odometerAfter",1,"form-label","fw-bold"],["type","number","id","odometerAfter","name","odometerAfter","min","0","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","alert alert-info mb-3",4,"ngIf"],["for","cost",1,"form-label","fw-bold"],[1,"fas","fa-dollar-sign","me-2","text-primary"],["type","number","id","cost","name","cost","step","0.01","min","0","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","notes",1,"form-label","fw-bold"],[1,"fas","fa-sticky-note","me-2","text-primary"],["id","notes","name","notes","rows","4","placeholder","\u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0635\u064A\u0627\u0646\u0629 \u0648\u0627\u0644\u0645\u0644\u0627\u062D\u0638\u0627\u062A...",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],[1,"fas","fa-times","me-2"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"fas","fa-save","me-2"],[3,"value"],[1,"alert","alert-info","mt-2"],[1,"fas","fa-road","me-2"],[1,"alert","alert-info","mb-3"],[1,"fas","fa-info-circle","me-2"]],template:function(e,n){if(e&1){let r=Q();x(0,"div",1),s(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h5",6),x(6,"i",7),d(7," \u0625\u0636\u0627\u0641\u0629 \u0633\u062C\u0644 \u0635\u064A\u0627\u0646\u0629 "),l(),s(8,"button",8),T("click",function(){return b(r),C(n.closeModal())}),l()(),s(9,"div",9)(10,"form",10,0),T("ngSubmit",function(){return b(r),C(n.onSubmit())}),s(12,"div",11)(13,"label",12),x(14,"i",13),d(15," \u0627\u0644\u062A\u0627\u0631\u064A\u062E "),l(),s(16,"input",14),V("ngModelChange",function(u){return b(r),N(n.recordForm.date,u)||(n.recordForm.date=u),C(u)}),l()(),s(17,"div",11)(18,"label",15),x(19,"i",16),d(20," \u0627\u0644\u062D\u0627\u0644\u0629 "),l(),s(21,"select",17),V("ngModelChange",function(u){return b(r),N(n.recordForm.status,u)||(n.recordForm.status=u),C(u)}),H(22,gD,2,2,"option",18),l()(),s(23,"div",11)(24,"label",12),x(25,"i",19),d(26," \u0627\u0644\u0633\u0627\u0626\u0642 "),l(),x(27,"input",20),s(28,"small",21),d(29,"\u0633\u064A\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u0635\u064A\u0627\u0646\u0629 \u0628\u0627\u0633\u0645\u0643"),l()(),s(30,"div",11)(31,"label",12),x(32,"i",22),d(33," \u0646\u0648\u0639 \u0627\u0644\u0635\u064A\u0627\u0646\u0629 "),l(),s(34,"app-maintenance-type-search",23),T("typeSelected",function(u){return b(r),C(n.onMaintenanceTypeSelected(u))}),l(),H(35,_D,6,3,"div",24),l(),s(36,"div",11)(37,"label",25),x(38,"i",26),d(39," \u0645\u0648\u0642\u0639 \u0627\u0644\u062E\u062F\u0645\u0629 "),l(),s(40,"input",27),V("ngModelChange",function(u){return b(r),N(n.recordForm.serviceLocation,u)||(n.recordForm.serviceLocation=u),C(u)}),l()(),s(41,"div",28)(42,"div",29)(43,"label",30),x(44,"i",31),d(45," \u0627\u0644\u0639\u062F\u0627\u062F \u0642\u0628\u0644 (\u0643\u0645) "),l(),s(46,"input",32),V("ngModelChange",function(u){return b(r),N(n.recordForm.odometerBefore,u)||(n.recordForm.odometerBefore=u),C(u)}),l()(),s(47,"div",29)(48,"label",33),x(49,"i",31),d(50," \u0627\u0644\u0639\u062F\u0627\u062F \u0628\u0639\u062F (\u0643\u0645) "),l(),s(51,"input",34),V("ngModelChange",function(u){return b(r),N(n.recordForm.odometerAfter,u)||(n.recordForm.odometerAfter=u),C(u)}),l()()(),H(52,vD,5,1,"div",35),s(53,"div",11)(54,"label",36),x(55,"i",37),d(56," \u0627\u0644\u062A\u0643\u0644\u0641\u0629 (\u20AA) "),l(),s(57,"input",38),V("ngModelChange",function(u){return b(r),N(n.recordForm.cost,u)||(n.recordForm.cost=u),C(u)}),l()(),s(58,"div",11)(59,"label",39),x(60,"i",40),d(61," \u0645\u0644\u0627\u062D\u0638\u0627\u062A "),l(),s(62,"textarea",41),V("ngModelChange",function(u){return b(r),N(n.recordForm.notes,u)||(n.recordForm.notes=u),C(u)}),l()()()(),s(63,"div",42)(64,"button",43),T("click",function(){return b(r),C(n.closeModal())}),x(65,"i",44),d(66," \u0625\u0644\u063A\u0627\u0621 "),l(),s(67,"button",45),T("click",function(){return b(r),C(n.onSubmit())}),x(68,"i",46),d(69),l()()()()()}e&2&&(m(16),R("ngModel",n.recordForm.date),m(5),R("ngModel",n.recordForm.status),m(),S("ngForOf",n.maintenanceStatuses),m(5),S("value",n.isLoadingDriver?"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644...":n.currentDriverName),m(7),S("selectedTypeName",n.recordForm.type),m(),S("ngIf",n.kmSinceLast!==null),m(5),R("ngModel",n.recordForm.serviceLocation),m(6),R("ngModel",n.recordForm.odometerBefore),m(5),R("ngModel",n.recordForm.odometerAfter),m(),S("ngIf",n.calculateDistance()>0),m(5),R("ngModel",n.recordForm.cost),m(5),R("ngModel",n.recordForm.notes),m(2),S("disabled",n.isSubmitting),m(3),S("disabled",!n.isFormValid()||n.isSubmitting),m(2),q(" ",n.isSubmitting?"\u062C\u0627\u0631\u064A \u0627\u0644\u062D\u0641\u0638...":"\u062D\u0641\u0638"," "))},dependencies:[tt,Kt,Ot,Lt,et,vi,At,ot,Xt,Zt,xi,rt,$t,Le,ai,kt,wn,ks],styles:[".modal-backdrop[_ngcontent-%COMP%]{z-index:1040}.modal[_ngcontent-%COMP%]{z-index:1050}.modal-content[_ngcontent-%COMP%]{border-radius:.5rem;box-shadow:0 .5rem 1rem #00000026}.modal-header[_ngcontent-%COMP%]{border-bottom:none;border-top-left-radius:.5rem;border-top-right-radius:.5rem}.btn-primary[_ngcontent-%COMP%]{background-color:#1193d4;border-color:#1193d4}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0d7ab8;border-color:#0d7ab8}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.text-primary[_ngcontent-%COMP%]{color:#1193d4!important}.form-label[_ngcontent-%COMP%]{margin-bottom:.5rem}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#1193d4;box-shadow:0 0 0 .25rem #1193d440}.alert-info[_ngcontent-%COMP%]{background-color:#d1ecf1;border-color:#bee5eb;color:#0c5460}[dir=rtl][_ngcontent-%COMP%]   .me-2[_ngcontent-%COMP%]{margin-right:0!important;margin-left:.5rem!important}[dir=rtl][_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{margin:0 auto 0 0}"]})};function xD(i,t){if(i&1&&(s(0,"div",37),x(1,"i",38),s(2,"strong"),d(3,"\u0627\u0644\u0645\u0633\u0627\u0641\u0629 \u0627\u0644\u0645\u0642\u0637\u0648\u0639\u0629:"),l(),d(4),l()),i&2){let e=h();m(4),q(" ",e.calculateDistance()," \u0643\u0645 ")}}var qc=class i{constructor(t,e,n,r){this.fuelService=t;this.vehicleService=e;this.driverService=n;this.toastService=r}vehicleId="";vehicleInternalId="";driverId="";driverInternalId="";close=new di;fuelAdded=new di;recordForm={date:new Date().toISOString().split("T")[0],ambulanceName:"",ambulanceNumber:"",ambulanceId:"",driverId:"",driverName:"",driverInternalId:"",odometerBefore:0,odometerAfter:0,fuelAmount:0,cost:0,notes:""};isSubmitting=!1;ngOnInit(){this.recordForm.ambulanceId=this.vehicleInternalId,this.recordForm.driverInternalId=this.driverInternalId,this.recordForm.driverId=this.driverId,this.vehicleInternalId&&(this.vehicleService.getVehicleById(this.vehicleInternalId).subscribe({next:t=>{this.recordForm.ambulanceName=t.vehicleName,this.recordForm.ambulanceNumber=t.vehicleId},error:t=>console.error("Failed to load vehicle:",t)}),this.vehicleService.getCurrentOdometer(this.vehicleInternalId).subscribe({next:t=>{this.recordForm.odometerBefore=t.currentOdometer},error:t=>console.error("Failed to load current odometer:",t)})),this.driverInternalId&&this.driverService.getDriverById(this.driverInternalId).subscribe({next:t=>{this.recordForm.driverName=t.arabicName||t.name},error:t=>console.error("Failed to load driver:",t)})}calculateDistance(){let t=this.recordForm.odometerBefore||0,e=this.recordForm.odometerAfter||0;return Math.max(0,e-t)}onSubmit(){if(!this.isFormValid())return;this.isSubmitting=!0;let t=new Date(this.recordForm.date+"T00:00:00");this.fuelService.createFuelRecord({ambulanceName:this.recordForm.ambulanceName,ambulanceNumber:this.recordForm.ambulanceNumber,ambulanceId:this.recordForm.ambulanceId,driverId:this.recordForm.driverId,driverName:this.recordForm.driverName,driverInternalId:this.recordForm.driverInternalId,date:t,odometerBefore:this.recordForm.odometerBefore,odometerAfter:this.recordForm.odometerAfter,fuelAmount:this.recordForm.fuelAmount,cost:this.recordForm.cost,notes:this.recordForm.notes}).subscribe({next:e=>{this.isSubmitting=!1,this.toastService.success("\u062A\u0645\u062A \u0625\u0636\u0627\u0641\u0629 \u0633\u062C\u0644 \u0627\u0644\u0648\u0642\u0648\u062F \u0628\u0646\u062C\u0627\u062D"),this.fuelAdded.emit(e)},error:e=>{this.isSubmitting=!1,console.error("Error creating fuel record:",e),this.toastService.error("\u0641\u0634\u0644 \u062D\u0641\u0638 \u0633\u062C\u0644 \u0627\u0644\u0648\u0642\u0648\u062F")}})}isFormValid(){return!!(this.recordForm.ambulanceId&&this.recordForm.odometerBefore!==void 0&&this.recordForm.odometerAfter!==void 0&&this.recordForm.odometerAfter>this.recordForm.odometerBefore&&this.recordForm.fuelAmount&&this.recordForm.fuelAmount>0&&this.recordForm.cost&&this.recordForm.cost>0)}closeModal(){this.close.emit()}static \u0275fac=function(e){return new(e||i)(G(Is),G(oi),G(Ci),G(Ye))};static \u0275cmp=Oe({type:i,selectors:[["app-add-fuel-modal"]],inputs:{vehicleId:"vehicleId",vehicleInternalId:"vehicleInternalId",driverId:"driverId",driverInternalId:"driverInternalId"},outputs:{close:"close",fuelAdded:"fuelAdded"},decls:51,vars:10,consts:[["fuelForm","ngForm"],[1,"modal-backdrop","fade","show"],["tabindex","-1","dir","rtl",1,"modal","fade","show","d-block"],[1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header","bg-primary","text-white"],[1,"modal-title","fw-bold"],[1,"fas","fa-gas-pump","me-2"],["type","button",1,"btn-close","btn-close-white",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"mb-3"],[1,"form-label","fw-bold"],[1,"fas","fa-calendar","me-2","text-primary"],["type","date","name","date","required","","max","9999-12-31",1,"form-control",3,"ngModelChange","ngModel"],[1,"row","mb-3"],[1,"col-6"],["for","odometerBefore",1,"form-label","fw-bold"],[1,"fas","fa-tachometer-alt","me-2","text-primary"],["type","number","id","odometerBefore","name","odometerBefore","min","0","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","odometerAfter",1,"form-label","fw-bold"],["type","number","id","odometerAfter","name","odometerAfter","min","0","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","alert alert-info mb-3",4,"ngIf"],["for","fuelAmount",1,"form-label","fw-bold"],[1,"fas","fa-gas-pump","me-2","text-primary"],["type","number","id","fuelAmount","name","fuelAmount","step","0.1","min","0","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","cost",1,"form-label","fw-bold"],[1,"fas","fa-dollar-sign","me-2","text-primary"],["type","number","id","cost","name","cost","step","0.01","min","0","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","notes",1,"form-label","fw-bold"],[1,"fas","fa-sticky-note","me-2","text-primary"],["id","notes","name","notes","rows","3","placeholder","\u0623\u0636\u0641 \u0623\u064A \u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629...",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],[1,"fas","fa-times","me-2"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"fas","fa-save","me-2"],[1,"alert","alert-info","mb-3"],[1,"fas","fa-info-circle","me-2"]],template:function(e,n){if(e&1){let r=Q();x(0,"div",1),s(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h5",6),x(6,"i",7),d(7," \u0625\u0636\u0627\u0641\u0629 \u0633\u062C\u0644 \u0648\u0642\u0648\u062F "),l(),s(8,"button",8),T("click",function(){return b(r),C(n.closeModal())}),l()(),s(9,"div",9)(10,"form",10,0),T("ngSubmit",function(){return b(r),C(n.onSubmit())}),s(12,"div",11)(13,"label",12),x(14,"i",13),d(15," \u0627\u0644\u062A\u0627\u0631\u064A\u062E "),l(),s(16,"input",14),V("ngModelChange",function(u){return b(r),N(n.recordForm.date,u)||(n.recordForm.date=u),C(u)}),l()(),s(17,"div",15)(18,"div",16)(19,"label",17),x(20,"i",18),d(21," \u0627\u0644\u0639\u062F\u0627\u062F \u0642\u0628\u0644 (\u0643\u0645) "),l(),s(22,"input",19),V("ngModelChange",function(u){return b(r),N(n.recordForm.odometerBefore,u)||(n.recordForm.odometerBefore=u),C(u)}),l()(),s(23,"div",16)(24,"label",20),x(25,"i",18),d(26," \u0627\u0644\u0639\u062F\u0627\u062F \u0628\u0639\u062F (\u0643\u0645) "),l(),s(27,"input",21),V("ngModelChange",function(u){return b(r),N(n.recordForm.odometerAfter,u)||(n.recordForm.odometerAfter=u),C(u)}),l()()(),H(28,xD,5,1,"div",22),s(29,"div",11)(30,"label",23),x(31,"i",24),d(32," \u0643\u0645\u064A\u0629 \u0627\u0644\u0648\u0642\u0648\u062F (\u0644\u062A\u0631) "),l(),s(33,"input",25),V("ngModelChange",function(u){return b(r),N(n.recordForm.fuelAmount,u)||(n.recordForm.fuelAmount=u),C(u)}),l()(),s(34,"div",11)(35,"label",26),x(36,"i",27),d(37," \u0627\u0644\u062A\u0643\u0644\u0641\u0629 (\u20AA) "),l(),s(38,"input",28),V("ngModelChange",function(u){return b(r),N(n.recordForm.cost,u)||(n.recordForm.cost=u),C(u)}),l()(),s(39,"div",11)(40,"label",29),x(41,"i",30),d(42," \u0645\u0644\u0627\u062D\u0638\u0627\u062A (\u0627\u062E\u062A\u064A\u0627\u0631\u064A) "),l(),s(43,"textarea",31),V("ngModelChange",function(u){return b(r),N(n.recordForm.notes,u)||(n.recordForm.notes=u),C(u)}),l()()()(),s(44,"div",32)(45,"button",33),T("click",function(){return b(r),C(n.closeModal())}),x(46,"i",34),d(47," \u0625\u0644\u063A\u0627\u0621 "),l(),s(48,"button",35),T("click",function(){return b(r),C(n.onSubmit())}),x(49,"i",36),d(50),l()()()()()}e&2&&(m(16),R("ngModel",n.recordForm.date),m(6),R("ngModel",n.recordForm.odometerBefore),m(5),R("ngModel",n.recordForm.odometerAfter),m(),S("ngIf",n.calculateDistance()>0),m(5),R("ngModel",n.recordForm.fuelAmount),m(5),R("ngModel",n.recordForm.cost),m(5),R("ngModel",n.recordForm.notes),m(2),S("disabled",n.isSubmitting),m(3),S("disabled",!n.isFormValid()||n.isSubmitting),m(2),q(" ",n.isSubmitting?"\u062C\u0627\u0631\u064A \u0627\u0644\u062D\u0641\u0638...":"\u062D\u0641\u0638"," "))},dependencies:[tt,Kt,et,vi,ot,Xt,Zt,xi,rt,$t,Le,kt],styles:[".modal-backdrop[_ngcontent-%COMP%]{z-index:1040}.modal[_ngcontent-%COMP%]{z-index:1050}.modal-content[_ngcontent-%COMP%]{border-radius:.5rem;box-shadow:0 .5rem 1rem #00000026}.modal-header[_ngcontent-%COMP%]{border-bottom:none;border-top-left-radius:.5rem;border-top-right-radius:.5rem}.btn-primary[_ngcontent-%COMP%]{background-color:#1193d4;border-color:#1193d4}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0d7ab8;border-color:#0d7ab8}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.text-primary[_ngcontent-%COMP%]{color:#1193d4!important}.form-label[_ngcontent-%COMP%]{margin-bottom:.5rem}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#1193d4;box-shadow:0 0 0 .25rem #1193d440}.alert-info[_ngcontent-%COMP%]{background-color:#d1ecf1;border-color:#bee5eb;color:#0c5460}[dir=rtl][_ngcontent-%COMP%]   .me-2[_ngcontent-%COMP%]{margin-right:0!important;margin-left:.5rem!important}[dir=rtl][_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{margin:0 auto 0 0}"]})};function yD(i,t){if(i&1){let e=Q();x(0,"div",0),s(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),x(6,"i",6),d(7," \u062A\u0630\u0643\u064A\u0631: \u0641\u062D\u0635 \u0627\u0644\u0645\u0631\u0643\u0628\u0629 \u0645\u0637\u0644\u0648\u0628 "),l()(),s(8,"div",7)(9,"p",8),d(10," \u064A\u062C\u0628 \u0639\u0644\u064A\u0643 \u0625\u0643\u0645\u0627\u0644 \u0642\u0627\u0626\u0645\u0629 \u0641\u062D\u0635 \u0627\u0644\u0645\u0639\u062F\u0627\u062A \u0644\u0644\u0645\u0631\u0643\u0628\u0629 "),s(11,"strong"),d(12),l(),d(13," \u0642\u0628\u0644 \u0628\u062F\u0621 \u0627\u0644\u0639\u0645\u0644. "),l(),s(14,"p",9),d(15," \u064A\u0645\u0643\u0646\u0643 \u062A\u0623\u062C\u064A\u0644 \u0647\u0630\u0627 \u0627\u0644\u062A\u0630\u0643\u064A\u0631\u060C \u0648\u0633\u064A\u0638\u0647\u0631 \u0645\u0631\u0629 \u0623\u062E\u0631\u0649 \u0628\u0639\u062F 10 \u062F\u0642\u0627\u0626\u0642 \u062D\u062A\u0649 \u064A\u062A\u0645 \u0625\u0643\u0645\u0627\u0644 \u0627\u0644\u0641\u062D\u0635. "),l()(),s(16,"div",10)(17,"button",11),T("click",function(){b(e);let r=h();return C(r.onDismiss())}),x(18,"i",12),d(19," \u062A\u0623\u062C\u064A\u0644 (10 \u062F\u0642\u0627\u0626\u0642) "),l(),s(20,"button",13),T("click",function(){b(e);let r=h();return C(r.onOpenChecklist())}),x(21,"i",14),d(22," \u0628\u062F\u0621 \u0627\u0644\u0641\u062D\u0635 \u0627\u0644\u0622\u0646 "),l()()()()()}if(i&2){let e=h();m(12),z(e.vehicleName())}}var Yc=class i{isOpen=xa.required();vehicleName=xa.required();openChecklist=Lo();dismiss=Lo();onOpenChecklist(){this.openChecklist.emit()}onDismiss(){this.dismiss.emit()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Oe({type:i,selectors:[["app-checklist-reminder"]],inputs:{isOpen:[1,"isOpen"],vehicleName:[1,"vehicleName"]},outputs:{openChecklist:"openChecklist",dismiss:"dismiss"},decls:1,vars:1,consts:[[1,"modal-backdrop","fade","show"],["tabindex","-1","role","dialog",1,"modal","fade","show","d-block"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","bg-warning","text-dark"],[1,"modal-title"],[1,"bi","bi-exclamation-triangle-fill","me-2"],[1,"modal-body"],[1,"mb-3"],[1,"text-muted","small","mb-0"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"bi","bi-clock","me-1"],["type","button",1,"btn","btn-warning",3,"click"],[1,"bi","bi-clipboard-check","me-1"]],template:function(e,n){e&1&&H(0,yD,23,1),e&2&&le(n.isOpen()?0:-1)},dependencies:[Le],styles:[".modal-backdrop[_ngcontent-%COMP%]{background-color:#00000080}.modal-header[_ngcontent-%COMP%]{border-bottom:2px solid #ffc107}.modal-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}"],changeDetection:0})};var Fr=Jp(lp());var Xc=class i{constructor(t,e){this.vehicleService=t;this.authService=e}UPDATE_INTERVAL_MS=15*1e3;currentPosition$=new Gi(null);isTracking$=new Gi(!1);trackingError$=new Gi(null);destroy$=new Vi;trackingSubscription=null;watchId=null;getCurrentPosition(){return this.currentPosition$.asObservable()}isTracking(){return this.isTracking$.asObservable()}getTrackingError(){return this.trackingError$.asObservable()}startTracking(t){if(this.isTracking$.value){console.log("Location tracking already active");return}if(!this.isGeolocationSupported()){this.trackingError$.next("\u062E\u062F\u0645\u0629 \u0627\u0644\u0645\u0648\u0642\u0639 \u063A\u064A\u0631 \u0645\u062A\u0627\u062D\u0629 \u0641\u064A \u0647\u0630\u0627 \u0627\u0644\u0645\u062A\u0635\u0641\u062D");return}this.isTracking$.next(!0),this.trackingError$.next(null),this.updatePosition(t),this.trackingSubscription=ah(this.UPDATE_INTERVAL_MS).pipe(Io(this.destroy$),Wn(()=>this.authService.isAuthenticated())).subscribe(()=>{this.updatePosition(t)}),console.log("Location tracking started for vehicle:",t)}stopTracking(){this.trackingSubscription&&(this.trackingSubscription.unsubscribe(),this.trackingSubscription=null),this.watchId!==null&&(navigator.geolocation.clearWatch(this.watchId),this.watchId=null),this.isTracking$.next(!1),console.log("Location tracking stopped")}getCurrentPositionOnce(){return new Promise((t,e)=>{if(!this.isGeolocationSupported()){e(new Error("Geolocation is not supported"));return}navigator.geolocation.getCurrentPosition(n=>{let r={latitude:n.coords.latitude,longitude:n.coords.longitude,accuracy:n.coords.accuracy,timestamp:new Date(n.timestamp)};this.currentPosition$.next(r),t(r)},n=>{let r=this.getGeolocationErrorMessage(n);this.trackingError$.next(r),e(new Error(r))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})})}updatePosition(t){navigator.geolocation.getCurrentPosition(e=>{let n={latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy,timestamp:new Date(e.timestamp)};this.currentPosition$.next(n),this.trackingError$.next(null),this.vehicleService.updateLocation(t,n.latitude,n.longitude).subscribe({next:()=>{console.log("Location updated successfully:",n.latitude,n.longitude)},error:r=>{console.error("Failed to update location on server:",r)}})},e=>{let n=this.getGeolocationErrorMessage(e);this.trackingError$.next(n),console.error("Geolocation error:",n)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})}isGeolocationSupported(){return"geolocation"in navigator}getGeolocationErrorMessage(t){switch(t.code){case t.PERMISSION_DENIED:return"\u062A\u0645 \u0631\u0641\u0636 \u0625\u0630\u0646 \u0627\u0644\u0648\u0635\u0648\u0644 \u0644\u0644\u0645\u0648\u0642\u0639. \u064A\u0631\u062C\u0649 \u062A\u0641\u0639\u064A\u0644 \u062E\u062F\u0645\u0629 \u0627\u0644\u0645\u0648\u0642\u0639 \u0641\u064A \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u0645\u062A\u0635\u0641\u062D";case t.POSITION_UNAVAILABLE:return"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0645\u0648\u0642\u0639 \u063A\u064A\u0631 \u0645\u062A\u0627\u062D\u0629 \u062D\u0627\u0644\u064A\u0627\u064B";case t.TIMEOUT:return"\u0627\u0646\u062A\u0647\u062A \u0645\u0647\u0644\u0629 \u0637\u0644\u0628 \u0627\u0644\u0645\u0648\u0642\u0639. \u064A\u0631\u062C\u0649 \u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062E\u0631\u0649";default:return"\u062D\u062F\u062B \u062E\u0637\u0623 \u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641 \u0623\u062B\u0646\u0627\u0621 \u062A\u062D\u062F\u064A\u062F \u0627\u0644\u0645\u0648\u0642\u0639"}}ngOnDestroy(){this.stopTracking(),this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(e){return new(e||i)(Ue(oi),Ue(Pt))};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})};var Rs=class i{constructor(t){this.http=t}API_URL=xt.apiEndpoint;injectedVars=Ne(ft);getCurrentUserProfile(){return this.http.get(`${this.API_URL}/auth/me`).pipe(gi(t=>{t.profileImageUrl=t.profileImageUrl!==void 0?t.profileImageUrl:t.profile_image_url,this.injectedVars.setCurrentIMG(t.profileImageUrl||"/assets/default-avatar.png")}),wi(this.handleError))}updateProfile(t){return this.http.put(`${this.API_URL}/auth/me`,t).pipe(wi(this.handleError))}changePassword(t,e){return this.http.put(`${this.API_URL}/auth/change-password`,{oldPassword:t,newPassword:e}).pipe(wi(this.handleError))}handleError(t){let e="\u062D\u062F\u062B \u062E\u0637\u0623 \u063A\u064A\u0631 \u0645\u062A\u0648\u0642\u0639";return t.error instanceof ErrorEvent?e=`\u062E\u0637\u0623: ${t.error.message}`:t.status===400?e=t.error?.message||"\u0628\u064A\u0627\u0646\u0627\u062A \u063A\u064A\u0631 \u0635\u062D\u064A\u062D\u0629":t.status===401?e="\u063A\u064A\u0631 \u0645\u0635\u0631\u062D. \u064A\u0631\u062C\u0649 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644 \u0645\u0631\u0629 \u0623\u062E\u0631\u0649":t.status===403?e="\u0644\u064A\u0633 \u0644\u062F\u064A\u0643 \u0635\u0644\u0627\u062D\u064A\u0629 \u0644\u0644\u0642\u064A\u0627\u0645 \u0628\u0647\u0630\u0627 \u0627\u0644\u0625\u062C\u0631\u0627\u0621":t.status===404?e="\u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u063A\u064A\u0631 \u0645\u0648\u062C\u0648\u062F":t.status===409?e=t.error?.message||"\u0647\u0630\u0627 \u0627\u0644\u0628\u064A\u0627\u0646 \u0645\u0648\u062C\u0648\u062F \u0628\u0627\u0644\u0641\u0639\u0644":t.status===500?e="\u062E\u0637\u0623 \u0641\u064A \u0627\u0644\u062E\u0627\u062F\u0645. \u064A\u0631\u062C\u0649 \u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629 \u0644\u0627\u062D\u0642\u0627\u064B":t.error?.message&&(e=t.error.message),pn(()=>new Error(e))}static \u0275fac=function(e){return new(e||i)(Ue(It))};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})};function CD(i,t){i&1&&(s(0,"div",22),x(1,"div",45),s(2,"p",46),d(3,"\u062C\u0627\u0631\u064A \u062A\u062D\u062F\u064A\u062F \u0627\u0644\u0645\u0648\u0642\u0639..."),l()())}function wD(i,t){if(i&1&&(s(0,"div",23),x(1,"i",47),s(2,"p",48),d(3),l()()),i&2){let e=h();m(3),z(e.locationError())}}function SD(i,t){if(i&1&&(s(0,"p",15),x(1,"i",49),d(2),l(),s(3,"p",50),x(4,"i",51),d(5),gt(6,"date"),l()),i&2){let e=h();m(2),q(" ",e.getFormattedLocation()," "),m(3),q(" \u0622\u062E\u0631 \u062A\u062D\u062F\u064A\u062B: ",Bt(6,2,e.currentPosition().timestamp,"shortTime")," ")}}function TD(i,t){i&1&&(s(0,"p",30),d(1,"\u062C\u0627\u0631\u064A \u062A\u062D\u062F\u064A\u062F \u0627\u0644\u0645\u0648\u0642\u0639..."),l())}function ED(i,t){if(i&1&&(s(0,"span",40),d(1),l()),i&2){let e=h();m(),q(" ",e.pendingLoansCount()," ")}}function AD(i,t){if(i&1){let e=Q();s(0,"app-add-fuel-modal",52),T("close",function(){b(e);let r=h();return C(r.closeFuelModal())})("fuelAdded",function(){b(e);let r=h();return C(r.onFuelAdded())}),l()}if(i&2){let e,n,r=h();S("vehicleId",r.vehicleId||"")("vehicleInternalId",r.vehicleId||"")("driverId",((e=r.driver())==null?null:e.id)||"")("driverInternalId",((n=r.driver())==null?null:n.id)||"")}}function MD(i,t){if(i&1){let e=Q();s(0,"app-add-maintenance-modal",53),T("close",function(){b(e);let r=h();return C(r.closeMaintenanceModal())})("maintenanceAdded",function(){b(e);let r=h();return C(r.onMaintenanceAdded())}),l()}if(i&2){let e=h();S("vehicleId",e.vehicleId||"")("vehicleInternalId",e.vehicleId||"")}}var Kc=class i{constructor(t,e,n,r,a,u,p,g,v){this.router=t;this.toastService=e;this.driverService=n;this.tripService=r;this.authService=a;this.locationTrackingService=u;this.vehicleCookieService=p;this.checklistService=g;this.userService=v}driver=Z(null);driverName=Z("...");driverStatus=Z("\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644...");tripsCompleted=Z(0);totalEarnings=Z(0);pendingLoansCount=Z(0);pendingLoansAmount=Z(0);currentPosition=Z(null);locationError=Z(null);isLocationLoading=Z(!0);vehicleId=null;map=null;marker=null;showFuelModal=!1;showMaintenanceModal=!1;showEndShiftConfirmation=Z(!1);endShiftModalConfig=Z({type:"warning",title:"\u0625\u0646\u0647\u0627\u0621 \u0627\u0644\u062F\u0648\u0627\u0645",message:'\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u0625\u0646\u0647\u0627\u0621 \u0627\u0644\u062F\u0648\u0627\u0645\u061F \u0633\u064A\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 \u062E\u0631\u0648\u062C\u0643 \u0648\u062A\u062D\u062F\u064A\u062B \u062D\u0627\u0644\u062A\u0643 \u0625\u0644\u0649 "\u063A\u064A\u0631 \u0645\u062A\u0635\u0644".',highlightedText:'"\u063A\u064A\u0631 \u0645\u062A\u0635\u0644"',confirmButtonText:"\u0646\u0639\u0645\u060C \u0625\u0646\u0647\u0627\u0621 \u0627\u0644\u062F\u0648\u0627\u0645",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621"});showChecklistReminder=Z(!1);currentSessionId=Z(null);currentVehicleName=Z("");REMINDER_CHECK_INTERVAL=61e4;reminderCheckTimer=null;subscriptions=[];isAdmin=We(()=>this.authService.isAdmin());ngOnInit(){this.loadDriverData(),this.subscribeToLocation(),this.checkReminderStatus(),this.startPeriodicReminderCheck()}ngAfterViewInit(){setTimeout(()=>{this.initMap()},100)}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.map&&this.map.remove(),this.reminderCheckTimer&&clearInterval(this.reminderCheckTimer)}initMap(){document.getElementById("driver-location-map")&&(delete Fr.Icon.Default.prototype._getIconUrl,Fr.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"}),this.map=Fr.map("driver-location-map",{center:[31.5,35],zoom:8}),Fr.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap",maxZoom:18}).addTo(this.map))}updateMapPosition(t){if(!this.map)return;let e=[t.latitude,t.longitude];if(this.marker)this.marker.setLatLng(e);else{let n=Fr.divIcon({className:"driver-marker",html:`
          <div class="marker-pulse"></div>
          <div class="marker-dot">
            <i class="fas fa-ambulance" style="font-size: 1.5rem;"></i>
          </div>
        `,iconSize:[40,40],iconAnchor:[20,20]});this.marker=Fr.marker(e,{icon:n}).addTo(this.map)}this.map.setView(e,15)}subscribeToLocation(){let t=this.locationTrackingService.getCurrentPosition().subscribe(n=>{n&&(this.currentPosition.set(n),this.isLocationLoading.set(!1),this.updateMapPosition(n))});this.subscriptions.push(t);let e=this.locationTrackingService.getTrackingError().subscribe(n=>{this.locationError.set(n),n&&this.isLocationLoading.set(!1)});this.subscriptions.push(e)}loadDriverData(){if(this.authService.isAdmin()){this.driverName.set("\u0645\u0633\u0624\u0648\u0644 \u0627\u0644\u0646\u0638\u0627\u0645"),this.driverStatus.set("\u0645\u0633\u0624\u0648\u0644"),this.isLocationLoading.set(!1),this.userService.getCurrentUserProfile().subscribe({next:()=>{},error:()=>{}});let t=this.vehicleCookieService.getSelectedVehicleId();t&&(this.vehicleId=t,this.locationTrackingService.startTracking(t));return}this.driverService.getCurrentDriver().subscribe({next:t=>{this.driver.set(t),this.driverName.set(t.arabicName||t.name||"\u0627\u0644\u0633\u0627\u0626\u0642"),this.driverStatus.set(t.arabicStatus||"\u0645\u062A\u0627\u062D"),this.loadTodayStats(t.id),this.loadPendingLoans(t.id);let e=this.vehicleCookieService.getSelectedVehicleId();e?(this.vehicleId=e,this.locationTrackingService.startTracking(e)):(this.isLocationLoading.set(!1),this.locationError.set("\u0644\u0645 \u064A\u062A\u0645 \u062A\u062D\u062F\u064A\u062F \u0627\u0644\u0645\u0631\u0643\u0628\u0629"))},error:t=>{console.error("Error loading driver data:",t),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0633\u0627\u0626\u0642"),this.driverStatus.set("\u062E\u0637\u0623 \u0641\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644"),this.isLocationLoading.set(!1)}})}loadTodayStats(t){let e=new Date().toISOString().split("T")[0];this.tripService.getTrips({driverId:t,startDate:e,endDate:e}).subscribe({next:n=>{let r=n.data.filter(u=>["\u062A\u0645 \u0627\u0644\u0646\u0642\u0644","\u0631\u0641\u0636 \u0627\u0644\u0646\u0642\u0644"].includes(u.transferStatus));this.tripsCompleted.set(r.length);let a=r.reduce((u,p)=>u+(p.driverShare||0),0);this.totalEarnings.set(a)},error:n=>{console.error("Error loading today stats:",n)}})}loadPendingLoans(t){this.tripService.getPatientLoans(t,{status:"uncollected"}).subscribe({next:e=>{console.log("Pending loans loaded:",e),this.pendingLoansCount.set(e.length),this.pendingLoansAmount.set(e.reduce((n,r)=>n+r.loanAmount,0))},error:e=>{console.error("Error loading pending loans:",e)}})}refreshLocation(){this.isLocationLoading.set(!0),this.locationError.set(null),this.locationTrackingService.getCurrentPositionOnce().then(t=>{this.currentPosition.set(t),this.isLocationLoading.set(!1),this.updateMapPosition(t),this.toastService.success("\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u0648\u0642\u0639")}).catch(t=>{this.locationError.set(t.message),this.isLocationLoading.set(!1),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u0648\u0642\u0639")})}startTrip(){this.router.navigate(["/user/my-trips"])}endShift(){this.showEndShiftConfirmation.set(!0)}confirmEndShift(){this.showEndShiftConfirmation.set(!1),this.authService.logout().subscribe({next:()=>{this.locationTrackingService.stopTracking(),this.toastService.success("\u062A\u0645 \u0625\u0646\u0647\u0627\u0621 \u0627\u0644\u062F\u0648\u0627\u0645 \u0628\u0646\u062C\u0627\u062D")},error:t=>{console.error("Logout failed:",t),this.toastService.error("\u0641\u0634\u0644 \u0625\u0646\u0647\u0627\u0621 \u0627\u0644\u062F\u0648\u0627\u0645")}})}cancelEndShift(){this.showEndShiftConfirmation.set(!1)}openFuelModal(){this.showFuelModal=!0}closeFuelModal(){this.showFuelModal=!1}openMaintenanceModal(){this.showMaintenanceModal=!0}closeMaintenanceModal(){this.showMaintenanceModal=!1}viewTrips(){this.router.navigate(["/user/my-trips"])}viewLoans(){this.router.navigate(["/user/loan-collection"])}viewWallet(){this.router.navigate(["/user/wallet"])}onFuelAdded(){this.closeFuelModal(),this.toastService.success("\u062A\u0645\u062A \u0625\u0636\u0627\u0641\u0629 \u0633\u062C\u0644 \u0648\u0642\u0648\u062F \u062C\u062F\u064A\u062F")}onMaintenanceAdded(){this.closeMaintenanceModal(),this.toastService.success("\u062A\u0645\u062A \u0625\u0636\u0627\u0641\u0629 \u0633\u062C\u0644 \u0635\u064A\u0627\u0646\u0629 \u062C\u062F\u064A\u062F")}getFormattedLocation(){let t=this.currentPosition();return t?`${t.latitude.toFixed(6)}, ${t.longitude.toFixed(6)}`:"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"}returnToAdmin(){this.router.navigate(["/admin/admin-dashboard"])}startPeriodicReminderCheck(){this.authService.isAdmin()||(this.reminderCheckTimer=setInterval(()=>{console.log("Periodic reminder check triggered"),this.checkReminderStatus()},this.REMINDER_CHECK_INTERVAL))}checkReminderStatus(){if(this.authService.isAdmin())return;let t=this.vehicleCookieService.getSelectedVehicleId();if(!t){console.log("No vehicle selected, skipping checklist reminder check");return}this.checklistService.getCurrentSession(t).subscribe({next:e=>{console.log("Checklist session data:",e),e&&(this.currentSessionId.set(e.sessionId),this.currentVehicleName.set(e.vehicleName),e.canShowReminder&&!e.checklistCompleted?(console.log("Showing checklist reminder"),this.showChecklistReminder.set(!0)):console.log("Not showing reminder - canShowReminder:",e.canShowReminder,"checklistCompleted:",e.checklistCompleted))},error:e=>{console.error("Failed to check reminder status:",e)}})}openChecklist(){this.showChecklistReminder.set(!1),this.router.navigate(["/user/vehicle-checklist"])}dismissReminder(){let t=this.currentSessionId();t&&this.checklistService.dismissReminder(t).subscribe({next:()=>{this.showChecklistReminder.set(!1);let e=this.REMINDER_CHECK_INTERVAL/6e4;this.toastService.info(`\u0633\u064A\u0638\u0647\u0631 \u0627\u0644\u062A\u0630\u0643\u064A\u0631 \u0645\u0631\u0629 \u0623\u062E\u0631\u0649 \u0628\u0639\u062F ${e} \u062F\u0642\u0627\u0626\u0642`),console.log(`Reminder dismissed, will check again in ${e} minutes`)},error:e=>{console.error("Failed to dismiss reminder:",e),this.toastService.warning("\u062D\u0635\u0644 \u062E\u0637\u0623 \u0639\u0646\u062F \u0645\u062D\u0627\u0648\u0644\u0629 \u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u062A\u0630\u0643\u064A\u0631")}})}static \u0275fac=function(e){return new(e||i)(G(Xe),G(Ye),G(Ci),G(Ln),G(Pt),G(Xc),G(Oi),G(Na),G(Rs))};static \u0275cmp=Oe({type:i,selectors:[["app-driver-dashboard"]],decls:99,vars:33,consts:[["dir","rtl",1,"container-fluid","py-4"],[1,"row","mb-4"],[1,"col-12"],[1,"card","bg-success","text-white","border-0","shadow-sm"],[1,"card-body","text-center","py-5"],[1,"display-4","fw-bold","mb-2"],[1,"mb-0","opacity-75"],[1,"row","mb-4","g-3"],[1,"col-6"],[1,"btn","btn-primary","w-100","py-3","fw-bold",3,"click"],[1,"btn","btn-outline-secondary","w-100","py-3","fw-bold",3,"click"],[1,"fw-bold","mb-3"],[1,"col-6","col-md-3"],[1,"card","border","shadow-sm"],[1,"card-body","money"],[1,"text-muted","mb-2"],[1,"display-5","fw-bold","mb-0"],[1,"card","border","shadow-sm","overflow-hidden"],[1,"row","g-0"],[1,"col-12","col-lg-8"],[1,"map-container"],["id","driver-location-map",1,"driver-map"],[1,"map-loading"],[1,"map-error"],[1,"col-12","col-lg-4"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"fw-bold","mb-0"],[1,"btn","btn-sm","btn-light","rounded-circle",3,"click","disabled"],[1,"fas","fa-sync-alt"],[1,"text-muted","mb-0"],[1,"row","g-3","mb-5"],["role","button",1,"card","border","shadow-sm","h-100",3,"click"],[1,"card-body","text-center","d-flex","flex-column","align-items-center","justify-content-center","py-4"],[1,"fas","fa-gas-pump","text-primary","fa-2x","mb-3"],[1,"fw-medium","mb-0"],[1,"fas","fa-wrench","text-primary","fa-2x","mb-3"],[1,"fas","fa-receipt","text-primary","fa-2x","mb-3"],["role","button",1,"card","border","shadow-sm","h-100","position-relative",3,"click"],[1,"fas","fa-hand-holding-usd","text-success","fa-2x","mb-3"],[1,"position-absolute","top-0","start-0","translate-middle","badge","rounded-pill","bg-danger"],[3,"vehicleId","vehicleInternalId","driverId","driverInternalId","close","fuelAdded",4,"ngIf"],[3,"confirmed","cancelled","isOpen","config"],[3,"vehicleId","vehicleInternalId","close","maintenanceAdded",4,"ngIf"],[3,"openChecklist","dismiss","isOpen","vehicleName"],["role","status",1,"spinner-border","text-primary"],[1,"mt-2","mb-0"],[1,"fas","fa-exclamation-triangle","text-warning","fa-2x","mb-2"],[1,"mb-0"],[1,"fas","fa-map-marker-alt","me-1"],[1,"text-muted","small","mb-0"],[1,"fas","fa-clock","me-1"],[3,"close","fuelAdded","vehicleId","vehicleInternalId","driverId","driverInternalId"],[3,"close","maintenanceAdded","vehicleId","vehicleInternalId"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),d(6),l(),s(7,"p",6),d(8),l()()()()(),s(9,"div",7)(10,"div",8)(11,"button",9),T("click",function(){return n.startTrip()}),d(12," \u0628\u062F\u0621 \u0631\u062D\u0644\u0629 "),l()(),s(13,"div",8)(14,"button",10),T("click",function(){return n.endShift()}),d(15," \u0625\u0646\u0647\u0627\u0621 \u0627\u0644\u062F\u0648\u0627\u0645 "),l()()(),s(16,"h3",11),d(17,"\u0645\u0644\u062E\u0635 \u0627\u0644\u064A\u0648\u0645"),l(),s(18,"div",7)(19,"div",12)(20,"div",13)(21,"div",14)(22,"p",15),d(23,"\u0627\u0644\u0631\u062D\u0644\u0627\u062A \u0627\u0644\u0645\u0643\u062A\u0645\u0644\u0629"),l(),s(24,"h2",16),d(25),l()()()(),s(26,"div",12)(27,"div",13)(28,"div",14)(29,"p",15),d(30,"\u0623\u0631\u0628\u0627\u062D \u0627\u0644\u064A\u0648\u0645"),l(),s(31,"h2",16),d(32),gt(33,"number"),l()()()(),s(34,"div",12)(35,"div",13)(36,"div",14)(37,"p",15),d(38,"\u062F\u064A\u0648\u0646 \u063A\u064A\u0631 \u0645\u062D\u0635\u0651\u0644\u0629"),l(),s(39,"h2",16),d(40),l()()()(),s(41,"div",12)(42,"div",13)(43,"div",14)(44,"p",15),d(45,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u062F\u064A\u0648\u0646"),l(),s(46,"h2",16),d(47),gt(48,"number"),l()()()()(),s(49,"div",1)(50,"div",2)(51,"div",17)(52,"div",18)(53,"div",19)(54,"div",20),x(55,"div",21),H(56,CD,4,0,"div",22)(57,wD,4,1,"div",23),l()(),s(58,"div",24)(59,"div",25)(60,"div",26)(61,"h5",27),d(62,"\u0627\u0644\u0645\u0648\u0642\u0639 \u0627\u0644\u062D\u0627\u0644\u064A"),l(),s(63,"button",28),T("click",function(){return n.refreshLocation()}),x(64,"i",29),l()(),H(65,SD,7,5)(66,TD,2,0,"p",30),l()()()()()(),s(67,"h3",11),d(68,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A \u0627\u0644\u0633\u0631\u064A\u0639\u0629"),l(),s(69,"div",31)(70,"div",12)(71,"div",32),T("click",function(){return n.openFuelModal()}),s(72,"div",33),x(73,"i",34),s(74,"p",35),d(75,"\u0625\u0636\u0627\u0641\u0629 \u0648\u0642\u0648\u062F"),l()()()(),s(76,"div",12)(77,"div",32),T("click",function(){return n.openMaintenanceModal()}),s(78,"div",33),x(79,"i",36),s(80,"p",35),d(81,"\u0625\u0636\u0627\u0641\u0629 \u0635\u064A\u0627\u0646\u0629"),l()()()(),s(82,"div",12)(83,"div",32),T("click",function(){return n.viewTrips()}),s(84,"div",33),x(85,"i",37),s(86,"p",35),d(87,"\u0639\u0631\u0636 \u0627\u0644\u0631\u062D\u0644\u0627\u062A"),l()()()(),s(88,"div",12)(89,"div",38),T("click",function(){return n.viewLoans()}),s(90,"div",33),x(91,"i",39),s(92,"p",35),d(93,"\u062A\u062D\u0635\u064A\u0644 \u0627\u0644\u062F\u064A\u0648\u0646"),l(),H(94,ED,2,1,"span",40),l()()()()(),H(95,AD,1,4,"app-add-fuel-modal",41),s(96,"app-confirmation-modal",42),T("confirmed",function(){return n.confirmEndShift()})("cancelled",function(){return n.cancelEndShift()}),l(),H(97,MD,1,2,"app-add-maintenance-modal",43),s(98,"app-checklist-reminder",44),T("openChecklist",function(){return n.openChecklist()})("dismiss",function(){return n.dismissReminder()}),l()),e&2&&(m(6),z(n.driverStatus()),m(2),q("\u0645\u0631\u062D\u0628\u0627\u064B ",n.driverName(),""),m(17),z(n.tripsCompleted()),m(7),q("",Bt(33,27,n.totalEarnings(),"1.0-2")," \u20AA"),m(3),fe("border-warning",n.pendingLoansCount()>0),m(4),fe("text-warning",n.pendingLoansCount()>0),m(),z(n.pendingLoansCount()),m(2),fe("border-warning",n.pendingLoansAmount()>0),m(4),fe("text-warning",n.pendingLoansAmount()>0),m(),q("",Bt(48,30,n.pendingLoansAmount(),"1.0-2")," \u20AA"),m(9),le(n.isLocationLoading()?56:-1),m(),le(n.locationError()?57:-1),m(6),S("disabled",n.isLocationLoading()),m(),fe("fa-spin",n.isLocationLoading()),m(),le(n.currentPosition()?65:n.locationError()?-1:66),m(29),le(n.pendingLoansCount()>0?94:-1),m(),S("ngIf",n.showFuelModal),m(),S("isOpen",n.showEndShiftConfirmation())("config",n.endShiftModalConfig()),m(),S("ngIf",n.showMaintenanceModal),m(),S("isOpen",n.showChecklistReminder())("vehicleName",n.currentVehicleName()))},dependencies:[Zc,qc,Yc,Le,kt,wn,cl,Wi],styles:[".map-container[_ngcontent-%COMP%]{position:relative;width:100%;height:250px}.driver-map[_ngcontent-%COMP%]{width:100%;height:100%}.map-loading[_ngcontent-%COMP%], .map-error[_ngcontent-%COMP%]{position:absolute;inset:0;background:#ffffffe6;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:1000}.map-error[_ngcontent-%COMP%]{background:#fffffff2;text-align:center;padding:1rem}[_ngcontent-%COMP%]:global(.driver-marker){background:none!important;border:none!important}[_ngcontent-%COMP%]:global(.marker-dot){width:36px;height:36px;background:#0d6efd;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 10px #0d6efd66}[_ngcontent-%COMP%]:global(.marker-dot i){color:#fff;font-size:16px}[_ngcontent-%COMP%]:global(.marker-pulse){position:absolute;width:40px;height:40px;border-radius:50%;background:#0d6efd4d;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1);opacity:1}to{transform:scale(2);opacity:0}}.card[role=button][_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s,box-shadow .2s}.card[role=button][_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 .5rem 1rem #00000026!important}.position-absolute.badge[_ngcontent-%COMP%]{margin-top:.5rem;margin-right:.5rem}.card.bg-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#198754,#157347)!important}.card.border-warning[_ngcontent-%COMP%]{border-color:#ffc107!important;border-width:2px!important}@media (min-width: 992px){.map-container[_ngcontent-%COMP%]{height:200px}}@media (max-width: 576px){.map-container[_ngcontent-%COMP%]{height:200px}}.row.mb-4.g-3[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:stretch}.row.mb-4.g-3[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:100%}.money[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}"]})};var Ba=class i{constructor(t){this.http=t}API_URL=`${xt.apiEndpoint}/medical-forms`;getMedicalForm(t){return this.http.get(`${this.API_URL}/${t}`).pipe(Be(e=>e))}updateMedicalForm(t,e){return this.http.put(`${this.API_URL}/${t}`,{formData:e}).pipe(Be(n=>n))}completeMedicalForm(t,e){return this.http.post(`${this.API_URL}/${t}/complete`,{formData:e}).pipe(Be(n=>n))}unlockMedicalForm(t){return this.http.post(`${this.API_URL}/${t}/unlock`,{}).pipe(Be(e=>e.data))}getMedicalForms(t){let e=Nt(t);return this.http.get(this.API_URL,{params:e})}calculateCompletionPercentage(t,e){let n=this.countFields(e),r=this.countFilledFields(t);return n===0?0:Math.round(r/n*100*100)/100}countFields(t){if(!t||typeof t!="object")return 1;let e=0;if(Array.isArray(t))return 1;for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];r&&typeof r=="object"&&!Array.isArray(r)?e+=this.countFields(r):e++}return e}countFilledFields(t){if(!t||typeof t!="object")return this.isFilled(t)?1:0;let e=0;if(Array.isArray(t))return t.some(n=>this.isFilled(n))?1:0;for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];r&&typeof r=="object"&&!Array.isArray(r)?e+=this.countFilledFields(r):this.isFilled(r)&&e++}return e}isFilled(t){return t==null||t===""||t===!1?!1:Array.isArray(t)?t.some(e=>this.isFilled(e)):!0}loadTemplate(){return this.http.get("/H.json")}checkFormExists(t){return this.getMedicalForm(t).pipe(Be(e=>!!e&&!!e.id))}getCompletionStatus(t){return this.getMedicalForm(t).pipe(Be(e=>({isComplete:e.isComplete,percentage:e.completionPercentage})))}static \u0275fac=function(e){return new(e||i)(Ue(It))};static \u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"})};var FD=i=>({"background-color":i}),kD=()=>[];function PD(i,t){if(i&1&&(s(0,"span",48),d(1),l()),i&2){let e=h();m(),q(" ",e.availableTrips.length," ")}}function DD(i,t){i&1&&(s(0,"div",54)(1,"div",55)(2,"span",56),d(3,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),l()(),s(4,"p",57),d(5,"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0631\u062D\u0644\u0627\u062A \u0627\u0644\u0645\u062A\u0627\u062D\u0629..."),l()())}function ID(i,t){i&1&&(s(0,"div",54),x(1,"i",58),s(2,"p",59),d(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0631\u062D\u0644\u0627\u062A \u0645\u062A\u0627\u062D\u0629 \u062D\u0627\u0644\u064A\u0627\u064B"),l(),s(4,"p",60),d(5,"\u062A\u062D\u0642\u0642 \u0644\u0627\u062D\u0642\u064B\u0627 \u0623\u0648 \u0623\u0646\u0634\u0626 \u0631\u062D\u0644\u0629 \u062C\u062F\u064A\u062F\u0629."),l()())}function OD(i,t){if(i&1&&(s(0,"div",71),x(1,"i",83),s(2,"div",73)(3,"strong",74),d(4,"\u0627\u0644\u062A\u0634\u062E\u064A\u0635:"),l(),s(5,"span",75),d(6),l()()()),i&2){let e=h().$implicit;m(6),z(e.diagnosis)}}function LD(i,t){if(i&1){let e=Q();s(0,"div",63)(1,"div",64)(2,"div",65)(3,"div",66)(4,"h5",67),x(5,"i",68),d(6),l(),s(7,"span",69),d(8),l()(),s(9,"div",70)(10,"div",71),x(11,"i",72),s(12,"div",73)(13,"strong",74),d(14,"\u0645\u0646:"),l(),s(15,"span",75),d(16),l()()(),s(17,"div",71),x(18,"i",76),s(19,"div",73)(20,"strong",74),d(21,"\u0625\u0644\u0649:"),l(),s(22,"span",75),d(23),l()()(),H(24,OD,7,1,"div",77),s(25,"div",71),x(26,"i",78),s(27,"div",73)(28,"strong",74),d(29,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E:"),l(),s(30,"span",75),d(31),l()()()(),s(32,"div",79)(33,"button",80),T("click",function(){let r=b(e).$implicit,a=h(3);return C(a.acceptTrip(r))}),x(34,"i",47),d(35," \u0642\u0628\u0648\u0644 \u0627\u0644\u0631\u062D\u0644\u0629 "),l(),s(36,"button",81),T("click",function(){let r=b(e).$implicit,a=h(3);return C(a.viewTripDetails(r))}),x(37,"i",82),d(38," \u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644 "),l()()()()()}if(i&2){let e=t.$implicit,n=h(3);m(6),q(" ",e.patientName||"\u0645\u0631\u064A\u0636 \u063A\u064A\u0631 \u0645\u062D\u062F\u062F"," "),m(),S("ngClass",n.getStatusBadgeClass(e.transferStatus)),m(),q(" ",e.transferStatus," "),m(8),z(e.transferFrom||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"),m(7),z(e.transferTo||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"),m(),S("ngIf",e.diagnosis),m(7),z(n.formatDate(e))}}function RD(i,t){if(i&1&&(s(0,"div",61),H(1,LD,39,7,"div",62),l()),i&2){let e=h(2);m(),S("ngForOf",e.availableTrips)}}function ND(i,t){if(i&1&&(s(0,"div",49)(1,"div",50)(2,"div",3)(3,"div",51),x(4,"i",43),d(5," \u0647\u0630\u0647 \u0647\u064A \u0627\u0644\u0631\u062D\u0644\u0627\u062A \u0627\u0644\u0645\u062E\u0635\u0635\u0629 \u0644\u0645\u0631\u0643\u0628\u062A\u0643. \u064A\u062C\u0628 \u0625\u063A\u0644\u0627\u0642 \u0631\u062D\u0644\u062A\u0643 \u0627\u0644\u062D\u0627\u0644\u064A\u0629 \u0642\u0628\u0644 \u0642\u0628\u0648\u0644 \u0631\u062D\u0644\u0629 \u062C\u062F\u064A\u062F\u0629. "),l()()(),H(6,DD,6,0,"div",52)(7,ID,6,0,"div",52)(8,RD,2,1,"div",53),l()),i&2){let e=h();m(6),S("ngIf",e.isLoadingAvailable),m(),S("ngIf",!e.isLoadingAvailable&&(e.availableTrips==null?null:e.availableTrips.length)===0),m(),S("ngIf",!e.isLoadingAvailable)}}function VD(i,t){if(i&1){let e=Q();Si(0),s(1,"div",119)(2,"label",103),d(3,"\u0645\u0646"),l(),s(4,"input",120),V("ngModelChange",function(r){b(e);let a=h(3);return N(a.historyFilters.dateFrom,r)||(a.historyFilters.dateFrom=r),C(r)}),T("change",function(){b(e);let r=h(3);return C(r.applyHistoryFilters())}),l()(),s(5,"div",119)(6,"label",103),d(7,"\u0625\u0644\u0649"),l(),s(8,"input",120),V("ngModelChange",function(r){b(e);let a=h(3);return N(a.historyFilters.dateTo,r)||(a.historyFilters.dateTo=r),C(r)}),T("change",function(){b(e);let r=h(3);return C(r.applyHistoryFilters())}),l()(),Ti()}if(i&2){let e=h(3);m(4),R("ngModel",e.historyFilters.dateFrom),m(4),R("ngModel",e.historyFilters.dateTo)}}function BD(i,t){if(i&1&&(s(0,"option",121),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function UD(i,t){if(i&1){let e=Q();s(0,"div",96)(1,"div",97)(2,"h6",98),x(3,"i",99),d(4," \u062E\u064A\u0627\u0631\u0627\u062A \u0627\u0644\u0641\u0644\u062A\u0631\u0629"),l(),s(5,"button",19),T("click",function(){b(e);let r=h(2);return C(r.toggleHistoryFilters())}),l()(),s(6,"div",100)(7,"div",101)(8,"div",102)(9,"label",103),d(10,"\u0627\u0644\u0641\u062A\u0631\u0629 \u0627\u0644\u0632\u0645\u0646\u064A\u0629"),l(),s(11,"select",104),V("ngModelChange",function(r){b(e);let a=h(2);return N(a.historyFilters.dateType,r)||(a.historyFilters.dateType=r),C(r)}),T("change",function(){b(e);let r=h(2);return C(r.applyHistoryFilters())}),s(12,"option",105),d(13,"\u0643\u0644 \u0627\u0644\u0623\u0648\u0642\u0627\u062A"),l(),s(14,"option",106),d(15,"\u0627\u0644\u064A\u0648\u0645"),l(),s(16,"option",107),d(17,"\u0622\u062E\u0631 \u0623\u0633\u0628\u0648\u0639"),l(),s(18,"option",108),d(19,"\u0622\u062E\u0631 \u0634\u0647\u0631"),l(),s(20,"option",109),d(21,"\u0641\u062A\u0631\u0629 \u0645\u062E\u0635\u0635\u0629"),l()()(),H(22,VD,9,2,"ng-container",110),s(23,"div",102)(24,"label",103),d(25,"\u0627\u0644\u062D\u0627\u0644\u0629"),l(),s(26,"select",104),V("ngModelChange",function(r){b(e);let a=h(2);return N(a.historyFilters.status,r)||(a.historyFilters.status=r),C(r)}),T("change",function(){b(e);let r=h(2);return C(r.applyHistoryFilters())}),s(27,"option",105),d(28,"\u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0627\u0644\u0627\u062A"),l(),H(29,BD,2,2,"option",111),l()(),s(30,"div",112)(31,"label",103),d(32,"\u0627\u0644\u0645\u0648\u0642\u0639 (\u0645\u0646/\u0625\u0644\u0649)"),l(),s(33,"input",113),V("ngModelChange",function(r){b(e);let a=h(2);return N(a.historyFilters.location,r)||(a.historyFilters.location=r),C(r)}),T("input",function(){b(e);let r=h(2);return C(r.applyHistoryFilters())}),l()(),s(34,"div",114)(35,"button",115),T("click",function(){b(e);let r=h(2);return C(r.applyHistoryFilters())}),x(36,"i",116),d(37," \u0628\u062D\u062B "),l(),s(38,"button",117),T("click",function(){b(e);let r=h(2);return C(r.resetHistoryFilters())}),x(39,"i",118),d(40," \u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 "),l()()()()()}if(i&2){let e=h(2);m(11),R("ngModel",e.historyFilters.dateType),m(11),S("ngIf",e.historyFilters.dateType==="custom"),m(4),R("ngModel",e.historyFilters.status),m(3),S("ngForOf",e.transferStatuses),m(4),R("ngModel",e.historyFilters.location)}}function WD(i,t){i&1&&(s(0,"div",54)(1,"div",55)(2,"span",56),d(3,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),l()(),s(4,"p",57),d(5,"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0631\u062D\u0644\u0627\u062A \u0627\u0644\u0633\u0627\u0628\u0642\u0629..."),l()())}function jD(i,t){i&1&&(s(0,"div",122),x(1,"i",123),s(2,"strong"),d(3,"\u0623\u0646\u062A \u0645\u0633\u062C\u0644 \u0643\u0645\u0633\u0624\u0648\u0644 \u0627\u0644\u0646\u0638\u0627\u0645"),l(),d(4,' - \u0644\u0627 \u064A\u0645\u0643\u0646 \u0639\u0631\u0636 \u0631\u062D\u0644\u0627\u062A \u0627\u0644\u0633\u0627\u0626\u0642 \u0644\u0623\u0646\u0643 \u0644\u0633\u062A \u0633\u0627\u0626\u0642\u0627\u064B. \u064A\u0631\u062C\u0649 \u0627\u0644\u062A\u0628\u062F\u064A\u0644 \u0625\u0644\u0649 \u0639\u0631\u0636 "\u0627\u0644\u0645\u0631\u0643\u0628\u0629" \u0644\u0631\u0624\u064A\u0629 \u0631\u062D\u0644\u0627\u062A \u0627\u0644\u0645\u0631\u0643\u0628\u0629. '),l())}function HD(i,t){i&1&&(Si(0),s(1,"p",59),d(2,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A \u0644\u0644\u0639\u0631\u0636"),l(),s(3,"p",60),d(4,'\u0623\u0646\u062A \u0645\u0633\u062C\u0644 \u0643\u0645\u0633\u0624\u0648\u0644 \u0648\u0644\u064A\u0633 \u0643\u0633\u0627\u0626\u0642. \u0627\u062E\u062A\u0631 \u0639\u0631\u0636 "\u0627\u0644\u0645\u0631\u0643\u0628\u0629" \u0644\u0631\u0624\u064A\u0629 \u0627\u0644\u0631\u062D\u0644\u0627\u062A.'),l(),Ti())}function zD(i,t){i&1&&(s(0,"p",59),d(1,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0631\u062D\u0644\u0627\u062A \u0645\u0637\u0627\u0628\u0642\u0629"),l(),s(2,"p",60),d(3,"\u062D\u0627\u0648\u0644 \u062A\u063A\u064A\u064A\u0631 \u062E\u064A\u0627\u0631\u0627\u062A \u0627\u0644\u0641\u0644\u062A\u0631\u0629."),l())}function GD(i,t){if(i&1&&(s(0,"div",54),x(1,"i",124),H(2,HD,5,0,"ng-container",125)(3,zD,4,0,"ng-template",null,0,Ph),l()),i&2){let e=Rr(4),n=h(2);m(2),S("ngIf",n.isAdmin()&&n.historyView==="driver")("ngIfElse",e)}}function $D(i,t){if(i&1&&(s(0,"span"),x(1,"i",158),d(2),l()),i&2){let e=h().$implicit;m(2),q(" \u20AA",e.payedPrice.toFixed(2)," ")}}function ZD(i,t){if(i&1){let e=Q();s(0,"button",159),T("click",function(){b(e);let r=h().$implicit,a=h(3);return C(a.openCloseConfirmModal(r))}),x(1,"i",160),d(2," \u0625\u063A\u0644\u0627\u0642 "),l()}}function qD(i,t){if(i&1){let e=Q();s(0,"div",128)(1,"div",129)(2,"div",130),x(3,"div",131),s(4,"div",132)(5,"span",133),d(6),l(),s(7,"div",134)(8,"p",135),d(9),l(),s(10,"p",136),H(11,$D,3,1,"span",110),l()(),s(12,"div",137)(13,"p",138),x(14,"i",139),d(15," \u0627\u0644\u0645\u0631\u0643\u0628\u0629: "),s(16,"span",75),d(17),l()(),s(18,"p",138),x(19,"i",140),d(20),l()(),s(21,"p",141),x(22,"i",142),s(23,"span",75),d(24,"\u0627\u0644\u062A\u0634\u062E\u064A\u0635/\u0627\u0644\u0646\u0648\u0639:"),l(),d(25),l(),s(26,"div",143)(27,"span",144),x(28,"i",145),d(29),l(),x(30,"i",146),s(31,"span",147),x(32,"i",145),d(33),l()(),s(34,"div",148)(35,"div",149)(36,"button",150),T("click",function(){let r=b(e).$implicit,a=h(3);return C(a.viewTripDetails(r))}),x(37,"i",151),d(38," \u0639\u0631\u0636 "),l(),s(39,"button",152),T("click",function(){let r=b(e).$implicit,a=h(3);return C(a.editTrip(r))}),x(40,"i",153),d(41," \u062A\u0639\u062F\u064A\u0644 "),l(),s(42,"button",154),T("click",function(){let r=b(e).$implicit,a=h(3);return C(a.openMedicalForm(r))}),x(43,"i",142),d(44," \u0627\u0644\u0646\u0645\u0648\u0630\u062C \u0627\u0644\u0637\u0628\u064A "),l(),H(45,ZD,3,0,"button",155),l(),s(46,"span",156),x(47,"i",157),d(48),l()()()()()()}if(i&2){let e=t.$implicit,n=h(3);m(),fe("border-start-warning",!e.isClosed)("border-start-success",e.isClosed),m(2),S("ngStyle",$i(22,FD,n.getStatusColor(e.transferStatus))),m(2),fe("bg-success",e.isClosed)("bg-warning",!e.isClosed),m(),q(" ",e.isClosed?"\u0645\u063A\u0644\u0642\u0629":"\u0645\u0641\u062A\u0648\u062D\u0629"," "),m(3),z(e.patientName||"\u0645\u0631\u064A\u0636 \u063A\u064A\u0631 \u0645\u062D\u062F\u062F"),m(2),S("ngIf",e.payedPrice!==void 0&&e.payedPrice!==null),m(6),z(e.vehicleName||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"),m(3),q(" ",n.getFormattedDate(e.day,e.month,e.year)," "),m(5),q(" ",e.transportationTypeName||e.diagnosis||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"," "),m(4),q(" ",e.transferFrom||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"," "),m(4),q(" ",e.transferTo||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"," "),m(6),S("disabled",e.isClosed)("title",e.isClosed?"\u0644\u0627 \u064A\u0645\u0643\u0646 \u062A\u0639\u062F\u064A\u0644 \u0631\u062D\u0644\u0629 \u0645\u063A\u0644\u0642\u0629":"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0631\u062D\u0644\u0629"),m(6),S("ngIf",n.canCloseTrip(e)),m(),S("ngClass",n.getStatusBadgeClass(e.transferStatus)),m(2),q(" ",e.transferStatus," ")}}function YD(i,t){if(i&1&&(s(0,"div",126),H(1,qD,49,24,"div",127),l()),i&2){let e=h(2);m(),S("ngForOf",e.getPaginatedHistory())}}function XD(i,t){if(i&1){let e=Q();s(0,"li",164)(1,"a",165),T("click",function(){let r=b(e).index,a=h(3);return C(a.changePage(r+1))}),d(2),l()()}if(i&2){let e=t.index,n=h(3);fe("active",n.currentPage===e+1),m(2),z(e+1)}}function KD(i,t){if(i&1){let e=Q();s(0,"div",161)(1,"nav",162)(2,"ul",163)(3,"li",164)(4,"a",165),T("click",function(){b(e);let r=h(2);return C(r.changePage(r.currentPage-1))}),x(5,"i",166),l()(),H(6,XD,3,3,"li",167),s(7,"li",164)(8,"a",165),T("click",function(){b(e);let r=h(2);return C(r.changePage(r.currentPage+1))}),x(9,"i",168),l()()()()()}if(i&2){let e=h(2);m(3),fe("disabled",e.currentPage===1),m(3),S("ngForOf",Ei(5,kD).constructor(e.totalHistoryPages)),m(),fe("disabled",e.currentPage===e.totalHistoryPages)}}function JD(i,t){if(i&1){let e=Q();s(0,"div",49)(1,"div",84)(2,"div",85)(3,"div",86),x(4,"i",43),d(5," \u0627\u0644\u0631\u062D\u0644\u0627\u062A \u0627\u0644\u0645\u0641\u062A\u0648\u062D\u0629 \u0645\u0639\u0631\u0648\u0636\u0629 \u0623\u0648\u0644\u0627\u064B. \u064A\u0645\u0643\u0646\u0643 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0631\u062D\u0644\u0627\u062A **\u0627\u0644\u0645\u0641\u062A\u0648\u062D\u0629** \u0641\u0642\u0637. "),l()(),s(6,"div",87)(7,"div",88)(8,"button",89),T("click",function(){b(e);let r=h();return C(r.toggleHistoryFilters())}),x(9,"i",90),s(10,"span",91),d(11,"\u0641\u0644\u062A\u0631"),l()()()()(),H(12,UD,41,5,"div",92)(13,WD,6,0,"div",52)(14,jD,5,0,"div",93)(15,GD,5,2,"div",52)(16,YD,2,1,"div",94)(17,KD,10,6,"div",95),l()}if(i&2){let e=h();m(12),S("ngIf",e.historyFilters.showFilters),m(),S("ngIf",e.isLoadingHistory),m(),S("ngIf",e.isAdmin()&&e.historyView==="driver"),m(),S("ngIf",!e.isLoadingHistory&&(e.myTrips==null?null:e.myTrips.length)===0),m(),S("ngIf",!e.isLoadingHistory&&(e.myTrips==null?null:e.myTrips.length)>0),m(),S("ngIf",!e.isLoadingHistory&&(e.myTrips==null?null:e.myTrips.length)>e.itemsPerPage)}}function QD(i,t){if(i&1&&(s(0,"p",169),d(1," \u0627\u0644\u0646\u0645\u0648\u0630\u062C \u0627\u0644\u0637\u0628\u064A \u0644\u0644\u0645\u0631\u064A\u0636 "),s(2,"strong",170),d(3),l(),d(4," \u063A\u064A\u0631 \u0645\u0643\u062A\u0645\u0644. "),l()),i&2){let e=h();m(3),z(e.selectedTripForClose.patientName)}}function e7(i,t){if(i&1&&x(0,"div",171),i&2){let e=h();fe("show",e.showMedicalFormWarningModal)}}function t7(i,t){if(i&1&&(s(0,"p",172),d(1," \u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u0631\u063A\u0628\u062A\u0643 \u0641\u064A \u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u0631\u062D\u0644\u0629 \u0644\u0644\u0645\u0631\u064A\u0636 "),s(2,"strong",170),d(3),l(),d(4," \u0628\u0634\u0643\u0644 \u0646\u0647\u0627\u0626\u064A\u061F "),l()),i&2){let e=h();m(3),z(e.selectedTripForClose.patientName)}}function i7(i,t){if(i&1&&x(0,"div",171),i&2){let e=h();fe("show",e.showCloseConfirmModal)}}var Jc=class i{constructor(t,e,n,r,a,u,p,g){this.tripService=t;this.authService=e;this.driverService=n;this.toastService=r;this.vehicleCookieService=a;this.medicalFormService=u;this.router=p;this.globalVars=g;let v=this.authService.currentUser();this.userId=v?.id||"",this.vehicleId=this.vehicleCookieService.getSelectedVehicleId()||"",this.globalVars.setGlobalHeader(" \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0631\u062D\u0644\u0627\u062A ")}selectedTab="mytrips";historyView="driver";availableTrips=[];myTrips=[];allMyTrips=[];isLoadingAvailable=!1;isLoadingHistory=!1;historyFilters={dateType:"all",dateFrom:"",dateTo:"",status:"all",location:"",showFilters:!1};transferStatuses=["\u062A\u0645 \u0627\u0644\u0646\u0642\u0644","\u0645\u064A\u062F\u0627\u0646\u064A","\u0628\u0644\u0627\u063A \u0643\u0627\u0630\u0628","\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0646\u0642\u0644","\u0631\u0641\u0636 \u0627\u0644\u0646\u0642\u0644","\u0635\u064A\u0627\u0646\u0629","\u064A\u0646\u0642\u0644","\u0627\u062E\u0631\u0649"];currentPage=1;itemsPerPage=10;vehicleId="";driverId="";userId="";refreshInterval=null;showCloseConfirmModal=!1;showMedicalFormWarningModal=!1;selectedTripForClose=null;medicalFormCompletionPercentage=0;isMedicalFormComplete=!1;isAdmin=We(()=>this.authService.isAdmin());ngOnInit(){if(!this.vehicleId){this.toastService.error("\u0644\u0645 \u064A\u062A\u0645 \u062A\u062D\u062F\u064A\u062F \u0645\u0631\u0643\u0628\u0629. \u064A\u0631\u062C\u0649 \u062A\u062D\u062F\u064A\u062F \u0645\u0631\u0643\u0628\u0629 \u0623\u0648\u0644\u0627\u064B."),this.router.navigate(["/select-vehicle"]);return}if(this.authService.isAdmin()){this.driverId="",this.historyView="vehicle",this.loadData(),this.startAutoRefresh();return}this.driverService.getCurrentDriver().subscribe({next:t=>{this.driverId=t.id,this.loadData(),this.startAutoRefresh()},error:t=>{console.error("Failed to get driver record:",t),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0633\u0627\u0626\u0642")}})}ngOnDestroy(){this.refreshInterval&&clearInterval(this.refreshInterval)}loadData(){this.loadAvailableTrips(!0),this.loadMyTrips()}startAutoRefresh(){this.refreshInterval=setInterval(()=>{this.selectedTab==="available"&&this.loadAvailableTrips()},3e4)}switchTab(t){this.selectedTab=t,t==="available"&&this.availableTrips.length===0?this.loadAvailableTrips():t==="mytrips"&&this.myTrips.length===0&&this.loadMyTrips()}toggleHistoryView(){this.historyView=this.historyView==="vehicle"?"driver":"vehicle",this.loadMyTrips()}loadAvailableTrips(t=!1){this.isLoadingAvailable=!0;let e=!!t;this.selectedTab==="available"&&(e=!0),this.tripService.getVehicleTrips(this.vehicleId,e).subscribe({next:n=>{this.availableTrips=n,this.isLoadingAvailable=!1},error:n=>{console.error("Failed to load available trips:",n),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0631\u062D\u0644\u0627\u062A \u0627\u0644\u0645\u062A\u0627\u062D\u0629"),this.isLoadingAvailable=!1}})}loadMyTrips(){if(this.isLoadingHistory=!0,this.currentPage=1,this.authService.isAdmin()&&this.historyView==="driver"){this.allMyTrips=[],this.applyHistoryFilters(),this.isLoadingHistory=!1;return}(this.historyView==="vehicle"?this.tripService.getVehicleTrips(this.vehicleId):this.tripService.getDriverTrips(this.driverId)).subscribe({next:e=>{this.allMyTrips=e,this.applyHistoryFilters(),this.isLoadingHistory=!1},error:e=>{console.error("Failed to load trips:",e),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0631\u062D\u0644\u0627\u062A"),this.isLoadingHistory=!1}})}applyHistoryFilters(){let t=[...this.allMyTrips];if(this.historyFilters.status!=="all"&&(t=t.filter(e=>e.transferStatus===this.historyFilters.status)),this.historyFilters.location.trim()){let e=this.historyFilters.location.toLowerCase();t=t.filter(n=>n.transferTo?.toLowerCase().includes(e)||n.transferFrom?.toLowerCase().includes(e))}if(this.historyFilters.dateType!=="all"){let e=new Date;e.setHours(0,0,0,0),t=t.filter(n=>{let r=new Date(n.year,n.month-1,n.day);switch(r.setHours(0,0,0,0),this.historyFilters.dateType){case"today":return r.getTime()===e.getTime();case"week":let a=new Date(e);return a.setDate(e.getDate()-7),r>=a;case"month":let u=new Date(e);return u.setMonth(e.getMonth()-1),r>=u;case"custom":if(this.historyFilters.dateFrom&&this.historyFilters.dateTo){let p=new Date(this.historyFilters.dateFrom);p.setHours(0,0,0,0);let g=new Date(this.historyFilters.dateTo);return g.setHours(23,59,59,999),r>=p&&r<=g}return!0;default:return!0}})}t.sort((e,n)=>{if(e.isClosed!==n.isClosed)return e.isClosed?1:-1;let r=new Date(e.year,e.month-1,e.day).getTime();return new Date(n.year,n.month-1,n.day).getTime()-r}),this.myTrips=t,this.currentPage=1}resetHistoryFilters(){this.historyFilters={dateType:"all",dateFrom:"",dateTo:"",status:"all",location:"",showFilters:!1},this.applyHistoryFilters()}toggleHistoryFilters(){this.historyFilters.showFilters=!this.historyFilters.showFilters}getPaginatedHistory(){let t=(this.currentPage-1)*this.itemsPerPage,e=t+this.itemsPerPage;return this.myTrips.slice(t,e)}get totalHistoryPages(){return Math.ceil(this.myTrips.length/this.itemsPerPage)}changePage(t){t>=1&&t<=this.totalHistoryPages&&(this.currentPage=t)}getStatusColor(t){return{"\u062A\u0645 \u0627\u0644\u0646\u0642\u0644":"#28A745",\u0645\u064A\u062F\u0627\u0646\u064A:"#17A2B8",\u064A\u0646\u0642\u0644:"#FFC107","\u0628\u0644\u0627\u063A \u0643\u0627\u0630\u0628":"#DC3545","\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0646\u0642\u0644":"#DC3545",\u0635\u064A\u0627\u0646\u0629:"#6C757D","\u0631\u0641\u0636 \u0627\u0644\u0646\u0642\u0644":"#DC3545",\u0627\u062E\u0631\u0649:"#6C757D"}[t]||"#6C757D"}getFormattedDate(t,e,n){return`${n}/${String(e).padStart(2,"0")}/${String(t).padStart(2,"0")}`}acceptTrip(t){if(!this.driverId){this.toastService.error("\u0645\u0639\u0631\u0651\u0641 \u0627\u0644\u0633\u0627\u0626\u0642 \u063A\u064A\u0631 \u0645\u0648\u062C\u0648\u062F");return}this.tripService.acceptTrip(t.id,this.driverId).subscribe({next:()=>{this.toastService.success(`\u062A\u0645 \u0642\u0628\u0648\u0644 \u0627\u0644\u0631\u062D\u0644\u0629 \u0644\u0644\u0645\u0631\u064A\u0636 ${t.patientName}`),this.loadAvailableTrips(),this.loadMyTrips()},error:e=>{console.error("Failed to accept trip:",e),this.toastService.error(e.message||"\u0641\u0634\u0644 \u0642\u0628\u0648\u0644 \u0627\u0644\u0631\u062D\u0644\u0629")}})}createNewTrip(){this.router.navigate(["/user/trip-form"],{queryParams:{vehicleId:this.vehicleId,mode:"create"}})}editTrip(t){if(t.isClosed){this.toastService.error("\u0644\u0627 \u064A\u0645\u0643\u0646 \u062A\u0639\u062F\u064A\u0644 \u0631\u062D\u0644\u0629 \u0645\u063A\u0644\u0642\u0629");return}this.router.navigate(["/user/trip-form",t.id],{queryParams:{mode:"edit"}})}viewTripDetails(t){this.router.navigate(["/user/trip-form",t.id],{queryParams:{mode:"view"}})}openMedicalForm(t){this.router.navigate(["/user/medical-form",t.id])}openCloseConfirmModal(t){if(!["\u062A\u0645 \u0627\u0644\u0646\u0642\u0644","\u0631\u0641\u0636 \u0627\u0644\u0646\u0642\u0644","\u0628\u0644\u0627\u063A \u0643\u0627\u0630\u0628"].includes(t.transferStatus)){this.toastService.error(`\u0644\u0627 \u064A\u0645\u0643\u0646 \u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u0631\u062D\u0644\u0629 \u0628\u062D\u0627\u0644\u0629 "${t.transferStatus}". \u064A\u0631\u062C\u0649 \u062A\u063A\u064A\u064A\u0631 \u0627\u0644\u062D\u0627\u0644\u0629 \u0625\u0644\u0649 \u062D\u0627\u0644\u0629 \u0646\u0647\u0627\u0626\u064A\u0629 \u0623\u0648\u0644\u0627\u064B.`);return}this.selectedTripForClose=t,this.medicalFormService.getCompletionStatus(t.id).subscribe({next:n=>{this.isMedicalFormComplete=n.isComplete,this.medicalFormCompletionPercentage=n.percentage,n.isComplete?this.showCloseConfirmModal=!0:this.showMedicalFormWarningModal=!0},error:n=>{console.error("Failed to check medical form status:",n),this.showCloseConfirmModal=!0}})}closeConfirmModal(){this.showCloseConfirmModal=!1,this.selectedTripForClose=null}closeMedicalFormWarningModal(){this.showMedicalFormWarningModal=!1,this.selectedTripForClose=null,this.medicalFormCompletionPercentage=0,this.isMedicalFormComplete=!1}fillMedicalFormNow(){this.selectedTripForClose&&(this.closeMedicalFormWarningModal(),this.openMedicalForm(this.selectedTripForClose))}skipAndCloseTrip(){if(!this.selectedTripForClose)return;let t=this.selectedTripForClose.id,e=this.selectedTripForClose.patientName,n=this.selectedTripForClose.transferStatus;this.tripService.closeTrip(t,n).subscribe({next:()=>{this.toastService.success(`\u062A\u0645 \u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u0631\u062D\u0644\u0629 \u0644\u0644\u0645\u0631\u064A\u0636 ${e}`),this.closeMedicalFormWarningModal(),this.loadMyTrips()},error:r=>{console.error("Failed to close trip:",r),this.toastService.error(r.message||"\u0641\u0634\u0644 \u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u0631\u062D\u0644\u0629"),this.closeMedicalFormWarningModal()}})}confirmCloseTrip(){if(!this.selectedTripForClose)return;let t=this.selectedTripForClose.id,e=this.selectedTripForClose.patientName,n=this.selectedTripForClose.transferStatus;this.tripService.closeTrip(t,n).subscribe({next:()=>{this.toastService.success(`\u062A\u0645 \u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u0631\u062D\u0644\u0629 \u0644\u0644\u0645\u0631\u064A\u0636 ${e}`),this.closeConfirmModal(),this.loadMyTrips()},error:r=>{console.error("Failed to close trip:",r),this.toastService.error(r.message||"\u0641\u0634\u0644 \u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u0631\u062D\u0644\u0629"),this.closeConfirmModal()}})}getStatusBadgeClass(t){return{"\u062A\u0645 \u0627\u0644\u0646\u0642\u0644":"bg-success",\u0645\u064A\u062F\u0627\u0646\u064A:"bg-primary",\u064A\u0646\u0642\u0644:"bg-info","\u0628\u0644\u0627\u063A \u0643\u0627\u0630\u0628":"bg-warning","\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0646\u0642\u0644":"bg-danger",\u0635\u064A\u0627\u0646\u0629:"bg-secondary","\u0631\u0641\u0636 \u0627\u0644\u0646\u0642\u0644":"bg-dark",\u0627\u062E\u0631\u0649:"bg-secondary"}[t]||"bg-secondary"}canCloseTrip(t){let e=["\u062A\u0645 \u0627\u0644\u0646\u0642\u0644","\u0631\u0641\u0636 \u0627\u0644\u0646\u0642\u0644","\u0628\u0644\u0627\u063A \u0643\u0627\u0630\u0628"];return!t.isClosed&&e.includes(t.transferStatus)}formatDate(t){return`${t.day}/${t.month}/${t.year}`}formatDistance(t){return t.end-t.start}static \u0275fac=function(e){return new(e||i)(G(Ln),G(Pt),G(Ci),G(Ye),G(Oi),G(Ba),G(Xe),G(ft))};static \u0275cmp=Oe({type:i,selectors:[["app-my-trips"]],decls:72,vars:24,consts:[["noTripsMessage",""],[1,"container-fluid","py-4","app-dashboard"],[1,"row","mb-4"],[1,"col-12"],[1,"btn","btn-primary","btn-lg","create-trip-btn",3,"click"],[1,"fas","fa-plus","me-2"],["role","tablist",1,"nav","nav-tabs","nav-tabs-custom","mb-4"],["role","presentation",1,"nav-item"],[1,"nav-link",2,"cursor","pointer",3,"click"],[1,"fas","fa-route","me-2"],[1,"fas","fa-inbox","me-2"],["class","badge bg-danger ms-2",4,"ngIf"],["class","tab-content-section",4,"ngIf"],["tabindex","-1","role","dialog","aria-labelledby","medicalFormWarningModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered","modal-md"],[1,"modal-content"],[1,"modal-header","bg-warning","text-dark","border-0"],["id","medicalFormWarningModalLabel",1,"modal-title","fw-bold"],[1,"fas","fa-exclamation-triangle","me-2"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],["role","alert",1,"alert","alert-warning","border-0","rounded-3","mb-3"],[1,"fas","fa-notes-medical","me-2"],["class","mb-3 fw-medium",4,"ngIf"],[1,"mb-4"],[1,"form-label","fw-bold","small"],[1,"progress","progress-bar-striped","progress-bar-animated",2,"height","30px"],["role","progressbar",1,"progress-bar"],[1,"fw-bold"],[1,"text-muted","small"],[1,"modal-footer","justify-content-center","flex-wrap","gap-2","border-0","pt-0"],["type","button",1,"btn","btn-secondary","flex-grow-1","flex-sm-grow-0",3,"click"],[1,"fas","fa-times","me-2"],["type","button",1,"btn","btn-warning","text-dark","flex-grow-1","flex-sm-grow-0",3,"click"],[1,"fas","fa-forward","me-2"],["type","button",1,"btn","btn-primary","flex-grow-1","flex-sm-grow-0",3,"click"],["class","modal-backdrop fade",3,"show",4,"ngIf"],["tabindex","-1","role","dialog","aria-labelledby","closeConfirmModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered","modal-sm"],[1,"modal-header","bg-light","border-0"],["id","closeConfirmModalLabel",1,"modal-title","fw-bold"],[1,"fas","fa-lock","me-2","text-success"],["role","alert",1,"alert","alert-info","border-0","rounded-3","mb-3"],[1,"fas","fa-info-circle","me-2"],["class","mb-0 fw-medium",4,"ngIf"],[1,"modal-footer","justify-content-center","border-0","pt-0"],["type","button",1,"btn","btn-success","flex-grow-1","flex-sm-grow-0",3,"click"],[1,"fas","fa-check","me-2"],[1,"badge","bg-danger","ms-2"],[1,"tab-content-section"],[1,"row","mb-3"],["role","alert",1,"alert","alert-info","border-start","border-5","border-info","shadow-sm"],["class","text-center py-5",4,"ngIf"],["class","row",4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary","spinner-lg"],[1,"visually-hidden"],[1,"text-muted","mt-2"],[1,"fas","fa-inbox","fa-4x","text-muted","mb-3"],[1,"text-muted","fw-bold"],[1,"small","text-secondary"],[1,"row"],["class","col-sm-12 col-md-6 col-lg-4 mb-4",4,"ngFor","ngForOf"],[1,"col-sm-12","col-md-6","col-lg-4","mb-4"],[1,"card","trip-card","available-trip-card","h-100","shadow-sm","border-0"],[1,"card-body","p-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"card-title","mb-0","fw-bold","text-dark"],[1,"fas","fa-user-injured","me-2","text-primary"],[1,"badge","rounded-pill","fw-bold",3,"ngClass"],[1,"trip-info","mb-3"],[1,"info-item","d-flex","align-items-center"],[1,"fas","fa-map-marker-alt","text-success","me-2","flex-shrink-0"],[1,"flex-grow-1"],[1,"text-secondary","small","d-block"],[1,"fw-medium","text-dark"],[1,"fas","fa-map-marker-alt","text-danger","me-2","flex-shrink-0"],["class","info-item d-flex align-items-center",4,"ngIf"],[1,"fas","fa-calendar","text-muted","me-2","flex-shrink-0"],[1,"d-grid","gap-2","d-md-flex","justify-content-end","mt-4"],[1,"btn","btn-success","btn-sm","flex-fill","flex-md-grow-0",3,"click"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"fas","fa-eye","me-1"],[1,"fas","fa-notes-medical","text-info","me-2","flex-shrink-0"],[1,"row","mb-3","align-items-center"],[1,"col-12","col-lg-6","mb-3","mb-lg-0"],["role","alert",1,"alert","alert-info","mb-0","border-start","border-5","border-info","shadow-sm"],[1,"col-12","col-lg-6"],[1,"d-flex","gap-2","justify-content-end","flex-wrap"],[1,"btn","btn-sm","btn-outline-secondary","filter-toggle-btn",3,"click"],[1,"fas","fa-filter","me-1"],[1,"d-inline"],["class","card mb-4 filter-panel shadow-sm",4,"ngIf"],["class","alert alert-warning border-start border-5 border-warning shadow-sm mb-4","role","alert",4,"ngIf"],["class","row row-cols-1 g-3",4,"ngIf"],["class","d-flex justify-content-center mt-4",4,"ngIf"],[1,"card","mb-4","filter-panel","shadow-sm"],[1,"card-header","bg-light","d-flex","justify-content-between","align-items-center"],[1,"mb-0","fw-bold"],[1,"fas","fa-filter","me-2"],[1,"card-body"],[1,"row","g-3"],[1,"col-12","col-md-6","col-lg-3"],[1,"form-label","small","fw-medium"],[1,"form-select","form-select-sm",3,"ngModelChange","change","ngModel"],["value","all"],["value","today"],["value","week"],["value","month"],["value","custom"],[4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[1,"col-12","col-md-6","col-lg-4"],["type","text","placeholder","\u0627\u0628\u062D\u062B \u0639\u0646 \u0645\u0648\u0642\u0639...",1,"form-control","form-control-sm",3,"ngModelChange","input","ngModel"],[1,"col-12","d-flex","gap-2","mt-3"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fas","fa-search","me-1"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-redo","me-1"],[1,"col-6","col-md-3","col-lg-2"],["type","date",1,"form-control","form-control-sm",3,"ngModelChange","change","ngModel"],[3,"value"],["role","alert",1,"alert","alert-warning","border-start","border-5","border-warning","shadow-sm","mb-4"],[1,"fas","fa-user-shield","me-2"],[1,"fas","fa-route","fa-4x","text-muted","mb-3"],[4,"ngIf","ngIfElse"],[1,"row","row-cols-1","g-3"],["class","col",4,"ngFor","ngForOf"],[1,"col"],["dir","rtl",1,"card","my-trip-card","shadow-sm","rounded-lg","overflow-hidden","border-0"],[1,"d-flex","h-100"],[1,"flex-shrink-0","trip-status-bar",3,"ngStyle"],[1,"card-body","p-3","p-md-4","flex-grow-1","text-end","position-relative"],[1,"badge","position-absolute","top-0","start-0","m-2","rounded-pill","status-toggle-badge"],[1,"d-flex","flex-column","flex-md-row","justify-content-between","align-items-start","mb-3","gap-1","mt-3","mt-sm-0"],[1,"h5","fw-bold","m-0","text-dark","trip-patient-name"],["dir","ltr",1,"h5","fw-bold","m-0","text-primary"],[1,"d-flex","flex-column","flex-md-row","justify-content-between","align-items-start","mb-2","gap-1","small","text-muted"],[1,"m-0"],[1,"fas","fa-car","me-1"],[1,"fas","fa-calendar-alt","me-1"],[1,"small","mb-3","text-muted"],[1,"fas","fa-notes-medical","me-1"],[1,"d-flex","align-items-center","gap-2","small","fw-medium","text-dark","justify-content-start","mb-3","route-display","flex-wrap"],[1,"badge","bg-success-subtle","text-success","p-2","rounded-pill","text-truncate","route-location"],[1,"fas","fa-map-marker-alt","me-1"],[1,"fa-solid","fa-arrow-left","text-primary","flex-shrink-0"],[1,"badge","bg-danger-subtle","text-danger","p-2","rounded-pill","text-truncate","route-location"],[1,"d-flex","flex-column","flex-sm-row","justify-content-between","align-items-center","gap-2","mt-3","pt-2","border-top"],[1,"d-flex","gap-2","flex-wrap","actions-group"],[1,"btn","btn-sm","btn-outline-primary","rounded-pill","action-btn",3,"click"],[1,"fa-solid","fa-eye","me-1"],[1,"btn","btn-sm","btn-primary","rounded-pill","action-btn",3,"click","disabled","title"],[1,"fa-solid","fa-edit","me-1"],[1,"btn","btn-sm","btn-info","rounded-pill","text-white","action-btn",3,"click"],["class","btn btn-sm btn-success rounded-pill action-btn",3,"click",4,"ngIf"],[1,"badge","rounded-pill","fw-bold","current-status-badge",3,"ngClass"],[1,"fas","fa-tag","me-1"],[1,"fas","fa-wallet","me-1","small"],[1,"btn","btn-sm","btn-success","rounded-pill","action-btn",3,"click"],[1,"fas","fa-lock","me-1"],[1,"d-flex","justify-content-center","mt-4"],["aria-label","Trip History Pagination"],[1,"pagination","pagination-sm","mb-0","shadow-sm","rounded-pill","overflow-hidden"],[1,"page-item"],[1,"page-link",2,"cursor","pointer",3,"click"],[1,"fas","fa-chevron-right"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"fas","fa-chevron-left"],[1,"mb-3","fw-medium"],[1,"text-dark"],[1,"modal-backdrop","fade"],[1,"mb-0","fw-medium"]],template:function(e,n){e&1&&(s(0,"div",1)(1,"div",2)(2,"div",3)(3,"button",4),T("click",function(){return n.createNewTrip()}),x(4,"i",5),d(5," \u0625\u0646\u0634\u0627\u0621 \u0631\u062D\u0644\u0629 \u062C\u062F\u064A\u062F\u0629 "),l()()(),s(6,"ul",6)(7,"li",7)(8,"a",8),T("click",function(){return n.switchTab("mytrips")}),x(9,"i",9),d(10," \u0631\u062D\u0644\u0627\u062A\u064A "),l()(),s(11,"li",7)(12,"a",8),T("click",function(){return n.switchTab("available")}),x(13,"i",10),d(14," \u0627\u0644\u0631\u062D\u0644\u0627\u062A \u0627\u0644\u0645\u062A\u0627\u062D\u0629 "),H(15,PD,2,1,"span",11),l()()(),H(16,ND,9,3,"div",12)(17,JD,18,6,"div",12),l(),s(18,"div",13)(19,"div",14)(20,"div",15)(21,"div",16)(22,"h5",17),x(23,"i",18),d(24," \u062A\u0646\u0628\u064A\u0647: \u0627\u0644\u0646\u0645\u0648\u0630\u062C \u0627\u0644\u0637\u0628\u064A \u063A\u064A\u0631 \u0645\u0643\u062A\u0645\u0644 "),l(),s(25,"button",19),T("click",function(){return n.closeMedicalFormWarningModal()}),l()(),s(26,"div",20)(27,"div",21),x(28,"i",22),d(29," \u0627\u0644\u0646\u0645\u0648\u0630\u062C \u0627\u0644\u0637\u0628\u064A \u0644\u0647\u0630\u0647 \u0627\u0644\u0631\u062D\u0644\u0629 \u063A\u064A\u0631 \u0645\u0643\u062A\u0645\u0644. "),l(),H(30,QD,5,1,"p",23),s(31,"div",24)(32,"label",25),d(33,"\u0646\u0633\u0628\u0629 \u0627\u0644\u0627\u0643\u062A\u0645\u0627\u0644:"),l(),s(34,"div",26)(35,"div",27)(36,"span",28),d(37),l()()()(),s(38,"p",29),d(39," \u064A\u064F\u0646\u0635\u062D \u0628\u0625\u0643\u0645\u0627\u0644 \u0627\u0644\u0646\u0645\u0648\u0630\u062C \u0627\u0644\u0637\u0628\u064A \u0642\u0628\u0644 \u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u0631\u062D\u0644\u0629 \u0644\u0636\u0645\u0627\u0646 \u062A\u0648\u062B\u064A\u0642 \u062C\u0645\u064A\u0639 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A. \u064A\u0645\u0643\u0646\u0643 \u0645\u0644\u0621 \u0627\u0644\u0646\u0645\u0648\u0630\u062C \u0627\u0644\u0622\u0646 \u0623\u0648 \u062A\u062E\u0637\u064A \u0647\u0630\u0647 \u0627\u0644\u062E\u0637\u0648\u0629 \u0648\u0627\u0644\u0645\u062A\u0627\u0628\u0639\u0629 \u0628\u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u0631\u062D\u0644\u0629. "),l()(),s(40,"div",30)(41,"button",31),T("click",function(){return n.closeMedicalFormWarningModal()}),x(42,"i",32),d(43," \u0625\u0644\u063A\u0627\u0621 "),l(),s(44,"button",33),T("click",function(){return n.skipAndCloseTrip()}),x(45,"i",34),d(46," \u062A\u062E\u0637\u064A \u0648\u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u0631\u062D\u0644\u0629 "),l(),s(47,"button",35),T("click",function(){return n.fillMedicalFormNow()}),x(48,"i",22),d(49," \u0645\u0644\u0621 \u0627\u0644\u0646\u0645\u0648\u0630\u062C \u0627\u0644\u0622\u0646 "),l()()()()(),H(50,e7,1,2,"div",36),s(51,"div",37)(52,"div",38)(53,"div",15)(54,"div",39)(55,"h5",40),x(56,"i",41),d(57," \u062A\u0623\u0643\u064A\u062F \u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u0631\u062D\u0644\u0629 "),l(),s(58,"button",19),T("click",function(){return n.closeConfirmModal()}),l()(),s(59,"div",20)(60,"div",42),x(61,"i",43),d(62," \u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u0631\u062D\u0644\u0629 \u064A\u0639\u0646\u064A \u0623\u0646\u0643 \u0627\u0646\u062A\u0647\u064A\u062A \u0645\u0646 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0639\u0644\u064A\u0647\u0627. \u0644\u0646 \u062A\u062A\u0645\u0643\u0646 \u0645\u0646 \u062A\u0639\u062F\u064A\u0644\u0647\u0627 \u0628\u0639\u062F \u0627\u0644\u0625\u063A\u0644\u0627\u0642. "),l(),H(63,t7,5,1,"p",44),l(),s(64,"div",45)(65,"button",31),T("click",function(){return n.closeConfirmModal()}),x(66,"i",32),d(67," \u0625\u0644\u063A\u0627\u0621 "),l(),s(68,"button",46),T("click",function(){return n.confirmCloseTrip()}),x(69,"i",47),d(70," \u062A\u0623\u0643\u064A\u062F \u0627\u0644\u0625\u063A\u0644\u0627\u0642 "),l()()()()(),H(71,i7,1,2,"div",36)),e&2&&(m(8),fe("active",n.selectedTab==="mytrips"),m(4),fe("active",n.selectedTab==="available"),m(3),S("ngIf",(n.availableTrips==null?null:n.availableTrips.length)>0),m(),S("ngIf",n.selectedTab==="available"),m(),S("ngIf",n.selectedTab==="mytrips"),m(),dt("display",n.showMedicalFormWarningModal?"block":"none"),fe("show",n.showMedicalFormWarningModal),m(12),S("ngIf",n.selectedTripForClose),m(5),dt("width",n.medicalFormCompletionPercentage,"%")("background-color",n.medicalFormCompletionPercentage>=75?"#28a745":n.medicalFormCompletionPercentage>=50?"#ffc107":n.medicalFormCompletionPercentage>=25?"#fd7e14":"#dc3545"),m(2),q("",n.medicalFormCompletionPercentage.toFixed(1),"%"),m(13),S("ngIf",n.showMedicalFormWarningModal),m(),dt("display",n.showCloseConfirmModal?"block":"none"),fe("show",n.showCloseConfirmModal),m(12),S("ngIf",n.selectedTripForClose),m(8),S("ngIf",n.showCloseConfirmModal))},dependencies:[Le,Ft,ai,kt,na,tt,Ot,Lt,et,At,ot,rt],styles:[".app-dashboard[_ngcontent-%COMP%]{background-color:#f8f9fa;min-height:100vh}.create-trip-btn[_ngcontent-%COMP%]{font-size:1rem;padding:.5rem 1rem;box-shadow:0 4px 6px #0d6efd33}.nav-tabs-custom[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#6c757d;border:none;border-bottom:3px solid transparent;transition:all .3s;font-weight:500;padding:1rem 1.25rem}.nav-tabs-custom[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#0d6efd;border-bottom-color:#0d6efd;background-color:#e9ecef}.nav-tabs-custom[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#0d6efd;background-color:#fff;border-bottom-color:#0d6efd;font-weight:700;border-radius:.25rem .25rem 0 0}.available-trip-card[_ngcontent-%COMP%]{border:1px solid #e9ecef!important;transition:transform .2s,box-shadow .2s}.available-trip-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 20px #0000001a!important}.available-trip-card[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{padding:.6rem 0;border-bottom:1px dashed #e9ecef;align-items:center}.available-trip-card[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.available-trip-card[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.8rem}.view-toggle-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:.25rem!important;border:1px solid var(--bs-primary)}.view-toggle-group[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{color:#fff!important}.filter-toggle-btn[_ngcontent-%COMP%]{border-radius:.25rem}.my-trip-card[_ngcontent-%COMP%]{border-right:none;border-radius:.75rem!important;overflow:hidden}.trip-status-bar[_ngcontent-%COMP%]{width:10px;height:100%;min-height:100px}.border-start-warning[_ngcontent-%COMP%]{border-right:1px solid #ffc107}.border-start-success[_ngcontent-%COMP%]{border-right:1px solid #198754}.my-trip-card[_ngcontent-%COMP%]   .status-toggle-badge[_ngcontent-%COMP%]{padding:.5em .75em;font-size:.7rem;border-radius:.5rem}.my-trip-card[_ngcontent-%COMP%]   .route-display[_ngcontent-%COMP%]{justify-content:flex-start!important}.my-trip-card[_ngcontent-%COMP%]   .route-location[_ngcontent-%COMP%]{font-size:.8rem;padding:.4rem .8rem!important}.my-trip-card[_ngcontent-%COMP%]   .actions-group[_ngcontent-%COMP%]{margin-top:.5rem}.my-trip-card[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%], .my-trip-card[_ngcontent-%COMP%]   .current-status-badge[_ngcontent-%COMP%]{font-size:.8rem}.pagination-sm[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{min-width:32px;text-align:center;border:none}.pagination-sm[_ngcontent-%COMP%]   .page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#0d6efd;color:#fff;z-index:1}.pagination-sm[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]:first-child   .page-link[_ngcontent-%COMP%], .pagination-sm[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]:last-child   .page-link[_ngcontent-%COMP%]{border-radius:0}@media (max-width: 767.98px){.create-trip-btn[_ngcontent-%COMP%]{width:100%;margin-bottom:.5rem}.d-flex.flex-column.flex-md-row[_ngcontent-%COMP%]{flex-direction:column!important}.available-trip-card[_ngcontent-%COMP%]   .d-grid.gap-2.d-md-flex[_ngcontent-%COMP%]{display:grid!important}.tab-content-section[_ngcontent-%COMP%] > .row.mb-3[_ngcontent-%COMP%]{flex-direction:column}.tab-content-section[_ngcontent-%COMP%] > .row.mb-3[_ngcontent-%COMP%]   .col-lg-6[_ngcontent-%COMP%]{width:100%}.tab-content-section[_ngcontent-%COMP%] > .row.mb-3[_ngcontent-%COMP%]   .d-flex.justify-content-end[_ngcontent-%COMP%]{justify-content:space-between!important;margin-top:.5rem}.view-toggle-group[_ngcontent-%COMP%]{flex-grow:1}.view-toggle-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1}.my-trip-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.5rem 1rem!important}.my-trip-card[_ngcontent-%COMP%]   .status-toggle-badge[_ngcontent-%COMP%]{position:static!important;margin:0 0 1rem!important;display:inline-block}.my-trip-card[_ngcontent-%COMP%]   .trip-patient-name[_ngcontent-%COMP%]{font-size:1.1rem;border-bottom:1px solid #eee;padding-bottom:.5rem}.my-trip-card[_ngcontent-%COMP%]   .route-display[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start!important}.my-trip-card[_ngcontent-%COMP%]   .route-display[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:none}.my-trip-card[_ngcontent-%COMP%]   .actions-group[_ngcontent-%COMP%]{flex-direction:row;gap:.5rem;width:100%}.my-trip-card[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{flex-grow:1}.my-trip-card[_ngcontent-%COMP%]   .current-status-badge[_ngcontent-%COMP%]{margin-top:1rem;order:-1;width:100%;text-align:center;padding:.75em;font-size:.9rem}.modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}.spinner-lg[_ngcontent-%COMP%]{width:3.5rem;height:3.5rem}"]})};var n7=(i,t,e)=>({"fa-plus":i,"fa-edit":t,"fa-eye":e});function r7(i,t){i&1&&(s(0,"div",26)(1,"div",27)(2,"span",28),d(3,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),l()()())}function a7(i,t){if(i&1&&(s(0,"option",53),d(1),l()),i&2){let e=t.$implicit;S("ngValue",e),m(),z(e)}}function o7(i,t){if(i&1&&(s(0,"option",53),d(1),l()),i&2){let e=t.$implicit;S("ngValue",e),m(),z(e)}}function s7(i,t){if(i&1){let e=Q();s(0,"div",37)(1,"label",38),d(2,"\u062D\u0627\u0644\u0629 \u0627\u0644\u0646\u0642\u0644"),l(),s(3,"select",77),V("ngModelChange",function(r){b(e);let a=h(2);return N(a.tripForm.transferStatus,r)||(a.tripForm.transferStatus=r),C(r)}),H(4,o7,2,2,"option",54),l()()}if(i&2){let e=h(2);m(3),R("ngModel",e.tripForm.transferStatus),S("disabled",e.isViewMode),m(),S("ngForOf",e.transferStatuses)}}function l7(i,t){if(i&1&&(s(0,"option",78),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function u7(i,t){if(i&1&&(s(0,"option",78),d(1),l()),i&2){let e=t.$implicit;S("value",e.id),m(),q(" ",e.arabicName," ")}}function c7(i,t){if(i&1&&(s(0,"option",78),d(1),l()),i&2){let e=t.$implicit;S("value",e.id),m(),q(" ",e.arabicName," ")}}function d7(i,t){if(i&1&&(s(0,"option",78),d(1),l()),i&2){let e=t.$implicit;S("value",e.id),m(),vt(" ",e.vehicleName," (",e.vehicleId,") ")}}function m7(i,t){i&1&&(s(0,"small",51),d(1," \u062A\u0644\u0642\u0627\u0626\u064A \u062D\u0633\u0628 \u0646\u0648\u0639 \u0627\u0644\u0631\u062D\u0644\u0629 "),l())}function f7(i,t){if(i&1&&(s(0,"div",30)(1,"div",2)(2,"div",79)(3,"h6",80),x(4,"i",81),d(5," \u062A\u0641\u0635\u064A\u0644 \u0627\u0644\u062A\u0648\u0632\u064A\u0639 \u0627\u0644\u0645\u0627\u0644\u064A "),l(),s(6,"div",82)(7,"p",83)(8,"strong"),d(9,"\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0643\u0644\u064A:"),l(),d(10),l(),s(11,"p",84),d(12),l(),s(13,"p",84),d(14),l(),s(15,"p",84),d(16),l(),x(17,"hr"),s(18,"p",83)(19,"strong"),d(20,"\u0627\u0644\u0628\u0627\u0642\u064A:"),l(),d(21),l(),s(22,"p",83)(23,"strong"),d(24,"\u062D\u0635\u0629 \u0627\u0644\u0633\u0627\u0626\u0642 (1/3):"),l(),d(25),gt(26,"number"),l(),s(27,"p",4)(28,"strong"),d(29,"\u062D\u0635\u0629 \u0627\u0644\u0645\u0639\u062F\u0627\u062A (2/3):"),l(),d(30),gt(31,"number"),l()()()()()),i&2){let e=h(2);m(10),q(" ",e.tripForm.totalPrice||0," \u20AA "),m(2),q(" - \u062D\u0635\u0629 \u0627\u0644\u0645\u0633\u0639\u0641: ",e.tripForm.paramedicShare||0," \u20AA "),m(2),q(" - \u062A\u0643\u0644\u0641\u0629 \u0627\u0644\u0648\u0642\u0648\u062F: ",e.calculatedDiesel," \u20AA "),m(2),q(" - \u0627\u0644\u0645\u0635\u0627\u0631\u064A\u0641 \u0627\u0644\u0623\u062E\u0631\u0649: ",e.tripForm.otherExpenses||0," \u20AA "),m(5),q(" ",(e.tripForm.totalPrice||0)-(e.tripForm.paramedicShare||0)-e.calculatedDiesel-(e.tripForm.otherExpenses||0)," \u20AA "),m(4),q(" ",Bt(26,7,((e.tripForm.totalPrice||0)-(e.tripForm.paramedicShare||0)-e.calculatedDiesel-(e.tripForm.otherExpenses||0))/3,"1.2-2")," \u20AA "),m(5),q(" ",Bt(31,10,((e.tripForm.totalPrice||0)-(e.tripForm.paramedicShare||0)-e.calculatedDiesel-(e.tripForm.otherExpenses||0))/3*2,"1.2-2")," \u20AA ")}}function p7(i,t){i&1&&(s(0,"small",51),x(1,"i",85),d(2," \u0644\u0627 \u064A\u0645\u0643\u0646 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0628\u0639\u062F \u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u0631\u062D\u0644\u0629 "),l())}function h7(i,t){i&1&&(s(0,"small",51),d(1," \u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629 \u0639\u0646 \u0627\u0644\u0631\u062D\u0644\u0629 (\u0627\u062E\u062A\u064A\u0627\u0631\u064A) "),l())}function g7(i,t){if(i&1){let e=Q();s(0,"button",93),T("click",function(){b(e);let r=h(3);return C(r.openCloseConfirmModal())}),x(1,"i",15),d(2," \u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u0631\u062D\u0644\u0629 "),l()}if(i&2){let e=h(3);S("disabled",e.isSaving)}}function _7(i,t){i&1&&x(0,"span",94)}function v7(i,t){i&1&&x(0,"i",95)}function x7(i,t){if(i&1){let e=Q();s(0,"div",30)(1,"div",2)(2,"div",86)(3,"button",87),T("click",function(){b(e);let r=h(2);return C(r.cancel())}),x(4,"i",22),d(5," \u0625\u0644\u063A\u0627\u0621 "),l(),s(6,"div",88),H(7,g7,3,1,"button",89),s(8,"button",90),H(9,_7,1,0,"span",91)(10,v7,1,0,"i",92),d(11),l()()()()()}if(i&2){let e=h(2);m(3),S("disabled",e.isSaving),m(4),S("ngIf",e.canCloseTrip()),m(),S("disabled",e.isSaving),m(),S("ngIf",e.isSaving),m(),S("ngIf",!e.isSaving),m(),q(" ",e.isCreateMode?"\u0625\u0646\u0634\u0627\u0621":"\u062D\u0641\u0638 \u0627\u0644\u062A\u0639\u062F\u064A\u0644\u0627\u062A"," ")}}function y7(i,t){if(i&1){let e=Q();s(0,"form",29),T("ngSubmit",function(){b(e);let r=h();return C(r.save())}),s(1,"div",30)(2,"div",31)(3,"div",32)(4,"div",33)(5,"h5",4),x(6,"i",34),d(7," \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0645\u0631\u064A\u0636 "),l()(),s(8,"div",35)(9,"div",30)(10,"div",36)(11,"div",37)(12,"label",38),d(13,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0631\u064A\u0636"),s(14,"span",39),d(15,"*"),l()(),s(16,"input",40),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.patientName,r)||(a.tripForm.patientName=r),C(r)}),l()()(),s(17,"div",36)(18,"div",37)(19,"label",38),d(20,"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641"),l(),s(21,"input",41),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.patientContact,r)||(a.tripForm.patientContact=r),C(r)}),l()()(),s(22,"div",36)(23,"div",37)(24,"app-transportation-type-search",42),T("typeSelected",function(r){b(e);let a=h();return C(a.onTransportationTypeSelected(r))}),l()()()()()()(),s(25,"div",31)(26,"div",32)(27,"div",43)(28,"h5",4),x(29,"i",44),d(30," \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0631\u062D\u0644\u0629 "),l()(),s(31,"div",35)(32,"div",30)(33,"div",36)(34,"div",37)(35,"label",38),d(36,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E"),l(),s(37,"input",45),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.date,r)||(a.tripForm.date=r),C(r)}),l()()(),s(38,"div",36)(39,"div",37)(40,"label",38),d(41,"\u0645\u0646 (\u0645\u0648\u0642\u0639 \u0627\u0644\u0625\u0646\u0637\u0644\u0627\u0642)"),l(),s(42,"app-location-search",46),T("locationSelected",function(r){b(e);let a=h();return C(a.onLocationFromSelected(r))}),l()()(),s(43,"div",36)(44,"div",37)(45,"label",38),d(46,"\u0625\u0644\u0649 (\u0627\u0644\u0648\u062C\u0647\u0629)"),l(),s(47,"app-location-search",46),T("locationSelected",function(r){b(e);let a=h();return C(a.onLocationToSelected(r))}),l()()()(),s(48,"div",30)(49,"div",47)(50,"div",37)(51,"label",38),d(52,"\u0642\u0631\u0627\u0621\u0629 \u0627\u0644\u0639\u062F\u0627\u062F - \u0627\u0644\u0628\u062F\u0627\u064A\u0629"),l(),s(53,"input",48),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.start,r)||(a.tripForm.start=r),C(r)}),l()()(),s(54,"div",47)(55,"div",37)(56,"label",38),d(57,"\u0642\u0631\u0627\u0621\u0629 \u0627\u0644\u0639\u062F\u0627\u062F - \u0627\u0644\u0646\u0647\u0627\u064A\u0629"),l(),s(58,"input",49),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.end,r)||(a.tripForm.end=r),C(r)}),l()()(),s(59,"div",47)(60,"div",37)(61,"label",38),d(62,"\u0627\u0644\u062F\u064A\u0632\u0644 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 (\u0643\u0645)"),l(),x(63,"input",50),s(64,"small",51),d(65),l()()(),s(66,"div",47)(67,"div",37)(68,"label",38),d(69,"\u0646\u0648\u0639 \u0627\u0644\u0631\u062D\u0644\u0629"),l(),s(70,"select",52),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.tripType,r)||(a.tripForm.tripType=r),C(r)}),T("change",function(){b(e);let r=h();return C(r.onTripTypeChange())}),s(71,"option",53),d(72,"\u0627\u062E\u062A\u0631 \u0646\u0648\u0639 \u0627\u0644\u0631\u062D\u0644\u0629"),l(),H(73,a7,2,2,"option",54),l()()()(),s(74,"div",30)(75,"div",55),H(76,s7,5,3,"div",56),l(),s(77,"div",47)(78,"div",37)(79,"label",38),d(80,"\u0642\u064A\u0645\u0629 YMD"),l(),s(81,"input",57),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.ymdValue,r)||(a.tripForm.ymdValue=r),C(r)}),l()()(),s(82,"div",47)(83,"div",37)(84,"label",38),d(85,"\u0641\u062A\u0631\u0629 YMD"),l(),s(86,"select",58),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.ymdPeriod,r)||(a.tripForm.ymdPeriod=r),C(r)}),s(87,"option",59),d(88,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0641\u062A\u0631\u0629"),l(),H(89,l7,2,2,"option",60),l()()()()()()(),s(90,"div",31)(91,"div",32)(92,"div",61)(93,"h5",4),x(94,"i",62),d(95," \u0627\u0644\u0637\u0627\u0642\u0645 \u0648\u0627\u0644\u0645\u0631\u0643\u0628\u0629 "),l()(),s(96,"div",35)(97,"div",30)(98,"div",36)(99,"div",37)(100,"label",38),d(101,"\u0627\u0644\u0633\u0627\u0626\u0642"),l(),s(102,"select",63),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.driverId,r)||(a.tripForm.driverId=r),C(r)}),s(103,"option",59),d(104,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0633\u0627\u0626\u0642"),l(),H(105,u7,2,2,"option",60),l()()(),s(106,"div",36)(107,"div",37)(108,"label",38),d(109,"\u0627\u0644\u0645\u0633\u0639\u0641"),l(),s(110,"select",64),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.paramedicId,r)||(a.tripForm.paramedicId=r),C(r)}),s(111,"option",59),d(112,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0633\u0639\u0641"),l(),H(113,c7,2,2,"option",60),l()()(),s(114,"div",36)(115,"div",37)(116,"label",38),d(117,"\u0627\u0644\u0645\u0631\u0643\u0628\u0629"),s(118,"span",39),d(119,"*"),l()(),s(120,"select",65),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.vehicleId,r)||(a.tripForm.vehicleId=r),C(r)}),T("change",function(){b(e);let r=h();return C(r.onVehicleChange())}),s(121,"option",59),d(122,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0631\u0643\u0628\u0629"),l(),H(123,d7,2,3,"option",60),l()()()()()()(),s(124,"div",31)(125,"div",32)(126,"div",66)(127,"h5",4),x(128,"i",67),d(129," \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0645\u0627\u0644\u064A\u0629 "),l()(),s(130,"div",35)(131,"div",30)(132,"div",47)(133,"div",37)(134,"label",38),d(135,"\u0627\u0644\u0633\u0639\u0631 \u0627\u0644\u0643\u0644\u064A"),l(),s(136,"input",68),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.totalPrice,r)||(a.tripForm.totalPrice=r),C(r)}),l()()(),s(137,"div",47)(138,"div",37)(139,"label",38),d(140,"\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0645\u062F\u0641\u0648\u0639"),l(),s(141,"input",69),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.payedPrice,r)||(a.tripForm.payedPrice=r),C(r)}),l()()(),s(142,"div",47)(143,"div",37)(144,"label",38),d(145,"\u062D\u0635\u0629 \u0627\u0644\u0645\u0633\u0639\u0641"),l(),s(146,"input",70),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.paramedicShare,r)||(a.tripForm.paramedicShare=r),C(r)}),l(),H(147,m7,2,0,"small",71),l()(),s(148,"div",47)(149,"div",37)(150,"label",38),d(151,"\u0627\u0644\u0645\u0635\u0627\u0631\u064A\u0641 \u0627\u0644\u0623\u062E\u0631\u0649"),l(),s(152,"input",72),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.otherExpenses,r)||(a.tripForm.otherExpenses=r),C(r)}),l()()()(),H(153,f7,32,13,"div",73),l()()(),s(154,"div",31)(155,"div",32)(156,"div",74)(157,"h5",4),x(158,"i",75),d(159," \u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0627\u0644\u0631\u062D\u0644\u0629 "),l()(),s(160,"div",35)(161,"div",30)(162,"div",2)(163,"div",37)(164,"label",38),d(165,"\u0627\u0644\u0645\u0644\u0627\u062D\u0638\u0627\u062A"),l(),s(166,"textarea",76),V("ngModelChange",function(r){b(e);let a=h();return N(a.tripForm.tripNotes,r)||(a.tripForm.tripNotes=r),C(r)}),l(),H(167,p7,3,0,"small",71)(168,h7,2,0,"small",71),l()()()()()()(),H(169,x7,12,6,"div",73),l()}if(i&2){let e,n=h();m(16),R("ngModel",n.tripForm.patientName),S("disabled",n.isViewMode),m(5),R("ngModel",n.tripForm.patientContact),S("disabled",n.isViewMode),m(3),S("disabled",n.isViewMode)("selectedTypeName",n.tripForm.transportationTypeName),m(13),R("ngModel",n.tripForm.date),S("disabled",n.isViewMode),m(5),S("disabled",n.isViewMode)("selectedLocationName",n.tripForm.transferFrom),m(5),S("disabled",n.isViewMode)("selectedLocationName",n.tripForm.transferTo),m(6),R("ngModel",n.tripForm.start),S("disabled",n.isViewMode),m(5),R("ngModel",n.tripForm.end),S("disabled",n.isViewMode),m(5),S("value",n.calculatedDiesel),m(2),vt(" ",n.calculatedDiesel," \u0643\u0645 \xD7 1 \u20AA = ",n.calculatedDiesel," \u20AA "),m(5),R("ngModel",n.tripForm.tripType),S("disabled",n.isViewMode),m(),S("ngValue",null),m(2),S("ngForOf",n.tripTypes),m(3),S("ngIf",n.mode!=="create"),m(5),R("ngModel",n.tripForm.ymdValue),S("disabled",n.isViewMode),m(5),R("ngModel",n.tripForm.ymdPeriod),S("disabled",n.isViewMode),m(3),S("ngForOf",n.ymdPeriods),m(13),R("ngModel",n.tripForm.driverId),m(3),S("ngForOf",n.drivers),m(5),R("ngModel",n.tripForm.paramedicId),S("disabled",n.isViewMode),m(3),S("ngForOf",n.paramedics),m(7),R("ngModel",n.tripForm.vehicleId),m(3),S("ngForOf",n.vehicles),m(13),R("ngModel",n.tripForm.totalPrice),S("disabled",n.isViewMode),m(5),R("ngModel",n.tripForm.payedPrice),S("disabled",n.isViewMode),m(5),fe("bg-light",n.tripForm.tripType&&n.tripForm.tripType!=="\u0627\u062E\u0631\u0649"),R("ngModel",n.tripForm.paramedicShare),S("disabled",n.isViewMode||n.tripForm.tripType&&n.tripForm.tripType!=="\u0627\u062E\u0631\u0649")("readonly",n.tripForm.tripType&&n.tripForm.tripType!=="\u0627\u062E\u0631\u0649"),m(),S("ngIf",n.tripForm.tripType&&n.tripForm.tripType!=="\u0627\u062E\u0631\u0649"),m(5),R("ngModel",n.tripForm.otherExpenses),S("disabled",n.isViewMode),m(),S("ngIf",n.tripForm.payedPrice&&n.tripForm.paramedicShare),m(13),R("ngModel",n.tripForm.tripNotes),S("disabled",n.isViewMode||((e=n.currentTrip==null?null:n.currentTrip.isClosed)!==null&&e!==void 0?e:!1)),m(),S("ngIf",n.currentTrip==null?null:n.currentTrip.isClosed),m(),S("ngIf",!(n.currentTrip!=null&&n.currentTrip.isClosed)&&!n.isViewMode),m(),S("ngIf",!n.isViewMode)}}function b7(i,t){if(i&1&&x(0,"div",96),i&2){let e=h();fe("show",e.showCloseConfirmModal)}}var f0=class i{constructor(t,e,n,r,a,u,p,g,v){this.route=t;this.router=e;this.tripService=n;this.driverService=r;this.paramedicService=a;this.vehicleService=u;this.authService=p;this.toastService=g;this.vehicleCookieService=v}mode="create";tripId=null;isLoading=!1;isSaving=!1;tripForm={date:new Date().toISOString().split("T")[0],driverId:"",paramedicId:"",vehicleId:"",vehicleName:"",transferFrom:"",transferFromId:"",transferFromTag:"common",transferTo:"",transferToId:"",transferToTag:"common",start:null,end:null,diesel:null,patientName:"",patientContact:"",diagnosis:"",transportationTypeId:"",transportationTypeName:"",transferStatus:"\u064A\u0646\u0642\u0644",tripType:null,otherExpenses:null,totalPrice:null,payedPrice:null,paramedicShare:null,driverShare:null,eqShare:null,ymdValue:null,ymdPeriod:"",tripNotes:""};drivers=[];paramedics=[];vehicles=[];transferStatuses=["\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0646\u0642\u0644","\u064A\u0646\u0642\u0644","\u062A\u0645 \u0627\u0644\u0646\u0642\u0644","\u0631\u0641\u0636 \u0627\u0644\u0646\u0642\u0644","\u0628\u0644\u0627\u063A \u0643\u0627\u0630\u0628","\u0645\u064A\u062F\u0627\u0646\u064A","\u0635\u064A\u0627\u0646\u0629","\u0627\u062E\u0631\u0649"];tripTypes=["\u062F\u0627\u062E\u0644\u064A","\u0648\u0633\u0637","\u062E\u0627\u0631\u062C\u064A","\u0627\u062E\u0631\u0649"];ymdPeriods=["\u064A\u0648\u0645","\u0627\u0633\u0628\u0648\u0639","\u0634\u0647\u0631","\u0633\u0646\u0629"];currentTrip=null;showCloseConfirmModal=!1;ngOnInit(){this.route.queryParams.subscribe(t=>{this.mode=t.mode||"create";let e=t.vehicleId;e&&(this.tripForm.vehicleId=e)}),this.route.params.subscribe(t=>{this.tripId=t.id||null}),this.vehicleService.getCurrentOdometer(this.tripForm.vehicleId).subscribe({next:t=>{t!=null&&(this.tripForm.start=t.currentOdometer)},error:()=>{this.toastService.error("\u0641\u0634\u0644 \u062C\u0644\u0628 \u0639\u062F\u0627\u062F \u0627\u0644\u0645\u0631\u0643\u0628\u0629 \u0627\u0644\u062D\u0627\u0644\u064A")}}),this.loadOptions(),this.mode==="create"?this.initializeCreateMode():this.tripId&&this.loadTrip()}initializeCreateMode(){this.driverService.getCurrentDriver().subscribe({next:e=>{this.tripForm.driverId=e.id},error:e=>console.error("Failed to get driver record:",e)});let t=this.tripForm.vehicleId||this.vehicleCookieService.getSelectedVehicleId();t&&(this.tripForm.vehicleId=t,this.vehicleService.getVehicleById(t).subscribe({next:e=>{this.tripForm.vehicleName=e.vehicleName},error:e=>console.error("Failed to load vehicle:",e)}))}loadOptions(){this.driverService.getDrivers({limit:1e3}).subscribe({next:t=>{this.drivers=t.data.map(e=>({id:e.id,name:e.name,arabicName:e.arabicName}))},error:t=>console.error("Failed to load drivers:",t)}),this.paramedicService.getParamedics({limit:1e3}).subscribe({next:t=>{this.paramedics=t.data.map(e=>({id:e.id,name:e.name,arabicName:e.arabicName}))},error:t=>console.error("Failed to load paramedics:",t)}),this.vehicleService.getVehicles({limit:1e3}).subscribe({next:t=>{this.vehicles=t.data.map(e=>({id:e.id,vehicleName:e.vehicleName,vehicleId:e.vehicleId}))},error:t=>console.error("Failed to load vehicles:",t)})}loadTrip(){this.tripId&&(this.isLoading=!0,this.tripService.getTripById(this.tripId).subscribe({next:t=>{this.currentTrip=t,this.populateForm(t),this.isLoading=!1},error:t=>{console.error("Failed to load trip:",t),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0631\u062D\u0644\u0629"),this.isLoading=!1,this.router.navigate(["/user/my-trips"])}}))}populateForm(t){this.tripForm={date:this.formatDateForInput(t.day,t.month,t.year),driverId:t.driverId||"",paramedicId:t.paramedicId||"",vehicleId:t.vehicleId||"",vehicleName:t.vehicleName||"",transferFrom:t.transferFrom,transferFromId:t.transferFromId||"",transferFromTag:t.transferFromTag||"common",transferTo:t.transferTo,transferToId:t.transferToId||"",transferToTag:t.transferToTag||"common",start:t.start,end:t.end,diesel:t.diesel,patientName:t.patientName,patientContact:t.patientContact||"",diagnosis:t.diagnosis,transportationTypeId:t.transportationTypeId||"",transportationTypeName:t.transportationTypeName||"",transferStatus:t.transferStatus,tripType:t.tripType||null,otherExpenses:t.otherExpenses,totalPrice:t.totalPrice,payedPrice:t.payedPrice,paramedicShare:t.paramedicShare,driverShare:t.driverShare,eqShare:t.eqShare,ymdValue:t.ymdValue||null,ymdPeriod:t.ymdPeriod||"",tripNotes:t.tripNotes||""}}onLocationFromSelected(t){this.tripForm.transferFrom=t.name,this.tripForm.transferFromId=t.id,this.tripForm.transferFromTag=t.tag}onLocationToSelected(t){this.tripForm.transferTo=t.name,this.tripForm.transferToId=t.id,this.tripForm.transferToTag=t.tag}onTransportationTypeSelected(t){this.tripForm.transportationTypeId=t.id,this.tripForm.transportationTypeName=t.name}onVehicleChange(){let t=this.vehicles.find(e=>e.id===this.tripForm.vehicleId);t&&(this.tripForm.vehicleName=t.vehicleName)}get calculatedDiesel(){let t=this.tripForm.start||0,e=this.tripForm.end||0;return Math.max(0,e-t)}calculateShares(t,e,n){let u=t-e-n-(this.tripForm.otherExpenses||0),p=u/3,g=u/3*2;return{paramedicShare:e,driverShare:p,eqShare:g}}calculateParamedicShare(t,e){let n={\u062F\u0627\u062E\u0644\u064A:20,\u0648\u0633\u0637:60,\u062E\u0627\u0631\u062C\u064A:80};return t==="\u0627\u062E\u0631\u0649"?e??0:n[t]??0}onTripTypeChange(){this.tripForm.tripType&&this.tripForm.tripType!=="\u0627\u062E\u0631\u0649"?this.tripForm.paramedicShare=this.calculateParamedicShare(this.tripForm.tripType):this.tripForm.tripType==="\u0627\u062E\u0631\u0649"||(this.tripForm.paramedicShare=0)}save(){if(!this.validateForm())return;this.isSaving=!0;let t=this.prepareTripData();this.mode==="create"?this.createTrip(t):this.mode==="edit"&&this.tripId&&this.updateTrip(t)}createTrip(t){let e=this.tripForm.vehicleId;this.tripService.createVehicleTrip(e,t).subscribe({next:n=>{this.toastService.success("\u062A\u0645 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0631\u062D\u0644\u0629 \u0628\u0646\u062C\u0627\u062D"),this.isSaving=!1,this.router.navigate(["/user/my-trips"])},error:n=>{console.error("Failed to create trip:",n),this.toastService.error(n.message||"\u0641\u0634\u0644 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0631\u062D\u0644\u0629"),this.isSaving=!1}})}updateTrip(t){this.tripId&&this.tripService.updateTrip(this.tripId,t).subscribe({next:e=>{this.toastService.success("\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0631\u062D\u0644\u0629 \u0628\u0646\u062C\u0627\u062D"),this.isSaving=!1,this.router.navigate(["/user/my-trips"])},error:e=>{console.error("Failed to update trip:",e),this.toastService.error(e.message||"\u0641\u0634\u0644 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0631\u062D\u0644\u0629"),this.isSaving=!1}})}prepareTripData(){let t=this.calculatedDiesel*1,e=this.calculateShares(this.tripForm.totalPrice||0,this.tripForm.paramedicShare||0,t),n=this.extractDateParts(this.tripForm.date);return Qe(ve({day:n.day,month:n.month,year:n.year,driverId:this.tripForm.driverId||null,paramedicId:this.tripForm.paramedicId||null,vehicleId:this.tripForm.vehicleId||null,transferFrom:this.tripForm.transferFrom,transferFromId:this.tripForm.transferFromId||null,transferFromTag:this.tripForm.transferFromTag,transferTo:this.tripForm.transferTo,transferToId:this.tripForm.transferToId||null,transferToTag:this.tripForm.transferToTag,start:this.tripForm.start||0,end:this.tripForm.end||0,diesel:this.calculatedDiesel,patientName:this.tripForm.patientName,patientContact:this.tripForm.patientContact||null,diagnosis:this.tripForm.diagnosis,transportationTypeId:this.tripForm.transportationTypeId||null,transferStatus:this.tripForm.transferStatus,tripType:this.tripForm.tripType||null,otherExpenses:this.tripForm.otherExpenses||0,totalPrice:this.tripForm.totalPrice||0,payedPrice:this.tripForm.payedPrice||0},e),{ymdValue:this.tripForm.ymdValue||null,ymdPeriod:this.tripForm.ymdPeriod||null,tripNotes:this.tripForm.tripNotes||null})}validateForm(){return this.tripForm.vehicleId?this.tripForm.patientName?!0:(this.toastService.error("\u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0631\u064A\u0636"),!1):(this.toastService.error("\u064A\u0631\u062C\u0649 \u062A\u062D\u062F\u064A\u062F \u0627\u0644\u0645\u0631\u0643\u0628\u0629"),!1)}openCloseConfirmModal(){this.showCloseConfirmModal=!0}closeConfirmModal(){this.showCloseConfirmModal=!1}confirmCloseTrip(){this.tripId&&this.tripService.closeTrip(this.tripId,this.tripForm.transferStatus).subscribe({next:()=>{this.toastService.success("\u062A\u0645 \u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u0631\u062D\u0644\u0629 \u0628\u0646\u062C\u0627\u062D"),this.closeConfirmModal(),this.router.navigate(["/user/my-trips"])},error:t=>{console.error("Failed to close trip:",t),this.toastService.error(t.message||"\u0641\u0634\u0644 \u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u0631\u062D\u0644\u0629"),this.closeConfirmModal()}})}canCloseTrip(){return!this.currentTrip||this.mode!=="edit"?!1:["\u062A\u0645 \u0627\u0644\u0646\u0642\u0644","\u0631\u0641\u0636 \u0627\u0644\u0646\u0642\u0644","\u0628\u0644\u0627\u063A \u0643\u0627\u0630\u0628"].includes(this.currentTrip.transferStatus)&&!this.currentTrip.isClosed}cancel(){this.router.navigate(["/user/my-trips"])}get isViewMode(){return this.mode==="view"}get isEditMode(){return this.mode==="edit"}get isCreateMode(){return this.mode==="create"}get pageTitle(){return this.isCreateMode?"\u0625\u0646\u0634\u0627\u0621 \u0631\u062D\u0644\u0629 \u062C\u062F\u064A\u062F\u0629":this.isEditMode?"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0631\u062D\u0644\u0629":"\u0639\u0631\u0636 \u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0631\u062D\u0644\u0629"}extractDateParts(t){let e=new Date(t+"T00:00:00");return{day:e.getDate(),month:e.getMonth()+1,year:e.getFullYear()}}formatDateForInput(t,e,n){return`${n}-${String(e).padStart(2,"0")}-${String(t).padStart(2,"0")}`}static \u0275fac=function(e){return new(e||i)(G(Ai),G(Xe),G(Ln),G(Ci),G(as),G(oi),G(Pt),G(Ye),G(Oi))};static \u0275cmp=Oe({type:i,selectors:[["app-trip-form"]],decls:36,vars:13,consts:[[1,"container-fluid","py-4"],[1,"row","mb-4"],[1,"col-12"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"me-2",3,"ngClass"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-arrow-right","me-2"],["class","text-center py-5",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],["tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-lock","me-2"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"alert","alert-warning"],[1,"fas","fa-exclamation-triangle","me-2"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fas","fa-times","me-2"],["type","button",1,"btn","btn-success",3,"click"],[1,"fas","fa-check","me-2"],["class","modal-backdrop fade",3,"show",4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[3,"ngSubmit"],[1,"row"],[1,"col-12","mb-4"],[1,"card"],[1,"card-header","bg-primary","text-white"],[1,"fas","fa-user-injured","me-2"],[1,"card-body"],[1,"col-md-4"],[1,"mb-3"],[1,"form-label"],[1,"text-danger"],["type","text","name","patientName","required","",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","text","name","patientContact","placeholder","05XX-XXX-XXX",1,"form-control",3,"ngModelChange","ngModel","disabled"],[3,"typeSelected","disabled","selectedTypeName"],[1,"card-header","bg-success","text-white"],[1,"fas","fa-route","me-2"],["type","date","name","date","max","9999-12-31",1,"form-control",3,"ngModelChange","ngModel","disabled"],[3,"locationSelected","disabled","selectedLocationName"],[1,"col-md-3"],["type","number","name","start","min","0",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","number","name","end","min","0",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","text","readonly","","disabled","",1,"form-control","bg-light",3,"value"],[1,"text-muted"],["name","tripType",1,"form-control",3,"ngModelChange","change","ngModel","disabled"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-md-6"],["class","mb-3",4,"ngIf"],["type","number","name","ymdValue","min","0","max","365",1,"form-control",3,"ngModelChange","ngModel","disabled"],["name","ymdPeriod",1,"form-control",3,"ngModelChange","ngModel","disabled"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"card-header","bg-info","text-white"],[1,"fas","fa-users","me-2"],["name","driverId","disabled","",1,"form-control",3,"ngModelChange","ngModel"],["name","paramedicId",1,"form-control",3,"ngModelChange","ngModel","disabled"],["name","vehicleId","disabled","","required","",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"card-header","bg-warning","text-dark"],[1,"fas","fa-dollar-sign","me-2"],["type","number","name","totalPrice","min","0","step","0.01",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","number","name","payedPrice","min","0","step","0.01",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","number","name","paramedicShare","min","0","step","0.01",1,"form-control",3,"ngModelChange","ngModel","disabled","readonly"],["class","text-muted",4,"ngIf"],["type","number","name","otherExpenses","min","0","step","0.01",1,"form-control",3,"ngModelChange","ngModel","disabled"],["class","row",4,"ngIf"],[1,"card-header","bg-secondary","text-white"],[1,"fas","fa-sticky-note","me-2"],["name","tripNotes","rows","4","placeholder","\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0639\u0627\u0645\u0629 \u0639\u0646 \u0627\u0644\u0631\u062D\u0644\u0629...",1,"form-control",3,"ngModelChange","ngModel","disabled"],["name","transferStatus",1,"form-control",3,"ngModelChange","ngModel","disabled"],[3,"value"],[1,"alert","alert-info"],[1,"alert-heading"],[1,"fas","fa-calculator","me-2"],[1,"calculation-breakdown"],[1,"mb-2"],[1,"mb-2","text-muted"],[1,"fas","fa-lock","me-1"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],[1,"d-flex","gap-2"],["type","button","class","btn btn-success",3,"disabled","click",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],["class","fas fa-save me-2",4,"ngIf"],["type","button",1,"btn","btn-success",3,"click","disabled"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"fas","fa-save","me-2"],[1,"modal-backdrop","fade"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),x(5,"i",5),d(6),l(),s(7,"button",6),T("click",function(){return n.cancel()}),x(8,"i",7),d(9," \u0631\u062C\u0648\u0639 "),l()()()(),H(10,r7,4,0,"div",8)(11,y7,170,54,"form",9),l(),s(12,"div",10)(13,"div",11)(14,"div",12)(15,"div",13)(16,"h5",14),x(17,"i",15),d(18," \u062A\u0623\u0643\u064A\u062F \u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u0631\u062D\u0644\u0629 "),l(),s(19,"button",16),T("click",function(){return n.closeConfirmModal()}),l()(),s(20,"div",17)(21,"div",18),x(22,"i",19),s(23,"strong"),d(24,"\u062A\u062D\u0630\u064A\u0631:"),l(),d(25," \u0628\u0639\u062F \u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u0631\u062D\u0644\u0629\u060C \u0633\u064A\u062A\u0645 \u0645\u0639\u0627\u0644\u062C\u0629 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062A \u0627\u0644\u0645\u0627\u0644\u064A\u0629 \u0648\u0644\u0646 \u064A\u0645\u0643\u0646 \u0627\u0644\u062A\u0631\u0627\u062C\u0639 \u0639\u0646 \u0630\u0644\u0643. "),l(),s(26,"p"),d(27," \u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u0631\u063A\u0628\u062A\u0643 \u0641\u064A \u0625\u063A\u0644\u0627\u0642 \u0647\u0630\u0647 \u0627\u0644\u0631\u062D\u0644\u0629\u061F "),l()(),s(28,"div",20)(29,"button",21),T("click",function(){return n.closeConfirmModal()}),x(30,"i",22),d(31," \u0625\u0644\u063A\u0627\u0621 "),l(),s(32,"button",23),T("click",function(){return n.confirmCloseTrip()}),x(33,"i",24),d(34," \u062A\u0623\u0643\u064A\u062F \u0627\u0644\u0625\u063A\u0644\u0627\u0642 "),l()()()()(),H(35,b7,1,2,"div",25)),e&2&&(m(5),S("ngClass",No(9,n7,n.isCreateMode,n.isEditMode,n.isViewMode)),m(),q(" ",n.pageTitle," "),m(4),S("ngIf",n.isLoading),m(),S("ngIf",!n.isLoading),m(),dt("display",n.showCloseConfirmModal?"block":"none"),fe("show",n.showCloseConfirmModal),m(23),S("ngIf",n.showCloseConfirmModal))},dependencies:[Le,Ft,ai,kt,wn,tt,Kt,Ot,Lt,et,vi,At,ot,Xt,Zt,xi,aa,rt,$t,ss,us],styles:[".card[_ngcontent-%COMP%]{border:none;box-shadow:0 2px 8px #0000001a;margin-bottom:1.5rem}.card-header[_ngcontent-%COMP%]{border-bottom:none;padding:1rem 1.5rem}.card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:600}.card-body[_ngcontent-%COMP%]{padding:1.5rem}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#495057;margin-bottom:.5rem}.form-control[_ngcontent-%COMP%]{border-radius:.375rem;border:1px solid #ced4da;padding:.625rem .875rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-control[_ngcontent-%COMP%]:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem #007bff40}.form-control[_ngcontent-%COMP%]:disabled{background-color:#e9ecef;opacity:1}.text-danger[_ngcontent-%COMP%]{color:#dc3545}.btn[_ngcontent-%COMP%]{padding:.625rem 1.25rem;font-weight:500;border-radius:.375rem;transition:all .2s}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 8px #00000026}.btn-primary[_ngcontent-%COMP%]{background-color:#0d6efd;border-color:#0d6efd}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;border-color:#6c757d}.btn-success[_ngcontent-%COMP%]{background-color:#28a745;border-color:#28a745}.btn[_ngcontent-%COMP%]:disabled{opacity:.65;cursor:not-allowed;transform:none;box-shadow:none}.spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem;border-width:.15rem}.modal.show[_ngcontent-%COMP%], .modal-backdrop[_ngcontent-%COMP%]{background-color:#00000080}.alert[_ngcontent-%COMP%]{border-radius:.375rem;border:none}.alert-warning[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404}.d-flex.gap-2[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-left:.5rem}.d-flex.gap-2[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:first-child{margin-left:0}@media (max-width: 768px){.card-body[_ngcontent-%COMP%]{padding:1rem}.d-flex.justify-content-between[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.d-flex.gap-2[_ngcontent-%COMP%]{width:100%}.d-flex.gap-2[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:1}}"]})};var C7=(i,t)=>t.value,w7=(i,t)=>t.label,S7=(i,t)=>t.tripId;function T7(i,t){if(i&1){let e=Q();s(0,"button",26),T("click",function(){let r=b(e).$implicit,a=h();return C(a.onFilterChange(r.value))}),d(1),l()}if(i&2){let e=t.$implicit,n=h();fe("btn-primary",n.filterStatus()===e.value)("btn-outline-secondary",n.filterStatus()!==e.value),m(),q(" ",e.label," ")}}function E7(i,t){if(i&1){let e=Q();s(0,"li")(1,"a",27),T("click",function(){let r=b(e).$implicit,a=h();return C(a.onSortChange(r))}),d(2),l()()}if(i&2){let e=t.$implicit,n=h();m(),fe("active",n.sortBy()===e.sortBy&&n.sortOrder()===e.sortOrder),m(),q(" ",e.label," ")}}function A7(i,t){i&1&&(s(0,"div",24)(1,"div",28)(2,"span",29),d(3,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),l()(),s(4,"p",30),d(5,"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u062F\u064A\u0648\u0646..."),l()())}function M7(i,t){i&1&&d(0," \u062C\u0645\u064A\u0639 \u0627\u0644\u062F\u064A\u0648\u0646 \u062A\u0645 \u062A\u062D\u0635\u064A\u0644\u0647\u0627! ")}function F7(i,t){i&1&&d(0," \u0644\u0627 \u062A\u0648\u062C\u062F \u062F\u064A\u0648\u0646 \u0645\u062D\u0635\u0651\u0644\u0629 \u0628\u0639\u062F ")}function k7(i,t){i&1&&d(0," \u0644\u0627 \u062A\u0648\u062C\u062F \u062F\u064A\u0648\u0646 \u0645\u0633\u062C\u0644\u0629 ")}function P7(i,t){if(i&1&&(s(0,"div",24),x(1,"i",31),s(2,"h4",32),d(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u062F\u064A\u0648\u0646"),l(),s(4,"p",32),H(5,M7,1,0)(6,F7,1,0)(7,k7,1,0),l()()),i&2){let e=h();m(5),le(e.filterStatus()==="uncollected"?5:e.filterStatus()==="collected"?6:7)}}function D7(i,t){i&1&&(s(0,"span",40),d(1,"\u0645\u062D\u0635\u0651\u0644"),l())}function I7(i,t){i&1&&(s(0,"span",41),d(1,"\u063A\u064A\u0631 \u0645\u062D\u0635\u0651\u0644"),l())}function O7(i,t){if(i&1&&(s(0,"div",45)(1,"small",32),x(2,"i",48),d(3),l()()),i&2){let e=h().$implicit;m(3),q(" ",e.collectionNotes," ")}}function L7(i,t){if(i&1){let e=Q();s(0,"button",54),T("click",function(){b(e);let r=h(2).$implicit,a=h(2);return C(a.callPatient(r.patientContact))}),x(1,"i",55),d(2," \u0627\u062A\u0635\u0627\u0644 "),l()}}function R7(i,t){if(i&1){let e=Q();s(0,"div",46),H(1,L7,3,0,"button",49),s(2,"button",50),T("click",function(){b(e);let r=h().$implicit,a=h(2);return C(a.openEditModal(r))}),x(3,"i",51),d(4," \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0628\u0644\u063A "),l(),s(5,"button",52),T("click",function(){b(e);let r=h().$implicit,a=h(2);return C(a.openCollectModal(r))}),x(6,"i",53),d(7," \u062A\u062D\u0635\u064A\u0644 "),l()()}if(i&2){let e=h().$implicit;m(),le(e.patientContact?1:-1)}}function N7(i,t){if(i&1&&(s(0,"div",47),x(1,"i",56),d(2),l()),i&2){let e=h().$implicit,n=h(2);m(2),q(" \u062A\u0645 \u0627\u0644\u062A\u062D\u0635\u064A\u0644 \u0641\u064A ",n.formatDate(e.collectedAt)," ")}}function V7(i,t){if(i&1&&(s(0,"div",34)(1,"div",15)(2,"div",35)(3,"div")(4,"h5",36),d(5),l(),s(6,"p",37),x(7,"i",38),d(8),l()(),s(9,"div",39)(10,"h4",4),d(11),gt(12,"number"),l(),H(13,D7,2,0,"span",40)(14,I7,2,0,"span",41),l()(),s(15,"div",42)(16,"div",43)(17,"small",44),d(18,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0631\u062D\u0644\u0629"),l(),s(19,"span"),d(20),l()(),s(21,"div",43)(22,"small",44),d(23,"\u0627\u0644\u0645\u062F\u0629"),l(),s(24,"span"),d(25),l()(),s(26,"div",43)(27,"small",44),d(28,"\u0627\u0644\u0631\u0642\u0645"),l(),s(29,"span"),d(30),l()(),s(31,"div",43)(32,"small",44),d(33,"\u0627\u0644\u0633\u0639\u0631 \u0627\u0644\u0631\u062D\u0644\u0629 \u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A"),l(),s(34,"span"),d(35),gt(36,"number"),l()(),s(37,"div",43)(38,"small",44),d(39,"\u0627\u0644\u0645\u062F\u0641\u0648\u0639"),l(),s(40,"span"),d(41),gt(42,"number"),l()(),s(43,"div",43)(44,"small",44),d(45,"\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0627\u0635\u0644\u064A"),l(),s(46,"span"),d(47),l()()(),H(48,O7,4,1,"div",45)(49,R7,8,1,"div",46)(50,N7,3,1,"div",47),l()()),i&2){let e=t.$implicit,n=h(2);dt("border-width",e.isCollected?3:0,"px"),fe("border-success",e.isCollected)("border-start",e.isCollected),m(5),z(e.patientName),m(3),vt(" ",e.transferFrom," \u2192 ",e.transferTo," "),m(2),fe("text-success",e.isCollected)("text-primary",!e.isCollected),m(),q(" ",Bt(12,27,e.loanAmount,"1.0-2")," \u20AA "),m(2),le(e.isCollected?13:14),m(7),z(n.formatDate(e.tripDate)),m(4),gn(n.getAgingClass(e.daysSinceLoan)),m(),q(" ",n.getAgingLabel(e.daysSinceLoan)," "),m(4),gn(n.getAgingClass(e.daysSinceLoan)),m(),q(" ",e.patientContact," "),m(5),q("",Bt(36,30,e.totalPrice,"1.0-2")," \u20AA"),m(6),q("",Bt(42,33,e.payedPrice,"1.0-2")," \u20AA"),m(6),q("",e.totalPrice-e.payedPrice," \u20AA"),m(),le(e.collectionNotes?48:-1),m(),le(e.isCollected?50:49)}}function B7(i,t){if(i&1&&(s(0,"div",25),Te(1,V7,51,36,"div",33,S7),l()),i&2){let e=h();m(),Ee(e.loans())}}function U7(i,t){if(i&1){let e=Q();s(0,"div",69)(1,"p",70)(2,"strong"),d(3,"\u0627\u0644\u0645\u0631\u064A\u0636:"),l(),d(4),l(),s(5,"p",71)(6,"small"),d(7),gt(8,"number"),l()()(),s(9,"div",69)(10,"label",72),d(11,"\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u062C\u062F\u064A\u062F (\u20AA)"),l(),s(12,"input",73),V("ngModelChange",function(r){b(e);let a=h(2);return N(a.editAmount,r)||(a.editAmount=r),C(r)}),l(),s(13,"div",74),d(14,"\u0623\u062F\u062E\u0644 0 \u0644\u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u062F\u064A\u0646 (\u062A\u0645 \u0627\u0644\u062A\u062D\u0635\u064A\u0644)"),l()(),s(15,"div",69)(16,"label",72),d(17,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A (\u0627\u062E\u062A\u064A\u0627\u0631\u064A)"),l(),s(18,"textarea",75),V("ngModelChange",function(r){b(e);let a=h(2);return N(a.editNotes,r)||(a.editNotes=r),C(r)}),l()()}if(i&2){let e=h(2);m(4),q(" ",e.selectedLoan().patientName,""),m(3),q("\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u062D\u0627\u0644\u064A: ",Bt(8,4,e.selectedLoan().loanAmount,"1.0-2")," \u20AA"),m(5),R("ngModel",e.editAmount),m(6),R("ngModel",e.editNotes)}}function W7(i,t){if(i&1){let e=Q();x(0,"div",57),s(1,"div",58)(2,"div",59)(3,"div",60)(4,"div",61)(5,"h5",62),d(6,"\u062A\u0639\u062F\u064A\u0644 \u0645\u0628\u0644\u063A \u0627\u0644\u062F\u064A\u0646"),l(),s(7,"button",63),T("click",function(){b(e);let r=h();return C(r.closeEditModal())}),l()(),s(8,"div",64),H(9,U7,19,7),l(),s(10,"div",65)(11,"button",66),T("click",function(){b(e);let r=h();return C(r.closeEditModal())}),d(12,"\u0625\u0644\u063A\u0627\u0621"),l(),s(13,"button",67),T("click",function(){b(e);let r=h();return C(r.saveEditAmount())}),x(14,"i",68),d(15," \u062D\u0641\u0638 "),l()()()()()}if(i&2){let e=h();m(9),le(e.selectedLoan()?9:-1)}}function j7(i,t){if(i&1){let e=Q();s(0,"div",80)(1,"h3",81),d(2),gt(3,"number"),l(),s(4,"p",82),d(5),l()(),s(6,"div",69)(7,"label",72),d(8,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0627\u0644\u062A\u062D\u0635\u064A\u0644 "),s(9,"span",83),d(10,"*"),l()(),s(11,"textarea",84),V("ngModelChange",function(r){b(e);let a=h(2);return N(a.collectNotes,r)||(a.collectNotes=r),C(r)}),l()()}if(i&2){let e=h(2);m(2),q("",Bt(3,3,e.selectedLoan().loanAmount,"1.0-2")," \u20AA"),m(3),q("\u0645\u0646 ",e.selectedLoan().patientName,""),m(6),R("ngModel",e.collectNotes)}}function H7(i,t){if(i&1){let e=Q();x(0,"div",57),s(1,"div",58)(2,"div",59)(3,"div",60)(4,"div",76)(5,"h5",62),x(6,"i",77),d(7," \u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062A\u062D\u0635\u064A\u0644 "),l(),s(8,"button",78),T("click",function(){b(e);let r=h();return C(r.closeCollectModal())}),l()(),s(9,"div",64),H(10,j7,12,6),l(),s(11,"div",65)(12,"button",66),T("click",function(){b(e);let r=h();return C(r.closeCollectModal())}),d(13,"\u0625\u0644\u063A\u0627\u0621"),l(),s(14,"button",79),T("click",function(){b(e);let r=h();return C(r.confirmCollect())}),x(15,"i",53),d(16," \u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062A\u062D\u0635\u064A\u0644 "),l()()()()()}if(i&2){let e=h();m(10),le(e.selectedLoan()?10:-1)}}var Qc=class i{constructor(t,e,n,r,a){this.tripService=t;this.driverService=e;this.toastService=n;this.authService=r;this.router=a}loans=Z([]);isLoading=Z(!1);driverId=Z(null);filterStatus=Z("all");sortBy=Z("date");sortOrder=Z("desc");isEditModalOpen=Z(!1);isCollectModalOpen=Z(!1);selectedLoan=Z(null);editAmount=0;editNotes="";collectNotes="";stats=Z({totalLoans:0,uncollectedCount:0,collectedCount:0,totalUncollectedAmount:0,totalCollectedAmount:0});updateStats(){let t=this.loans(),e=t.filter(r=>!r.isCollected),n=t.filter(r=>r.isCollected);this.stats.set({totalLoans:t.length,uncollectedCount:e.length,collectedCount:n.length,totalUncollectedAmount:e.reduce((r,a)=>r+a.totalPrice-a.payedPrice,0),totalCollectedAmount:n.reduce((r,a)=>r+a.totalPrice-a.payedPrice,0)})}quickFilters=[{label:"\u0627\u0644\u0643\u0644",value:"all"},{label:"\u063A\u064A\u0631 \u0645\u062D\u0635\u0651\u0644",value:"uncollected"},{label:"\u0645\u062D\u0635\u0651\u0644",value:"collected"}];sortOptions=[{label:"\u0627\u0644\u0623\u062D\u062F\u062B",sortBy:"date",sortOrder:"desc"},{label:"\u0627\u0644\u0623\u0642\u062F\u0645",sortBy:"date",sortOrder:"asc"},{label:"\u0627\u0644\u0623\u0639\u0644\u0649 \u0645\u0628\u0644\u063A",sortBy:"amount",sortOrder:"desc"},{label:"\u0627\u0644\u0623\u0642\u0644 \u0645\u0628\u0644\u063A",sortBy:"amount",sortOrder:"asc"}];ngOnInit(){this.loadDriverAndLoans(!0)}loadDriverAndLoans(t=!1){this.isLoading.set(!0),this.driverService.getCurrentDriver().subscribe({next:e=>{this.driverId.set(e.id),this.loadLoans(t)},error:e=>{console.error("Error loading driver:",e),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0633\u0627\u0626\u0642"),this.isLoading.set(!1)}})}loadLoans(t=!1){let e=this.driverId();e&&(this.isLoading.set(!0),this.tripService.getPatientLoans(e,{status:this.filterStatus(),sortBy:this.sortBy(),sortOrder:this.sortOrder()}).subscribe({next:n=>{this.loans.set(n),this.isLoading.set(!1),t&&this.updateStats()},error:n=>{console.error("Error loading loans:",n),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u062F\u064A\u0648\u0646"),this.isLoading.set(!1)}}))}onFilterChange(t){this.filterStatus.set(t),this.loadLoans()}onSortChange(t){this.sortBy.set(t.sortBy),this.sortOrder.set(t.sortOrder),this.loadLoans()}getCurrentSortLabel(){return this.sortOptions.find(e=>e.sortBy===this.sortBy()&&e.sortOrder===this.sortOrder())?.label||"\u062A\u0631\u062A\u064A\u0628"}openEditModal(t){this.selectedLoan.set(t),this.editAmount=t.loanAmount,this.editNotes="",this.isEditModalOpen.set(!0)}closeEditModal(){this.isEditModalOpen.set(!1),this.selectedLoan.set(null),this.editAmount=0,this.editNotes=""}saveEditAmount(){let t=this.selectedLoan();if(t){if(this.editAmount<0){this.toastService.error("\u0627\u0644\u0645\u0628\u0644\u063A \u0644\u0627 \u064A\u0645\u0643\u0646 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0633\u0627\u0644\u0628\u0627\u064B");return}this.tripService.updateLoanAmount(t.tripId,this.editAmount,this.editNotes).subscribe({next:e=>{this.editAmount===0?this.toastService.success("\u062A\u0645 \u062A\u062D\u0635\u064A\u0644 \u0627\u0644\u062F\u064A\u0646 \u0628\u0627\u0644\u0643\u0627\u0645\u0644"):this.toastService.success("\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u0628\u0644\u063A \u0628\u0646\u062C\u0627\u062D"),this.closeEditModal(),this.loadLoans()},error:e=>{console.error("Error updating loan amount:",e),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u0628\u0644\u063A")}})}}openCollectModal(t){this.selectedLoan.set(t),this.collectNotes="",this.isCollectModalOpen.set(!0)}closeCollectModal(){this.isCollectModalOpen.set(!1),this.selectedLoan.set(null),this.collectNotes=""}confirmCollect(){let t=this.selectedLoan();if(t){if(!this.collectNotes.trim()){this.toastService.error("\u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0627\u0644\u062A\u062D\u0635\u064A\u0644");return}this.tripService.markLoanCollected(t.tripId,this.collectNotes).subscribe({next:()=>{this.toastService.success(`\u062A\u0645 \u062A\u062D\u0635\u064A\u0644 ${t.loanAmount} \u20AA \u0645\u0646 ${t.patientName}`),this.closeCollectModal(),this.loadLoans()},error:e=>{console.error("Error marking loan collected:",e),this.toastService.error("\u0641\u0634\u0644 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062A\u062D\u0635\u064A\u0644")}})}}getAgingClass(t){return t>30?"text-danger":t>14?"text-warning":"text-muted"}getAgingLabel(t){return t===0?"\u0627\u0644\u064A\u0648\u0645":t===1?"\u0623\u0645\u0633":t<7?`\u0645\u0646\u0630 ${t} \u0623\u064A\u0627\u0645`:t<30?`\u0645\u0646\u0630 ${Math.floor(t/7)} \u0623\u0633\u0627\u0628\u064A\u0639`:`\u0645\u0646\u0630 ${Math.floor(t/30)} \u0634\u0647\u0648\u0631`}formatDate(t){return new Date(t).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric"})}goBack(){this.router.navigate(["/user/driver-dashboard"])}callPatient(t){t&&(window.location.href=`tel:${t}`)}static \u0275fac=function(e){return new(e||i)(G(Ln),G(Ci),G(Ye),G(Pt),G(Xe))};static \u0275cmp=Oe({type:i,selectors:[["app-loan-collection"]],decls:57,vars:16,consts:[["dir","rtl",1,"container-fluid","py-4"],[1,"d-flex","align-items-center","mb-4"],[1,"btn","rounded-circle","me-3",3,"click"],[1,"fas","fa-arrow-right"],[1,"fw-bold","mb-0"],[1,"row","g-3","mb-4"],[1,"col-6","col-md-3"],[1,"card","border-0","shadow-sm","bg-primary","text-white"],[1,"card-body","text-center","py-3"],[1,"small","mb-1","opacity-75"],[1,"card","border-0","shadow-sm"],[1,"text-muted","small","mb-1"],[1,"fw-bold","text-warning","mb-0"],[1,"fw-bold","text-success","mb-0"],[1,"card","border-0","shadow-sm","mb-4"],[1,"card-body"],[1,"row","g-3","align-items-center"],[1,"col-12","col-md-6"],["role","group",1,"btn-group","w-100"],["type","button",1,"btn",3,"btn-primary","btn-outline-secondary"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown",1,"btn","btn-outline-secondary","dropdown-toggle","w-100"],[1,"fas","fa-sort","me-2"],[1,"dropdown-menu","w-100"],[1,"text-center","py-5"],[1,"loan-list"],["type","button",1,"btn",3,"click"],[1,"dropdown-item",3,"click"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"text-muted","mt-3"],[1,"fas","fa-check-circle","fa-4x","text-success","mb-3"],[1,"text-muted"],[1,"card","border-0","shadow-sm","mb-3",3,"border-success","border-start","border-width"],[1,"card","border-0","shadow-sm","mb-3"],[1,"d-flex","justify-content-between","align-items-start","mb-3"],[1,"fw-bold","mb-1"],[1,"text-muted","small","mb-0"],[1,"fas","fa-map-marker-alt","me-1"],[1,"text-end"],[1,"badge","bg-success"],[1,"badge","bg-warning","text-dark"],[1,"row","g-2","mb-3"],[1,"col-4"],[1,"text-muted","d-block"],[1,"alert","alert-light","py-2","mb-3"],[1,"d-flex","gap-2"],[1,"text-center","text-success"],[1,"fas","fa-sticky-note","me-1"],[1,"btn","btn-outline-success","flex-fill"],[1,"btn","btn-outline-primary","flex-fill",3,"click"],[1,"fas","fa-edit","me-1"],[1,"btn","btn-success","flex-fill",3,"click"],[1,"fas","fa-check","me-1"],[1,"btn","btn-outline-success","flex-fill",3,"click"],[1,"fas","fa-phone","me-1"],[1,"fas","fa-check-circle","me-1"],[1,"modal-backdrop","fade","show"],["tabindex","-1",1,"modal","d-block"],[1,"modal-dialog","modal-dialog-centered"],["dir","rtl",1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-save","me-1"],[1,"mb-3"],[1,"mb-1"],[1,"mb-0","text-muted"],[1,"form-label"],["type","number","min","0","step","0.01",1,"form-control","form-control-lg","text-center",3,"ngModelChange","ngModel"],[1,"form-text"],["rows","2","placeholder","\u0633\u0628\u0628 \u0627\u0644\u062A\u0639\u062F\u064A\u0644...",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-header","bg-success","text-white"],[1,"fas","fa-check-circle","me-2"],["type","button",1,"btn-close","btn-close-white",3,"click"],["type","button",1,"btn","btn-success",3,"click"],[1,"text-center","mb-4"],[1,"fw-bold","text-success"],[1,"text-muted","mb-0"],[1,"text-danger"],["rows","3","placeholder","\u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062F\u0641\u0639\u060C \u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062A\u062D\u0635\u064A\u0644 \u0627\u0644\u0641\u0639\u0644\u064A\u060C \u0623\u0648 \u0623\u064A \u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0623\u062E\u0631\u0649...","required","",1,"form-control",3,"ngModelChange","ngModel"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"button",2),T("click",function(){return n.goBack()}),x(3,"i",3),l(),s(4,"h2",4),d(5,"\u062A\u062D\u0635\u064A\u0644 \u0627\u0644\u062F\u064A\u0648\u0646"),l()(),s(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"p",9),d(11,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u062F\u064A\u0648\u0646"),l(),s(12,"h3",4),d(13),gt(14,"number"),l()()()(),s(15,"div",6)(16,"div",10)(17,"div",8)(18,"p",11),d(19,"\u063A\u064A\u0631 \u0645\u062D\u0635\u0651\u0644"),l(),s(20,"h3",12),d(21),l()()()(),s(22,"div",6)(23,"div",10)(24,"div",8)(25,"p",11),d(26,"\u0645\u062D\u0635\u0651\u0644"),l(),s(27,"h3",13),d(28),l()()()(),s(29,"div",6)(30,"div",10)(31,"div",8)(32,"p",11),d(33,"\u062A\u0645 \u062A\u062D\u0635\u064A\u0644\u0647"),l(),s(34,"h3",13),d(35),gt(36,"number"),l()()()()(),s(37,"div",14)(38,"div",15)(39,"div",16)(40,"div",17)(41,"div",18),Te(42,T7,2,5,"button",19,C7),l()(),s(44,"div",17)(45,"div",20)(46,"button",21),x(47,"i",22),d(48),l(),s(49,"ul",23),Te(50,E7,3,3,"li",null,w7),l()()()()()(),H(52,A7,6,0,"div",24)(53,P7,8,1,"div",24)(54,B7,3,0,"div",25),l(),H(55,W7,16,1)(56,H7,17,1)),e&2&&(m(13),q("",Bt(14,10,n.stats().totalUncollectedAmount,"1.0-2")," \u20AA"),m(8),z(n.stats().uncollectedCount),m(7),z(n.stats().collectedCount),m(7),q("",Bt(36,13,n.stats().totalCollectedAmount,"1.0-2")," \u20AA"),m(7),Ee(n.quickFilters),m(6),q(" ",n.getCurrentSortLabel()," "),m(2),Ee(n.sortOptions),m(2),le(n.isLoading()?52:-1),m(),le(!n.isLoading()&&n.loans().length===0?53:-1),m(),le(!n.isLoading()&&n.loans().length>0?54:-1),m(),le(n.isEditModalOpen()?55:-1),m(),le(n.isCollectModalOpen()?56:-1))},dependencies:[Le,wn,tt,et,vi,ot,Zt,xi,rt],styles:[".loan-list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{transition:transform .2s ease,box-shadow .2s ease}.loan-list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 .5rem 1rem #0000001a!important}.modal[_ngcontent-%COMP%]{background-color:#00000080}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1}.dropdown-item.active[_ngcontent-%COMP%]{background-color:var(--bs-primary);color:#fff}.text-warning[_ngcontent-%COMP%]{color:#f0ad4e!important}.card.border-success[_ngcontent-%COMP%]{border-color:#198754!important}.card.bg-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0d6efd,#0a58ca)!important}.d-flex.gap-2[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:0;padding-left:.5rem;padding-right:.5rem}@media (max-width: 576px){.d-flex.gap-2[_ngcontent-%COMP%]{flex-wrap:wrap}.d-flex.gap-2[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1 1 calc(50% - .5rem)}}"]})};var w2=[{name:"Normal saline 0,9%",category:"IV Fluids",order:1},{name:"D\\W 5%",category:"IV Fluids",order:2},{name:"Ringer lactate",category:"IV Fluids",order:3},{name:"Non sterile gloves",category:"Personal Protection",order:4},{name:"Crep Bandage",category:"Wound Care",order:5},{name:"Arterial Tourniquet",category:"Trauma Equipment",order:6},{name:"Delivery Kit",category:"Obstetric Equipment",order:7},{name:"Quick cold",category:"Miscellaneous",order:8},{name:"Syringes 5cc",category:"Syringes & Needles",order:9},{name:"syringes 10cc",category:"Syringes & Needles",order:10},{name:"needles",category:"Syringes & Needles",order:11},{name:"I.V set",category:"Syringes & Needles",order:12},{name:"Triangular Bandage",category:"Wound Care",order:13},{name:"I.V cannnula G 14",category:"Syringes & Needles",order:14},{name:"I.V cannnula G 16",category:"Syringes & Needles",order:15},{name:"I.V cannnula G 18",category:"Syringes & Needles",order:16},{name:"I.V cannnula G 20",category:"Syringes & Needles",order:17},{name:"I.V cannnula G 22",category:"Syringes & Needles",order:18},{name:"Plaster Roll",category:"Wound Care",order:19},{name:"Urinal Bottle",category:"Patient Care",order:20},{name:"Kidney Receiver",category:"Patient Care",order:21},{name:"Metal Splints",category:"Splints & Immobilization",order:22},{name:"Oral air way",category:"Airway Management",order:23},{name:"O2 Nasal cannula Adult",category:"Oxygen Equipment",order:24},{name:"O2 Nasal cannula child",category:"Oxygen Equipment",order:25},{name:"O2 Nasal face mask Adult",category:"Oxygen Equipment",order:26},{name:"O2 Nasal face mask child",category:"Oxygen Equipment",order:27},{name:"E.T tube",category:"Airway Management",order:28},{name:"Field Bandage",category:"Wound Care",order:29},{name:"Gauze Pad",category:"Wound Care",order:30},{name:"Gauze roll",category:"Wound Care",order:31},{name:"Alcohol swap",category:"Wound Care",order:32},{name:"Alcohol solution 70%",category:"Wound Care",order:33},{name:"Thermometer",category:"Diagnostic Equipment",order:34},{name:"Sharp Container",category:"Miscellaneous",order:35},{name:"Cotton",category:"Wound Care",order:36},{name:"O2 cylinder S",category:"Oxygen Equipment",order:37},{name:"suction tube",category:"Airway Management",order:38},{name:"Long board",category:"Patient Transport",order:39},{name:"Non rebreathing o2 mask (A)",category:"Oxygen Equipment",order:40},{name:"Tongue Depressor",category:"Airway Management",order:41},{name:"Poston splint",category:"Splints & Immobilization",order:42},{name:"Bed cover",category:"Patient Transport",order:43},{name:"Emergency Blanket",category:"Patient Transport",order:44},{name:"Stethoscope",category:"Diagnostic Equipment",order:45},{name:"Short Board",category:"Patient Transport",order:46},{name:"Scissor",category:"Miscellaneous",order:47},{name:"Neck collars M",category:"Splints & Immobilization",order:48},{name:"neck collars L",category:"Splints & Immobilization",order:49},{name:"neck collars S",category:"Splints & Immobilization",order:50},{name:"Pocket Mask",category:"Airway Management",order:51},{name:"Ambo Bag A",category:"Airway Management",order:52},{name:"Ambo Bag C",category:"Airway Management",order:53},{name:"Ambo Bag infant",category:"Airway Management",order:54},{name:"Traction Splint",category:"Splints & Immobilization",order:55},{name:"manual sphygmomanometer",category:"Diagnostic Equipment",order:56},{name:"arterial Tourniquet rubber",category:"Trauma Equipment",order:57},{name:"laryngal mask",category:"Airway Management",order:58}];var z7=(i,t,e)=>({"bg-success-soft border-success":i,"bg-danger-soft border-danger":t,"bg-light border-light-subtle":e}),G7=(i,t)=>t.name,$7=(i,t)=>t.order;function Z7(i,t){if(i&1){let e=Q();s(0,"div",50)(1,"div",51)(2,"h5",52)(3,"span",53),d(4),l(),d(5),l(),s(6,"div",54)(7,"input",55),T("change",function(){let r=b(e).$implicit,a=h(2);return C(a.updateItemAvailability(r.order-1,!0))}),l(),s(8,"label",56),x(9,"i",57),d(10," \u0645\u062A\u0648\u0641\u0631 "),l(),s(11,"input",55),T("change",function(){let r=b(e).$implicit,a=h(2);return C(a.updateItemAvailability(r.order-1,!1))}),l(),s(12,"label",58),x(13,"i",59),d(14," \u063A\u064A\u0631 \u0645\u062A\u0648\u0641\u0631 "),l()()(),s(15,"div",60)(16,"div",61)(17,"div",62)(18,"label",63),d(19,"\u0627\u0644\u0643\u0645\u064A\u0629/\u0627\u0644\u0642\u064A\u0645\u0629"),l(),s(20,"input",64),T("input",function(r){let a=b(e).$implicit,u=h(2);return C(u.updateItemQuantity(a.order-1,r.target.value))}),l()()(),s(21,"div",65)(22,"div",62)(23,"label",63),d(24,"\u0627\u0644\u0645\u0644\u0627\u062D\u0638\u0627\u062A (\u0627\u062E\u062A\u064A\u0627\u0631\u064A)"),l(),s(25,"textarea",66),T("input",function(r){let a=b(e).$implicit,u=h(2);return C(u.updateItemNotes(a.order-1,r.target.value))}),l()()()()()}if(i&2){let e=t.$implicit;S("ngClass",No(13,z7,e.isAvailable===!0,e.isAvailable===!1,e.isAvailable===null)),m(4),q("",e.order,"."),m(),q(" ",e.name," "),m(2),S("name","available_"+e.order)("id","available_yes_"+e.order)("checked",e.isAvailable===!0),m(),S("for","available_yes_"+e.order),m(3),S("name","available_"+e.order)("id","available_no_"+e.order)("checked",e.isAvailable===!1),m(),S("for","available_no_"+e.order),m(8),S("value",e.quantity||""),m(5),S("value",e.notes)}}function q7(i,t){if(i&1){let e=Q();s(0,"div",29)(1,"h2",40)(2,"button",41),T("click",function(){let r=b(e).$implicit,a=h();return C(a.toggleCategory(r.name))}),s(3,"div",42)(4,"span",43),x(5,"i",44),l(),s(6,"span",45),d(7),l(),s(8,"span",46),x(9,"i",47),d(10),l()()()(),s(11,"div",48)(12,"div",49),Te(13,Z7,26,17,"div",50,$7),l()()()}if(i&2){let e=t.$implicit,n=h();m(),S("id","header-"+e.name),m(),fe("collapsed",!n.isCategoryExpanded(e.name)),Pn("data-bs-target","#collapse-"+e.name)("aria-controls","collapse-"+e.name),m(5),z(e.name),m(3),q(" ",e.items.length," \u0628\u0646\u062F "),m(),fe("show",n.isCategoryExpanded(e.name)),S("id","collapse-"+e.name),Pn("aria-labelledby","header-"+e.name),m(2),Ee(e.items)}}function Y7(i,t){i&1&&(x(0,"span",67),d(1," \u062C\u0627\u0631\u064A \u0627\u0644\u062D\u0641\u0638... "))}function X7(i,t){i&1&&(x(0,"i",68),d(1," \u062D\u0641\u0638 \u0627\u0644\u0642\u0627\u0626\u0645\u0629 "))}function K7(i,t){if(i&1&&(s(0,"div",38),x(1,"i",69),s(2,"div")(3,"strong"),d(4,"\u062A\u0646\u0628\u064A\u0647:"),l(),d(5),l()()),i&2){let e=h();m(5),q(" \u064A\u0631\u062C\u0649 \u0625\u0643\u0645\u0627\u0644 \u062C\u0645\u064A\u0639 \u0627\u0644\u0639\u0646\u0627\u0635\u0631 \u0627\u0644\u0645\u062A\u0628\u0642\u064A\u0629 (",e.uncheckedCount(),") \u0642\u0628\u0644 \u0627\u0644\u062D\u0641\u0638. ")}}var ed=class i{constructor(t,e,n,r,a){this.checklistService=t;this.toastService=e;this.router=n;this.vehicleCookieService=r;this.globalVars=a;this.globalVars.setGlobalHeader(" \u0642\u0627\u0626\u0645\u0629 \u0641\u062D\u0635 \u0627\u0644\u0645\u0631\u0643\u0628\u0629 ")}loading=Z(!1);sessionId=Z(null);vehicleName=Z("");items=Z([]);generalNotes=Z("");expandedCategory=Z(null);isCancelModalOpen=Z(!1);cancelModalConfig={type:"delete",title:"\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u0625\u0644\u063A\u0627\u0621",message:"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u0641\u062D\u0635\u061F \u0633\u064A\u062A\u0645 \u0625\u0644\u063A\u0627\u0621 \u062C\u0645\u064A\u0639 \u0627\u0644\u062A\u063A\u064A\u064A\u0631\u0627\u062A \u0648\u0633\u062A\u0638\u0647\u0631 \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0641\u062D\u0635 \u0645\u0631\u0629 \u0623\u062E\u0631\u0649 \u0643\u062A\u0630\u0643\u064A\u0631.",confirmButtonText:"\u0646\u0639\u0645\u060C \u0625\u0644\u063A\u0627\u0621",cancelButtonText:"\u0625\u0628\u0642\u0627\u0621 \u0627\u0644\u0634\u0627\u0634\u0629",highlightedText:"\u0625\u0644\u063A\u0627\u0621 \u062C\u0645\u064A\u0639 \u0627\u0644\u062A\u063A\u064A\u064A\u0631\u0627\u062A"};categories=We(()=>{let t=this.items(),e=new Map;return t.forEach(n=>{e.has(n.category)||e.set(n.category,[]),e.get(n.category).push(n)}),Array.from(e.entries()).map(([n,r])=>({name:n,items:r.sort((a,u)=>a.order-u.order)}))});allItemsChecked=We(()=>this.items().every(t=>t.isAvailable===!0||t.isAvailable===!1));availableCount=We(()=>this.items().filter(t=>t.isAvailable===!0).length);unavailableCount=We(()=>this.items().filter(t=>t.isAvailable===!1).length);uncheckedCount=We(()=>this.items().filter(t=>t.isAvailable!==!0&&t.isAvailable!==!1).length);ngOnInit(){this.loadSession(),this.initializeItems()}loadSession(){let t=this.vehicleCookieService.getSelectedVehicleId();if(!t){this.toastService.error("\u0644\u0645 \u064A\u062A\u0645 \u062A\u062D\u062F\u064A\u062F \u0627\u0644\u0645\u0631\u0643\u0628\u0629"),this.router.navigate(["/user/driver-dashboard"]);return}this.checklistService.getCurrentSession(t).subscribe({next:e=>{e&&(console.log("Loaded session info:",e),this.sessionId.set(e.sessionId),this.vehicleName.set(e.vehicleName),e.checklistCompleted&&(this.toastService.warning("\u062A\u0645 \u0625\u0643\u0645\u0627\u0644 \u0627\u0644\u0641\u062D\u0635 \u0645\u0633\u0628\u0642\u0627\u064B"),this.router.navigate(["/user/driver-dashboard"])))},error:e=>{console.error("Failed to load session:",e),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u062C\u0644\u0633\u0629")}})}initializeItems(){let t=w2.map(e=>Qe(ve({},e),{isAvailable:null,quantity:null,notes:""}));this.items.set(t)}toggleCategory(t){let e=this.expandedCategory()===t;e?this.expandedCategory.set(null):this.expandedCategory.set(t),e||setTimeout(()=>{let n=document.getElementById("header-"+t);if(n){let r=n.querySelector("button");r&&r.scrollIntoView({behavior:"smooth",block:"start"})}},50)}isCategoryExpanded(t){return this.expandedCategory()===t}updateItemAvailability(t,e){this.items.update(n=>{let r=[...n];return r[t]=Qe(ve({},r[t]),{isAvailable:e}),r})}updateItemQuantity(t,e){let n=e?parseInt(e,10):null;this.items.update(r=>{let a=[...r];return a[t]=Qe(ve({},a[t]),{quantity:n}),a})}updateItemNotes(t,e){this.items.update(n=>{let r=[...n];return r[t]=Qe(ve({},r[t]),{notes:e}),r})}submitChecklist(){if(!this.allItemsChecked()){this.toastService.error("\u064A\u062C\u0628 \u0641\u062D\u0635 \u062C\u0645\u064A\u0639 \u0627\u0644\u0639\u0646\u0627\u0635\u0631 (\u0645\u062A\u0648\u0641\u0631/\u063A\u064A\u0631 \u0645\u062A\u0648\u0641\u0631) \u0642\u0628\u0644 \u0627\u0644\u0625\u0631\u0633\u0627\u0644");return}let t=this.sessionId();if(!t){this.toastService.error("\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u062C\u0644\u0633\u0629 \u063A\u064A\u0631 \u0645\u062A\u0648\u0641\u0631\u0629");return}this.loading.set(!0);let e={sessionId:t,vehicleId:"",driverId:"",totalItems:this.items().length,availableItems:this.availableCount(),unavailableItems:this.unavailableCount(),generalNotes:this.generalNotes(),items:this.items()};this.checklistService.submitChecklist(e).subscribe({next:n=>{this.loading.set(!1),n&&(this.toastService.success("\u062A\u0645 \u062D\u0641\u0638 \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0641\u062D\u0635 \u0628\u0646\u062C\u0627\u062D"),this.router.navigate(["/user/driver-dashboard"]))},error:n=>{console.error("Failed to submit checklist:",n),this.toastService.error("\u0641\u0634\u0644 \u062D\u0641\u0638 \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0641\u062D\u0635"),this.loading.set(!1)}})}cancel(){this.isCancelModalOpen.set(!0)}handleCancelConfirmation(t){this.isCancelModalOpen.set(!1),t&&(this.toastService.info("\u062A\u0645 \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u0641\u062D\u0635"),this.router.navigate(["/user/driver-dashboard"]))}static \u0275fac=function(e){return new(e||i)(G(Na),G(Ye),G(Xe),G(Oi),G(ft))};static \u0275cmp=Oe({type:i,selectors:[["app-vehicle-checklist"]],decls:56,vars:17,consts:[[1,"modern-form-container","fade-in"],[1,"card","card-modern","header-card","mb-4"],[1,"card-body","p-4"],[1,"d-flex","flex-column","flex-lg-row","justify-content-between","align-items-lg-center","gap-3","mb-4"],[1,"form-title","mb-1"],[1,"icon-circle","me-2"],[1,"fas","fa-truck-moving"],[1,"text-muted","mb-0","trip-id-text"],[1,"far","fa-clipboard","me-1"],[1,"d-flex","gap-2","order-first","order-lg-last"],[1,"btn","btn-light-secondary",3,"click","disabled"],[1,"fas","fa-arrow-right-from-bracket","me-2"],[1,"status-section","rounded-3","p-3","border","border-dashed"],[1,"row","g-3","align-items-center"],[1,"col-12","col-md-6"],[1,"d-flex","gap-2","justify-content-center","justify-content-md-start","flex-wrap"],[1,"badge","rounded-pill","bg-success-soft","text-success","p-2","px-3","fw-bold"],[1,"fas","fa-check-circle","me-1"],[1,"badge","rounded-pill","bg-danger-soft","text-danger","p-2","px-3","fw-bold"],[1,"fas","fa-times-circle","me-1"],[1,"badge","rounded-pill","bg-warning-soft","text-warning-emphasis","p-2","px-3","fw-bold"],[1,"fas","fa-clock","me-1"],[1,"d-flex","justify-content-between","align-items-center","mb-1"],[1,"fw-bold","text-dark","fs-sm"],[1,"text-muted","small"],[1,"progress","custom-progress"],["role","progressbar",1,"progress-bar","bg-success"],["role","progressbar",1,"progress-bar","bg-danger"],[1,"accordion","custom-accordion"],[1,"accordion-item","card-modern","mb-3","shadow-none"],[1,"card","card-modern","mb-4","mt-4"],["for","generalNotes",1,"form-label","d-flex","align-items-center","mb-3","fw-bold"],[1,"icon-circle","me-3",2,"width","38px","height","38px","font-size","1.1rem","background-color","#f0f3f6","color","#475569"],[1,"fas","fa-pencil-alt"],["id","generalNotes","rows","4","placeholder","\u0633\u062C\u0644 \u0647\u0646\u0627 \u0623\u064A \u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0639\u0627\u0645\u0629 \u0645\u0647\u0645\u0629...",1,"form-control","custom-textarea",3,"input","value"],[1,"d-flex","justify-content-start","flex-row-reverse","gap-3","mt-4","pt-3","border-top"],["type","button",1,"btn","btn-primary","btn-lg","px-5","shadow-lg",3,"click","disabled"],["type","button",1,"btn","btn-light-secondary","btn-lg",3,"click","disabled"],["role","alert",1,"alert","alert-danger","mt-4","border-0","shadow-sm","d-flex","align-items-center","rounded-3","alert-custom"],[3,"confirmed","cancelled","isOpen","config"],[1,"accordion-header",3,"id"],["type","button","data-bs-toggle","collapse","aria-expanded","false",1,"accordion-button",3,"click"],[1,"d-flex","align-items-center","w-100"],[1,"section-icon-wrapper","me-3"],[1,"fas","fa-folder"],[1,"fw-bold","me-auto","fs-5"],[1,"badge","bg-light","text-secondary","border","fw-normal","ms-3","p-2","px-3"],[1,"fas","fa-list-ul","me-1"],[1,"accordion-collapse","collapse",3,"id"],[1,"accordion-body"],[1,"modern-item-card","p-4","mb-3","rounded-3","border","transition-all",3,"ngClass"],[1,"d-flex","justify-content-between","align-items-start","flex-wrap","mb-3"],[1,"mb-0","fw-bold","text-dark","me-3"],[1,"text-secondary","me-2","small"],[1,"custom-toggle-group","flex-shrink-0"],["type","radio",1,"toggle-check",3,"change","name","id","checked"],[1,"toggle-label","toggle-success",3,"for"],[1,"fas","fa-thumbs-up","me-1"],[1,"toggle-label","toggle-danger",3,"for"],[1,"fas","fa-thumbs-down","me-1"],[1,"row","g-3"],[1,"col-12","col-sm-3"],[1,"form-group-modern"],[1,"form-label","small","mb-1"],["type","number","placeholder","0","min","0",1,"form-control","form-control-sm","text-center","bg-white","border-0","shadow-sm",3,"input","value"],[1,"col-12","col-sm-9"],["rows","4","placeholder","\u0627\u0643\u062A\u0628 \u0645\u0644\u0627\u062D\u0638\u0627\u062A\u0643...",1,"form-control","form-control-sm","bg-white","border-0","shadow-sm","custom-textarea",3,"input","value"],["role","status",1,"spinner-border","spinner-border-sm","me-2"],[1,"fas","fa-save","me-2"],[1,"fas","fa-exclamation-triangle","me-3","fs-4"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"h1",4)(6,"span",5),x(7,"i",6),l(),d(8),l(),s(9,"p",7),x(10,"i",8),d(11," \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0641\u062D\u0635 \u0627\u0644\u062F\u0648\u0631\u064A\u0629 \u0644\u0644\u0645\u0631\u0643\u0628\u0629 "),l()(),s(12,"div",9)(13,"button",10),T("click",function(){return n.cancel()}),x(14,"i",11),d(15," \u062E\u0631\u0648\u062C "),l()()(),s(16,"div",12)(17,"div",13)(18,"div",14)(19,"div",15)(20,"span",16),x(21,"i",17),d(22),l(),s(23,"span",18),x(24,"i",19),d(25),l(),s(26,"span",20),x(27,"i",21),d(28),l()()(),s(29,"div",14)(30,"div",22)(31,"span",23),d(32,"\u0646\u0633\u0628\u0629 \u0627\u0644\u0641\u062D\u0635 \u0627\u0644\u0645\u0643\u062A\u0645\u0644\u0629"),l(),s(33,"span",24),d(34),l()(),s(35,"div",25),x(36,"div",26)(37,"div",27),l()()()()()(),s(38,"div",28),Te(39,q7,15,11,"div",29,G7),l(),s(41,"div",30)(42,"div",2)(43,"label",31)(44,"span",32),x(45,"i",33),l(),d(46," \u0627\u0644\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0627\u0644\u0639\u0627\u0645\u0629 "),l(),s(47,"textarea",34),T("input",function(a){return n.generalNotes.set(a.target.value)}),l()()(),s(48,"div",35)(49,"button",36),T("click",function(){return n.submitChecklist()}),H(50,Y7,2,0)(51,X7,2,0),l(),s(52,"button",37),T("click",function(){return n.cancel()}),d(53," \u0625\u0644\u063A\u0627\u0621 "),l()(),H(54,K7,6,1,"div",38),l(),s(55,"app-confirmation-modal",39),T("confirmed",function(){return n.handleCancelConfirmation(!0)})("cancelled",function(){return n.handleCancelConfirmation(!1)}),l()),e&2&&(m(8),q(" ",n.vehicleName()," "),m(5),S("disabled",n.loading()),m(9),q(" \u0645\u062A\u0648\u0641\u0631: ",n.availableCount()," "),m(3),q(" \u063A\u064A\u0631 \u0645\u062A\u0648\u0641\u0631: ",n.unavailableCount()," "),m(3),q(" \u0645\u062A\u0628\u0642\u064A: ",n.uncheckedCount()," "),m(6),q("",n.items().length," \u0639\u0646\u0635\u0631"),m(2),dt("width",n.availableCount()/n.items().length*100,"%"),m(),dt("width",n.unavailableCount()/n.items().length*100,"%"),m(2),Ee(n.categories()),m(8),S("value",n.generalNotes()),m(2),S("disabled",!n.allItemsChecked()||n.loading()),m(),le(n.loading()?50:51),m(2),S("disabled",n.loading()),m(2),le(n.allItemsChecked()?-1:54),m(),S("isOpen",n.isCancelModalOpen())("config",n.cancelModalConfig))},dependencies:[Le,Ft,tt,Wi],styles:["[_ngcontent-%COMP%]:root{--primary-color: #0d6efd;--primary-soft: #e0edff;--secondary-color: #64748b;--secondary-bg: #f5f5f5;--bg-page: #f8fafc;--shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, .07);--shadow-md: 0 5px 15px -3px rgba(0, 0, 0, .1), 0 3px 6px -2px rgba(0, 0, 0, .05);--shadow-lg: 0 10px 20px -5px rgba(13, 110, 253, .25);--radius-lg: 1rem;--success-border: #34d399;--success-text: #00d592;--success-bg-checked: #10b981;--danger-border: #f87171;--danger-text: #dc2626;--danger-bg-checked: #ef4444}body[_ngcontent-%COMP%]{background-color:var(--bg-page);color:#334155;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;direction:rtl}.bg-success-soft[_ngcontent-%COMP%]{background-color:#dcfce7!important;color:#15803d!important}.text-success[_ngcontent-%COMP%]{color:#16a34a!important}.bg-danger-soft[_ngcontent-%COMP%]{background-color:#fee2e2!important;color:#b91c1c!important}.text-danger[_ngcontent-%COMP%]{color:#dc2626!important}.bg-warning-soft[_ngcontent-%COMP%]{background-color:#fef3c7!important;color:#b45309!important}.text-warning-emphasis[_ngcontent-%COMP%]{color:#d97706!important}.bg-light-subtle[_ngcontent-%COMP%]{background-color:#f1f5f9!important;border-color:#e2e8f0!important}.modern-form-container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:2rem 1rem}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .4s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.card-modern[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #f1f5f9;border-radius:var(--radius-lg);box-shadow:var(--shadow-md);transition:transform .2s ease,box-shadow .2s ease;overflow:hidden}.form-title[_ngcontent-%COMP%]{font-weight:900;color:#1e293b;font-size:2rem}.icon-circle[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:50px;height:50px;border-radius:50%;background-color:var(--primary-soft);color:var(--primary-color);font-size:1.4rem}.trip-id-text[_ngcontent-%COMP%]{color:#94a3b8;font-size:.95rem;margin-right:58px}.status-section[_ngcontent-%COMP%]{border-color:#e2e8f0!important;background-color:var(--bg-page)}.custom-progress[_ngcontent-%COMP%]{height:14px;border-radius:10px;background-color:#e2e8f0;overflow:hidden}.custom-accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]{border:none;background:transparent;box-shadow:var(--shadow-sm);border-radius:var(--radius-lg)}.custom-accordion[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{background-color:#fff;padding:1.25rem 1.5rem;border:none;box-shadow:none;color:#334155;border-radius:var(--radius-lg)!important;transition:all .3s ease}.custom-accordion[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:not(.collapsed){background-color:var(--primary-soft);color:var(--primary-color);border-radius:var(--radius-lg) var(--radius-lg) 0 0!important}.section-icon-wrapper[_ngcontent-%COMP%]{width:38px;height:38px;background:#f1f5f9;border-radius:10px;display:flex;align-items:center;justify-content:center;color:var(--secondary-color);transition:all .2s;font-size:1.1rem}.accordion-button[_ngcontent-%COMP%]:not(.collapsed)   .section-icon-wrapper[_ngcontent-%COMP%]{background:#fff;color:var(--primary-color);box-shadow:var(--shadow-sm)}.accordion-body[_ngcontent-%COMP%]{padding:1.75rem;background-color:#fff;border-bottom-left-radius:var(--radius-lg);border-bottom-right-radius:var(--radius-lg);border-top:1px solid #e2e8f0}.modern-item-card[_ngcontent-%COMP%]{transition:all .3s ease;border-width:2px!important}.custom-toggle-group[_ngcontent-%COMP%]{display:inline-flex;border-radius:50px;overflow:hidden;box-shadow:var(--shadow-sm)}.toggle-check[_ngcontent-%COMP%]{position:absolute;clip:rect(0,0,0,0);pointer-events:none}.toggle-label[_ngcontent-%COMP%]{cursor:pointer;padding:.5rem 1.25rem;font-size:.875rem;font-weight:600;transition:all .2s ease;min-width:100px;text-align:center}.toggle-success[_ngcontent-%COMP%]{color:var(--success-text);background-color:#fff;border:2px solid var(--success-border);border-left:none;border-top-right-radius:50px;border-bottom-right-radius:50px}.toggle-danger[_ngcontent-%COMP%]{color:var(--danger-text);background-color:#fff;border:2px solid var(--danger-border);border-right:none;border-top-left-radius:50px;border-bottom-left-radius:50px}.toggle-success[_ngcontent-%COMP%]:hover{background-color:var(--success-border);color:#fff}.toggle-danger[_ngcontent-%COMP%]:hover{background-color:var(--danger-border);color:#fff}.toggle-check[_ngcontent-%COMP%]:checked + .toggle-success[_ngcontent-%COMP%]{background-color:#03a56f;border-color:#03a56f;color:#fff}.toggle-check[_ngcontent-%COMP%]:checked + .toggle-danger[_ngcontent-%COMP%]{background-color:#dc2626;border-color:#dc2626;color:#fff}.toggle-check[_ngcontent-%COMP%]:checked + .toggle-label[_ngcontent-%COMP%]{z-index:1}.custom-textarea[_ngcontent-%COMP%]{resize:vertical}@media (max-width: 576px){.custom-toggle-group[_ngcontent-%COMP%]{margin-top:20px}}.form-label[_ngcontent-%COMP%]{font-weight:600;color:#475569}.form-control[_ngcontent-%COMP%]{border-radius:.5rem;border:1px solid #e2e8f0}.form-control[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #0d6efd33;border-color:var(--primary-color)}.btn-light-secondary[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;color:var(--secondary-color);border-radius:50px;padding:.75rem 1.5rem;font-weight:700;transition:all .2s}.btn-light-secondary[_ngcontent-%COMP%]:hover{background:#f1f5f9;color:#334155}.btn-primary[_ngcontent-%COMP%]{border-radius:50px;font-weight:700}.alert-custom[_ngcontent-%COMP%]{background-color:#fee2e2!important;color:#dc2626!important;padding:1rem 1.5rem}"]})};var S2=[{key:"Patient_Information",title:"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0645\u0631\u064A\u0636",icon:"fa-user-injured",fields:6},{key:"Vital_Signs",title:"\u0627\u0644\u0639\u0644\u0627\u0645\u0627\u062A \u0627\u0644\u062D\u064A\u0648\u064A\u0629",icon:"fa-heartbeat",fields:4},{key:"History_and_Social",title:"\u0627\u0644\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0637\u0628\u064A \u0648\u0627\u0644\u0627\u062C\u062A\u0645\u0627\u0639\u064A",icon:"fa-history",fields:50},{key:"Medication_and_Allergies",title:"\u0627\u0644\u0623\u062F\u0648\u064A\u0629 \u0648\u0627\u0644\u062D\u0633\u0627\u0633\u064A\u0629",icon:"fa-pills",fields:6},{key:"Bleeding",title:"\u0627\u0644\u0646\u0632\u064A\u0641",icon:"fa-tint",fields:6},{key:"Physical_Assessment",title:"\u0627\u0644\u062A\u0642\u064A\u064A\u0645 \u0627\u0644\u062C\u0633\u062F\u064A",icon:"fa-stethoscope",fields:17},{key:"Skin_Integrity",title:"\u0633\u0644\u0627\u0645\u0629 \u0627\u0644\u062C\u0644\u062F",icon:"fa-hand-paper",fields:2},{key:"Cardiovascular_Respiratory",title:"\u0627\u0644\u0642\u0644\u0628 \u0648\u0627\u0644\u062C\u0647\u0627\u0632 \u0627\u0644\u062A\u0646\u0641\u0633\u064A",icon:"fa-lungs",fields:40},{key:"Neurovascular",title:"\u0627\u0644\u062A\u0642\u064A\u064A\u0645 \u0627\u0644\u0639\u0635\u0628\u064A \u0627\u0644\u0648\u0639\u0627\u0626\u064A",icon:"fa-brain",fields:25},{key:"Abdomen",title:"\u0627\u0644\u0628\u0637\u0646",icon:"fa-procedures",fields:14},{key:"OB_GYN",title:"\u0627\u0644\u0646\u0633\u0627\u0621 \u0648\u0627\u0644\u062A\u0648\u0644\u064A\u062F",icon:"fa-baby",fields:5},{key:"Neurological",title:"\u0627\u0644\u0641\u062D\u0635 \u0627\u0644\u0639\u0635\u0628\u064A",icon:"fa-head-side-brain",fields:4},{key:"General",title:"\u0639\u0627\u0645",icon:"fa-clipboard-list",fields:3}];function J7(i,t){i&1&&(s(0,"div",20)(1,"div",21)(2,"span",22),d(3,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),l()(),s(4,"p",23),d(5,"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0646\u0645\u0648\u0630\u062C \u0627\u0644\u0637\u0628\u064A..."),l()())}function Q7(i,t){i&1&&(s(0,"span",51),x(1,"i",52),d(2," \u062C\u0627\u0631\u064A \u0627\u0644\u062D\u0641\u0638 "),l())}function eI(i,t){i&1&&(s(0,"span",53),x(1,"i",54),d(2," \u062A\u0645 \u0627\u0644\u062D\u0641\u0638 "),l())}function tI(i,t){i&1&&(s(0,"span",55),x(1,"i",56),d(2," \u0645\u0642\u0641\u0644 "),l())}function iI(i,t){i&1&&(s(0,"span",57),x(1,"i",58),d(2," \u0645\u0643\u062A\u0645\u0644 "),l())}function nI(i,t){i&1&&(s(0,"span",59),x(1,"i",60),d(2," \u0645\u062F\u064A\u0631 "),l())}function rI(i,t){i&1&&(s(0,"span",61),x(1,"i",62),d(2," \u0644\u0644\u0642\u0631\u0627\u0621\u0629 \u0641\u0642\u0637 "),l())}function aI(i,t){if(i&1){let e=Q();s(0,"button",63),T("click",function(){b(e);let r=h(2);return C(r.openCompleteConfirmModal())}),x(1,"i",64),s(2,"span"),d(3,"\u0625\u0643\u0645\u0627\u0644 \u0648\u0642\u0641\u0644"),l()()}}function oI(i,t){if(i&1){let e=Q();s(0,"button",65),T("click",function(){b(e);let r=h(2);return C(r.unlockForm())}),x(1,"i",66),s(2,"span"),d(3,"\u0641\u062A\u062D \u0627\u0644\u0646\u0645\u0648\u0630\u062C"),l()()}}function sI(i,t){if(i&1){let e=Q();Si(0),s(1,"div",79)(2,"label",80),d(3),l(),s(4,"input",81),V("ngModelChange",function(r){b(e);let a=h(2).$implicit,u=h().$implicit,p=h(2);return N(p.formData[u.key][a.key],r)||(p.formData[u.key][a.key]=r),C(r)}),T("ngModelChange",function(){b(e);let r=h(5);return C(r.onFieldChange())}),l()(),Ti()}if(i&2){let e=h(2).$implicit,n=h().$implicit,r=h(2);m(3),z(e.label),m(),R("ngModel",r.formData[n.key][e.key]),S("placeholder",e.placeholder||"")("disabled",!r.canEdit)}}function lI(i,t){if(i&1){let e=Q();Si(0),s(1,"div",79)(2,"label",80),d(3),l(),s(4,"textarea",82),V("ngModelChange",function(r){b(e);let a=h(2).$implicit,u=h().$implicit,p=h(2);return N(p.formData[u.key][a.key],r)||(p.formData[u.key][a.key]=r),C(r)}),T("ngModelChange",function(){b(e);let r=h(5);return C(r.onFieldChange())}),l()(),Ti()}if(i&2){let e=h(2).$implicit,n=h().$implicit,r=h(2);m(3),z(e.label),m(),S("rows",e.rows||3),R("ngModel",r.formData[n.key][e.key]),S("placeholder",e.placeholder||"")("disabled",!r.canEdit)}}function uI(i,t){if(i&1){let e=Q();Si(0),s(1,"div",83)(2,"input",84),V("ngModelChange",function(r){b(e);let a=h(2).$implicit,u=h().$implicit,p=h(2);return N(p.formData[u.key][a.key],r)||(p.formData[u.key][a.key]=r),C(r)}),T("ngModelChange",function(){b(e);let r=h(5);return C(r.onFieldChange())}),l(),s(3,"label",85),d(4),l()(),Ti()}if(i&2){let e=h(2).$implicit,n=h().$implicit,r=h(2);m(2),R("ngModel",r.formData[n.key][e.key]),S("disabled",!r.canEdit)("id",n.key+"_"+e.key),m(),S("for",n.key+"_"+e.key),m(),q(" ",e.label," ")}}function cI(i,t){if(i&1&&(s(0,"label",89),d(1),l()),i&2){let e=h(3).$implicit;m(),z(e.label)}}function dI(i,t){if(i&1){let e=Q();s(0,"div",90)(1,"input",84),V("ngModelChange",function(r){let a=b(e).$implicit,u=h(4).$implicit,p=h(2);return N(p.formData[u.key][a.key],r)||(p.formData[u.key][a.key]=r),C(r)}),T("ngModelChange",function(){b(e);let r=h(6);return C(r.onFieldChange())}),l(),s(2,"label",85),d(3),l()()}if(i&2){let e=t.$implicit,n=h(4).$implicit,r=h(2);m(),R("ngModel",r.formData[n.key][e.key]),S("disabled",!r.canEdit)("id",n.key+"_"+e.key),m(),S("for",n.key+"_"+e.key),m(),q(" ",e.label," ")}}function mI(i,t){if(i&1&&(Si(0),H(1,cI,2,1,"label",86),s(2,"div",87),H(3,dI,4,5,"div",88),l(),Ti()),i&2){let e=h(2).$implicit;m(),S("ngIf",e.label),m(2),S("ngForOf",e.fields)}}function fI(i,t){if(i&1&&(s(0,"th",97),d(1),l()),i&2){let e=t.$implicit;m(),z(e)}}function pI(i,t){if(i&1){let e=Q();s(0,"td")(1,"input",99),V("ngModelChange",function(r){let a=b(e).index,u=h().$implicit,p=h(3).$implicit,g=h().$implicit,v=h(2);return N(v.formData[g.key][p.key][u.key][a],r)||(v.formData[g.key][p.key][u.key][a]=r),C(r)}),T("ngModelChange",function(){b(e);let r=h(7);return C(r.onFieldChange())}),l()()}if(i&2){let e=t.index,n=h().$implicit,r=h(3).$implicit,a=h().$implicit,u=h(2);m(),R("ngModel",u.formData[a.key][r.key][n.key][e]),S("disabled",!u.canEdit)}}function hI(i,t){if(i&1&&(s(0,"tr")(1,"td",98),d(2),l(),H(3,pI,2,2,"td",76),l()),i&2){let e=t.$implicit,n=h(3).$implicit;m(2),z(e.label),m(),S("ngForOf",n.tableConfig.columns)}}function gI(i,t){if(i&1&&(Si(0),s(1,"label",91),d(2),l(),s(3,"div",92)(4,"table",93)(5,"thead",94)(6,"tr"),x(7,"th",95),H(8,fI,2,1,"th",96),l()(),s(9,"tbody"),H(10,hI,4,2,"tr",76),l()()(),Ti()),i&2){let e=h(2).$implicit;m(2),z(e.label),m(6),S("ngForOf",e.tableConfig.columns),m(2),S("ngForOf",e.tableConfig.rows)}}function _I(i,t){if(i&1&&(s(0,"div",78),H(1,sI,5,4,"ng-container",18)(2,lI,5,5,"ng-container",18)(3,uI,5,5,"ng-container",18)(4,mI,4,2,"ng-container",18)(5,gI,11,3,"ng-container",18),l()),i&2){let e=h().$implicit;S("ngClass",e.colClass||"col-12"),m(),S("ngIf",e.type==="text"),m(),S("ngIf",e.type==="textarea"),m(),S("ngIf",e.type==="checkbox"),m(),S("ngIf",e.type==="checkboxGroup"&&e.key===""),m(),S("ngIf",e.type==="table")}}function vI(i,t){if(i&1){let e=Q();Si(0),s(1,"div",79)(2,"label",80),d(3),l(),s(4,"input",104),V("ngModelChange",function(r){b(e);let a=h().$implicit,u=h(2).$implicit,p=h().$implicit,g=h(2);return N(g.formData[p.key][u.key][a.key],r)||(g.formData[p.key][u.key][a.key]=r),C(r)}),T("ngModelChange",function(){b(e);let r=h(6);return C(r.onFieldChange())}),l()(),Ti()}if(i&2){let e=h().$implicit,n=h(2).$implicit,r=h().$implicit,a=h(2);m(3),z(e.label),m(),R("ngModel",a.formData[r.key][n.key][e.key]),S("disabled",!a.canEdit)}}function xI(i,t){if(i&1){let e=Q();Si(0),s(1,"div",79)(2,"label",80),d(3),l(),s(4,"textarea",105),V("ngModelChange",function(r){b(e);let a=h().$implicit,u=h(2).$implicit,p=h().$implicit,g=h(2);return N(g.formData[p.key][u.key][a.key],r)||(g.formData[p.key][u.key][a.key]=r),C(r)}),T("ngModelChange",function(){b(e);let r=h(6);return C(r.onFieldChange())}),l()(),Ti()}if(i&2){let e=h().$implicit,n=h(2).$implicit,r=h().$implicit,a=h(2);m(3),z(e.label),m(),S("rows",e.rows||3),R("ngModel",a.formData[r.key][n.key][e.key]),S("disabled",!a.canEdit)}}function yI(i,t){if(i&1){let e=Q();Si(0),s(1,"div",106)(2,"input",84),V("ngModelChange",function(r){b(e);let a=h().$implicit,u=h(2).$implicit,p=h().$implicit,g=h(2);return N(g.formData[p.key][u.key][a.key],r)||(g.formData[p.key][u.key][a.key]=r),C(r)}),T("ngModelChange",function(){b(e);let r=h(6);return C(r.onFieldChange())}),l(),s(3,"label",85),d(4),l()(),Ti()}if(i&2){let e=h().$implicit,n=h(2).$implicit,r=h().$implicit,a=h(2);m(2),R("ngModel",a.formData[r.key][n.key][e.key]),S("disabled",!a.canEdit)("id",r.key+"_"+n.key+"_"+e.key),m(),S("for",r.key+"_"+n.key+"_"+e.key),m(),q(" ",e.label," ")}}function bI(i,t){if(i&1){let e=Q();s(0,"div",90)(1,"input",84),V("ngModelChange",function(r){let a=b(e).$implicit,u=h(4).$implicit,p=h().$implicit,g=h(2);return N(g.formData[p.key][u.key][a.key],r)||(g.formData[p.key][u.key][a.key]=r),C(r)}),T("ngModelChange",function(){b(e);let r=h(7);return C(r.onFieldChange())}),l(),s(2,"label",85),d(3),l()()}if(i&2){let e=t.$implicit,n=h(4).$implicit,r=h().$implicit,a=h(2);m(),R("ngModel",a.formData[r.key][n.key][e.key]),S("disabled",!a.canEdit)("id",r.key+"_"+n.key+"_"+e.key),m(),S("for",r.key+"_"+n.key+"_"+e.key),m(),q(" ",e.label," ")}}function CI(i,t){if(i&1&&(Si(0),s(1,"div",87),H(2,bI,4,5,"div",88),l(),Ti()),i&2){let e=h().$implicit;m(2),S("ngForOf",e.fields)}}function wI(i,t){if(i&1&&(Si(0),s(1,"div",78),H(2,vI,5,3,"ng-container",18)(3,xI,5,4,"ng-container",18)(4,yI,5,5,"ng-container",18)(5,CI,3,1,"ng-container",18),l(),Ti()),i&2){let e=t.$implicit;m(),S("ngClass",e.colClass||"col-12"),m(),S("ngIf",e.type==="text"),m(),S("ngIf",e.type==="textarea"),m(),S("ngIf",e.type==="checkbox"),m(),S("ngIf",e.type==="checkboxGroup")}}function SI(i,t){if(i&1&&(s(0,"div",78)(1,"div",100)(2,"h6",101),x(3,"i",102),d(4),l(),s(5,"div",103),H(6,wI,6,5,"ng-container",76),l()()()),i&2){let e=h().$implicit;S("ngClass",e.colClass||"col-12"),m(4),q("",e.label," "),m(2),S("ngForOf",e.fields)}}function TI(i,t){if(i&1&&(Si(0),H(1,_I,6,6,"div",77)(2,SI,7,3,"div",77),Ti()),i&2){let e=t.$implicit;m(),S("ngIf",e.type!=="subsection"),m(),S("ngIf",e.type==="subsection")}}function EI(i,t){if(i&1){let e=Q();s(0,"div",67)(1,"h2",68)(2,"button",69),T("click",function(){let r=b(e).$implicit,a=h(2);return C(a.toggleSection(r.key))}),s(3,"div",70)(4,"span",71),x(5,"i"),l(),s(6,"span",72),d(7),l()()()(),s(8,"div",73)(9,"div",74)(10,"div",75),H(11,TI,3,2,"ng-container",76),l()()()()}if(i&2){let e=t.$implicit,n=h(2);m(2),fe("collapsed",!n.expandedSections[e.key]),m(3),_i("fas ",e.icon,""),m(2),z(e.title),m(),fe("show",n.expandedSections[e.key]),m(3),S("ngForOf",e.fields)}}function AI(i,t){if(i&1){let e=Q();s(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",27)(4,"div")(5,"h1",28)(6,"span",29),x(7,"i",30),l(),d(8," \u0627\u0644\u0646\u0645\u0648\u0630\u062C \u0627\u0644\u0637\u0628\u064A "),l(),s(9,"p",31),x(10,"i",32),d(11),l()(),s(12,"button",33),T("click",function(){b(e);let r=h();return C(r.goBack())}),x(13,"i",34),d(14," \u0631\u062C\u0648\u0639 "),l()(),s(15,"div",35)(16,"div",36)(17,"div",37)(18,"div",38)(19,"div",39),H(20,Q7,3,0,"span",40)(21,eI,3,0,"span",41)(22,tI,3,0,"span",42)(23,iI,3,0,"span",43)(24,nI,3,0,"span",44)(25,rI,3,0,"span",45),l(),s(26,"div",46),H(27,aI,4,0,"button",47)(28,oI,4,0,"button",48),l()()()()()()(),s(29,"div",49),H(30,EI,12,9,"div",50),l()()}if(i&2){let e=h();m(11),q(" \u0631\u062D\u0644\u0629 ",e.tripId," "),m(9),S("ngIf",e.isSaving),m(),S("ngIf",!e.isSaving&&e.canEdit),m(),S("ngIf",e.isLocked&&!e.isComplete),m(),S("ngIf",e.isComplete),m(),S("ngIf",e.isAdmin),m(),S("ngIf",!e.canEdit&&!e.isAdmin),m(2),S("ngIf",e.canEdit&&!e.isLocked&&!e.isComplete),m(),S("ngIf",e.isAdmin&&e.isLocked),m(2),S("ngForOf",e.sectionConfigs)}}function MI(i,t){i&1&&(s(0,"span"),d(1,"\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u0625\u0643\u0645\u0627\u0644"),l())}function FI(i,t){i&1&&(s(0,"span"),x(1,"i",107),d(2," \u062C\u0627\u0631\u064A..."),l())}function kI(i,t){i&1&&x(0,"div",108)}var td=class i{constructor(t,e,n,r,a){this.route=t;this.router=e;this.medicalFormService=n;this.toastService=r;this.authService=a;this.tripId=this.route.snapshot.paramMap.get("tripId")||""}tripId="";medicalForm=null;formData={};isLoading=!1;isSaving=!1;isCompleting=!1;isLocked=!1;isComplete=!1;completionPercentage=0;canEdit=!1;isAdmin=!1;expandedSections={};showCompleteConfirmModal=!1;saveSubject=new Vi;destroy$=new Vi;sections=S2;neurovascularSites=["RA","LA","RL","LL"];sectionConfigs=[{key:"Patient_Information",title:"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0645\u0631\u064A\u0636",icon:"fa-user-injured",fields:[{type:"text",key:"Patient_Name",label:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0631\u064A\u0636",colClass:"col-md-6"},{type:"text",key:"Date",label:"\u0627\u0644\u062A\u0627\u0631\u064A\u062E",colClass:"col-md-6"},{type:"textarea",key:"Patient_Complaint",label:"\u0634\u0643\u0648\u0649 \u0627\u0644\u0645\u0631\u064A\u0636",colClass:"col-12",rows:3},{type:"text",key:"Time_to_Treatment_Area",label:"\u0627\u0644\u0648\u0642\u062A \u0625\u0644\u0649 \u0645\u0646\u0637\u0642\u0629 \u0627\u0644\u0639\u0644\u0627\u062C",colClass:"col-md-6"},{type:"text",key:"X_Ray",label:"\u0627\u0644\u0623\u0634\u0639\u0629 \u0627\u0644\u0633\u064A\u0646\u064A\u0629",colClass:"col-md-6"},{type:"textarea",key:"Narrative",label:"\u0627\u0644\u0633\u0631\u062F",colClass:"col-12",rows:4}]},{key:"Vital_Signs",title:"\u0627\u0644\u0639\u0644\u0627\u0645\u0627\u062A \u0627\u0644\u062D\u064A\u0648\u064A\u0629",icon:"fa-heartbeat",fields:[{type:"text",key:"BP",label:"\u0636\u063A\u0637 \u0627\u0644\u062F\u0645 (BP)",placeholder:"120/80",colClass:"col-md-3"},{type:"text",key:"Resp",label:"\u0627\u0644\u062A\u0646\u0641\u0633 (Resp)",colClass:"col-md-3"},{type:"text",key:"Pulse",label:"\u0627\u0644\u0646\u0628\u0636 (Pulse)",colClass:"col-md-3"},{type:"text",key:"Temp",label:"\u0627\u0644\u062D\u0631\u0627\u0631\u0629 (Temp)",colClass:"col-md-3"}]},{key:"History_and_Social",title:"\u0627\u0644\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0637\u0628\u064A \u0648\u0627\u0644\u0627\u062C\u062A\u0645\u0627\u0639\u064A",icon:"fa-history",fields:[{type:"text",key:"Tetanus",label:"\u0627\u0644\u062A\u064A\u062A\u0627\u0646\u0648\u0633",colClass:"col-md-6"},{type:"text",key:"Flu_Shot",label:"\u0644\u0642\u0627\u062D \u0627\u0644\u0625\u0646\u0641\u0644\u0648\u0646\u0632\u0627",colClass:"col-md-6"},{type:"subsection",key:"Social_Status",label:"\u0627\u0644\u062D\u0627\u0644\u0629 \u0627\u0644\u0627\u062C\u062A\u0645\u0627\u0639\u064A\u0629",colClass:"col-12",fields:[{type:"checkboxGroup",key:"Social_Status",label:"",colClass:"col-12",fields:[{type:"checkbox",key:"Single",label:"\u0623\u0639\u0632\u0628"},{type:"checkbox",key:"Married",label:"\u0645\u062A\u0632\u0648\u062C"},{type:"checkbox",key:"Widowed",label:"\u0623\u0631\u0645\u0644"},{type:"checkbox",key:"Divorced",label:"\u0645\u0637\u0644\u0642"}]}]},{type:"subsection",key:"Alcohol_Tobacco",label:"\u0627\u0644\u062A\u0628\u063A \u0648\u0627\u0644\u0643\u062D\u0648\u0644",colClass:"col-12",fields:[{type:"text",key:"Tobacco",label:"\u0627\u0644\u062A\u0628\u063A",colClass:"col-md-4"},{type:"text",key:"ETOH_Use",label:"\u0627\u0633\u062A\u062E\u062F\u0627\u0645 \u0627\u0644\u0643\u062D\u0648\u0644",colClass:"col-md-4"},{type:"text",key:"Freq",label:"\u0627\u0644\u062A\u0643\u0631\u0627\u0631",colClass:"col-md-4"}]},{type:"subsection",key:"Visual_Acuity",label:"\u062D\u062F\u0629 \u0627\u0644\u0628\u0635\u0631",colClass:"col-12",fields:[{type:"text",key:"OU",label:"OU",colClass:"col-md-3"},{type:"text",key:"OD",label:"OD",colClass:"col-md-3"},{type:"text",key:"OS",label:"OS",colClass:"col-md-3"},{type:"checkbox",key:"Corrected",label:"\u0645\u0635\u062D\u062D",colClass:"col-md-3"}]},{type:"subsection",key:"Family_History",label:"\u0627\u0644\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0639\u0627\u0626\u0644\u064A",colClass:"col-12",fields:[{type:"checkboxGroup",key:"Family_History",label:"",colClass:"col-12",fields:[{type:"checkbox",key:"Heart_Disease",label:"\u0623\u0645\u0631\u0627\u0636 \u0627\u0644\u0642\u0644\u0628"},{type:"checkbox",key:"Cancer",label:"\u0627\u0644\u0633\u0631\u0637\u0627\u0646"},{type:"checkbox",key:"Diabetes",label:"\u0627\u0644\u0633\u0643\u0631\u064A"}]},{type:"text",key:"Other",label:"\u0623\u062E\u0631\u0649 (\u0627\u0644\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0639\u0627\u0626\u0644\u064A)",colClass:"col-12"}]},{type:"subsection",key:"Past_Medical_History",label:"\u0627\u0644\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0637\u0628\u064A \u0627\u0644\u0633\u0627\u0628\u0642",colClass:"col-12",fields:[{type:"checkboxGroup",key:"Past_Medical_History",label:"",colClass:"col-12",fields:[{type:"checkbox",key:"HTN",label:"\u0627\u0631\u062A\u0641\u0627\u0639 \u0636\u063A\u0637 \u0627\u0644\u062F\u0645"},{type:"checkbox",key:"Heart_Disease",label:"\u0623\u0645\u0631\u0627\u0636 \u0627\u0644\u0642\u0644\u0628"},{type:"checkbox",key:"CVA",label:"\u0633\u0643\u062A\u0629 \u062F\u0645\u0627\u063A\u064A\u0629"},{type:"checkbox",key:"Cancer",label:"\u0627\u0644\u0633\u0631\u0637\u0627\u0646"},{type:"checkbox",key:"Diabetes",label:"\u0627\u0644\u0633\u0643\u0631\u064A"}]},{type:"text",key:"Other",label:"\u0623\u062E\u0631\u0649 (\u0627\u0644\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0637\u0628\u064A)",colClass:"col-12"}]},{type:"subsection",key:"Past_Surgeries",label:"\u0627\u0644\u0639\u0645\u0644\u064A\u0627\u062A \u0627\u0644\u062C\u0631\u0627\u062D\u064A\u0629 \u0627\u0644\u0633\u0627\u0628\u0642\u0629",colClass:"col-12",fields:[{type:"checkboxGroup",key:"Past_Surgeries",label:"",colClass:"col-12",fields:[{type:"checkbox",key:"Gall_Bladder",label:"\u0627\u0644\u0645\u0631\u0627\u0631\u0629"},{type:"checkbox",key:"Appendix",label:"\u0627\u0644\u0632\u0627\u0626\u062F\u0629 \u0627\u0644\u062F\u0648\u062F\u064A\u0629"},{type:"checkbox",key:"Heart",label:"\u0627\u0644\u0642\u0644\u0628"},{type:"checkbox",key:"Hysterectomy",label:"\u0627\u0633\u062A\u0626\u0635\u0627\u0644 \u0627\u0644\u0631\u062D\u0645"},{type:"checkbox",key:"Lung",label:"\u0627\u0644\u0631\u0626\u0629"}]},{type:"text",key:"Other",label:"\u0623\u062E\u0631\u0649 (\u0627\u0644\u0639\u0645\u0644\u064A\u0627\u062A \u0627\u0644\u062C\u0631\u0627\u062D\u064A\u0629)",colClass:"col-12"}]},{type:"subsection",key:"Infectious_History",label:"\u0627\u0644\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0645\u0639\u062F\u064A",colClass:"col-12",fields:[{type:"checkboxGroup",key:"Infectious_History",label:"",colClass:"col-12",fields:[{type:"checkbox",key:"HIV",label:"HIV"},{type:"checkbox",key:"COPD",label:"COPD"},{type:"checkbox",key:"Asthma",label:"\u0627\u0644\u0631\u0628\u0648"},{type:"checkbox",key:"Seizures",label:"\u0627\u0644\u0646\u0648\u0628\u0627\u062A"},{type:"checkbox",key:"Diabetes",label:"\u0627\u0644\u0633\u0643\u0631\u064A"}]},{type:"text",key:"Other",label:"\u0623\u062E\u0631\u0649 (\u0627\u0644\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0645\u0639\u062F\u064A)",colClass:"col-12"}]}]},{key:"Medication_and_Allergies",title:"\u0627\u0644\u0623\u062F\u0648\u064A\u0629 \u0648\u0627\u0644\u062D\u0633\u0627\u0633\u064A\u0629",icon:"fa-pills",fields:[{type:"subsection",key:"Medication",label:"\u0627\u0644\u0623\u062F\u0648\u064A\u0629",colClass:"col-12",fields:[{type:"checkboxGroup",key:"Medication",label:"",colClass:"col-12",fields:[{type:"checkbox",key:"None",label:"\u0644\u0627 \u064A\u0648\u062C\u062F"},{type:"checkbox",key:"Unknown",label:"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"}]},{type:"textarea",key:"Details",label:"\u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0623\u062F\u0648\u064A\u0629",colClass:"col-12",rows:3}]},{type:"subsection",key:"Allergies",label:"\u0627\u0644\u062D\u0633\u0627\u0633\u064A\u0629",colClass:"col-12",fields:[{type:"checkboxGroup",key:"Allergies",label:"",colClass:"col-12",fields:[{type:"checkbox",key:"None",label:"\u0644\u0627 \u064A\u0648\u062C\u062F"},{type:"checkbox",key:"Unknown",label:"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"}]},{type:"textarea",key:"Details",label:"\u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u062D\u0633\u0627\u0633\u064A\u0629",colClass:"col-12",rows:3}]}]},{key:"Bleeding",title:"\u0627\u0644\u0646\u0632\u064A\u0641",icon:"fa-tint",fields:[{type:"checkboxGroup",key:"",label:"",colClass:"col-12",fields:[{type:"checkbox",key:"Present",label:"\u0645\u0648\u062C\u0648\u062F"},{type:"checkbox",key:"Absent",label:"\u063A\u064A\u0631 \u0645\u0648\u062C\u0648\u062F"},{type:"checkbox",key:"OBO_Trauma",label:"OBO \u0635\u062F\u0645\u0629"},{type:"checkbox",key:"Controlled",label:"\u062A\u062D\u062A \u0627\u0644\u0633\u064A\u0637\u0631\u0629"},{type:"checkbox",key:"Moderate",label:"\u0645\u0639\u062A\u062F\u0644"},{type:"checkbox",key:"Hemorrhage",label:"\u0646\u0632\u064A\u0641 \u062D\u0627\u062F"}]}]},{key:"Physical_Assessment",title:"\u0627\u0644\u062A\u0642\u064A\u064A\u0645 \u0627\u0644\u062C\u0633\u062F\u064A",icon:"fa-stethoscope",fields:[{type:"subsection",key:"Mental_Status",label:"\u0627\u0644\u062D\u0627\u0644\u0629 \u0627\u0644\u0639\u0642\u0644\u064A\u0629",colClass:"col-12",fields:[{type:"checkboxGroup",key:"Mental_Status",label:"",colClass:"col-12",fields:[{type:"checkbox",key:"Alert_Oriented",label:"\u0645\u062A\u0646\u0628\u0647 \u0648\u0645\u0648\u062C\u0647"},{type:"checkbox",key:"Awake_Confused",label:"\u0645\u0633\u062A\u064A\u0642\u0638 \u0645\u0634\u0648\u0634"},{type:"checkbox",key:"Verbally_Responsive",label:"\u064A\u0633\u062A\u062C\u064A\u0628 \u0634\u0641\u0647\u064A\u0627"},{type:"checkbox",key:"Responds_to_Pain",label:"\u064A\u0633\u062A\u062C\u064A\u0628 \u0644\u0644\u0623\u0644\u0645"},{type:"checkbox",key:"Aphasic",label:"\u0641\u0627\u0642\u062F \u0627\u0644\u0646\u0637\u0642"},{type:"checkbox",key:"Combative",label:"\u0639\u062F\u0648\u0627\u0646\u064A"},{type:"checkbox",key:"Unresponsive",label:"\u063A\u064A\u0631 \u0645\u0633\u062A\u062C\u064A\u0628"}]}]},{type:"subsection",key:"Color",label:"\u0627\u0644\u0644\u0648\u0646",colClass:"col-12",fields:[{type:"checkboxGroup",key:"Color",label:"",colClass:"col-12",fields:[{type:"checkbox",key:"Pink",label:"\u0648\u0631\u062F\u064A"},{type:"checkbox",key:"Mottled",label:"\u0645\u0631\u0642\u0637"},{type:"checkbox",key:"Cyanotic",label:"\u0632\u0631\u0627\u0642"},{type:"checkbox",key:"Jaundiced",label:"\u064A\u0631\u0642\u0627\u0646\u064A"},{type:"checkbox",key:"Pale",label:"\u0634\u0627\u062D\u0628"}]}]},{type:"subsection",key:"Skin",label:"\u0627\u0644\u062C\u0644\u062F",colClass:"col-12",fields:[{type:"checkboxGroup",key:"Skin",label:"",colClass:"col-12",fields:[{type:"checkbox",key:"Warm",label:"\u062F\u0627\u0641\u0626"},{type:"checkbox",key:"Cool",label:"\u0628\u0627\u0631\u062F"},{type:"checkbox",key:"Hot",label:"\u0633\u0627\u062E\u0646"},{type:"checkbox",key:"Dry",label:"\u062C\u0627\u0641"},{type:"checkbox",key:"Diaphoretic",label:"\u0645\u062A\u0639\u0631\u0642"}]}]}]},{key:"Skin_Integrity",title:"\u0633\u0644\u0627\u0645\u0629 \u0627\u0644\u062C\u0644\u062F",icon:"fa-hand-paper",fields:[{type:"checkbox",key:"INTACT",label:"\u0633\u0644\u064A\u0645",colClass:"col-12"},{type:"textarea",key:"OTHER",label:"\u0623\u062E\u0631\u0649",colClass:"col-12",rows:3,placeholder:"\u0648\u0635\u0641 \u0623\u064A \u0645\u0634\u0627\u0643\u0644 \u0641\u064A \u0633\u0644\u0627\u0645\u0629 \u0627\u0644\u062C\u0644\u062F..."}]},{key:"Cardiovascular_Respiratory",title:"\u0627\u0644\u0642\u0644\u0628 \u0648\u0627\u0644\u062C\u0647\u0627\u0632 \u0627\u0644\u062A\u0646\u0641\u0633\u064A",icon:"fa-lungs",fields:[{type:"text",key:"Summary",label:"\u0645\u0644\u062E\u0635",colClass:"col-12"}]},{key:"Neurovascular",title:"\u0627\u0644\u062A\u0642\u064A\u064A\u0645 \u0627\u0644\u0639\u0635\u0628\u064A \u0627\u0644\u0648\u0639\u0627\u0626\u064A",icon:"fa-brain",fields:[{type:"checkbox",key:"N_A",label:"\u063A\u064A\u0631 \u0645\u062A\u0627\u062D",colClass:"col-12"},{type:"table",key:"COLOR",label:"\u0627\u0644\u0644\u0648\u0646",colClass:"col-12",tableConfig:{columns:["RA","LA","RL","LL"],rows:[{key:"PINK",label:"\u0648\u0631\u062F\u064A"},{key:"PALE",label:"\u0634\u0627\u062D\u0628"}]}},{type:"table",key:"TEMP",label:"\u0627\u0644\u062D\u0631\u0627\u0631\u0629",colClass:"col-12",tableConfig:{columns:["RA","LA","RL","LL"],rows:[{key:"WARM",label:"\u062F\u0627\u0641\u0626"},{key:"COOL",label:"\u0628\u0627\u0631\u062F"}]}},{type:"table",key:"MOTION",label:"\u0627\u0644\u062D\u0631\u0643\u0629",colClass:"col-12",tableConfig:{columns:["RA","LA","RL","LL"],rows:[{key:"FULL",label:"\u0643\u0627\u0645\u0644"},{key:"PARTIAL",label:"\u062C\u0632\u0626\u064A"}]}},{type:"table",key:"SENSATION",label:"\u0627\u0644\u0625\u062D\u0633\u0627\u0633",colClass:"col-12",tableConfig:{columns:["RA","LA","RL","LL"],rows:[{key:"INTACT",label:"\u0633\u0644\u064A\u0645"},{key:"NUMBNESS",label:"\u062E\u062F\u0631"},{key:"PAIN",label:"\u0623\u0644\u0645"},{key:"TINGLING",label:"\u0648\u062E\u0632"}]}}]},{key:"Abdomen",title:"\u0627\u0644\u0628\u0637\u0646",icon:"fa-procedures",fields:[{type:"checkboxGroup",key:"",label:"",colClass:"col-12",fields:[{type:"checkbox",key:"Normal",label:"\u0637\u0628\u064A\u0639\u064A"},{type:"checkbox",key:"Flat",label:"\u0645\u0633\u0637\u062D"},{type:"checkbox",key:"Distended",label:"\u0645\u0646\u062A\u0641\u062E"},{type:"checkbox",key:"Vomiting",label:"\u0642\u064A\u0621"},{type:"checkbox",key:"Diarrhea",label:"\u0625\u0633\u0647\u0627\u0644"},{type:"checkbox",key:"Hematemesis",label:"\u0642\u064A\u0621 \u062F\u0645\u0648\u064A"},{type:"checkbox",key:"Melena",label:"\u0628\u0631\u0627\u0632 \u0623\u0633\u0648\u062F"},{type:"checkbox",key:"Continuous",label:"\u0645\u0633\u062A\u0645\u0631"},{type:"checkbox",key:"Intermittent",label:"\u0645\u062A\u0642\u0637\u0639"},{type:"checkbox",key:"Present",label:"\u0645\u0648\u062C\u0648\u062F"},{type:"checkbox",key:"Absent",label:"\u063A\u064A\u0631 \u0645\u0648\u062C\u0648\u062F"}]},{type:"text",key:"How_Long",label:"\u0643\u0645 \u0645\u0646 \u0627\u0644\u0648\u0642\u062A",colClass:"col-md-6"},{type:"text",key:"Comments",label:"\u062A\u0639\u0644\u064A\u0642\u0627\u062A",colClass:"col-md-6"}]},{key:"OB_GYN",title:"\u0627\u0644\u0646\u0633\u0627\u0621 \u0648\u0627\u0644\u062A\u0648\u0644\u064A\u062F",icon:"fa-baby",fields:[{type:"text",key:"VAG_D_C",label:"\u0625\u0641\u0631\u0627\u0632\u0627\u062A \u0645\u0647\u0628\u0644\u064A\u0629",colClass:"col-md-6"},{type:"text",key:"COLOR",label:"\u0627\u0644\u0644\u0648\u0646",colClass:"col-md-6"},{type:"text",key:"QUANT_PAD_CT",label:"\u0639\u062F\u062F \u0627\u0644\u0641\u0648\u0637",colClass:"col-md-4"},{type:"text",key:"BLEEDING",label:"\u0627\u0644\u0646\u0632\u064A\u0641",colClass:"col-md-4"},{type:"text",key:"FHT",label:"\u0646\u0628\u0636\u0627\u062A \u0642\u0644\u0628 \u0627\u0644\u062C\u0646\u064A\u0646 (FHT)",colClass:"col-md-4"}]},{key:"Neurological",title:"\u0627\u0644\u0641\u062D\u0635 \u0627\u0644\u0639\u0635\u0628\u064A",icon:"fa-head-side-virus",fields:[{type:"checkbox",key:"NORMAL",label:"\u0637\u0628\u064A\u0639\u064A",colClass:"col-12"},{type:"text",key:"PARALYSIS",label:"\u0627\u0644\u0634\u0644\u0644",colClass:"col-md-4"},{type:"text",key:"PUPILS",label:"\u0627\u0644\u0628\u0624\u0628\u0624\u0627\u062A",colClass:"col-md-4"},{type:"text",key:"SENSORY_LOSS",label:"\u0641\u0642\u062F\u0627\u0646 \u0627\u0644\u062D\u0633",colClass:"col-md-4"}]},{key:"General",title:"\u0639\u0627\u0645",icon:"fa-clipboard-list",fields:[{type:"textarea",key:"Comments",label:"\u062A\u0639\u0644\u064A\u0642\u0627\u062A",colClass:"col-12",rows:4,placeholder:"\u0623\u064A \u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0623\u0648 \u062A\u0639\u0644\u064A\u0642\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629..."},{type:"text",key:"Time_Assessment_Completed",label:"\u0648\u0642\u062A \u0625\u062A\u0645\u0627\u0645 \u0627\u0644\u062A\u0642\u064A\u064A\u0645",colClass:"col-md-6",placeholder:"\u0645\u062B\u0627\u0644: 14:30"},{type:"text",key:"Signature",label:"\u0627\u0644\u062A\u0648\u0642\u064A\u0639",colClass:"col-md-6",placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0636\u0627\u0628\u0637/\u0627\u0644\u0645\u0633\u0639\u0641"}]}];ngOnInit(){if(!this.tripId){this.toastService.error("\u0645\u0639\u0631\u0651\u0641 \u0627\u0644\u0631\u062D\u0644\u0629 \u0645\u0641\u0642\u0648\u062F"),this.router.navigate(["/user/my-trips"]);return}this.isAdmin=this.authService.currentUser()?.role==="admin",this.loadMedicalForm(),this.setupAutoSave(),this.sections.length>0&&(this.expandedSections[this.sections[0].key]=!0)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadMedicalForm(){this.isLoading=!0,this.medicalFormService.getMedicalForm(this.tripId).subscribe({next:t=>{this.medicalForm=t,this.formData=t.formData||{},this.isLocked=t.isLocked,this.isComplete=t.isComplete,this.completionPercentage=t.completionPercentage,this.canEdit=t.canEdit||!1,this.isAdmin=t.isAdmin||!1,this.initializeFormStructure(),this.isLoading=!1},error:t=>{console.error("Failed to load medical form:",t),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0646\u0645\u0648\u0630\u062C \u0627\u0644\u0637\u0628\u064A"),this.isLoading=!1}})}initializeFormStructure(){this.formData.Patient_Information||(this.formData.Patient_Information={}),this.formData.Vital_Signs||(this.formData.Vital_Signs={}),this.formData.History_and_Social||(this.formData.History_and_Social={}),this.formData.Medication_and_Allergies||(this.formData.Medication_and_Allergies={}),this.formData.Bleeding||(this.formData.Bleeding={}),this.formData.Physical_Assessment||(this.formData.Physical_Assessment={}),this.formData.Skin_Integrity||(this.formData.Skin_Integrity={}),this.formData.Cardiovascular_Respiratory||(this.formData.Cardiovascular_Respiratory={}),this.formData.Neurovascular||(this.formData.Neurovascular={}),this.formData.Abdomen||(this.formData.Abdomen={}),this.formData.OB_GYN||(this.formData.OB_GYN={}),this.formData.Neurological||(this.formData.Neurological={}),this.formData.General||(this.formData.General={}),this.formData.History_and_Social?.Social_Status||(this.formData.History_and_Social.Social_Status={}),this.formData.History_and_Social?.Alcohol_Tobacco||(this.formData.History_and_Social.Alcohol_Tobacco={}),this.formData.History_and_Social?.Visual_Acuity||(this.formData.History_and_Social.Visual_Acuity={}),this.formData.History_and_Social?.Family_History||(this.formData.History_and_Social.Family_History={}),this.formData.History_and_Social?.Past_Medical_History||(this.formData.History_and_Social.Past_Medical_History={}),this.formData.History_and_Social?.Past_Surgeries||(this.formData.History_and_Social.Past_Surgeries={}),this.formData.History_and_Social?.Infectious_History||(this.formData.History_and_Social.Infectious_History={}),this.formData.Medication_and_Allergies?.Medication||(this.formData.Medication_and_Allergies.Medication={}),this.formData.Medication_and_Allergies?.Allergies||(this.formData.Medication_and_Allergies.Allergies={}),this.formData.Physical_Assessment?.Mental_Status||(this.formData.Physical_Assessment.Mental_Status={}),this.formData.Physical_Assessment?.Color||(this.formData.Physical_Assessment.Color={}),this.formData.Physical_Assessment?.Skin||(this.formData.Physical_Assessment.Skin={});let t=this.formData.Cardiovascular_Respiratory;t&&(t.Shortness_of_Breath||(t.Shortness_of_Breath={}),t.Shortness_of_Breath?.Occurs||(t.Shortness_of_Breath.Occurs={}),t.Coughing||(t.Coughing={}),t.Cardiac_Monitor||(t.Cardiac_Monitor={}),t.SpO2||(t.SpO2={}),t.SpO2?.On_O2||(t.SpO2.On_O2={}),t.Respirations||(t.Respirations={}),t.Lungs_Auscultation||(t.Lungs_Auscultation={}));let e=this.formData.Neurovascular;e&&(e.COLOR||(e.COLOR={}),e.COLOR.PINK||(e.COLOR.PINK=["","","",""]),e.COLOR.PALE||(e.COLOR.PALE=["","","",""]),e.TEMP||(e.TEMP={}),e.TEMP.WARM||(e.TEMP.WARM=["","","",""]),e.TEMP.COOL||(e.TEMP.COOL=["","","",""]),e.MOTION||(e.MOTION={}),e.MOTION.FULL||(e.MOTION.FULL=["","","",""]),e.MOTION.PARTIAL||(e.MOTION.PARTIAL=["","","",""]),e.SENSATION||(e.SENSATION={}),e.SENSATION.INTACT||(e.SENSATION.INTACT=["","","",""]),e.SENSATION.NUMBNESS||(e.SENSATION.NUMBNESS=["","","",""]),e.SENSATION.PAIN||(e.SENSATION.PAIN=["","","",""]),e.SENSATION.TINGLING||(e.SENSATION.TINGLING=["","","",""])),this.formData.Abdomen?.Bowel_Sounds||(this.formData.Abdomen.Bowel_Sounds={})}setupAutoSave(){this.saveSubject.pipe(oh(2e3),Io(this.destroy$)).subscribe(()=>{this.saveForm()})}onFieldChange(){this.canEdit&&(this.isSaving=!0,this.saveSubject.next())}saveForm(){if(!this.canEdit||this.isLocked){this.isSaving=!1;return}this.medicalFormService.updateMedicalForm(this.tripId,this.formData).subscribe({next:t=>{this.medicalForm=t,this.completionPercentage=t.completionPercentage,this.isSaving=!1},error:t=>{console.error("Failed to save medical form:",t),this.toastService.error("\u0641\u0634\u0644 \u062D\u0641\u0638 \u0627\u0644\u0646\u0645\u0648\u0630\u062C"),this.isSaving=!1}})}openCompleteConfirmModal(){this.showCompleteConfirmModal=!0}closeCompleteConfirmModal(){this.showCompleteConfirmModal=!1}confirmComplete(){this.isCompleting=!0,this.medicalFormService.completeMedicalForm(this.tripId,this.formData).subscribe({next:t=>{this.medicalForm=t,this.isLocked=!0,this.isComplete=!0,this.canEdit=!1,this.completionPercentage=t.completionPercentage,this.isCompleting=!1,this.closeCompleteConfirmModal(),this.toastService.success("\u062A\u0645 \u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u0646\u0645\u0648\u0630\u062C \u0627\u0644\u0637\u0628\u064A \u0628\u0646\u062C\u0627\u062D")},error:t=>{console.error("Failed to complete medical form:",t),this.toastService.error("\u0641\u0634\u0644 \u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u0646\u0645\u0648\u0630\u062C"),this.isCompleting=!1}})}unlockForm(){this.isAdmin&&this.medicalFormService.unlockMedicalForm(this.tripId).subscribe({next:t=>{this.medicalForm=t,this.isLocked=!1,this.canEdit=!0,this.toastService.success("\u062A\u0645 \u0641\u062A\u062D \u0627\u0644\u0646\u0645\u0648\u0630\u062C \u0628\u0646\u062C\u0627\u062D")},error:t=>{console.error("Failed to unlock medical form:",t),this.toastService.error("\u0641\u0634\u0644 \u0641\u062A\u062D \u0627\u0644\u0646\u0645\u0648\u0630\u062C")}})}toggleSection(t){this.expandedSections[t]=!this.expandedSections[t]}goBack(){this.router.navigate(["/user/my-trips"])}getCompletionColor(){return this.completionPercentage>=75?"#28a745":this.completionPercentage>=50?"#ffc107":this.completionPercentage>=25?"#fd7e14":"#dc3545"}getFieldValue(t,e,n){let r=this.formData[t];if(r){if(n){let a=r[e];return a?a[n]:void 0}return r[e]}}setFieldValue(t,e,n,r){let a=this.formData[t];a&&(r?(a[e]||(a[e]={}),a[e][r]=n):a[e]=n)}getTableValue(t,e,n,r){let a=this.formData[t];if(!a)return"";let u=a[e];return!u||!u[n]?"":u[n][r]||""}setTableValue(t,e,n,r,a){let u=this.formData[t];if(!u)return;u[e]||(u[e]={});let p=u[e];p[n]||(p[n]=["","","",""]),p[n][r]=a}static \u0275fac=function(e){return new(e||i)(G(Ai),G(Xe),G(Ba),G(Ye),G(Pt))};static \u0275cmp=Oe({type:i,selectors:[["app-medical-form"]],decls:25,vars:10,consts:[["class","loading-container",4,"ngIf"],["class","medical-form-container fade-in",4,"ngIf"],["tabindex","-1",1,"modal","fade"],[1,"modal-backdrop-blur"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","border-0","shadow-lg"],[1,"modal-header","bg-success","text-white","border-0"],[1,"modal-title","fw-bold"],[1,"fas","fa-clipboard-check","me-2"],["type","button",1,"btn-close","btn-close-white",3,"click"],[1,"modal-body","p-4","text-center"],[1,"mb-3","text-success"],[1,"fas","fa-check-circle","fa-4x"],[1,"mb-3"],[1,"text-muted","mb-4"],[1,"modal-footer","bg-light","border-0","justify-content-center","pb-4"],["type","button",1,"btn","btn-lg","btn-light","px-4",3,"click"],["type","button",1,"btn","btn-lg","btn-success","px-4",3,"click","disabled"],[4,"ngIf"],["class","modal-backdrop fade show",4,"ngIf"],[1,"loading-container"],["role","status",1,"spinner-grow","text-primary"],[1,"visually-hidden"],[1,"mt-3","text-muted","fw-medium"],[1,"medical-form-container","fade-in"],[1,"card","card-modern","header-card","mb-4"],[1,"card-body","p-4"],[1,"d-flex","flex-column","flex-lg-row","justify-content-between","align-items-lg-center","gap-3","mb-4"],[1,"form-title","mb-1"],[1,"icon-circle","me-2"],[1,"fas","fa-notes-medical"],[1,"text-muted","mb-0","trip-id-text"],[1,"fas","fa-hashtag","me-1"],[1,"btn","btn-light-secondary","btn-go-back",3,"click"],[1,"fas","fa-arrow-right","me-2"],[1,"status-section","rounded-3","p-3","border","border-dashed"],[1,"row","g-3","align-items-center"],[1,"col-12","col-lg-7"],[1,"d-flex","flex-column","flex-md-row","justify-content-lg-end","align-items-center","gap-3"],[1,"status-badges","d-flex","flex-wrap","gap-2","justify-content-center"],["class","badge rounded-pill bg-info-subtle text-info",4,"ngIf"],["class","badge rounded-pill bg-success-subtle text-success",4,"ngIf"],["class","badge rounded-pill bg-warning-subtle text-warning-emphasis",4,"ngIf"],["class","badge rounded-pill bg-primary-subtle text-primary",4,"ngIf"],["class","badge rounded-pill bg-dark-subtle text-dark",4,"ngIf"],["class","badge rounded-pill bg-danger-subtle text-danger",4,"ngIf"],[1,"action-buttons","d-flex","gap-2"],["class","btn btn-primary btn-action",3,"click",4,"ngIf"],["class","btn btn-warning btn-action text-white",3,"click",4,"ngIf"],["id","medicalFormAccordion",1,"accordion","custom-accordion"],["class","accordion-item card-modern mb-3",4,"ngFor","ngForOf"],[1,"badge","rounded-pill","bg-info-subtle","text-info"],[1,"fas","fa-spinner","fa-spin","me-1"],[1,"badge","rounded-pill","bg-success-subtle","text-success"],[1,"fas","fa-check","me-1"],[1,"badge","rounded-pill","bg-warning-subtle","text-warning-emphasis"],[1,"fas","fa-lock","me-1"],[1,"badge","rounded-pill","bg-primary-subtle","text-primary"],[1,"fas","fa-check-circle","me-1"],[1,"badge","rounded-pill","bg-dark-subtle","text-dark"],[1,"fas","fa-user-shield","me-1"],[1,"badge","rounded-pill","bg-danger-subtle","text-danger"],[1,"fas","fa-ban","me-1"],[1,"btn","btn-primary","btn-action",3,"click"],[1,"fas","fa-check-circle","me-2"],[1,"btn","btn-warning","btn-action","text-white",3,"click"],[1,"fas","fa-unlock","me-2"],[1,"accordion-item","card-modern","mb-3"],[1,"accordion-header"],["type","button",1,"accordion-button",3,"click"],[1,"d-flex","align-items-center"],[1,"section-icon-wrapper","me-3"],[1,"fw-bold"],[1,"accordion-collapse","collapse"],[1,"accordion-body"],[1,"row","g-4"],[4,"ngFor","ngForOf"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"form-group-modern"],[1,"form-label"],["type","text",1,"form-control",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"form-control",3,"ngModelChange","rows","ngModel","placeholder","disabled"],[1,"form-check","custom-checkbox","mt-2"],["type","checkbox",1,"form-check-input",3,"ngModelChange","ngModel","disabled","id"],[1,"form-check-label",3,"for"],["class","form-label fw-bold mb-2",4,"ngIf"],[1,"checkbox-group-container"],["class","form-check custom-checkbox",4,"ngFor","ngForOf"],[1,"form-label","fw-bold","mb-2"],[1,"form-check","custom-checkbox"],[1,"form-label","fw-bold","mb-3"],[1,"table-responsive","rounded-3","border"],[1,"table","table-hover","align-middle","mb-0"],[1,"table-light"],[1,"border-0"],["class","border-0   text-secondary",4,"ngFor","ngForOf"],[1,"border-0","text-secondary"],[1,"fw-medium","text-dark"],["type","text",1,"form-control","form-control-sm","border-0","bg-light-focus",3,"ngModelChange","ngModel","disabled"],[1,"subsection-card","p-3","rounded-3"],[1,"subsection-title","mb-3"],[1,"fas","fa-chevron-left","me-2","text-primary","small-icon"],[1,"row","g-3"],["type","text",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"form-control",3,"ngModelChange","rows","ngModel","disabled"],[1,"form-check","custom-checkbox","mt-4"],[1,"fas","fa-spinner","fa-spin","me-2"],[1,"modal-backdrop","fade","show"]],template:function(e,n){e&1&&(H(0,J7,6,0,"div",0)(1,AI,31,10,"div",1),s(2,"div",2),x(3,"div",3),s(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),x(8,"i",8),d(9," \u062A\u0623\u0643\u064A\u062F \u0627\u0644\u0625\u0643\u0645\u0627\u0644 "),l(),s(10,"button",9),T("click",function(){return n.closeCompleteConfirmModal()}),l()(),s(11,"div",10)(12,"div",11),x(13,"i",12),l(),s(14,"h5",13),d(15,"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u0625\u0643\u0645\u0627\u0644 \u0627\u0644\u0646\u0645\u0648\u0630\u062C\u061F"),l(),s(16,"p",14),d(17," \u0633\u064A\u0624\u062F\u064A \u0647\u0630\u0627 \u0627\u0644\u0625\u062C\u0631\u0627\u0621 \u0625\u0644\u0649 \u0642\u0641\u0644 \u0627\u0644\u0646\u0645\u0648\u0630\u062C \u0648\u0645\u0646\u0639 \u0623\u064A \u062A\u0639\u062F\u064A\u0644\u0627\u062A \u0645\u0633\u062A\u0642\u0628\u0644\u064A\u0629 \u0625\u0644\u0627 \u0645\u0646 \u0642\u0628\u0644 \u0627\u0644\u0645\u062F\u064A\u0631. "),l()(),s(18,"div",15)(19,"button",16),T("click",function(){return n.closeCompleteConfirmModal()}),d(20," \u0625\u0644\u063A\u0627\u0621 "),l(),s(21,"button",17),T("click",function(){return n.confirmComplete()}),H(22,MI,2,0,"span",18)(23,FI,3,0,"span",18),l()()()()(),H(24,kI,1,0,"div",19)),e&2&&(S("ngIf",n.isLoading),m(),S("ngIf",!n.isLoading),m(),dt("display",n.showCompleteConfirmModal?"block":"none"),fe("show",n.showCompleteConfirmModal),m(19),S("disabled",n.isCompleting),m(),S("ngIf",!n.isCompleting),m(),S("ngIf",n.isCompleting),m(),S("ngIf",n.showCompleteConfirmModal))},dependencies:[Le,Ft,ai,kt,tt,et,Xn,ot,rt],styles:["[_ngcontent-%COMP%]:root{--primary-color: #0d6efd;--primary-hover: #0b5ed7;--primary-soft: #eff6ff;--secondary-color: #64748b;--secondary-bg: #f5f5f5;--success-color: #10b981;--warning-color: #f59e0b;--danger-color: #ef4444;--bg-page: #f1f5f9;--bg-card: #ffffff;--border-color: #1a1a1a;--border-focus: #3b82f6;--shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, .05);--shadow-md: 0 4px 6px -1px rgba(0, 0, 0, .1), 0 2px 4px -1px rgba(0, 0, 0, .06);--shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, .1), 0 4px 6px -2px rgba(0, 0, 0, .05);--radius-md: .75rem}body[_ngcontent-%COMP%]{background-color:var(--bg-page);color:#334155;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.medical-form-container[_ngcontent-%COMP%]{max-width:1100px;margin:0 auto;padding:2rem 1rem}.loading-container[_ngcontent-%COMP%]{min-height:60vh;display:flex;flex-direction:column;justify-content:center;align-items:center}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .4s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.card-modern[_ngcontent-%COMP%]{background-color:#f5f3f3a3;border:1px solid white;border-radius:1rem;box-shadow:var(--shadow-md);transition:transform .2s ease,box-shadow .2s ease;overflow:hidden}.header-card[_ngcontent-%COMP%]{position:relative;overflow:visible}.form-title[_ngcontent-%COMP%]{font-weight:800;color:#1e293b;font-size:1.75rem;letter-spacing:-.5px}.icon-circle[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:48px;height:48px;border-radius:50%;background-color:var(--primary-soft);color:var(--primary-color);font-size:1.25rem}.trip-id-text[_ngcontent-%COMP%]{font-family:monospace;color:var(--secondary-color);font-size:.9rem}.btn-light-secondary[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--border-color);color:var(--secondary-color);border-radius:50px;padding:.5rem 1.25rem;font-weight:600;transition:all .2s}.btn-light-secondary[_ngcontent-%COMP%]:hover{background:var(--secondary-bg);border-color:#cbd5e1;color:#334155}.status-section[_ngcontent-%COMP%]{border-color:#e2e8f0!important}.custom-progress[_ngcontent-%COMP%]{height:12px;border-radius:10px;background-color:#e2e8f0;margin-top:5px;overflow:hidden}.percentage-badge[_ngcontent-%COMP%]{font-weight:700;font-size:.8rem;padding:.4em .8em;color:#fff}.status-badges[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-weight:600;padding:.5em 1em;font-size:.85rem;letter-spacing:.3px}.bg-info-subtle[_ngcontent-%COMP%]{background-color:#e0f2fe;color:#0284c7}.bg-success-subtle[_ngcontent-%COMP%]{background-color:#dcfce7;color:#16a34a}.bg-warning-subtle[_ngcontent-%COMP%]{background-color:#fef3c7;color:#d97706}.bg-primary-subtle[_ngcontent-%COMP%]{background-color:#dbeafe;color:#2563eb}.bg-danger-subtle[_ngcontent-%COMP%]{background-color:#fee2e2;color:#dc2626}.bg-dark-subtle[_ngcontent-%COMP%]{background-color:#f1f5f9;color:#475569}.custom-accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]{border:none;margin-bottom:1rem}.custom-accordion[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{background-color:#fff;padding:1.25rem 1.5rem;border:none;box-shadow:none;color:#334155}.custom-accordion[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:not(.collapsed){background-color:var(--primary-soft);color:var(--primary-color);border-radius:var(--radius-lg) var(--radius-lg) 0 0}.custom-accordion[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:focus{box-shadow:none}.section-icon-wrapper[_ngcontent-%COMP%]{width:32px;height:32px;background:transparent;border-radius:8px;display:flex;align-items:center;justify-content:center;color:var(--secondary-color);transition:all .2s}.accordion-button[_ngcontent-%COMP%]:not(.collapsed)   .section-icon-wrapper[_ngcontent-%COMP%]{background:transparent;color:var(--primary-color)}.accordion-body[_ngcontent-%COMP%]{padding:1.5rem;border-top:1px solid var(--border-color)}.form-group-modern[_ngcontent-%COMP%]{margin-bottom:.5rem}.form-label[_ngcontent-%COMP%]{font-weight:600;color:#475569;font-size:.9rem;margin-bottom:.5rem}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{padding:.7rem 1rem;border:1px solid var(--border-color);border-radius:8px;color:#1e293b;font-size:.95rem;transition:all .2s;background-color:#fff}.form-control[_ngcontent-%COMP%]:focus{border-color:var(--border-focus);box-shadow:0 0 0 4px #3b82f61a}.form-control[_ngcontent-%COMP%]:disabled{background-color:#f8fafc;color:#94a3b8;cursor:not-allowed}.custom-checkbox[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{width:1.2em;height:1.2em;margin-top:.15em;border:2px solid #cbd5e1;cursor:pointer}.custom-checkbox[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:checked{background-color:#1ef706!important;border-color:var(--primary-color);color:#1ef706}.fas[_ngcontent-%COMP%]{background-color:transparent!important;border:none}.custom-checkbox[_ngcontent-%COMP%]   .form-check-label[_ngcontent-%COMP%]{cursor:pointer;padding-right:.5rem;padding-top:.1rem;color:#334155}.checkbox-group-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;background:#fff;border:1px solid var(--border-color);padding:1rem;border-radius:8px}.subsection-card[_ngcontent-%COMP%]{border:1px solid var(--border-color);background-color:#f8fafc}.subsection-title[_ngcontent-%COMP%]{font-weight:700;color:#334155;font-size:1rem}.small-icon[_ngcontent-%COMP%]{font-size:.8rem}.table-responsive[_ngcontent-%COMP%]{background:#fff;border-color:var(--border-color)!important}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;font-size:.85rem;text-transform:uppercase;letter-spacing:.5px}.bg-light-focus[_ngcontent-%COMP%]:focus{background-color:#fff}.modal-backdrop-blur[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#0006;backdrop-filter:blur(4px);z-index:-1}.modal-content[_ngcontent-%COMP%]{border-radius:var(--radius-lg);overflow:hidden}@media (max-width: 768px){.header-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.25rem}.form-title[_ngcontent-%COMP%]{font-size:1.4rem}.status-badges[_ngcontent-%COMP%]{justify-content:flex-start}.action-buttons[_ngcontent-%COMP%]{width:100%}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1}}.accordion-button[_ngcontent-%COMP%]:after{margin-left:0!important;margin-right:auto!important}[dir=rtl][_ngcontent-%COMP%]   .ms-2[_ngcontent-%COMP%]{margin-right:.5rem!important;margin-left:0!important}[dir=rtl][_ngcontent-%COMP%]   .me-2[_ngcontent-%COMP%]{margin-left:.5rem!important;margin-right:0!important}[dir=rtl][_ngcontent-%COMP%]   .me-3[_ngcontent-%COMP%]{margin-left:1rem!important;margin-right:0!important}"]})};var PI=(i,t)=>({"font-monospace":i,small:t});function DI(i,t){if(i&1){let e=Q();s(0,"input",39),V("ngModelChange",function(r){b(e);let a=h().$implicit,u=h(2);return N(u.filters[a.key],r)||(u.filters[a.key]=r),C(r)}),l()}if(i&2){let e=h().$implicit,n=h(2);R("ngModel",n.filters[e.key]),S("placeholder",e.placeholder||"")}}function II(i,t){if(i&1&&(s(0,"option",42),d(1),l()),i&2){let e=t.$implicit;S("ngValue",e.value),m(),q(" ",e.label," ")}}function OI(i,t){if(i&1){let e=Q();s(0,"select",40),V("ngModelChange",function(r){b(e);let a=h().$implicit,u=h(2);return N(u.filters[a.key],r)||(u.filters[a.key]=r),C(r)}),H(1,II,2,2,"option",41),l()}if(i&2){let e=h().$implicit,n=h(2);R("ngModel",n.filters[e.key]),m(),S("ngForOf",e.options)}}function LI(i,t){if(i&1){let e=Q();s(0,"input",43),V("ngModelChange",function(r){b(e);let a=h().$implicit,u=h(2);return N(u.filters[a.key],r)||(u.filters[a.key]=r),C(r)}),l()}if(i&2){let e=h().$implicit,n=h(2);R("ngModel",n.filters[e.key])}}function RI(i,t){if(i&1&&(s(0,"div",34)(1,"label",35),d(2),l(),H(3,DI,1,2,"input",36)(4,OI,2,2,"select",37)(5,LI,1,1,"input",38),l()),i&2){let e=t.$implicit;S("ngClass",e.colClass),m(2),z(e.label),m(),S("ngIf",e.type==="text"),m(),S("ngIf",e.type==="select"),m(),S("ngIf",e.type==="date")}}function NI(i,t){if(i&1){let e=Q();s(0,"div",26)(1,"div",27)(2,"div",28),H(3,RI,6,5,"div",29),s(4,"div",2)(5,"button",30),T("click",function(){b(e);let r=h();return C(r.applyFilters())}),x(6,"i",31),d(7," \u0628\u062D\u062B "),l(),s(8,"button",32),T("click",function(){b(e);let r=h();return C(r.resetFilters())}),x(9,"i",33),d(10," \u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 "),l()()()()()}if(i&2){let e=h();m(3),S("ngForOf",e.filterConfigs)}}function VI(i,t){i&1&&(s(0,"div",44)(1,"div",45)(2,"span",46),d(3,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),l()()())}function BI(i,t){i&1&&(s(0,"div",44),x(1,"i",47),s(2,"p",48),d(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0646\u0645\u0627\u0630\u062C \u0637\u0628\u064A\u0629"),l()())}function UI(i,t){if(i&1&&(s(0,"th"),d(1),l()),i&2){let e=t.$implicit;m(),z(e.label)}}function WI(i,t){if(i&1&&(Si(0),d(1),Ti()),i&2){let e=h().$implicit,n=h().$implicit;m(),q(" ",e.getValue(n)," ")}}function jI(i,t){if(i&1&&(Si(0),s(1,"div",56)(2,"div",57)(3,"div",58),d(4),l()()(),Ti()),i&2){let e=h().$implicit,n=h().$implicit,r=h(2);m(3),dt("width",e.getValue(n),"%")("background-color",r.getCompletionColor(e.getValue(n))),m(),q(" ",e.getValue(n).toFixed(0),"% ")}}function HI(i,t){if(i&1&&(Si(0),s(1,"span",59),d(2),l(),Ti()),i&2){let e=h().$implicit,n=h().$implicit;m(),S("ngClass",e.getClass(n)),m(),q(" ",e.render(n)," ")}}function zI(i,t){if(i&1&&(Si(0),d(1),Ti()),i&2){let e=h().$implicit,n=h().$implicit,r=h(2);m(),q(" ",r.formatDate(e.getValue(n))," ")}}function GI(i,t){if(i&1){let e=Q();s(0,"button",66),T("click",function(){b(e);let r=h(3).$implicit,a=h(2);return C(a.unlockForm(r))}),x(1,"i",67),l()}}function $I(i,t){if(i&1){let e=Q();Si(0),s(1,"div",60)(2,"button",61),T("click",function(){b(e);let r=h(2).$implicit,a=h(2);return C(a.viewForm(r))}),x(3,"i",62),l(),s(4,"button",63),T("click",function(){b(e);let r=h(2).$implicit,a=h(2);return C(a.editForm(r))}),x(5,"i",64),l(),H(6,GI,2,0,"button",65),l(),Ti()}if(i&2){let e=h(2).$implicit;m(6),S("ngIf",e.isLocked)}}function ZI(i,t){if(i&1&&(s(0,"td",34),H(1,WI,2,1,"ng-container",55)(2,jI,5,5,"ng-container",55)(3,HI,3,2,"ng-container",55)(4,zI,2,1,"ng-container",55)(5,$I,7,1,"ng-container",55),l()),i&2){let e=t.$implicit;S("ngClass",xr(6,PI,e.key==="tripId",e.type==="date")),m(),S("ngIf",e.type==="text"),m(),S("ngIf",e.type==="progress"),m(),S("ngIf",e.type==="badge"),m(),S("ngIf",e.type==="date"),m(),S("ngIf",e.type==="actions")}}function qI(i,t){if(i&1&&(s(0,"tr"),H(1,ZI,6,9,"td",29),l()),i&2){let e=h(2);m(),S("ngForOf",e.columnConfigs)}}function YI(i,t){if(i&1){let e=Q();s(0,"li",70)(1,"a",71),T("click",function(){let r=b(e).$implicit,a=h(3);return C(a.changePage(r))}),d(2),l()()}if(i&2){let e=t.$implicit,n=h(3);fe("active",n.currentPage===e),m(2),z(e)}}function XI(i,t){if(i&1){let e=Q();s(0,"div",68)(1,"nav")(2,"ul",69)(3,"li",70)(4,"a",71),T("click",function(){b(e);let r=h(2);return C(r.changePage(1))}),x(5,"i",72),l()(),s(6,"li",70)(7,"a",71),T("click",function(){b(e);let r=h(2);return C(r.changePage(r.currentPage-1))}),x(8,"i",73),l()(),H(9,YI,3,3,"li",74),s(10,"li",70)(11,"a",71),T("click",function(){b(e);let r=h(2);return C(r.changePage(r.currentPage+1))}),x(12,"i",75),l()(),s(13,"li",70)(14,"a",71),T("click",function(){b(e);let r=h(2);return C(r.changePage(r.totalPages))}),x(15,"i",76),l()()()(),s(16,"div",77),d(17),l()()}if(i&2){let e=h(2);m(3),fe("disabled",e.currentPage===1),m(3),fe("disabled",e.currentPage===1),m(3),S("ngForOf",e.getPaginationArray()),m(),fe("disabled",e.currentPage===e.totalPages),m(3),fe("disabled",e.currentPage===e.totalPages),m(4),ya(" \u0635\u0641\u062D\u0629 ",e.currentPage," \u0645\u0646 ",e.totalPages," (",e.totalItems," \u0646\u0645\u0648\u0630\u062C) ")}}function KI(i,t){if(i&1&&(s(0,"div",49)(1,"div",50)(2,"table",51)(3,"thead",52)(4,"tr"),H(5,UI,2,1,"th",53),l()(),s(6,"tbody"),H(7,qI,2,1,"tr",53),l()()(),H(8,XI,18,12,"div",54),l()),i&2){let e=h();m(5),S("ngForOf",e.columnConfigs),m(2),S("ngForOf",e.medicalForms),m(),S("ngIf",e.totalPages>1)}}function JI(i,t){if(i&1&&(s(0,"li")(1,"strong"),d(2,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0625\u0643\u062A\u0645\u0627\u0644:"),l(),d(3),l()),i&2){let e=h(2);m(3),q(" ",e.formatDate(e.selectedForm.completedAt),"")}}function QI(i,t){if(i&1&&(s(0,"li")(1,"strong"),d(2,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0642\u0641\u0644:"),l(),d(3),l()),i&2){let e=h(2);m(3),q(" ",e.formatDate(e.selectedForm.lockedAt),"")}}function e8(i,t){if(i&1&&(s(0,"div",78)(1,"div",1)(2,"div",79)(3,"p")(4,"strong"),d(5,"\u0627\u0644\u0633\u0627\u0626\u0642:"),l(),d(6),l()(),s(7,"div",79)(8,"p")(9,"strong"),d(10,"\u0646\u0633\u0628\u0629 \u0627\u0644\u0627\u0643\u062A\u0645\u0627\u0644:"),l()(),s(11,"div",80)(12,"div",58),d(13),l()(),s(14,"p",81)(15,"span",82),d(16),l(),s(17,"span",83),d(18),l()()()(),x(19,"hr"),s(20,"div",84),x(21,"i",85),d(22,' \u0644\u0639\u0631\u0636 \u0627\u0644\u0646\u0645\u0648\u0630\u062C \u0627\u0644\u0637\u0628\u064A \u0627\u0644\u0643\u0627\u0645\u0644\u060C \u064A\u0631\u062C\u0649 \u0627\u0644\u0636\u063A\u0637 \u0639\u0644\u0649 \u0632\u0631 "\u062A\u0639\u062F\u064A\u0644" \u0623\u062F\u0646\u0627\u0647. '),l(),s(23,"div",86)(24,"div",2)(25,"h6"),d(26,"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0646\u0645\u0648\u0630\u062C:"),l(),s(27,"ul")(28,"li")(29,"strong"),d(30,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0625\u0646\u0634\u0627\u0621:"),l(),d(31),l(),s(32,"li")(33,"strong"),d(34,"\u0622\u062E\u0631 \u062A\u062D\u062F\u064A\u062B:"),l(),d(35),l(),H(36,JI,4,1,"li",55)(37,QI,4,1,"li",55),l()()()()),i&2){let e=h();m(6),q(" ",e.selectedForm.driverName||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F",""),m(6),dt("width",e.selectedForm.completionPercentage,"%")("background-color",e.getCompletionColor(e.selectedForm.completionPercentage)),m(),q(" ",e.selectedForm.completionPercentage.toFixed(1),"% "),m(2),fe("bg-success",e.selectedForm.isComplete)("bg-warning",!e.selectedForm.isComplete),m(),q(" ",e.selectedForm.isComplete?"\u0645\u0643\u062A\u0645\u0644":"\u063A\u064A\u0631 \u0645\u0643\u062A\u0645\u0644"," "),m(),fe("bg-danger",e.selectedForm.isLocked)("bg-success",!e.selectedForm.isLocked),m(),q(" ",e.selectedForm.isLocked?"\u0645\u0642\u0641\u0644":"\u0645\u0641\u062A\u0648\u062D"," "),m(13),q(" ",e.formatDate(e.selectedForm.createdAt),""),m(4),q(" ",e.formatDate(e.selectedForm.updatedAt),""),m(),S("ngIf",e.selectedForm.completedAt),m(),S("ngIf",e.selectedForm.lockedAt)}}function t8(i,t){if(i&1){let e=Q();s(0,"button",87),T("click",function(){b(e);let r=h();return r.unlockForm(r.selectedForm),C(r.closeViewModal())}),x(1,"i",88),d(2," \u0641\u062A\u062D \u0627\u0644\u0642\u0641\u0644 "),l()}}function i8(i,t){if(i&1&&x(0,"div",89),i&2){let e=h();fe("show",e.showViewModal)}}var id=class i{constructor(t,e,n){this.medicalFormService=t;this.toastService=e;this.router=n}medicalForms=[];isLoading=!1;filterConfigs=[{key:"patientName",label:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0631\u064A\u0636",type:"text",placeholder:"\u0627\u0628\u062D\u062B \u0628\u0627\u0633\u0645 \u0627\u0644\u0645\u0631\u064A\u0636...",colClass:"col-md-3"},{key:"driverName",label:"\u0627\u0633\u0645 \u0627\u0644\u0633\u0627\u0626\u0642",type:"text",placeholder:"\u0627\u0628\u062D\u062B \u0628\u0627\u0633\u0645 \u0627\u0644\u0633\u0627\u0626\u0642...",colClass:"col-md-3"},{key:"isComplete",label:"\u062D\u0627\u0644\u0629 \u0627\u0644\u0627\u0643\u062A\u0645\u0627\u0644",type:"select",colClass:"col-md-2",options:[{value:void 0,label:"\u0627\u0644\u0643\u0644"},{value:!0,label:"\u0645\u0643\u062A\u0645\u0644"},{value:!1,label:"\u063A\u064A\u0631 \u0645\u0643\u062A\u0645\u0644"}]},{key:"isLocked",label:"\u062D\u0627\u0644\u0629 \u0627\u0644\u0642\u0641\u0644",type:"select",colClass:"col-md-2",options:[{value:void 0,label:"\u0627\u0644\u0643\u0644"},{value:!0,label:"\u0645\u0642\u0641\u0644"},{value:!1,label:"\u0645\u0641\u062A\u0648\u062D"}]},{key:"dateFrom",label:"\u0645\u0646 \u062A\u0627\u0631\u064A\u062E",type:"date",colClass:"col-md-2"},{key:"dateTo",label:"\u0625\u0644\u0649 \u062A\u0627\u0631\u064A\u062E",type:"date",colClass:"col-md-2"}];columnConfigs=[{key:"patientName",label:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0631\u064A\u0636",type:"text",getValue:t=>t.patientName||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"},{key:"driverName",label:"\u0627\u0644\u0633\u0627\u0626\u0642",type:"text",getValue:t=>t.driverName||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"},{key:"isComplete",label:"\u0627\u0644\u062D\u0627\u0644\u0629",type:"badge",getValue:t=>t.isComplete,getClass:t=>t.isComplete?"bg-success":"bg-warning",render:t=>t.isComplete?"\u0645\u0643\u062A\u0645\u0644":"\u063A\u064A\u0631 \u0645\u0643\u062A\u0645\u0644"},{key:"isLocked",label:"\u0627\u0644\u0642\u0641\u0644",type:"badge",getValue:t=>t.isLocked,getClass:t=>t.isLocked?"bg-danger":"bg-success",render:t=>t.isLocked?"\u0645\u0642\u0641\u0644":"\u0645\u0641\u062A\u0648\u062D"},{key:"updatedAt",label:"\u0622\u062E\u0631 \u062A\u062D\u062F\u064A\u062B",type:"date",getValue:t=>t.updatedAt},{key:"actions",label:"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A",type:"actions",getValue:()=>null}];currentPage=1;itemsPerPage=20;totalItems=0;totalPages=0;filters={page:1,limit:20,isComplete:void 0,isLocked:void 0,dateFrom:void 0,dateTo:void 0,driverName:void 0,patientName:void 0};showFilters=!1;selectedForm=null;showViewModal=!1;ngOnInit(){this.loadMedicalForms()}loadMedicalForms(){this.isLoading=!0,this.filters.page=this.currentPage,this.filters.limit=this.itemsPerPage,this.medicalFormService.getMedicalForms(this.filters).subscribe({next:t=>{this.medicalForms=t.data,this.totalItems=t.total,this.totalPages=t.totalPages,this.currentPage=t.page,this.isLoading=!1},error:t=>{console.error("Failed to load medical forms:",t),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0646\u0645\u0627\u0630\u062C \u0627\u0644\u0637\u0628\u064A\u0629"),this.isLoading=!1}})}toggleFilters(){this.showFilters=!this.showFilters}applyFilters(){this.currentPage=1,this.loadMedicalForms()}resetFilters(){this.filters={page:1,limit:20,isComplete:void 0,isLocked:void 0,dateFrom:void 0,dateTo:void 0,driverName:void 0,patientName:void 0},this.currentPage=1,this.loadMedicalForms()}changePage(t){t>=1&&t<=this.totalPages&&(this.currentPage=t,this.loadMedicalForms())}viewForm(t){this.selectedForm=t,this.showViewModal=!0}closeViewModal(){this.showViewModal=!1,this.selectedForm=null}editForm(t){this.router.navigate(["/user/medical-form",t.tripId])}isUnlockModalOpen=Z(!1);formToUnlock=Z(null);unlockModalConfig=Z({type:"warning",title:"\u062A\u0623\u0643\u064A\u062F \u0641\u062A\u062D \u0627\u0644\u0646\u0645\u0648\u0630\u062C",message:"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u0631\u063A\u0628\u062A\u0643 \u0641\u064A \u0641\u062A\u062D \u0647\u0630\u0627 \u0627\u0644\u0646\u0645\u0648\u0630\u062C \u0627\u0644\u0637\u0628\u064A\u061F \u0647\u0630\u0627 \u0633\u064A\u0633\u0645\u062D \u0628\u0625\u062C\u0631\u0627\u0621 \u062A\u0639\u062F\u064A\u0644\u0627\u062A \u062C\u062F\u064A\u062F\u0629.",confirmButtonText:"\u0646\u0639\u0645\u060C \u0627\u0641\u062A\u062D \u0627\u0644\u0646\u0645\u0648\u0630\u062C",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621"});unlockForm(t){this.formToUnlock.set(t);let e={type:"warning",title:"\u062A\u0623\u0643\u064A\u062F \u0641\u062A\u062D \u0627\u0644\u0646\u0645\u0648\u0630\u062C",message:`\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u0631\u063A\u0628\u062A\u0643 \u0641\u064A \u0641\u062A\u062D \u0627\u0644\u0646\u0645\u0648\u0630\u062C \u0627\u0644\u0637\u0628\u064A \u0644\u0644\u0631\u062D\u0644\u0629 ${t.tripId}\u061F \u0647\u0630\u0627 \u0633\u064A\u0633\u0645\u062D \u0628\u0625\u062C\u0631\u0627\u0621 \u062A\u0639\u062F\u064A\u0644\u0627\u062A \u062C\u062F\u064A\u062F\u0629.`,highlightedText:`${t.tripId}`,confirmButtonText:"\u0646\u0639\u0645\u060C \u0627\u0641\u062A\u062D \u0627\u0644\u0646\u0645\u0648\u0630\u062C",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621"};this.unlockModalConfig.set(e),this.isUnlockModalOpen.set(!0)}handleUnlockConfirmation(t){let e=this.formToUnlock();this.isUnlockModalOpen.set(!1),this.formToUnlock.set(null),t&&e&&this.medicalFormService.unlockMedicalForm(e.tripId).subscribe({next:()=>{this.toastService.success("\u062A\u0645 \u0641\u062A\u062D \u0627\u0644\u0646\u0645\u0648\u0630\u062C \u0628\u0646\u062C\u0627\u062D"),this.loadMedicalForms()},error:n=>{console.error("Failed to unlock form:",n),this.toastService.error("\u0641\u0634\u0644 \u0641\u062A\u062D \u0627\u0644\u0646\u0645\u0648\u0630\u062C")}})}getCompletionColor(t){return t>=75?"#28a745":t>=50?"#ffc107":t>=25?"#fd7e14":"#dc3545"}formatDate(t){return(typeof t=="string"?new Date(t):t).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}getPaginationArray(){let e=[],n=Math.max(1,this.currentPage-Math.floor(2.5)),r=Math.min(this.totalPages,n+5-1);r-n<4&&(n=Math.max(1,r-5+1));for(let a=n;a<=r;a++)e.push(a);return e}static \u0275fac=function(e){return new(e||i)(G(Ba),G(Ye),G(Xe))};static \u0275cmp=Oe({type:i,selectors:[["app-medical-forms"]],decls:33,vars:14,consts:[[1,"container-fluid","py-4"],[1,"row","mb-4"],[1,"col-12"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"fas","fa-notes-medical","me-2"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-filter","me-2"],["class","card mb-4",4,"ngIf"],["class","text-center py-5",4,"ngIf"],["class","card",4,"ngIf"],["tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-xl","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fas","fa-times","me-2"],["type","button","class","btn btn-warning",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-edit","me-2"],["class","modal-backdrop fade",3,"show",4,"ngIf"],[3,"confirmed","cancelled","isOpen","config"],[1,"card","mb-4"],[1,"card-body"],[1,"row","g-3"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"btn","btn-primary","me-2",3,"click"],[1,"fas","fa-search","me-2"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-redo","me-2"],[3,"ngClass"],[1,"form-label"],["type","text","class","form-control",3,"ngModel","placeholder","ngModelChange",4,"ngIf"],["class","form-select",3,"ngModel","ngModelChange",4,"ngIf"],["type","date","class","form-control",3,"ngModel","ngModelChange",4,"ngIf"],["type","text",1,"form-control",3,"ngModelChange","ngModel","placeholder"],[1,"form-select",3,"ngModelChange","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"fas","fa-notes-medical","fa-3x","text-muted","mb-3"],[1,"text-muted"],[1,"card"],[1,"table-responsive"],[1,"table","table-hover","mb-0"],[1,"table-light"],[4,"ngFor","ngForOf"],["class","card-footer",4,"ngIf"],[4,"ngIf"],[1,"d-flex","align-items-center"],[1,"progress","flex-grow-1","me-2",2,"height","20px","min-width","100px"],["role","progressbar",1,"progress-bar"],[1,"badge",3,"ngClass"],["role","group",1,"btn-group","btn-group-sm"],["title","\u0639\u0631\u0636",1,"btn","btn-outline-primary",3,"click"],[1,"fas","fa-eye"],["title","\u062A\u0639\u062F\u064A\u0644",1,"btn","btn-outline-success",3,"click"],[1,"fas","fa-edit"],["class","btn btn-outline-warning","title","\u0641\u062A\u062D \u0627\u0644\u0642\u0641\u0644",3,"click",4,"ngIf"],["title","\u0641\u062A\u062D \u0627\u0644\u0642\u0641\u0644",1,"btn","btn-outline-warning",3,"click"],[1,"fas","fa-unlock"],[1,"card-footer"],[1,"pagination","pagination-sm","justify-content-center","mb-0"],[1,"page-item"],[1,"page-link",2,"cursor","pointer",3,"click"],[1,"fas","fa-angle-double-right"],[1,"fas","fa-chevron-right"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"fas","fa-chevron-left"],[1,"fas","fa-angle-double-left"],[1,"text-center","text-muted","small","mt-2"],[1,"modal-body"],[1,"col-md-6"],[1,"progress",2,"height","25px"],[1,"mt-2"],[1,"badge","me-2"],[1,"badge"],[1,"alert","alert-info"],[1,"fas","fa-info-circle","me-2"],[1,"row"],["type","button",1,"btn","btn-warning",3,"click"],[1,"fas","fa-unlock","me-2"],[1,"modal-backdrop","fade"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),x(5,"i",5),d(6," \u0627\u0644\u0646\u0645\u0627\u0630\u062C \u0627\u0644\u0637\u0628\u064A\u0629 "),l(),s(7,"button",6),T("click",function(){return n.toggleFilters()}),x(8,"i",7),d(9," \u0641\u0644\u062A\u0631 "),l()()()(),H(10,NI,11,1,"div",8)(11,VI,4,0,"div",9)(12,BI,4,0,"div",9)(13,KI,9,3,"div",10),l(),s(14,"div",11)(15,"div",12)(16,"div",13)(17,"div",14)(18,"h5",15),x(19,"i",5),d(20),l(),s(21,"button",16),T("click",function(){return n.closeViewModal()}),l()(),H(22,e8,38,20,"div",17),s(23,"div",18)(24,"button",19),T("click",function(){return n.closeViewModal()}),x(25,"i",20),d(26," \u0625\u063A\u0644\u0627\u0642 "),l(),H(27,t8,3,0,"button",21),s(28,"button",22),T("click",function(){return n.editForm(n.selectedForm),n.closeViewModal()}),x(29,"i",23),d(30," \u0639\u0631\u0636/\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0646\u0645\u0648\u0630\u062C \u0627\u0644\u0643\u0627\u0645\u0644 "),l()()()()(),H(31,i8,1,2,"div",24),s(32,"app-confirmation-modal",25),T("confirmed",function(){return n.handleUnlockConfirmation(!0)})("cancelled",function(){return n.handleUnlockConfirmation(!1)}),l()),e&2&&(m(10),S("ngIf",n.showFilters),m(),S("ngIf",n.isLoading),m(),S("ngIf",!n.isLoading&&n.medicalForms.length===0),m(),S("ngIf",!n.isLoading&&n.medicalForms.length>0),m(),dt("display",n.showViewModal?"block":"none"),fe("show",n.showViewModal),m(6),q(" \u0627\u0644\u0646\u0645\u0648\u0630\u062C \u0627\u0644\u0637\u0628\u064A - ",(n.selectedForm==null?null:n.selectedForm.patientName)||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"," "),m(2),S("ngIf",n.selectedForm),m(5),S("ngIf",n.selectedForm==null?null:n.selectedForm.isLocked),m(4),S("ngIf",n.showViewModal),m(),S("isOpen",n.isUnlockModalOpen())("config",n.unlockModalConfig()))},dependencies:[Le,Ft,ai,kt,tt,Ot,Lt,et,At,ot,rt,Wi],encapsulation:2})};var n8=i=>({"opacity-75":i}),r8=(i,t)=>t.id;function a8(i,t){if(i&1){let e=Q();s(0,"div",7)(1,"div",36)(2,"div",37)(3,"button",38),T("click",function(){let r=b(e).$implicit,a=h();return C(a.openEditModal(r))}),x(4,"i",39),l(),s(5,"button",40),T("click",function(){let r=b(e).$implicit,a=h();return C(a.toggleStatus(r))}),x(6,"i",41),l(),s(7,"button",42),T("click",function(){let r=b(e).$implicit,a=h();return C(a.deleteType(r))}),x(8,"i",43),l()(),s(9,"div",44)(10,"h5",45),d(11),l(),s(12,"p",46),d(13),l(),s(14,"div",47)(15,"span",48),x(16,"i",49),d(17," \u0627\u0644\u062A\u0643\u0644\u0641\u0629: "),l(),s(18,"span",50),d(19),l()(),s(20,"div",51)(21,"span",48),x(22,"i",52),d(23," \u0627\u0644\u0645\u062F\u0629: "),l(),s(24,"span",50),d(25),l()(),s(26,"p",53)(27,"span",54),d(28),l()()()()()}if(i&2){let e=t.$implicit;m(),S("ngClass",$i(19,n8,!e.isActive)),m(4),fe("btn-outline-success",!e.isActive)("btn-outline-warning",e.isActive),S("title",e.isActive?"\u062A\u0639\u0637\u064A\u0644":"\u062A\u0641\u0639\u064A\u0644"),m(),fe("fa-check",!e.isActive)("fa-ban",e.isActive),m(5),z(e.name),m(2),z(e.description),m(6),q("",e.estimatedCost," \u0634\u064A\u0643\u0644"),m(6),q("",e.estimatedDuration," \u0633\u0627\u0639\u0629"),m(2),fe("bg-success",e.isActive)("bg-secondary",!e.isActive),m(),q(" ",e.isActive?"\u0646\u0634\u0637":"\u063A\u064A\u0631 \u0646\u0634\u0637"," ")}}function o8(i,t){i&1&&(s(0,"div",8)(1,"div",55),x(2,"i",56),s(3,"p",57),d(4,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0623\u0646\u0648\u0627\u0639 \u0635\u064A\u0627\u0646\u0629"),l()()())}function s8(i,t){if(i&1&&x(0,"div",58),i&2){let e=h();fe("show",e.isAddModalOpen())}}function l8(i,t){if(i&1&&x(0,"div",58),i&2){let e=h();fe("show",e.isEditModalOpen())}}var nd=class i{constructor(t,e,n,r){this.globalVars=t;this.router=e;this.toastService=n;this.maintenanceTypeService=r;this.globalVars.setGlobalHeader("\u0625\u062F\u0627\u0631\u0629 \u0623\u0646\u0648\u0627\u0639 \u0627\u0644\u0635\u064A\u0627\u0646\u0629")}searchTerm=Z("");isAddModalOpen=Z(!1);isEditModalOpen=Z(!1);selectedType=Z(null);isLoading=Z(!1);typeForm={name:"",description:"",estimatedCost:0,estimatedDuration:0,isActive:!0};maintenanceTypes=Z([]);currentPage=1;itemsPerPage=12;totalRecords=0;ngOnInit(){this.loadData()}loadData(){this.isLoading.set(!0);let t={page:this.currentPage,limit:this.itemsPerPage};this.maintenanceTypeService.getMaintenanceTypes(t).subscribe({next:e=>{this.maintenanceTypes.set(e.data),this.totalRecords=e.total,this.isLoading.set(!1)},error:e=>{console.error("Error loading maintenance types:",e),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0623\u0646\u0648\u0627\u0639 \u0627\u0644\u0635\u064A\u0627\u0646\u0629"),this.isLoading.set(!1)}})}onPageChange(t){this.currentPage=t,this.loadData()}onItemsPerPageChange(t){this.itemsPerPage=t,this.currentPage=1,this.loadData()}openAddModal(){this.resetForm(),this.isAddModalOpen.set(!0)}closeAddModal(){this.isAddModalOpen.set(!1),this.resetForm()}openEditModal(t){this.selectedType.set(t),this.typeForm={name:t.name,description:t.description,estimatedCost:t.estimatedCost,estimatedDuration:t.estimatedDuration,isActive:t.isActive},this.isEditModalOpen.set(!0)}closeEditModal(){this.isEditModalOpen.set(!1),this.selectedType.set(null),this.resetForm()}addType(){if(!this.validateForm())return;let t={name:this.typeForm.name,description:this.typeForm.description,estimatedCost:this.typeForm.estimatedCost,estimatedDuration:this.typeForm.estimatedDuration,isActive:this.typeForm.isActive};this.maintenanceTypeService.createMaintenanceType(t).subscribe({next:()=>{this.toastService.success("\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 \u0646\u0648\u0639 \u0627\u0644\u0635\u064A\u0627\u0646\u0629 \u0628\u0646\u062C\u0627\u062D"),this.closeAddModal(),this.loadData()},error:e=>{console.error("Error creating maintenance type:",e),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u0625\u0636\u0627\u0641\u0629 \u0646\u0648\u0639 \u0627\u0644\u0635\u064A\u0627\u0646\u0629")}})}updateType(){if(!this.validateForm())return;let t=this.selectedType();if(!t)return;let e={name:this.typeForm.name,description:this.typeForm.description,estimatedCost:this.typeForm.estimatedCost,estimatedDuration:this.typeForm.estimatedDuration,isActive:this.typeForm.isActive};this.maintenanceTypeService.updateMaintenanceType(t.id,e).subscribe({next:()=>{this.toastService.success("\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0646\u0648\u0639 \u0627\u0644\u0635\u064A\u0627\u0646\u0629 \u0628\u0646\u062C\u0627\u062D"),this.closeEditModal(),this.loadData()},error:n=>{console.error("Error updating maintenance type:",n),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u062A\u062D\u062F\u064A\u062B \u0646\u0648\u0639 \u0627\u0644\u0635\u064A\u0627\u0646\u0629")}})}deleteType(t){confirm(`\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 "${t.name}"\u061F`)&&this.maintenanceTypeService.deleteMaintenanceType(t.id).subscribe({next:()=>{this.toastService.success("\u062A\u0645 \u062D\u0630\u0641 \u0646\u0648\u0639 \u0627\u0644\u0635\u064A\u0627\u0646\u0629 \u0628\u0646\u062C\u0627\u062D"),this.loadData()},error:e=>{console.error("Error deleting maintenance type:",e),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u062D\u0630\u0641 \u0646\u0648\u0639 \u0627\u0644\u0635\u064A\u0627\u0646\u0629")}})}toggleStatus(t){let e={isActive:!t.isActive};this.maintenanceTypeService.updateMaintenanceType(t.id,e).subscribe({next:()=>{let n=t.isActive?"\u062A\u0645 \u062A\u0639\u0637\u064A\u0644":"\u062A\u0645 \u062A\u0641\u0639\u064A\u0644";this.toastService.success(`${n} \u0646\u0648\u0639 \u0627\u0644\u0635\u064A\u0627\u0646\u0629`),this.loadData()},error:n=>{console.error("Error toggling status:",n),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u062D\u0627\u0644\u0629")}})}validateForm(){return this.typeForm.name.trim()?this.typeForm.estimatedCost<0?(this.toastService.error("\u0627\u0644\u062A\u0643\u0644\u0641\u0629 \u0627\u0644\u0645\u062A\u0648\u0642\u0639\u0629 \u064A\u062C\u0628 \u0623\u0646 \u062A\u0643\u0648\u0646 \u0635\u0641\u0631 \u0623\u0648 \u0623\u0643\u062B\u0631"),!1):this.typeForm.estimatedDuration<0?(this.toastService.error("\u0627\u0644\u0645\u062F\u0629 \u0627\u0644\u0645\u062A\u0648\u0642\u0639\u0629 \u064A\u062C\u0628 \u0623\u0646 \u062A\u0643\u0648\u0646 \u0635\u0641\u0631 \u0623\u0648 \u0623\u0643\u062B\u0631"),!1):!0:(this.toastService.error("\u0627\u0644\u0631\u062C\u0627\u0621 \u0625\u062F\u062E\u0627\u0644 \u0627\u0633\u0645 \u0646\u0648\u0639 \u0627\u0644\u0635\u064A\u0627\u0646\u0629"),!1)}resetForm(){this.typeForm={name:"",description:"",estimatedCost:0,estimatedDuration:0,isActive:!0}}goBack(){this.router.navigate(["/admin/admin-dashboard"])}static \u0275fac=function(e){return new(e||i)(G(ft),G(Xe),G(Ye),G(Fs))};static \u0275cmp=Oe({type:i,selectors:[["app-maintenance-types"]],decls:91,vars:24,consts:[[1,"container-fluid","p-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fa-solid","fa-arrow-right","me-2"],[1,"btn","btn-primary",3,"click"],[1,"fa-solid","fa-plus","me-2"],[1,"row","row-cols-1","row-cols-md-2","row-cols-lg-3","row-cols-xl-4","g-4","mb-4"],[1,"col"],[1,"col-12"],[3,"pageChange","itemsPerPageChange","currentPage","itemsPerPage","totalItems"],["tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],[1,"form-label"],[1,"text-danger"],["type","text","name","name","placeholder","\u0645\u062B\u0627\u0644: \u0635\u064A\u0627\u0646\u0629 \u062F\u0648\u0631\u064A\u0629",1,"form-control",3,"ngModelChange","ngModel"],["name","description","rows","3","placeholder","\u0648\u0635\u0641 \u0646\u0648\u0639 \u0627\u0644\u0635\u064A\u0627\u0646\u0629...",1,"form-control",3,"ngModelChange","ngModel"],[1,"row"],[1,"col-md-6","mb-3"],["type","number","name","estimatedCost","min","0","placeholder","0",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","estimatedDuration","min","0","placeholder","0",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-check"],["type","checkbox","name","isActive","id","addIsActive",1,"form-check-input",3,"ngModelChange","ngModel"],["for","addIsActive",1,"form-check-label"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["class","modal-backdrop fade",3,"show",4,"ngIf"],["type","checkbox","name","isActive","id","editIsActive",1,"form-check-input",3,"ngModelChange","ngModel"],["for","editIsActive",1,"form-check-label"],[1,"fa-solid","fa-save","me-2"],[1,"card","shadow-sm","rounded-xl","h-100","position-relative",3,"ngClass"],[1,"position-absolute","top-0","start-0","m-3","d-flex","gap-2"],["title","\u062A\u0639\u062F\u064A\u0644",1,"btn","btn-sm","btn-outline-primary","rounded-circle",2,"width","32px","height","32px","padding","0",3,"click"],[1,"fa-solid","fa-pen"],[1,"btn","btn-sm","rounded-circle",2,"width","32px","height","32px","padding","0",3,"click","title"],[1,"fa-solid"],["title","\u062D\u0630\u0641",1,"btn","btn-sm","btn-outline-danger","rounded-circle",2,"width","32px","height","32px","padding","0",3,"click"],[1,"fa-solid","fa-trash"],[1,"card-body","pt-5"],[1,"card-title","fw-bold","mb-2"],[1,"text-muted","small","mb-3"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"text-muted","small"],[1,"fa-solid","fa-money-bill","me-1"],[1,"fw-medium"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"fa-solid","fa-clock","me-1"],[1,"small","mb-0"],[1,"badge"],[1,"text-center","text-muted","py-5"],[1,"fa-solid","fa-inbox","fa-3x","mb-3","d-block"],[1,"fs-5"],[1,"modal-backdrop","fade"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"button",2),T("click",function(){return n.goBack()}),x(3,"i",3),d(4," \u0631\u062C\u0648\u0639 "),l(),s(5,"button",4),T("click",function(){return n.openAddModal()}),x(6,"i",5),d(7," \u0625\u0636\u0627\u0641\u0629 \u0646\u0648\u0639 \u062C\u062F\u064A\u062F "),l()(),s(8,"div",6),Te(9,a8,29,21,"div",7,r8,!1,o8,5,0,"div",8),l(),s(12,"app-pagination",9),T("pageChange",function(a){return n.onPageChange(a)})("itemsPerPageChange",function(a){return n.onItemsPerPageChange(a)}),l()(),s(13,"div",10)(14,"div",11)(15,"div",12)(16,"div",13)(17,"h5",14),d(18,"\u0625\u0636\u0627\u0641\u0629 \u0646\u0648\u0639 \u0635\u064A\u0627\u0646\u0629 \u062C\u062F\u064A\u062F"),l(),s(19,"button",15),T("click",function(){return n.closeAddModal()}),l()(),s(20,"div",16)(21,"form")(22,"div",17)(23,"label",18),d(24,"\u0627\u0633\u0645 \u0646\u0648\u0639 \u0627\u0644\u0635\u064A\u0627\u0646\u0629 "),s(25,"span",19),d(26,"*"),l()(),s(27,"input",20),V("ngModelChange",function(a){return N(n.typeForm.name,a)||(n.typeForm.name=a),a}),l()(),s(28,"div",17)(29,"label",18),d(30,"\u0627\u0644\u0648\u0635\u0641 "),l(),s(31,"textarea",21),V("ngModelChange",function(a){return N(n.typeForm.description,a)||(n.typeForm.description=a),a}),l()(),s(32,"div",22)(33,"div",23)(34,"label",18),d(35,"\u0627\u0644\u062A\u0643\u0644\u0641\u0629 \u0627\u0644\u0645\u062A\u0648\u0642\u0639\u0629 (\u0634\u064A\u0643\u0644)"),l(),s(36,"input",24),V("ngModelChange",function(a){return N(n.typeForm.estimatedCost,a)||(n.typeForm.estimatedCost=a),a}),l()(),s(37,"div",23)(38,"label",18),d(39,"\u0627\u0644\u0645\u062F\u0629 \u0627\u0644\u0645\u062A\u0648\u0642\u0639\u0629 (\u0633\u0627\u0639\u0629)"),l(),s(40,"input",25),V("ngModelChange",function(a){return N(n.typeForm.estimatedDuration,a)||(n.typeForm.estimatedDuration=a),a}),l()()(),s(41,"div",26)(42,"input",27),V("ngModelChange",function(a){return N(n.typeForm.isActive,a)||(n.typeForm.isActive=a),a}),l(),s(43,"label",28),d(44," \u0646\u0634\u0637 "),l()()()(),s(45,"div",29)(46,"button",30),T("click",function(){return n.closeAddModal()}),d(47,"\u0625\u0644\u063A\u0627\u0621"),l(),s(48,"button",31),T("click",function(){return n.addType()}),x(49,"i",5),d(50," \u0625\u0636\u0627\u0641\u0629 "),l()()()()(),H(51,s8,1,2,"div",32),s(52,"div",10)(53,"div",11)(54,"div",12)(55,"div",13)(56,"h5",14),d(57,"\u062A\u0639\u062F\u064A\u0644 \u0646\u0648\u0639 \u0627\u0644\u0635\u064A\u0627\u0646\u0629"),l(),s(58,"button",15),T("click",function(){return n.closeEditModal()}),l()(),s(59,"div",16)(60,"form")(61,"div",17)(62,"label",18),d(63,"\u0627\u0633\u0645 \u0646\u0648\u0639 \u0627\u0644\u0635\u064A\u0627\u0646\u0629 "),s(64,"span",19),d(65,"*"),l()(),s(66,"input",20),V("ngModelChange",function(a){return N(n.typeForm.name,a)||(n.typeForm.name=a),a}),l()(),s(67,"div",17)(68,"label",18),d(69,"\u0627\u0644\u0648\u0635\u0641 "),l(),s(70,"textarea",21),V("ngModelChange",function(a){return N(n.typeForm.description,a)||(n.typeForm.description=a),a}),l()(),s(71,"div",22)(72,"div",23)(73,"label",18),d(74,"\u0627\u0644\u062A\u0643\u0644\u0641\u0629 \u0627\u0644\u0645\u062A\u0648\u0642\u0639\u0629 (\u0634\u064A\u0643\u0644)"),l(),s(75,"input",24),V("ngModelChange",function(a){return N(n.typeForm.estimatedCost,a)||(n.typeForm.estimatedCost=a),a}),l()(),s(76,"div",23)(77,"label",18),d(78,"\u0627\u0644\u0645\u062F\u0629 \u0627\u0644\u0645\u062A\u0648\u0642\u0639\u0629 (\u0633\u0627\u0639\u0629)"),l(),s(79,"input",25),V("ngModelChange",function(a){return N(n.typeForm.estimatedDuration,a)||(n.typeForm.estimatedDuration=a),a}),l()()(),s(80,"div",26)(81,"input",33),V("ngModelChange",function(a){return N(n.typeForm.isActive,a)||(n.typeForm.isActive=a),a}),l(),s(82,"label",34),d(83," \u0646\u0634\u0637 "),l()()()(),s(84,"div",29)(85,"button",30),T("click",function(){return n.closeEditModal()}),d(86,"\u0625\u0644\u063A\u0627\u0621"),l(),s(87,"button",31),T("click",function(){return n.updateType()}),x(88,"i",35),d(89," \u062D\u0641\u0638 \u0627\u0644\u062A\u063A\u064A\u064A\u0631\u0627\u062A "),l()()()()(),H(90,l8,1,2,"div",32)),e&2&&(m(9),Ee(n.maintenanceTypes()),m(3),S("currentPage",n.currentPage)("itemsPerPage",n.itemsPerPage)("totalItems",n.totalRecords),m(),dt("display",n.isAddModalOpen()?"block":"none"),fe("show",n.isAddModalOpen()),m(14),R("ngModel",n.typeForm.name),m(4),R("ngModel",n.typeForm.description),m(5),R("ngModel",n.typeForm.estimatedCost),m(4),R("ngModel",n.typeForm.estimatedDuration),m(2),R("ngModel",n.typeForm.isActive),m(9),S("ngIf",n.isAddModalOpen()),m(),dt("display",n.isEditModalOpen()?"block":"none"),fe("show",n.isEditModalOpen()),m(14),R("ngModel",n.typeForm.name),m(4),R("ngModel",n.typeForm.description),m(5),R("ngModel",n.typeForm.estimatedCost),m(4),R("ngModel",n.typeForm.estimatedDuration),m(2),R("ngModel",n.typeForm.isActive),m(9),S("ngIf",n.isEditModalOpen()))},dependencies:[Le,Ft,kt,tt,Kt,et,vi,Xn,ot,Xt,xi,rt,$t,Mi],styles:[".modal.show[_ngcontent-%COMP%]{background-color:#00000080}.modal-backdrop.show[_ngcontent-%COMP%]{opacity:.5}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;color:#495057;border-bottom:2px solid #dee2e6}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.25rem .5rem}.card[_ngcontent-%COMP%]{border-radius:.5rem;box-shadow:0 .125rem .25rem #00000013}.input-group-text[_ngcontent-%COMP%]{border-left:none}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-right:none}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#ced4da;box-shadow:none}.input-group-text[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-color:#ced4da}"],changeDetection:0})};var u8=i=>({"opacity-75":i}),c8=(i,t)=>t.id;function d8(i,t){if(i&1){let e=Q();s(0,"div",7)(1,"div",32)(2,"div",33)(3,"button",34),T("click",function(){let r=b(e).$implicit,a=h();return C(a.openEditModal(r))}),x(4,"i",35),l(),s(5,"button",36),T("click",function(){let r=b(e).$implicit,a=h();return C(a.toggleStatus(r))}),x(6,"i",37),l(),s(7,"button",38),T("click",function(){let r=b(e).$implicit,a=h();return C(a.deleteType(r))}),x(8,"i",39),l()(),s(9,"div",40)(10,"h5",41),d(11),l(),s(12,"p",42),d(13),l(),s(14,"p",43)(15,"span",44),d(16),l()()()()()}if(i&2){let e=t.$implicit;m(),S("ngClass",$i(17,u8,!e.isActive)),m(4),fe("btn-outline-success",!e.isActive)("btn-outline-warning",e.isActive),S("title",e.isActive?"\u062A\u0639\u0637\u064A\u0644":"\u062A\u0641\u0639\u064A\u0644"),m(),fe("fa-check",!e.isActive)("fa-ban",e.isActive),m(5),z(e.name),m(2),z(e.description),m(2),fe("bg-success",e.isActive)("bg-secondary",!e.isActive),m(),q(" ",e.isActive?"\u0646\u0634\u0637":"\u063A\u064A\u0631 \u0646\u0634\u0637"," ")}}function m8(i,t){i&1&&(s(0,"div",8)(1,"div",45),x(2,"i",46),s(3,"p",47),d(4,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0623\u0646\u0648\u0627\u0639 \u0646\u0642\u0644\u064A\u0627\u062A"),l()()())}function f8(i,t){if(i&1&&x(0,"div",48),i&2){let e=h();fe("show",e.isAddModalOpen())}}function p8(i,t){if(i&1&&x(0,"div",48),i&2){let e=h();fe("show",e.isEditModalOpen())}}var rd=class i{constructor(t,e,n,r){this.globalVars=t;this.router=e;this.toastService=n;this.transportationTypeService=r;this.globalVars.setGlobalHeader("\u0625\u062F\u0627\u0631\u0629 \u0623\u0646\u0648\u0627\u0639 \u0627\u0644\u0646\u0642\u0644\u064A\u0627\u062A")}searchTerm=Z("");isAddModalOpen=Z(!1);isEditModalOpen=Z(!1);selectedType=Z(null);isLoading=Z(!1);typeForm={name:"",description:"",isActive:!0};transportationTypes=Z([]);currentPage=1;itemsPerPage=12;totalRecords=0;ngOnInit(){this.loadData()}loadData(){this.isLoading.set(!0);let t={page:this.currentPage,limit:this.itemsPerPage};this.transportationTypeService.getTransportationTypes(t).subscribe({next:e=>{this.transportationTypes.set(e.data),this.totalRecords=e.total,this.isLoading.set(!1)},error:e=>{console.error("Error loading transportation types:",e),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0623\u0646\u0648\u0627\u0639 \u0627\u0644\u0646\u0642\u0644\u064A\u0627\u062A"),this.isLoading.set(!1)}})}onPageChange(t){this.currentPage=t,this.loadData()}onItemsPerPageChange(t){this.itemsPerPage=t,this.currentPage=1,this.loadData()}openAddModal(){this.resetForm(),this.isAddModalOpen.set(!0)}closeAddModal(){this.isAddModalOpen.set(!1),this.resetForm()}openEditModal(t){this.selectedType.set(t),this.typeForm={name:t.name,description:t.description,isActive:t.isActive},this.isEditModalOpen.set(!0)}closeEditModal(){this.isEditModalOpen.set(!1),this.selectedType.set(null),this.resetForm()}addType(){if(!this.validateForm())return;let t={name:this.typeForm.name,description:this.typeForm.description,isActive:this.typeForm.isActive};this.transportationTypeService.createTransportationType(t).subscribe({next:()=>{this.toastService.success("\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u062A\u0634\u062E\u064A\u0635 \u0628\u0646\u062C\u0627\u062D"),this.closeAddModal(),this.loadData()},error:e=>{console.error("Error creating transportation type:",e),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u062A\u0634\u062E\u064A\u0635")}})}updateType(){if(!this.validateForm())return;let t=this.selectedType();if(!t)return;let e={name:this.typeForm.name,description:this.typeForm.description,isActive:this.typeForm.isActive};this.transportationTypeService.updateTransportationType(t.id,e).subscribe({next:()=>{this.toastService.success("\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u062A\u0634\u062E\u064A\u0635 \u0628\u0646\u062C\u0627\u062D"),this.closeEditModal(),this.loadData()},error:n=>{console.error("Error updating transportation type:",n),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u062A\u0634\u062E\u064A\u0635")}})}deleteType(t){confirm(`\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 "${t.name}"\u061F`)&&this.transportationTypeService.deleteTransportationType(t.id).subscribe({next:()=>{this.toastService.success("\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u062A\u0634\u062E\u064A\u0635 \u0628\u0646\u062C\u0627\u062D"),this.loadData()},error:e=>{console.error("Error deleting transportation type:",e),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u062D\u0630\u0641 \u0627\u0644\u062A\u0634\u062E\u064A\u0635")}})}toggleStatus(t){let e={isActive:!t.isActive};this.transportationTypeService.updateTransportationType(t.id,e).subscribe({next:()=>{let n=t.isActive?"\u062A\u0645 \u062A\u0639\u0637\u064A\u0644":"\u062A\u0645 \u062A\u0641\u0639\u064A\u0644";this.toastService.success(`${n} \u0627\u0644\u062A\u0634\u062E\u064A\u0635`),this.loadData()},error:n=>{console.error("Error toggling status:",n),this.toastService.error("\u0641\u0634\u0644\u062A \u0639\u0645\u0644\u064A\u0629 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u062D\u0627\u0644\u0629")}})}validateForm(){return this.typeForm.name.trim()?!0:(this.toastService.error("\u0627\u0644\u0631\u062C\u0627\u0621 \u0625\u062F\u062E\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u062A\u0634\u062E\u064A\u0635"),!1)}resetForm(){this.typeForm={name:"",description:"",isActive:!0}}goBack(){this.router.navigate(["/admin/admin-dashboard"])}static \u0275fac=function(e){return new(e||i)(G(ft),G(Xe),G(Ye),G(ls))};static \u0275cmp=Oe({type:i,selectors:[["app-transportation-types"]],decls:73,vars:20,consts:[[1,"container-fluid","p-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fa-solid","fa-arrow-right","me-2"],[1,"btn","btn-primary",3,"click"],[1,"fa-solid","fa-plus","me-2"],[1,"row","row-cols-1","row-cols-md-2","row-cols-lg-3","row-cols-xl-4","g-4","mb-4"],[1,"col"],[1,"col-12"],[3,"pageChange","itemsPerPageChange","currentPage","itemsPerPage","totalItems"],["tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],[1,"form-label"],[1,"text-danger"],["type","text","name","name","placeholder","\u0645\u062B\u0627\u0644: \u0646\u0642\u0644 \u0637\u0648\u0627\u0631\u0626",1,"form-control",3,"ngModelChange","ngModel"],["name","description","rows","3","placeholder","\u0648\u0635\u0641 \u0627\u0644\u062A\u0634\u062E\u064A\u0635...",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-check"],["type","checkbox","name","isActive","id","addIsActive",1,"form-check-input",3,"ngModelChange","ngModel"],["for","addIsActive",1,"form-check-label"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["class","modal-backdrop fade",3,"show",4,"ngIf"],["type","checkbox","name","isActive","id","editIsActive",1,"form-check-input",3,"ngModelChange","ngModel"],["for","editIsActive",1,"form-check-label"],[1,"fa-solid","fa-save","me-2"],[1,"card","shadow-sm","rounded-xl","h-100","position-relative",3,"ngClass"],[1,"position-absolute","top-0","start-0","m-3","d-flex","gap-2"],["title","\u062A\u0639\u062F\u064A\u0644",1,"btn","btn-sm","btn-outline-primary","rounded-circle",2,"width","32px","height","32px","padding","0",3,"click"],[1,"fa-solid","fa-pen"],[1,"btn","btn-sm","rounded-circle",2,"width","32px","height","32px","padding","0",3,"click","title"],[1,"fa-solid"],["title","\u062D\u0630\u0641",1,"btn","btn-sm","btn-outline-danger","rounded-circle",2,"width","32px","height","32px","padding","0",3,"click"],[1,"fa-solid","fa-trash"],[1,"card-body","pt-5"],[1,"card-title","fw-bold","mb-2"],[1,"text-muted","small","mb-3"],[1,"small","mb-0"],[1,"badge"],[1,"text-center","text-muted","py-5"],[1,"fa-solid","fa-inbox","fa-3x","mb-3","d-block"],[1,"fs-5"],[1,"modal-backdrop","fade"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"button",2),T("click",function(){return n.goBack()}),x(3,"i",3),d(4," \u0631\u062C\u0648\u0639 "),l(),s(5,"button",4),T("click",function(){return n.openAddModal()}),x(6,"i",5),d(7," \u0625\u0636\u0627\u0641\u0629 \u0646\u0648\u0639 \u062C\u062F\u064A\u062F "),l()(),s(8,"div",6),Te(9,d8,17,19,"div",7,c8,!1,m8,5,0,"div",8),l(),s(12,"app-pagination",9),T("pageChange",function(a){return n.onPageChange(a)})("itemsPerPageChange",function(a){return n.onItemsPerPageChange(a)}),l()(),s(13,"div",10)(14,"div",11)(15,"div",12)(16,"div",13)(17,"h5",14),d(18,"\u0625\u0636\u0627\u0641\u0629 \u0646\u0648\u0639 \u0646\u0642\u0644 \u062C\u062F\u064A\u062F"),l(),s(19,"button",15),T("click",function(){return n.closeAddModal()}),l()(),s(20,"div",16)(21,"form")(22,"div",17)(23,"label",18),d(24,"\u0627\u0633\u0645 \u0627\u0644\u062A\u0634\u062E\u064A\u0635 "),s(25,"span",19),d(26,"*"),l()(),s(27,"input",20),V("ngModelChange",function(a){return N(n.typeForm.name,a)||(n.typeForm.name=a),a}),l()(),s(28,"div",17)(29,"label",18),d(30,"\u0627\u0644\u0648\u0635\u0641"),l(),s(31,"textarea",21),V("ngModelChange",function(a){return N(n.typeForm.description,a)||(n.typeForm.description=a),a}),l()(),s(32,"div",22)(33,"input",23),V("ngModelChange",function(a){return N(n.typeForm.isActive,a)||(n.typeForm.isActive=a),a}),l(),s(34,"label",24),d(35," \u0646\u0634\u0637 "),l()()()(),s(36,"div",25)(37,"button",26),T("click",function(){return n.closeAddModal()}),d(38,"\u0625\u0644\u063A\u0627\u0621"),l(),s(39,"button",27),T("click",function(){return n.addType()}),x(40,"i",5),d(41," \u0625\u0636\u0627\u0641\u0629 "),l()()()()(),H(42,f8,1,2,"div",28),s(43,"div",10)(44,"div",11)(45,"div",12)(46,"div",13)(47,"h5",14),d(48,"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u062A\u0634\u062E\u064A\u0635"),l(),s(49,"button",15),T("click",function(){return n.closeEditModal()}),l()(),s(50,"div",16)(51,"form")(52,"div",17)(53,"label",18),d(54,"\u0627\u0633\u0645 \u0627\u0644\u062A\u0634\u062E\u064A\u0635 "),s(55,"span",19),d(56,"*"),l()(),s(57,"input",20),V("ngModelChange",function(a){return N(n.typeForm.name,a)||(n.typeForm.name=a),a}),l()(),s(58,"div",17)(59,"label",18),d(60,"\u0627\u0644\u0648\u0635\u0641 "),l(),s(61,"textarea",21),V("ngModelChange",function(a){return N(n.typeForm.description,a)||(n.typeForm.description=a),a}),l()(),s(62,"div",22)(63,"input",29),V("ngModelChange",function(a){return N(n.typeForm.isActive,a)||(n.typeForm.isActive=a),a}),l(),s(64,"label",30),d(65," \u0646\u0634\u0637 "),l()()()(),s(66,"div",25)(67,"button",26),T("click",function(){return n.closeEditModal()}),d(68,"\u0625\u0644\u063A\u0627\u0621"),l(),s(69,"button",27),T("click",function(){return n.updateType()}),x(70,"i",31),d(71," \u062D\u0641\u0638 \u0627\u0644\u062A\u063A\u064A\u064A\u0631\u0627\u062A "),l()()()()(),H(72,p8,1,2,"div",28)),e&2&&(m(9),Ee(n.transportationTypes()),m(3),S("currentPage",n.currentPage)("itemsPerPage",n.itemsPerPage)("totalItems",n.totalRecords),m(),dt("display",n.isAddModalOpen()?"block":"none"),fe("show",n.isAddModalOpen()),m(14),R("ngModel",n.typeForm.name),m(4),R("ngModel",n.typeForm.description),m(2),R("ngModel",n.typeForm.isActive),m(9),S("ngIf",n.isAddModalOpen()),m(),dt("display",n.isEditModalOpen()?"block":"none"),fe("show",n.isEditModalOpen()),m(14),R("ngModel",n.typeForm.name),m(4),R("ngModel",n.typeForm.description),m(2),R("ngModel",n.typeForm.isActive),m(9),S("ngIf",n.isEditModalOpen()))},dependencies:[Le,Ft,kt,tt,Kt,et,Xn,ot,Xt,rt,$t,Mi],styles:[".modal.show[_ngcontent-%COMP%]{background-color:#00000080}.modal-backdrop.show[_ngcontent-%COMP%]{opacity:.5}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;color:#495057;border-bottom:2px solid #dee2e6}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.25rem .5rem}.card[_ngcontent-%COMP%]{border-radius:.5rem;box-shadow:0 .125rem .25rem #00000013}.input-group-text[_ngcontent-%COMP%]{border-left:none}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-right:none}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#ced4da;box-shadow:none}.input-group-text[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-color:#ced4da}"],changeDetection:0})};var h8=i=>({"opacity-75":i}),g8=(i,t)=>t.id;function _8(i,t){if(i&1&&(s(0,"option",52),d(1),l()),i&2){let e=t.$implicit;S("value",e),m(),z(e)}}function v8(i,t){if(i&1&&(s(0,"p",63),x(1,"i",70),d(2),l()),i&2){let e=h().$implicit;m(2),q(" ",e.address," ")}}function x8(i,t){if(i&1&&(s(0,"p",63),x(1,"i",71),d(2),l()),i&2){let e=h().$implicit;m(2),q(" ",e.city," ")}}function y8(i,t){if(i&1&&(s(0,"p",72),x(1,"i",73),d(2),l()),i&2){let e=h().$implicit;m(2),q(" ",e.phoneNumber," ")}}function b8(i,t){if(i&1){let e=Q();s(0,"div",16)(1,"div",53)(2,"div",54)(3,"button",55),T("click",function(){let r=b(e).$implicit,a=h();return C(a.openEditModal(r))}),x(4,"i",56),l(),s(5,"button",57),T("click",function(){let r=b(e).$implicit,a=h();return C(a.toggleStatus(r))}),x(6,"i",58),l(),s(7,"button",59),T("click",function(){let r=b(e).$implicit,a=h();return C(a.deleteLocation(r))}),x(8,"i",60),l()(),s(9,"div",61)(10,"h5",62),d(11),l(),s(12,"p",63),x(13,"i",64),s(14,"span",65),d(15),l()(),H(16,v8,3,1,"p",66)(17,x8,3,1,"p",66)(18,y8,3,1,"p",67),s(19,"p",68)(20,"span",69),d(21),l()()()()()}if(i&2){let e=t.$implicit,n=h();m(),S("ngClass",$i(20,h8,!e.isActive)),m(4),fe("btn-outline-success",!e.isActive)("btn-outline-warning",e.isActive),S("title",e.isActive?"\u062A\u0639\u0637\u064A\u0644":"\u062A\u0641\u0639\u064A\u0644"),m(),fe("fa-check",!e.isActive)("fa-ban",e.isActive),m(5),z(e.name),m(4),z(n.getTypeLabel(e.type)),m(),S("ngIf",e.address),m(),S("ngIf",e.city),m(),S("ngIf",e.phoneNumber),m(2),fe("bg-success",e.isActive)("bg-secondary",!e.isActive),m(),q(" ",e.isActive?"\u0646\u0634\u0637":"\u063A\u064A\u0631 \u0646\u0634\u0637"," ")}}function C8(i,t){i&1&&(s(0,"div",17)(1,"div",74),x(2,"i",75),s(3,"p",76),d(4,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u0648\u0627\u0642\u0639"),l()()())}function w8(i,t){if(i&1&&(s(0,"option",52),d(1),l()),i&2){let e=t.$implicit;S("value",e.id),m(),z(e.name)}}function S8(i,t){if(i&1&&(s(0,"option",52),d(1),l()),i&2){let e=t.$implicit;S("value",e.value),m(),z(e.label)}}function T8(i,t){if(i&1&&x(0,"div",77),i&2){let e=h();fe("show",e.isAddModalOpen())}}function E8(i,t){if(i&1&&(s(0,"option",52),d(1),l()),i&2){let e=t.$implicit;S("value",e.value),m(),z(e.label)}}function A8(i,t){if(i&1&&x(0,"div",77),i&2){let e=h();fe("show",e.isEditModalOpen())}}var ad=class i{constructor(t,e,n,r){this.globalVars=t;this.router=e;this.toastService=n;this.locationService=r;this.globalVars.setGlobalHeader("\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u0648\u0627\u0642\u0639 \u0627\u0644\u0634\u0627\u0626\u0639\u0629")}searchTerm=Z("");filterType=Z("\u0627\u0644\u0643\u0644");isAddModalOpen=Z(!1);isEditModalOpen=Z(!1);selectedLocation=Z(null);locationForm={name:"",address:"",city:"",type:"hospital",phoneNumber:"",isActive:!0};locationTypes=[{value:"hospital",label:"\u0645\u0633\u062A\u0634\u0641\u0649"},{value:"clinic",label:"\u0639\u064A\u0627\u062F\u0629"},{value:"emergency",label:"\u0637\u0648\u0627\u0631\u0626"},{value:"other",label:"\u0623\u062E\u0631\u0649"}];filterTypes=["\u0627\u0644\u0643\u0644","\u0645\u0633\u062A\u0634\u0641\u0649","\u0639\u064A\u0627\u062F\u0629","\u0637\u0648\u0627\u0631\u0626","\u0623\u062E\u0631\u0649"];commonLocations=Z([]);customLocations=Z([]);selectedCustomLocationId="";isLoading=Z(!1);currentPage=1;itemsPerPage=12;totalRecords=0;ngOnInit(){this.loadLocations(),this.loadCustomLocations()}loadLocations(){this.isLoading.set(!0);let t=this.filterType()!=="\u0627\u0644\u0643\u0644"?this.mapFilterTypeToEnum(this.filterType()):void 0;this.locationService.getLocations({locationType:"common",page:this.currentPage,limit:this.itemsPerPage,type:t,searchTerm:this.searchTerm()||void 0}).subscribe({next:e=>{this.commonLocations.set(e.data.map(n=>({id:n.id,name:n.name,address:n.address||"",city:n.city||"",type:n.type||"other",phoneNumber:n.phoneNumber||"",isActive:n.isActive??!0,createdAt:n.createdAt||new Date}))),this.totalRecords=e.total,this.isLoading.set(!1)},error:e=>{console.error("Error loading locations:",e),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0645\u0648\u0627\u0642\u0639"),this.isLoading.set(!1)}})}mapFilterTypeToEnum(t){return{\u0645\u0633\u062A\u0634\u0641\u0649:"hospital",\u0639\u064A\u0627\u062F\u0629:"clinic",\u0637\u0648\u0627\u0631\u0626:"emergency",\u0623\u062E\u0631\u0649:"other"}[t]||"other"}onPageChange(t){this.currentPage=t,this.loadLocations()}onItemsPerPageChange(t){this.itemsPerPage=t,this.currentPage=1,this.loadLocations()}onFilterChange(){this.currentPage=1,this.loadLocations()}loadCustomLocations(){this.locationService.getCustomLocations().subscribe({next:t=>{this.customLocations.set(t)},error:t=>{console.error("Error loading custom locations:",t)}})}getTypeLabel(t){return{hospital:"\u0645\u0633\u062A\u0634\u0641\u0649",clinic:"\u0639\u064A\u0627\u062F\u0629",emergency:"\u0637\u0648\u0627\u0631\u0626",other:"\u0623\u062E\u0631\u0649"}[t]||t}openAddModal(){this.resetForm(),this.selectedCustomLocationId="",this.isAddModalOpen.set(!0)}closeAddModal(){this.isAddModalOpen.set(!1),this.resetForm(),this.selectedCustomLocationId=""}onCustomLocationSelected(t){if(!t){this.resetForm();return}let e=this.customLocations().find(n=>n.id===t);e&&(this.locationForm.name=e.name)}openEditModal(t){this.selectedLocation.set(t),this.locationForm={name:t.name,address:t.address,city:t.city,type:t.type,phoneNumber:t.phoneNumber,isActive:t.isActive},this.isEditModalOpen.set(!0)}closeEditModal(){this.isEditModalOpen.set(!1),this.selectedLocation.set(null),this.resetForm()}addLocation(){if(this.validateForm()){if(this.selectedCustomLocationId){this.convertToCommonLocation(this.selectedCustomLocationId);return}this.locationService.searchLocations(this.locationForm.name).subscribe({next:t=>{let e=t.find(n=>n.name.toLowerCase()===this.locationForm.name.toLowerCase()&&n.locationType==="custom");e?this.convertToCommonLocation(e.id):this.createCommonLocation()},error:t=>{console.error("Error searching locations:",t),this.createCommonLocation()}})}}convertToCommonLocation(t){this.locationService.updateLocation(t,{name:this.locationForm.name,locationType:"common",address:this.locationForm.address,city:this.locationForm.city,type:this.locationForm.type,phoneNumber:this.locationForm.phoneNumber,isActive:this.locationForm.isActive}).subscribe({next:()=>{this.toastService.success("\u062A\u0645 \u062A\u062D\u0648\u064A\u0644 \u0627\u0644\u0645\u0648\u0642\u0639 \u0625\u0644\u0649 \u0645\u0648\u0642\u0639 \u0634\u0627\u0626\u0639 \u0628\u0646\u062C\u0627\u062D"),this.closeAddModal(),this.loadLocations(),this.loadCustomLocations()},error:e=>{console.error("Error converting location:",e),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0648\u064A\u0644 \u0627\u0644\u0645\u0648\u0642\u0639")}})}createCommonLocation(){this.locationService.createLocation({name:this.locationForm.name,locationType:"common",address:this.locationForm.address,city:this.locationForm.city,type:this.locationForm.type,phoneNumber:this.locationForm.phoneNumber}).subscribe({next:()=>{this.toastService.success("\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0648\u0642\u0639 \u0628\u0646\u062C\u0627\u062D"),this.closeAddModal(),this.loadLocations(),this.loadCustomLocations()},error:t=>{console.error("Error creating location:",t),this.toastService.error("\u0641\u0634\u0644 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0648\u0642\u0639")}})}updateLocation(){if(!this.validateForm())return;let t=this.selectedLocation();t&&this.locationService.updateLocation(t.id,{name:this.locationForm.name,locationType:"common",address:this.locationForm.address,city:this.locationForm.city,type:this.locationForm.type,phoneNumber:this.locationForm.phoneNumber,isActive:this.locationForm.isActive}).subscribe({next:()=>{this.toastService.success("\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u0648\u0642\u0639 \u0628\u0646\u062C\u0627\u062D"),this.closeEditModal(),this.loadLocations()},error:e=>{console.error("Error updating location:",e),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u0648\u0642\u0639")}})}deleteLocation(t){confirm(`\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 "${t.name}"\u061F`)&&this.locationService.deleteLocation(t.id).subscribe({next:()=>{this.toastService.success("\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0645\u0648\u0642\u0639 \u0628\u0646\u062C\u0627\u062D"),this.loadLocations()},error:e=>{console.error("Error deleting location:",e),this.toastService.error("\u0641\u0634\u0644 \u062D\u0630\u0641 \u0627\u0644\u0645\u0648\u0642\u0639")}})}toggleStatus(t){this.locationService.toggleLocationStatus(t.id).subscribe({next:()=>{let e=t.isActive?"\u062A\u0645 \u062A\u0639\u0637\u064A\u0644":"\u062A\u0645 \u062A\u0641\u0639\u064A\u0644";this.toastService.success(`${e} \u0627\u0644\u0645\u0648\u0642\u0639`),this.loadLocations()},error:e=>{console.error("Error toggling location status:",e),this.toastService.error("\u0641\u0634\u0644 \u062A\u063A\u064A\u064A\u0631 \u062D\u0627\u0644\u0629 \u0627\u0644\u0645\u0648\u0642\u0639")}})}validateForm(){if(!this.locationForm.name.trim())return this.toastService.error("\u0627\u0644\u0631\u062C\u0627\u0621 \u0625\u062F\u062E\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0648\u0642\u0639"),!1;let t=(this.locationForm.phoneNumber||"").replace(/\s/g,"");return t&&!/^[0-9]{10}$/.test(t)?(this.toastService.error("\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641 \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 10 \u0623\u0631\u0642\u0627\u0645"),!1):!0}resetForm(){this.locationForm={name:"",address:"",city:"",type:"hospital",phoneNumber:"",isActive:!0}}goBack(){this.router.navigate(["/admin/admin-dashboard"])}static \u0275fac=function(e){return new(e||i)(G(ft),G(Xe),G(Ye),G(os))};static \u0275cmp=Oe({type:i,selectors:[["app-common-locations"]],decls:126,vars:33,consts:[[1,"container-fluid","p-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fa-solid","fa-arrow-right","me-2"],[1,"btn","btn-primary",3,"click"],[1,"fa-solid","fa-plus","me-2"],[1,"row","mb-4"],[1,"col-md-8"],[1,"input-group"],[1,"input-group-text","bg-white"],[1,"fa-solid","fa-search","text-muted"],["type","text","placeholder","\u0628\u062D\u062B \u0639\u0646 \u0645\u0648\u0642\u0639...",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-4"],[1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"row","row-cols-1","row-cols-md-2","row-cols-lg-3","row-cols-xl-4","g-4","mb-4"],[1,"col"],[1,"col-12"],[3,"pageChange","itemsPerPageChange","currentPage","itemsPerPage","totalItems"],["tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row","mb-3"],[1,"form-label"],["name","customLocation",1,"form-select",3,"ngModelChange","ngModel"],["value",""],[1,"text-muted"],[1,"row"],[1,"col-md-6","mb-3"],[1,"text-danger"],["type","text","name","name","placeholder","\u0645\u062B\u0627\u0644: \u0645\u0633\u062A\u0634\u0641\u0649 \u0627\u0644\u0645\u0644\u0643 \u0641\u064A\u0635\u0644",1,"form-control",3,"ngModelChange","ngModel"],["name","type",1,"form-select",3,"ngModelChange","ngModel"],[1,"col-md-8","mb-3"],["type","text","name","address","placeholder","\u0645\u062B\u0627\u0644: \u0634\u0627\u0631\u0639 \u0641\u064A\u0635\u0644",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-4","mb-3"],["type","text","name","city","placeholder","\u0645\u062B\u0627\u0644: \u0646\u0627\u0628\u0644\u0633",1,"form-control",3,"ngModelChange","ngModel"],["type","tel","name","phoneNumber","placeholder","0501234567","dir","ltr",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-6","mb-3","d-flex","align-items-end"],[1,"form-check"],["type","checkbox","name","isActive","id","addIsActive",1,"form-check-input",3,"ngModelChange","ngModel"],["for","addIsActive",1,"form-check-label"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["class","modal-backdrop fade",3,"show",4,"ngIf"],["type","checkbox","name","isActive","id","editIsActive",1,"form-check-input",3,"ngModelChange","ngModel"],["for","editIsActive",1,"form-check-label"],[1,"fa-solid","fa-save","me-2"],[3,"value"],[1,"card","shadow-sm","rounded-xl","h-100","position-relative",3,"ngClass"],[1,"position-absolute","top-0","start-0","m-3","d-flex","gap-2"],["title","\u062A\u0639\u062F\u064A\u0644",1,"btn","btn-sm","btn-outline-primary","rounded-circle",2,"width","32px","height","32px","padding","0",3,"click"],[1,"fa-solid","fa-pen"],[1,"btn","btn-sm","rounded-circle",2,"width","32px","height","32px","padding","0",3,"click","title"],[1,"fa-solid"],["title","\u062D\u0630\u0641",1,"btn","btn-sm","btn-outline-danger","rounded-circle",2,"width","32px","height","32px","padding","0",3,"click"],[1,"fa-solid","fa-trash"],[1,"card-body","pt-5"],[1,"card-title","fw-bold","mb-2"],[1,"text-muted","small","mb-2"],[1,"fa-solid","fa-tag","me-1"],[1,"badge","bg-info","text-dark"],["class","text-muted small mb-2",4,"ngIf"],["dir","ltr","class","text-end",4,"ngIf"],[1,"small","mb-0"],[1,"badge"],[1,"fa-solid","fa-location-dot","me-1"],[1,"fa-solid","fa-city","me-1"],["dir","ltr",1,"text-end"],[1,"fa-solid","fa-phone","me-1"],[1,"text-center","text-muted","py-5"],[1,"fa-solid","fa-inbox","fa-3x","mb-3","d-block"],[1,"fs-5"],[1,"modal-backdrop","fade"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"button",2),T("click",function(){return n.goBack()}),x(3,"i",3),d(4," \u0631\u062C\u0648\u0639 "),l(),s(5,"button",4),T("click",function(){return n.openAddModal()}),x(6,"i",5),d(7," \u0625\u0636\u0627\u0641\u0629 \u0645\u0648\u0642\u0639 \u062C\u062F\u064A\u062F "),l()(),s(8,"div",6)(9,"div",7)(10,"div",8)(11,"span",9),x(12,"i",10),l(),s(13,"input",11),V("ngModelChange",function(a){return N(n.searchTerm,a)||(n.searchTerm=a),a}),T("ngModelChange",function(a){return n.searchTerm.set(a),n.onFilterChange()}),l()()(),s(14,"div",12)(15,"select",13),V("ngModelChange",function(a){return N(n.filterType,a)||(n.filterType=a),a}),T("ngModelChange",function(a){return n.filterType.set(a),n.onFilterChange()}),H(16,_8,2,2,"option",14),l()()(),s(17,"div",15),Te(18,b8,22,22,"div",16,g8,!1,C8,5,0,"div",17),l(),s(21,"app-pagination",18),T("pageChange",function(a){return n.onPageChange(a)})("itemsPerPageChange",function(a){return n.onItemsPerPageChange(a)}),l()(),s(22,"div",19)(23,"div",20)(24,"div",21)(25,"div",22)(26,"h5",23),d(27,"\u0625\u0636\u0627\u0641\u0629 \u0645\u0648\u0642\u0639 \u062C\u062F\u064A\u062F"),l(),s(28,"button",24),T("click",function(){return n.closeAddModal()}),l()(),s(29,"div",25)(30,"form")(31,"div",26)(32,"div",17)(33,"label",27),d(34,"\u0627\u062E\u062A\u0631 \u0645\u0646 \u0627\u0644\u0645\u0648\u0627\u0642\u0639 \u0627\u0644\u0645\u062E\u0635\u0635\u0629 (\u0627\u062E\u062A\u064A\u0627\u0631\u064A)"),l(),s(35,"select",28),V("ngModelChange",function(a){return N(n.selectedCustomLocationId,a)||(n.selectedCustomLocationId=a),a}),T("ngModelChange",function(a){return n.onCustomLocationSelected(a)}),s(36,"option",29),d(37,"-- \u0627\u0643\u062A\u0628 \u064A\u062F\u0648\u064A\u0627\u064B \u0623\u0648 \u0627\u062E\u062A\u0631 \u0645\u0648\u0642\u0639 \u0645\u062E\u0635\u0635 --"),l(),H(38,w8,2,2,"option",14),l(),s(39,"small",30),d(40,"\u0625\u0630\u0627 \u0627\u062E\u062A\u0631\u062A \u0645\u0648\u0642\u0639 \u0645\u062E\u0635\u0635\u060C \u0633\u064A\u062A\u0645 \u062A\u062D\u0648\u064A\u0644\u0647 \u0625\u0644\u0649 \u0645\u0648\u0642\u0639 \u0634\u0627\u0626\u0639"),l()()(),s(41,"div",31)(42,"div",32)(43,"label",27),d(44,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0648\u0642\u0639 "),s(45,"span",33),d(46,"*"),l()(),s(47,"input",34),V("ngModelChange",function(a){return N(n.locationForm.name,a)||(n.locationForm.name=a),a}),l()(),s(48,"div",32)(49,"label",27),d(50,"\u0646\u0648\u0639 \u0627\u0644\u0645\u0648\u0642\u0639 "),l(),s(51,"select",35),V("ngModelChange",function(a){return N(n.locationForm.type,a)||(n.locationForm.type=a),a}),H(52,S8,2,2,"option",14),l()()(),s(53,"div",31)(54,"div",36)(55,"label",27),d(56,"\u0627\u0644\u0639\u0646\u0648\u0627\u0646 "),l(),s(57,"input",37),V("ngModelChange",function(a){return N(n.locationForm.address,a)||(n.locationForm.address=a),a}),l()(),s(58,"div",38)(59,"label",27),d(60,"\u0627\u0644\u0645\u062F\u064A\u0646\u0629 "),l(),s(61,"input",39),V("ngModelChange",function(a){return N(n.locationForm.city,a)||(n.locationForm.city=a),a}),l()()(),s(62,"div",31)(63,"div",32)(64,"label",27),d(65,"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641 "),l(),s(66,"input",40),V("ngModelChange",function(a){return N(n.locationForm.phoneNumber,a)||(n.locationForm.phoneNumber=a),a}),l()(),s(67,"div",41)(68,"div",42)(69,"input",43),V("ngModelChange",function(a){return N(n.locationForm.isActive,a)||(n.locationForm.isActive=a),a}),l(),s(70,"label",44),d(71," \u0646\u0634\u0637 "),l()()()()()(),s(72,"div",45)(73,"button",46),T("click",function(){return n.closeAddModal()}),d(74,"\u0625\u0644\u063A\u0627\u0621"),l(),s(75,"button",47),T("click",function(){return n.addLocation()}),x(76,"i",5),d(77," \u0625\u0636\u0627\u0641\u0629 "),l()()()()(),H(78,T8,1,2,"div",48),s(79,"div",19)(80,"div",20)(81,"div",21)(82,"div",22)(83,"h5",23),d(84,"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0648\u0642\u0639"),l(),s(85,"button",24),T("click",function(){return n.closeEditModal()}),l()(),s(86,"div",25)(87,"form")(88,"div",31)(89,"div",32)(90,"label",27),d(91,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0648\u0642\u0639 "),s(92,"span",33),d(93,"*"),l()(),s(94,"input",34),V("ngModelChange",function(a){return N(n.locationForm.name,a)||(n.locationForm.name=a),a}),l()(),s(95,"div",32)(96,"label",27),d(97,"\u0646\u0648\u0639 \u0627\u0644\u0645\u0648\u0642\u0639 "),l(),s(98,"select",35),V("ngModelChange",function(a){return N(n.locationForm.type,a)||(n.locationForm.type=a),a}),H(99,E8,2,2,"option",14),l()()(),s(100,"div",31)(101,"div",36)(102,"label",27),d(103,"\u0627\u0644\u0639\u0646\u0648\u0627\u0646 "),l(),s(104,"input",37),V("ngModelChange",function(a){return N(n.locationForm.address,a)||(n.locationForm.address=a),a}),l()(),s(105,"div",38)(106,"label",27),d(107,"\u0627\u0644\u0645\u062F\u064A\u0646\u0629 "),l(),s(108,"input",39),V("ngModelChange",function(a){return N(n.locationForm.city,a)||(n.locationForm.city=a),a}),l()()(),s(109,"div",31)(110,"div",32)(111,"label",27),d(112,"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641 "),l(),s(113,"input",40),V("ngModelChange",function(a){return N(n.locationForm.phoneNumber,a)||(n.locationForm.phoneNumber=a),a}),l()(),s(114,"div",41)(115,"div",42)(116,"input",49),V("ngModelChange",function(a){return N(n.locationForm.isActive,a)||(n.locationForm.isActive=a),a}),l(),s(117,"label",50),d(118," \u0646\u0634\u0637 "),l()()()()()(),s(119,"div",45)(120,"button",46),T("click",function(){return n.closeEditModal()}),d(121,"\u0625\u0644\u063A\u0627\u0621"),l(),s(122,"button",47),T("click",function(){return n.updateLocation()}),x(123,"i",51),d(124," \u062D\u0641\u0638 \u0627\u0644\u062A\u063A\u064A\u064A\u0631\u0627\u062A "),l()()()()(),H(125,A8,1,2,"div",48)),e&2&&(m(13),R("ngModel",n.searchTerm),m(2),R("ngModel",n.filterType),m(),S("ngForOf",n.filterTypes),m(2),Ee(n.commonLocations()),m(3),S("currentPage",n.currentPage)("itemsPerPage",n.itemsPerPage)("totalItems",n.totalRecords),m(),dt("display",n.isAddModalOpen()?"block":"none"),fe("show",n.isAddModalOpen()),m(13),R("ngModel",n.selectedCustomLocationId),m(3),S("ngForOf",n.customLocations()),m(9),R("ngModel",n.locationForm.name),m(4),R("ngModel",n.locationForm.type),m(),S("ngForOf",n.locationTypes),m(5),R("ngModel",n.locationForm.address),m(4),R("ngModel",n.locationForm.city),m(5),R("ngModel",n.locationForm.phoneNumber),m(3),R("ngModel",n.locationForm.isActive),m(9),S("ngIf",n.isAddModalOpen()),m(),dt("display",n.isEditModalOpen()?"block":"none"),fe("show",n.isEditModalOpen()),m(15),R("ngModel",n.locationForm.name),m(4),R("ngModel",n.locationForm.type),m(),S("ngForOf",n.locationTypes),m(5),R("ngModel",n.locationForm.address),m(4),R("ngModel",n.locationForm.city),m(5),R("ngModel",n.locationForm.phoneNumber),m(3),R("ngModel",n.locationForm.isActive),m(9),S("ngIf",n.isEditModalOpen()))},dependencies:[Le,Ft,ai,kt,tt,Kt,Ot,Lt,et,Xn,At,ot,Xt,rt,$t,Mi],styles:[".modal.show[_ngcontent-%COMP%]{background-color:#00000080}.modal-backdrop.show[_ngcontent-%COMP%]{opacity:.5}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;color:#495057;border-bottom:2px solid #dee2e6}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.25rem .5rem}.card[_ngcontent-%COMP%]{border-radius:.5rem;box-shadow:0 .125rem .25rem #00000013}.input-group-text[_ngcontent-%COMP%]{border-left:none}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-right:none}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#ced4da;box-shadow:none}.input-group-text[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-color:#ced4da}"],changeDetection:0})};var M8=(i,t)=>t.value;function F8(i,t){if(i&1){let e=Q();x(0,"img",72),s(1,"button",73),T("click",function(){b(e);let r=h();return C(r.removeProfileImage())}),x(2,"i",74),l()}if(i&2){let e=h();S("src",e.userProfile().profileImageUrl,Lr)}}function k8(i,t){i&1&&(s(0,"div",7),x(1,"i",75),l())}function P8(i,t){if(i&1&&(s(0,"p",14),x(1,"i",76),s(2,"span",77),d(3),l()()),i&2){let e=h();m(3),z(e.userProfile().username)}}function D8(i,t){if(i&1&&(s(0,"option",41),d(1),l()),i&2){let e=t.$implicit;S("value",e.value),m(),z(e.label)}}function I8(i,t){if(i&1&&x(0,"div",78),i&2){let e=h();fe("show",e.isChangePasswordModalOpen())}}var Ns=class i{constructor(t,e,n,r){this.userService=t;this.globalVars=e;this.router=n;this.toastService=r;this.globalVars.setGlobalHeader("\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u062D\u0633\u0627\u0628")}isChangePasswordModalOpen=Z(!1);isLoading=Z(!1);educationLevelOptions=[{value:"EMI",label:"EMI - \u0637\u0648\u0627\u0631\u0626 \u0637\u0628\u064A\u0629 \u0645\u062A\u0648\u0633\u0637\u0629"},{value:"B",label:"B - \u0623\u0633\u0627\u0633\u064A"},{value:"I",label:"I - \u0645\u062A\u0648\u0633\u0637"},{value:"P",label:"P - \u0645\u0633\u0639\u0641"}];userProfile=Z({id:"",username:"",email:"",fullName:"",arabicName:"",phoneNumber:"",jobTitle:"",educationLevel:null,role:"driver",isActive:!0,isEmailVerified:!1,profileImageUrl:null,createdAt:"",updatedAt:"",driverId:"",amountOwed:0,driverStatus:"",isAccountCleared:!1});profileForm={arabicName:"",fullName:"",username:"",email:"",phoneNumber:"",jobTitle:"",educationLevel:""};passwordForm={currentPassword:"",newPassword:"",confirmPassword:""};ngOnInit(){this.loadCurrentUserProfile()}loadCurrentUserProfile(){this.isLoading.set(!0),this.userService.getCurrentUserProfile().subscribe({next:t=>{this.userProfile.set(t),console.log("Loaded profile:",t),console.log("Profile Signal:",this.userProfile()),this.loadProfileToForm(),this.isLoading.set(!1)},error:t=>{this.toastService.error(t.message),this.isLoading.set(!1)}})}getRoleLabel(t){return{admin:"\u0645\u062F\u064A\u0631 \u0627\u0644\u0646\u0638\u0627\u0645",driver:"\u0633\u0627\u0626\u0642"}[t]||t}loadProfileToForm(){let t=this.userProfile();t&&(this.profileForm={arabicName:t.arabicName||"",fullName:t.fullName||"",username:t.username||"",email:t.email||"",phoneNumber:t.phoneNumber||"",jobTitle:t.jobTitle||"",educationLevel:t.educationLevel||""})}cancelChanges(){this.loadProfileToForm(),this.toastService.info("\u062A\u0645 \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062A\u0639\u062F\u064A\u0644\u0627\u062A")}saveProfile(){if(!this.validateProfile())return;this.isLoading.set(!0);let t={arabicName:this.profileForm.arabicName,fullName:this.profileForm.fullName,username:this.profileForm.username,email:this.profileForm.email,phoneNumber:this.profileForm.phoneNumber,jobTitle:this.profileForm.jobTitle,educationLevel:this.profileForm.educationLevel||void 0};this.userService.updateProfile(t).subscribe({next:e=>{this.userProfile.set(e),this.loadProfileToForm(),this.toastService.success("\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0628\u0646\u062C\u0627\u062D"),this.isLoading.set(!1)},error:e=>{this.toastService.error(e.message),this.isLoading.set(!1)}})}validateProfile(){return this.profileForm.arabicName.trim()?this.profileForm.username.trim()?!0:(this.toastService.error("\u0627\u0644\u0631\u062C\u0627\u0621 \u0625\u062F\u062E\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645"),!1):(this.toastService.error("\u0627\u0644\u0631\u062C\u0627\u0621 \u0625\u062F\u062E\u0627\u0644 \u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064A"),!1)}openChangePasswordModal(){this.resetPasswordForm(),this.isChangePasswordModalOpen.set(!0)}closeChangePasswordModal(){this.isChangePasswordModalOpen.set(!1),this.resetPasswordForm()}changePassword(){this.validatePassword()&&(this.isLoading.set(!0),this.userService.changePassword(this.passwordForm.currentPassword,this.passwordForm.newPassword).subscribe({next:()=>{this.toastService.success("\u062A\u0645 \u062A\u063A\u064A\u064A\u0631 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0628\u0646\u062C\u0627\u062D"),this.closeChangePasswordModal(),this.isLoading.set(!1)},error:t=>{this.toastService.error(t.message),this.isLoading.set(!1)}}))}validatePassword(){return this.passwordForm.currentPassword?this.passwordForm.newPassword?this.passwordForm.newPassword.length<6?(this.toastService.error("\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u064A\u062C\u0628 \u0623\u0646 \u062A\u0643\u0648\u0646 6 \u0623\u062D\u0631\u0641 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644"),!1):this.passwordForm.newPassword!==this.passwordForm.confirmPassword?(this.toastService.error("\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u062C\u062F\u064A\u062F\u0629 \u063A\u064A\u0631 \u0645\u062A\u0637\u0627\u0628\u0642\u0629"),!1):this.passwordForm.currentPassword===this.passwordForm.newPassword?(this.toastService.error("\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u062C\u062F\u064A\u062F\u0629 \u064A\u062C\u0628 \u0623\u0646 \u062A\u0643\u0648\u0646 \u0645\u062E\u062A\u0644\u0641\u0629 \u0639\u0646 \u0627\u0644\u062D\u0627\u0644\u064A\u0629"),!1):!0:(this.toastService.error("\u0627\u0644\u0631\u062C\u0627\u0621 \u0625\u062F\u062E\u0627\u0644 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u062C\u062F\u064A\u062F\u0629"),!1):(this.toastService.error("\u0627\u0644\u0631\u062C\u0627\u0621 \u0625\u062F\u062E\u0627\u0644 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u062D\u0627\u0644\u064A\u0629"),!1)}resetPasswordForm(){this.passwordForm={currentPassword:"",newPassword:"",confirmPassword:""}}onImageSelected(t){let e=t.target.files[0];if(e){if(!e.type.startsWith("image/")){this.toastService.error("\u0627\u0644\u0631\u062C\u0627\u0621 \u0627\u062E\u062A\u064A\u0627\u0631 \u0635\u0648\u0631\u0629 \u0635\u062D\u064A\u062D\u0629");return}if(e.size>2*1024*1024){this.toastService.error("\u062D\u062C\u0645 \u0627\u0644\u0635\u0648\u0631\u0629 \u064A\u062C\u0628 \u0623\u0646 \u0644\u0627 \u064A\u062A\u062C\u0627\u0648\u0632 2 \u0645\u064A\u062C\u0627\u0628\u0627\u064A\u062A");return}this.isLoading.set(!0);let n=new FileReader;n.onload=r=>{let u={profileImageUrl:r.target.result,arabicName:this.profileForm.arabicName,fullName:this.profileForm.fullName,username:this.profileForm.username};this.userService.updateProfile(u).subscribe({next:p=>{this.userProfile.set(p),this.toastService.success("\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0634\u062E\u0635\u064A\u0629"),this.isLoading.set(!1)},error:p=>{this.toastService.error(p.message),this.isLoading.set(!1)}})},n.readAsDataURL(e)}}removeProfileImage(){this.isLoading.set(!0);let t={profileImageUrl:null};this.userService.updateProfile(t).subscribe({next:e=>{this.userProfile.set(e),this.toastService.info("\u062A\u0645 \u0625\u0632\u0627\u0644\u0629 \u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0634\u062E\u0635\u064A\u0629"),this.isLoading.set(!1)},error:e=>{this.toastService.error(e.message),this.isLoading.set(!1)}})}goBack(){this.router.navigate(["/admin/admin-dashboard"])}static \u0275fac=function(e){return new(e||i)(G(Rs),G(ft),G(Xe),G(Ye))};static \u0275cmp=Oe({type:i,selectors:[["app-profile"]],decls:128,vars:20,consts:[["fileInput",""],["dir","rtl",1,"container","py-4","px-3","px-md-5","bg-light","min-vh-100"],[1,"row","justify-content-center"],[1,"col-12","col-sm-10","col-md-8","col-lg-7","col-xl-6"],[1,"card","shadow-lg","mb-4","border-0","rounded-4"],[1,"card-body","p-4","text-center","bg-white","rounded-4"],[1,"position-relative","d-inline-block","mb-3"],[1,"rounded-circle","bg-secondary","d-flex","align-items-center","justify-content-center","profile-img-lg",2,"width","120px","height","120px","border","5px solid #fff","box-shadow","0 0 10px rgba(0, 0, 0, 0.1)"],["type","file","accept","image/*",1,"d-none",3,"change"],[1,"btn","btn-primary","rounded-circle","position-absolute","bottom-0","end-0","p-1","edit-img-btn",3,"click"],[1,"fa-solid","fa-pen",2,"font-size","0.8rem"],[1,"h4","fw-bold","text-dark","mb-1","mt-3"],[1,"text-primary","mb-1","fw-semibold"],[1,"text-muted","d-block","mb-2"],[1,"text-secondary","small","mb-0"],[1,"card-body","p-4"],[1,"h5","fw-bold","text-dark","mb-4","border-bottom","pb-2"],[1,"fa-solid","fa-address-card","me-2","text-primary"],[1,"row","g-3"],[1,"col-12","col-md-6"],["for","arabicName",1,"form-label","fw-medium"],[1,"text-danger"],["type","text","id","arabicName","name","arabicName","placeholder","\u0645\u062B\u0627\u0644: \u0623\u062D\u0645\u062F \u0645\u062D\u0645\u062F",1,"form-control",3,"ngModelChange","ngModel"],["for","fullName",1,"form-label","fw-medium"],["type","text","id","fullName","name","fullName","placeholder","Example: Ahmad Mohammad","dir","ltr",1,"form-control",3,"ngModelChange","ngModel"],["for","username",1,"form-label","fw-medium"],[1,"input-group"],[1,"input-group-text","bg-light"],[1,"fa-solid","fa-user"],["type","text","id","username","name","username","placeholder","username","dir","ltr",1,"form-control",3,"ngModelChange","ngModel"],["for","email",1,"form-label","fw-medium"],[1,"fa-solid","fa-envelope"],["type","email","id","email","name","email","placeholder","example@mail.com","dir","ltr",1,"form-control",3,"ngModelChange","ngModel"],["for","phoneNumber",1,"form-label","fw-medium"],[1,"fa-solid","fa-phone"],["type","tel","id","phoneNumber","name","phoneNumber","placeholder","05XXXXXXXX","dir","ltr",1,"form-control",3,"ngModelChange","ngModel"],["for","jobTitle",1,"form-label","fw-medium"],["type","text","id","jobTitle","name","jobTitle","placeholder","\u0645\u062B\u0627\u0644: \u0633\u0627\u0626\u0642 \u0625\u0633\u0639\u0627\u0641",1,"form-control",3,"ngModelChange","ngModel"],["for","educationLevel",1,"form-label","fw-medium"],["id","educationLevel","name","educationLevel",1,"form-select",3,"ngModelChange","ngModel"],["value",""],[3,"value"],[1,"card","shadow-lg","mb-5","border-0","rounded-4"],[1,"fa-solid","fa-lock","me-2","text-primary"],[1,"btn","btn-outline-primary","d-flex","justify-content-between","align-items-center","w-100","p-3","rounded-3",3,"click"],[1,"fw-semibold"],[1,"fa-solid","fa-chevron-left"],[1,"row","g-3","justify-content-center","mt-4","mb-5"],[1,"col-12","col-sm-6","d-grid"],[1,"btn","btn-outline-secondary","btn-lg","rounded-3","fw-semibold",3,"click"],[1,"btn","btn-primary","btn-lg","rounded-3","fw-semibold",3,"click"],[1,"fa-solid","fa-save","me-2"],["tabindex","-1","role","dialog","aria-labelledby","changePasswordModalLabel",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","rounded-4","shadow-lg"],[1,"modal-header","bg-primary","text-white","border-0","rounded-top-4"],["id","changePasswordModalLabel",1,"modal-title"],[1,"fa-solid","fa-key","me-2"],["type","button","aria-label","\u0625\u063A\u0644\u0627\u0642",1,"btn-close","btn-close-white",3,"click"],[1,"modal-body","p-4"],["role","alert",1,"alert","alert-info","border-0","rounded-3"],[1,"fa-solid","fa-shield-halved","me-2"],[1,"mb-3"],[1,"form-label","fw-medium"],["type","password","name","currentPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"form-control",3,"ngModelChange","ngModel"],["type","password","name","newPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-muted"],["type","password","name","confirmPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer","justify-content-between","p-3","border-top-0"],["type","button",1,"btn","btn-outline-secondary","rounded-3",3,"click"],["type","button",1,"btn","btn-primary","rounded-3",3,"click"],["class","modal-backdrop fade",3,"show",4,"ngIf"],["alt","\u0635\u0648\u0631\u0629 \u0627\u0644\u0645\u0644\u0641 \u0627\u0644\u0634\u062E\u0635\u064A",1,"rounded-circle","object-fit-cover","profile-img-lg",2,"width","120px","height","120px","border","5px solid #fff","box-shadow","0 0 10px rgba(0, 0, 0, 0.1)",3,"src"],["type","button","title","\u0625\u0632\u0627\u0644\u0629 \u0627\u0644\u0635\u0648\u0631\u0629",1,"btn","btn-danger","btn-sm","rounded-circle","position-absolute","top-0","start-0","p-0","delete-img-btn",3,"click"],[1,"fa-solid","fa-times",2,"font-size","12px"],[1,"fa-solid","fa-user","text-white",2,"font-size","50px"],[1,"fa-solid","fa-at","me-1","text-primary"],["dir","ltr"],[1,"modal-backdrop","fade"]],template:function(e,n){if(e&1){let r=Q();s(0,"div",1)(1,"main",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),H(6,F8,3,1)(7,k8,2,0,"div",7),s(8,"input",8,0),T("change",function(u){return b(r),C(n.onImageSelected(u))}),l(),s(10,"button",9),T("click",function(){b(r);let u=Rr(9);return C(u.click())}),x(11,"i",10),l()(),s(12,"h2",11),d(13),l(),s(14,"p",12),d(15),l(),s(16,"small",13),d(17,"\u0627\u0644\u062D\u062F \u0627\u0644\u0623\u0642\u0635\u0649: 2 \u0645\u064A\u062C\u0627\u0628\u0627\u064A\u062A"),l(),H(18,P8,4,1,"p",14),l()(),s(19,"div",4)(20,"div",15)(21,"h3",16),x(22,"i",17),d(23," \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0634\u062E\u0635\u064A\u0629 "),l(),s(24,"form")(25,"div",18)(26,"div",19)(27,"label",20),d(28,"\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064A "),s(29,"span",21),d(30,"*"),l()(),s(31,"input",22),V("ngModelChange",function(u){return b(r),N(n.profileForm.arabicName,u)||(n.profileForm.arabicName=u),C(u)}),l()(),s(32,"div",19)(33,"label",23),d(34,"\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0625\u0646\u062C\u0644\u064A\u0632\u064A"),l(),s(35,"input",24),V("ngModelChange",function(u){return b(r),N(n.profileForm.fullName,u)||(n.profileForm.fullName=u),C(u)}),l()(),s(36,"div",19)(37,"label",25),d(38,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 "),s(39,"span",21),d(40,"*"),l()(),s(41,"div",26)(42,"span",27),x(43,"i",28),l(),s(44,"input",29),V("ngModelChange",function(u){return b(r),N(n.profileForm.username,u)||(n.profileForm.username=u),C(u)}),l()()(),s(45,"div",19)(46,"label",30),d(47,"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"),l(),s(48,"div",26)(49,"span",27),x(50,"i",31),l(),s(51,"input",32),V("ngModelChange",function(u){return b(r),N(n.profileForm.email,u)||(n.profileForm.email=u),C(u)}),l()()(),s(52,"div",19)(53,"label",33),d(54,"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641"),l(),s(55,"div",26)(56,"span",27),x(57,"i",34),l(),s(58,"input",35),V("ngModelChange",function(u){return b(r),N(n.profileForm.phoneNumber,u)||(n.profileForm.phoneNumber=u),C(u)}),l()()(),s(59,"div",19)(60,"label",36),d(61,"\u0627\u0644\u0648\u0638\u064A\u0641\u0629"),l(),s(62,"input",37),V("ngModelChange",function(u){return b(r),N(n.profileForm.jobTitle,u)||(n.profileForm.jobTitle=u),C(u)}),l()(),s(63,"div",19)(64,"label",38),d(65,"\u0627\u0644\u0645\u0633\u062A\u0648\u0649 \u0627\u0644\u062A\u0639\u0644\u064A\u0645\u064A"),l(),s(66,"select",39),V("ngModelChange",function(u){return b(r),N(n.profileForm.educationLevel,u)||(n.profileForm.educationLevel=u),C(u)}),s(67,"option",40),d(68,"-- \u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0633\u062A\u0648\u0649 --"),l(),Te(69,D8,2,2,"option",41,M8),l()()()()()(),s(71,"div",42)(72,"div",15)(73,"h3",16),x(74,"i",43),d(75," \u0627\u0644\u0623\u0645\u0627\u0646 "),l(),s(76,"button",44),T("click",function(){return b(r),C(n.openChangePasswordModal())}),s(77,"span",45),d(78,"\u062A\u063A\u064A\u064A\u0631 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"),l(),x(79,"i",46),l()()(),s(80,"div",47)(81,"div",48)(82,"button",49),T("click",function(){return b(r),C(n.cancelChanges())}),d(83," \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062A\u0639\u062F\u064A\u0644\u0627\u062A "),l()(),s(84,"div",48)(85,"button",50),T("click",function(){return b(r),C(n.saveProfile())}),x(86,"i",51),d(87," \u062D\u0641\u0638 \u0627\u0644\u062A\u063A\u064A\u064A\u0631\u0627\u062A "),l()()()()()(),s(88,"div",52)(89,"div",53)(90,"div",54)(91,"div",55)(92,"h5",56),x(93,"i",57),d(94,"\u062A\u063A\u064A\u064A\u0631 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"),l(),s(95,"button",58),T("click",function(){return b(r),C(n.closeChangePasswordModal())}),l()(),s(96,"div",59)(97,"div",60),x(98,"i",61),d(99," **\u0645\u0644\u0627\u062D\u0638\u0629 \u0627\u0644\u0623\u0645\u0627\u0646:** \u064A\u062C\u0628 \u0625\u062F\u062E\u0627\u0644 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u062D\u0627\u0644\u064A\u0629 \u0644\u0644\u062A\u062D\u0642\u0642 \u0645\u0646 \u0647\u0648\u064A\u062A\u0643. "),l(),s(100,"form")(101,"div",62)(102,"label",63),d(103,"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u062D\u0627\u0644\u064A\u0629 "),s(104,"span",21),d(105,"*"),l()(),s(106,"input",64),V("ngModelChange",function(u){return b(r),N(n.passwordForm.currentPassword,u)||(n.passwordForm.currentPassword=u),C(u)}),l()(),s(107,"div",62)(108,"label",63),d(109,"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u062C\u062F\u064A\u062F\u0629 "),s(110,"span",21),d(111,"*"),l()(),s(112,"input",65),V("ngModelChange",function(u){return b(r),N(n.passwordForm.newPassword,u)||(n.passwordForm.newPassword=u),C(u)}),l(),s(113,"small",66),d(114,"\u064A\u062C\u0628 \u0623\u0646 \u062A\u0643\u0648\u0646 **6 \u0623\u062D\u0631\u0641** \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644."),l()(),s(115,"div",62)(116,"label",63),d(117,"\u062A\u0623\u0643\u064A\u062F \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u062C\u062F\u064A\u062F\u0629 "),s(118,"span",21),d(119,"*"),l()(),s(120,"input",67),V("ngModelChange",function(u){return b(r),N(n.passwordForm.confirmPassword,u)||(n.passwordForm.confirmPassword=u),C(u)}),l()()()(),s(121,"div",68)(122,"button",69),T("click",function(){return b(r),C(n.closeChangePasswordModal())}),d(123,"\u0625\u0644\u063A\u0627\u0621"),l(),s(124,"button",70),T("click",function(){return b(r),C(n.changePassword())}),x(125,"i",51),d(126," \u062D\u0641\u0638 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 "),l()()()()(),H(127,I8,1,2,"div",71)}if(e&2){let r;m(6),le(n.userProfile()&&((r=n.userProfile())!=null&&r.profileImageUrl)?6:7),m(7),z(n.userProfile().arabicName),m(2),z(n.getRoleLabel(n.userProfile().role)),m(3),le(n.userProfile().username?18:-1),m(13),R("ngModel",n.profileForm.arabicName),m(4),R("ngModel",n.profileForm.fullName),m(9),R("ngModel",n.profileForm.username),m(7),R("ngModel",n.profileForm.email),m(7),R("ngModel",n.profileForm.phoneNumber),m(4),R("ngModel",n.profileForm.jobTitle),m(4),R("ngModel",n.profileForm.educationLevel),m(3),Ee(n.educationLevelOptions),m(19),dt("display",n.isChangePasswordModalOpen()?"block":"none"),fe("show",n.isChangePasswordModalOpen()),Pn("aria-hidden",!n.isChangePasswordModalOpen()),m(18),R("ngModel",n.passwordForm.currentPassword),m(6),R("ngModel",n.passwordForm.newPassword),m(8),R("ngModel",n.passwordForm.confirmPassword),m(7),S("ngIf",n.isChangePasswordModalOpen())}},dependencies:[Le,kt,tt,Kt,Ot,Lt,et,At,ot,Xt,rt,$t],styles:[".min-vh-100[_ngcontent-%COMP%]{min-height:100vh}.container[_ngcontent-%COMP%]{padding-bottom:24px}.card[_ngcontent-%COMP%]{border:none;transition:all .3s ease}.shadow-lg[_ngcontent-%COMP%]{box-shadow:0 .5rem 1rem #00000026!important}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#0d6efd;box-shadow:0 0 0 .25rem #0d6efd40}.form-control[_ngcontent-%COMP%]:disabled{background-color:#e9ecef;cursor:not-allowed}.profile-img-lg[_ngcontent-%COMP%]{transition:transform .3s ease}.edit-img-btn[_ngcontent-%COMP%]{width:32px;height:32px;font-size:1rem;display:flex;align-items:center;justify-content:center;border:3px solid #fff}.delete-img-btn[_ngcontent-%COMP%]{width:28px;height:28px;display:flex;align-items:center;justify-content:center}.modal-header[_ngcontent-%COMP%]{background-color:var(--bs-primary);color:#fff}.modal-content[_ngcontent-%COMP%]{border:none}.btn-close-white[_ngcontent-%COMP%]{filter:invert(1) grayscale(100%) brightness(200%)}.alert-info[_ngcontent-%COMP%]{color:#055160;background-color:#cff4fc}.input-group-text[_ngcontent-%COMP%]{border-right:none}.modal-backdrop.show[_ngcontent-%COMP%]{z-index:1050}"],changeDetection:0})};function O8(i,t){i&1&&(s(0,"div",14)(1,"div",15)(2,"span",16),d(3,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),l()()())}function L8(i,t){if(i&1){let e=Q();s(0,"div",22),T("click",function(){let r=b(e).$implicit,a=h(2);return C(a.selectVehicle(r.id))}),s(1,"div",23),x(2,"i",24),l(),s(3,"div",25)(4,"p",26),d(5),l(),s(6,"p",27),d(7),l()(),s(8,"div",28)(9,"span",29),d(10),l()()()}if(i&2){let e=t.$implicit,n=h(2);fe("vehicle-card-selected",n.selectedVehicleId()===e.id),m(),fe("bg-primary-subtle",n.selectedVehicleId()===e.id)("bg-light",n.selectedVehicleId()!==e.id),m(),fe("text-primary",n.selectedVehicleId()===e.id)("text-secondary",n.selectedVehicleId()!==e.id),m(3),z(e.vehicleName),m(2),q("\u0631\u0642\u0645: ",e.vehicleId,""),m(2),S("ngClass",n.getStatusBadgeClass(e.status)),m(),q(" ",e.status," ")}}function R8(i,t){i&1&&(s(0,"div",30)(1,"div",31),x(2,"i",32),l(),s(3,"p",33),d(4,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u0631\u0643\u0628\u0627\u062A \u0645\u0637\u0627\u0628\u0642\u0629"),l(),s(5,"p",34),d(6,"\u062C\u0631\u0628 \u0645\u0635\u0637\u0644\u062D \u0628\u062D\u062B \u0645\u062E\u062A\u0644\u0641"),l()())}function N8(i,t){if(i&1){let e=Q();s(0,"li",38)(1,"button",49),T("click",function(){b(e);let r=h(3);return C(r.goToPage(1))}),d(2,"1"),l()()}}function V8(i,t){i&1&&(s(0,"li",50)(1,"span",44),d(2,"..."),l()())}function B8(i,t){if(i&1){let e=Q();s(0,"li",38)(1,"button",49),T("click",function(){b(e);let r=h(3);return C(r.previousPage())}),d(2),l()()}if(i&2){let e=h(3);m(2),z(e.currentPage()-1)}}function U8(i,t){if(i&1){let e=Q();s(0,"li",38)(1,"button",49),T("click",function(){b(e);let r=h(3);return C(r.nextPage())}),d(2),l()()}if(i&2){let e=h(3);m(2),z(e.currentPage()+1)}}function W8(i,t){i&1&&(s(0,"li",50)(1,"span",44),d(2,"..."),l()())}function j8(i,t){if(i&1){let e=Q();s(0,"li",38)(1,"button",49),T("click",function(){b(e);let r=h(3);return C(r.goToPage(r.totalPages()))}),d(2),l()()}if(i&2){let e=h(3);m(2),z(e.totalPages())}}function H8(i,t){if(i&1){let e=Q();s(0,"div",35)(1,"nav",36)(2,"ul",37)(3,"li",38)(4,"button",39),T("click",function(){b(e);let r=h(2);return C(r.previousPage())}),x(5,"i",40),l()(),H(6,N8,3,0,"li",41)(7,V8,3,0,"li",42)(8,B8,3,1,"li",41),s(9,"li",43)(10,"span",44),d(11),l()(),H(12,U8,3,1,"li",41)(13,W8,3,0,"li",42)(14,j8,3,1,"li",41),s(15,"li",38)(16,"button",45),T("click",function(){b(e);let r=h(2);return C(r.nextPage())}),x(17,"i",46),l()()()(),s(18,"div",47)(19,"small",48),d(20),l()()()}if(i&2){let e=h(2);m(3),fe("disabled",!e.hasPreviousPage()),m(),S("disabled",!e.hasPreviousPage()),m(2),S("ngIf",e.currentPage()>2),m(),S("ngIf",e.currentPage()>3),m(),S("ngIf",e.hasPreviousPage()),m(3),z(e.currentPage()),m(),S("ngIf",e.hasNextPage()),m(),S("ngIf",e.currentPage()<e.totalPages()-2),m(),S("ngIf",e.currentPage()<e.totalPages()-1),m(),fe("disabled",!e.hasNextPage()),m(),S("disabled",!e.hasNextPage()),m(4),ya(" \u0639\u0631\u0636 ",(e.currentPage()-1)*e.itemsPerPage+1," - ",e.Math.min(e.currentPage()*e.itemsPerPage,e.filteredVehicles().length)," \u0645\u0646 ",e.filteredVehicles().length," ")}}function z8(i,t){if(i&1&&(s(0,"div",17)(1,"div",18),H(2,L8,11,14,"div",19)(3,R8,7,0,"div",20),l(),H(4,H8,21,16,"div",21),l()),i&2){let e=h();m(2),S("ngForOf",e.paginatedVehicles()),m(),S("ngIf",e.filteredVehicles().length===0),m(),S("ngIf",e.filteredVehicles().length>e.itemsPerPage)}}function G8(i,t){i&1&&(s(0,"span"),d(1,"\u062A\u062E\u0637\u064A"),l())}function $8(i,t){i&1&&(s(0,"span"),d(1,"\u062A\u062E\u0637\u064A (\u0648\u0636\u0639 \u0627\u0644\u0645\u062F\u064A\u0631)"),l())}function Z8(i,t){if(i&1){let e=Q();s(0,"button",51),T("click",function(){b(e);let r=h();return C(r.skipSelection())}),H(1,G8,2,0,"span",52)(2,$8,2,0,"span",52),l()}if(i&2){let e=h();m(),S("ngIf",!e.authService.isAuthenticated()),m(),S("ngIf",e.authService.isAuthenticated()&&e.authService.isAdmin())}}var od=class i{constructor(t,e,n,r,a){this.vehicleService=t;this.router=e;this.toastService=n;this.authService=r;this.vehicleCookieService=a}vehicles=Z([]);isLoading=Z(!1);searchTerm=Z("");selectedVehicleId=Z(null);canSkip=We(()=>!this.authService.isAuthenticated()||this.authService.isAdmin());currentPage=Z(1);itemsPerPage=10;Math=Math;filteredVehicles=We(()=>{let t=this.searchTerm().toLowerCase();return t?this.vehicles().filter(e=>e.vehicleId.toLowerCase().includes(t)||e.vehicleName.toLowerCase().includes(t)):this.vehicles()});paginatedVehicles=We(()=>{let t=this.filteredVehicles(),e=(this.currentPage()-1)*this.itemsPerPage,n=e+this.itemsPerPage;return t.slice(e,n)});totalPages=We(()=>Math.ceil(this.filteredVehicles().length/this.itemsPerPage));hasPreviousPage=We(()=>this.currentPage()>1);hasNextPage=We(()=>this.currentPage()<this.totalPages());ngOnInit(){this.loadVehicles()}loadVehicles(){this.isLoading.set(!0),this.vehicleService.getVehicles({}).subscribe({next:t=>{this.vehicles.set(t.data),this.isLoading.set(!1)},error:t=>{console.error("Error loading vehicles:",t),this.toastService.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A"),this.isLoading.set(!1)}})}selectVehicle(t){this.selectedVehicleId.set(t)}onSearchChange(){this.currentPage.set(1)}goToPage(t){t>=1&&t<=this.totalPages()&&this.currentPage.set(t)}previousPage(){this.hasPreviousPage()&&this.currentPage.set(this.currentPage()-1)}nextPage(){this.hasNextPage()&&this.currentPage.set(this.currentPage()+1)}confirmSelection(){let t=this.selectedVehicleId();if(!t){this.toastService.error("\u0627\u0644\u0631\u062C\u0627\u0621 \u0627\u062E\u062A\u064A\u0627\u0631 \u0645\u0631\u0643\u0628\u0629");return}this.setCookie("selected_vehicle_id",t,365*100);let e=this.vehicles().find(n=>n.id===t);e&&this.toastService.success(`\u062A\u0645 \u0627\u062E\u062A\u064A\u0627\u0631 \u0627\u0644\u0645\u0631\u0643\u0628\u0629: ${e.vehicleName}`),this.router.navigate(["/login"])}skipSelection(){if(this.vehicleCookieService.setSkipSelection(),!this.authService.isAuthenticated()){this.toastService.success("\u062C\u0627\u0631\u064A \u0627\u0644\u0627\u0646\u062A\u0642\u0627\u0644 \u0625\u0644\u0649 \u0635\u0641\u062D\u0629 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644"),this.router.navigate(["/login"]);return}if(this.authService.isAdmin()){this.toastService.success("\u062A\u0645 \u062A\u062E\u0637\u064A \u0627\u062E\u062A\u064A\u0627\u0631 \u0627\u0644\u0645\u0631\u0643\u0628\u0629 - \u0648\u0636\u0639 \u0627\u0644\u0645\u062F\u064A\u0631"),this.router.navigate(["/admin/admin-dashboard"]);return}this.toastService.error("\u063A\u064A\u0631 \u0645\u0635\u0631\u062D \u0644\u0643 \u0628\u062A\u062E\u0637\u064A \u0627\u062E\u062A\u064A\u0627\u0631 \u0627\u0644\u0645\u0631\u0643\u0628\u0629")}setCookie(t,e,n){let r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);let a=`expires=${r.toUTCString()}`;document.cookie=`${t}=${e};${a};path=/`}getStatusBadgeClass(t){switch(t){case"\u0645\u062A\u0627\u062D\u0629":return"text-bg-success";case"\u0641\u064A \u0627\u0644\u062E\u062F\u0645\u0629":return"text-bg-info";case"\u0635\u064A\u0627\u0646\u0629":return"text-bg-warning";default:return"text-bg-secondary"}}static \u0275fac=function(e){return new(e||i)(G(oi),G(Xe),G(Ye),G(Pt),G(Oi))};static \u0275cmp=Oe({type:i,selectors:[["app-vehicle-selection"]],decls:16,vars:5,consts:[[1,"vehicle-selection-wrapper","min-vh-100","d-flex","flex-column","bg-light"],[1,"bg-white","border-bottom","py-3","px-4"],[1,"text-center","fw-bold","fs-4","mb-0","text-dark"],[1,"bg-white","border-bottom","py-3","px-4","sticky-top"],[1,"input-group","shadow-sm","rounded-3"],[1,"input-group-text","bg-light","border-0","rounded-start-3","ps-4"],[1,"fa","fa-search","text-muted"],["type","text","placeholder","\u0627\u0628\u062D\u062B \u0628\u0627\u0644\u0627\u0633\u0645 \u0623\u0648 \u0627\u0644\u0631\u0642\u0645...",1,"form-control","bg-light","border-0","rounded-end-3",3,"ngModelChange","ngModel"],["class","d-flex justify-content-center align-items-center py-5",4,"ngIf"],["class","flex-grow-1 px-4 py-3 overflow-auto",4,"ngIf"],[1,"bg-white","bg-opacity-90","backdrop-blur","border-top","py-3","px-4","sticky-bottom"],[1,"d-flex","flex-column","gap-2"],[1,"btn","btn-primary","btn-lg","w-100","fw-bold","shadow-lg","rounded-3","py-3",2,"background","linear-gradient(135deg, #667eea 0%, #764ba2 100%)","border","none",3,"click","disabled"],["class","btn btn-link btn-lg w-100 text-primary fw-semibold text-decoration-none py-2",3,"click",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center","py-5"],["role","status",1,"spinner-border","text-primary",2,"width","3rem","height","3rem"],[1,"visually-hidden"],[1,"flex-grow-1","px-4","py-3","overflow-auto"],[1,"d-flex","flex-column","gap-3"],["class","vehicle-card bg-white rounded-3 p-3 d-flex align-items-center gap-3 cursor-pointer position-relative",3,"vehicle-card-selected","click",4,"ngFor","ngForOf"],["class","text-center py-5",4,"ngIf"],["class","pagination-container mt-3",4,"ngIf"],[1,"vehicle-card","bg-white","rounded-3","p-3","d-flex","align-items-center","gap-3","cursor-pointer","position-relative",3,"click"],[1,"vehicle-icon","d-flex","align-items-center","justify-content-center","rounded-3","flex-shrink-0",2,"width","48px","height","48px"],[1,"fa","fa-truck-medical","fs-4"],[1,"flex-grow-1"],[1,"fw-bold","mb-1","text-dark","text-truncate"],[1,"text-muted","small","mb-0"],[1,"flex-shrink-0"],[1,"badge","rounded-pill","px-3","py-2",3,"ngClass"],[1,"text-center","py-5"],[1,"d-flex","align-items-center","justify-content-center","rounded-circle","bg-primary","bg-opacity-10","mx-auto","mb-3",2,"width","64px","height","64px"],[1,"fa","fa-search-minus","fs-2","text-primary"],[1,"fw-semibold","fs-5","text-dark"],[1,"text-muted","small"],[1,"pagination-container","mt-3"],["aria-label","Vehicle pagination"],[1,"pagination","pagination-sm","justify-content-center","mb-0"],[1,"page-item"],[1,"page-link","rounded-start-3",3,"click","disabled"],[1,"fa","fa-chevron-right"],["class","page-item",4,"ngIf"],["class","page-item disabled",4,"ngIf"],[1,"page-item","active"],[1,"page-link"],[1,"page-link","rounded-end-3",3,"click","disabled"],[1,"fa","fa-chevron-left"],[1,"text-center","mt-2"],[1,"text-muted"],[1,"page-link",3,"click"],[1,"page-item","disabled"],[1,"btn","btn-link","btn-lg","w-100","text-primary","fw-semibold","text-decoration-none","py-2",3,"click"],[4,"ngIf"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"h1",2),d(3,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0631\u0643\u0628\u0629"),l()(),s(4,"div",3)(5,"div",4)(6,"span",5),x(7,"i",6),l(),s(8,"input",7),V("ngModelChange",function(a){return N(n.searchTerm,a)||(n.searchTerm=a),a}),T("ngModelChange",function(a){return n.searchTerm.set(a),n.onSearchChange()}),l()()(),H(9,O8,4,0,"div",8)(10,z8,5,3,"div",9),s(11,"div",10)(12,"div",11)(13,"button",12),T("click",function(){return n.confirmSelection()}),d(14," \u062A\u0623\u0643\u064A\u062F \u0627\u0644\u0627\u062E\u062A\u064A\u0627\u0631 "),l(),H(15,Z8,3,2,"button",13),l()()()),e&2&&(m(8),R("ngModel",n.searchTerm),m(),S("ngIf",n.isLoading()),m(),S("ngIf",!n.isLoading()),m(3),S("disabled",!n.selectedVehicleId()),m(2),S("ngIf",n.canSkip()))},dependencies:[Le,Ft,ai,kt,tt,et,ot,rt],styles:[".vehicle-selection-wrapper[_ngcontent-%COMP%]{background-color:#f7f8fa;position:relative}.sticky-top[_ngcontent-%COMP%]{position:sticky;top:0;z-index:10}.sticky-bottom[_ngcontent-%COMP%]{position:sticky;bottom:0;z-index:10}.backdrop-blur[_ngcontent-%COMP%]{backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}.input-group[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{height:56px;border:none}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:56px;border:none;font-size:1rem}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{box-shadow:none;background-color:#f1f3f5}.vehicle-card[_ngcontent-%COMP%]{min-height:80px;border:2px solid #e9ecef;box-shadow:0 1px 3px #0000000d;transition:all .3s ease;cursor:pointer}.vehicle-card[_ngcontent-%COMP%]:hover{border-color:#667eea;box-shadow:0 4px 12px #667eea26;transform:translateY(-2px)}.vehicle-card-selected[_ngcontent-%COMP%]{border-color:#667eea!important;border-width:2px!important;box-shadow:0 0 0 4px #667eea1a,0 8px 16px #667eea33!important}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.vehicle-icon[_ngcontent-%COMP%]{transition:all .3s ease}.badge.bg-success-subtle[_ngcontent-%COMP%]{background-color:#10b9811a!important;color:#059669!important;font-weight:600;font-size:.75rem}.badge.bg-info-subtle[_ngcontent-%COMP%]{background-color:#3b82f61a!important;color:#2563eb!important;font-weight:600;font-size:.75rem}.badge.bg-warning-subtle[_ngcontent-%COMP%]{background-color:#f59e0b1a!important;color:#d97706!important;font-weight:600;font-size:.75rem}.badge.text-bg-success[_ngcontent-%COMP%]{background-color:#10b9811a!important;color:#059669!important;font-weight:600;font-size:.75rem}.badge.text-bg-info[_ngcontent-%COMP%]{background-color:#3b82f61a!important;color:#2563eb!important;font-weight:600;font-size:.75rem}.badge.text-bg-warning[_ngcontent-%COMP%]{background-color:#f59e0b1a!important;color:#d97706!important;font-weight:600;font-size:.75rem}.btn-primary.shadow-lg[_ngcontent-%COMP%]{box-shadow:0 10px 25px #667eea4d!important}.btn-primary.shadow-lg[_ngcontent-%COMP%]:hover{box-shadow:0 12px 30px #667eea66!important;transform:translateY(-2px)}.btn-primary.shadow-lg[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;box-shadow:none!important;transform:none!important}.spinner-border[_ngcontent-%COMP%]{border-width:3px}.overflow-auto[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.overflow-auto[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.overflow-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#667eea;border-radius:10px}.overflow-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#5a42f5}@media (max-width: 768px){.vehicle-card[_ngcontent-%COMP%]{min-height:72px}.vehicle-icon[_ngcontent-%COMP%]{width:40px!important;height:40px!important}.vehicle-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem!important}.input-group[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:48px;font-size:.9rem}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.vehicle-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.pagination-container[_ngcontent-%COMP%]{padding:0 1rem}.pagination[_ngcontent-%COMP%]{--bs-pagination-padding-x: .75rem;--bs-pagination-padding-y: .5rem;--bs-pagination-font-size: .875rem;--bs-pagination-color: #667eea;--bs-pagination-bg: #ffffff;--bs-pagination-border-width: 1px;--bs-pagination-border-color: #e9ecef;--bs-pagination-border-radius: .5rem;--bs-pagination-hover-color: #5a42f5;--bs-pagination-hover-bg: #f8f9ff;--bs-pagination-hover-border-color: #667eea;--bs-pagination-focus-color: #5a42f5;--bs-pagination-focus-bg: #f8f9ff;--bs-pagination-focus-box-shadow: 0 0 0 .2rem rgba(102, 126, 234, .25);--bs-pagination-active-color: #fff;--bs-pagination-active-bg: #667eea;--bs-pagination-active-border-color: #667eea;--bs-pagination-disabled-color: #adb5bd;--bs-pagination-disabled-bg: #f8f9fa;--bs-pagination-disabled-border-color: #e9ecef;gap:.25rem}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{border-radius:.5rem;transition:all .2s ease;font-weight:500;min-width:36px;text-align:center}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 6px #667eea26}.pagination[_ngcontent-%COMP%]   .page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{box-shadow:0 4px 8px #667eea4d}.pagination[_ngcontent-%COMP%]   .page-item.disabled[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{cursor:not-allowed;opacity:.5}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]:focus{z-index:3;outline:0;box-shadow:0 0 0 .2rem #667eea40}.pagination-container[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-weight:500}"],changeDetection:0})};var T2=(i,t)=>{let e=Ne(Pt),n=Ne(Xe);return e.isAuthenticated()?e.isAdmin()?!0:(e.isDriver()?n.navigate(["/user/driver-dashboard"]):e.isParamedic()?n.navigate(["/user/driver-dashboard"]):n.navigate(["/login"]),!1):(n.navigate(["/login"],{queryParams:{returnUrl:t.url}}),!1)},E2=(i,t)=>{let e=Ne(Pt),n=Ne(Xe);return e.isAuthenticated()?e.isDriver()||e.isParamedic()||e.isAdmin()?!0:(n.navigate(["/login"]),!1):(n.navigate(["/login"],{queryParams:{returnUrl:t.url}}),!1)},A2=(i,t)=>{let e=Ne(Pt),n=Ne(Xe);return!e.isAuthenticated()||e.isTokenExpired()?(e.isTokenExpired()&&e.clearAuthData(),!0):(e.isAdmin()?n.navigate(["/admin/admin-dashboard"]):(e.isDriver()||e.isParamedic())&&n.navigate(["/user/driver-dashboard"]),!1)};var sd=()=>{let i=Ne(Oi),t=Ne(Pt),e=Ne(Xe);return t.isAdmin()||i.hasCompletedSelection()?!0:(e.navigate(["/select-vehicle"]),!1)},M2=()=>{let i=Ne(Oi),t=Ne(Pt),e=Ne(Xe);return t.isAdmin()?!0:i.hasCompletedSelection()?(e.navigate(["/login"]),!1):!0};var F2=[{path:"",redirectTo:"select-vehicle",pathMatch:"full"},{path:"select-vehicle",component:od,canActivate:[M2]},{path:"login",component:Vc,canActivate:[A2,sd]},{path:"admin",canActivate:[T2,sd],children:[{path:"",redirectTo:"admin-dashboard",pathMatch:"full"},{path:"admin-dashboard",component:Nu},{path:"drivers-list",component:Xu},{path:"paramedics-list",component:Ku},{path:"trips",component:kc},{path:"stats",component:Dc},{path:"vehicles",component:Ic},{path:"maintenance-history",component:Oc},{path:"fuel-history",component:Rc},{path:"transactions/:id",component:Nc},{path:"transportation-types",component:rd},{path:"maintenance-types",component:nd},{path:"common-locations",component:ad},{path:"vehicle-map",component:Uc},{path:"audit-logs",component:jc},{path:"vehicle-checklists",component:Hc},{path:"medical-forms",component:id},{path:"profile/:id",component:Ns},{path:"profile",component:Ns}]},{path:"user",canActivate:[E2,sd],children:[{path:"",redirectTo:"driver-dashboard",pathMatch:"full"},{path:"driver-dashboard",component:Kc},{path:"status-update",component:zc},{path:"trips-history",component:Gc},{path:"my-trips",component:Jc},{path:"trip-form",component:f0},{path:"trip-form/:id",component:f0},{path:"wallet",component:$c},{path:"loan-collection",component:Qc},{path:"vehicle-checklist",component:ed},{path:"medical-form/:tripId",component:td},{path:"profile",component:Ns}]},{path:"**",redirectTo:"select-vehicle"}];var k2=(i,t)=>{let e=Ne(Pt),n=Ne(Xe),r=e.getAccessToken(),a=i;return r&&!i.url.includes("/auth/login")&&!i.url.includes("/auth/refresh")&&(a=i.clone({setHeaders:{Authorization:`Bearer ${r}`}})),t(a).pipe(wi(u=>(u.status===401&&!i.url.includes("/auth/logout")&&(localStorage.removeItem("ambulance_token"),localStorage.removeItem("ambulance_refresh_token"),localStorage.removeItem("ambulance_user"),n.navigate(["/login"])),u.status===403&&console.error("Access forbidden"),pn(()=>u))))};var P2=(i,t)=>{let e=Ne(Ye),n=Ne(Xe);return t(i).pipe(wi(r=>{let a="\u062D\u062F\u062B \u062E\u0637\u0623 \u063A\u064A\u0631 \u0645\u062A\u0648\u0642\u0639";if(r.error instanceof ErrorEvent)a=`\u062E\u0637\u0623 \u0641\u064A \u0627\u0644\u0627\u062A\u0635\u0627\u0644: ${r.error.message}`;else switch(r.status){case 400:a=r.error?.message||"\u0637\u0644\u0628 \u063A\u064A\u0631 \u0635\u0627\u0644\u062D";break;case 401:a=r.error?.message||"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u0623\u0648 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u063A\u064A\u0631 \u0635\u062D\u064A\u062D\u0629";break;case 403:a="\u0644\u064A\u0633 \u0644\u062F\u064A\u0643 \u0635\u0644\u0627\u062D\u064A\u0629 \u0644\u0644\u0648\u0635\u0648\u0644";break;case 404:a="\u0627\u0644\u0645\u0648\u0631\u062F \u0627\u0644\u0645\u0637\u0644\u0648\u0628 \u063A\u064A\u0631 \u0645\u0648\u062C\u0648\u062F";break;case 409:a=r.error?.message||"\u062A\u0639\u0627\u0631\u0636 \u0641\u064A \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A";break;case 422:a=r.error?.message||"\u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u062F\u062E\u0644\u0629 \u063A\u064A\u0631 \u0635\u062D\u064A\u062D\u0629";break;case 500:a="\u062E\u0637\u0623 \u0641\u064A \u0627\u0644\u062E\u0627\u062F\u0645\u060C \u064A\u0631\u062C\u0649 \u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629 \u0644\u0627\u062D\u0642\u0627\u064B";break;case 503:a="\u0627\u0644\u062E\u062F\u0645\u0629 \u063A\u064A\u0631 \u0645\u062A\u0627\u062D\u0629 \u062D\u0627\u0644\u064A\u0627\u064B";break;default:r.error?.message&&(a=r.error.message)}return r.status===403&&n.navigate(["/user/dashboard"]),r.status!==401&&e.error(a),console.error("HTTP Error:",{status:r.status,message:a,url:r.url,error:r.error}),pn(()=>new Error(a))}))};var D2=(i,t)=>t(i).pipe(Be(e=>{if(e instanceof Qa&&e.body){let n=e.body;return typeof n=="object"&&"success"in n&&"data"in n&&n.success===!0?e.clone({body:n.data}):(typeof n=="object"&&"data"in n&&"total"in n&&"page"in n,e)}return e}));var I2={providers:[Ih({eventCoalescing:!0}),cf(F2),Nm(Vm([D2,P2,k2])),C1()]};function q8(i,t){if(i&1){let e=Q();s(0,"div")(1,"i",9),T("click",function(){b(e);let r=h();return C(r.toggleSidebar())}),l()()}}function Y8(i,t){if(i&1){let e=Q();s(0,"div",10),T("click",function(){b(e);let r=h();return C(r.returnToAdmin())}),x(1,"i",11),l()}}function X8(i,t){if(i&1){let e=Q();s(0,"div",12),T("click",function(){b(e);let r=h();return C(r.closeSidebar())}),l()}if(i&2){let e=h();fe("active",e.sidebarOpen)}}function K8(i,t){if(i&1){let e=Q();s(0,"aside",13)(1,"div",14)(2,"h2",15),d(3,"\u0627\u0644\u0642\u0627\u0626\u0645\u0629"),l(),s(4,"button",16),T("click",function(){b(e);let r=h();return C(r.closeSidebar())}),d(5,"\xD7"),l()(),s(6,"nav",17)(7,"ul",18)(8,"li")(9,"a",19),T("click",function(){b(e);let r=h();return C(r.navigateTo("admin-dashboard"))}),x(10,"i",20),s(11,"span"),d(12,"\u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629"),l()()(),s(13,"li")(14,"a",19),T("click",function(){b(e);let r=h();return C(r.navigateTo("drivers-list"))}),x(15,"i",21),s(16,"span"),d(17,"\u0627\u0644\u0633\u0627\u0626\u0642\u0648\u0646"),l()()(),s(18,"li")(19,"a",19),T("click",function(){b(e);let r=h();return C(r.navigateTo("paramedics-list"))}),x(20,"i",21),s(21,"span"),d(22,"\u0627\u0644\u0645\u0633\u0639\u0641\u0648\u0646"),l()()(),s(23,"li")(24,"a",19),T("click",function(){b(e);let r=h();return C(r.navigateTo("trips"))}),x(25,"i",22),s(26,"span"),d(27,"\u0627\u0644\u0646\u0642\u0644\u064A\u0627\u062A"),l()()(),s(28,"li")(29,"a",19),T("click",function(){b(e);let r=h();return C(r.navigateTo("stats"))}),x(30,"i",23),s(31,"span"),d(32,"\u0627\u062D\u0635\u0627\u0626\u064A\u0627\u062A"),l()()(),s(33,"li")(34,"a",19),T("click",function(){b(e);let r=h();return C(r.navigateTo("vehicles"))}),x(35,"i",22),s(36,"span"),d(37,"\u0633\u062C\u0644 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A"),l()()(),s(38,"li")(39,"a",19),T("click",function(){b(e);let r=h();return C(r.navigateTo("vehicle-map"))}),x(40,"i",24),s(41,"span"),d(42,"\u062E\u0631\u064A\u0637\u0629 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A"),l()()(),s(43,"li")(44,"a",19),T("click",function(){b(e);let r=h();return C(r.navigateTo("maintenance-history"))}),x(45,"i",25),s(46,"span"),d(47,"\u0633\u062C\u0644 \u0627\u0644\u0635\u064A\u0627\u0646\u0629"),l()()(),s(48,"li")(49,"a",19),T("click",function(){b(e);let r=h();return C(r.navigateTo("fuel-history"))}),x(50,"i",26),s(51,"span"),d(52,"\u0633\u062C\u0644 \u0627\u0644\u0648\u0642\u0648\u062F"),l()()(),s(53,"li")(54,"a",19),T("click",function(){b(e);let r=h();return C(r.navigateTo("transportation-types"))}),x(55,"i",27),s(56,"span"),d(57,"\u0623\u0646\u0648\u0627\u0639 \u0627\u0644\u0646\u0642\u0644\u064A\u0627\u062A"),l()()(),s(58,"li")(59,"a",19),T("click",function(){b(e);let r=h();return C(r.navigateTo("maintenance-types"))}),x(60,"i",28),s(61,"span"),d(62,"\u0623\u0646\u0648\u0627\u0639 \u0627\u0644\u0635\u064A\u0627\u0646\u0629"),l()()(),s(63,"li")(64,"a",19),T("click",function(){b(e);let r=h();return C(r.navigateTo("common-locations"))}),x(65,"i",29),s(66,"span"),d(67,"\u0627\u0644\u0645\u0648\u0627\u0642\u0639 \u0627\u0644\u0634\u0627\u0626\u0639\u0629"),l()()(),s(68,"li")(69,"a",19),T("click",function(){b(e);let r=h();return C(r.navigateTo("audit-logs"))}),x(70,"i",30),s(71,"span"),d(72,"\u0633\u062C\u0644 \u0627\u0644\u062A\u062F\u0642\u064A\u0642"),l()()(),s(73,"li")(74,"a",19),T("click",function(){b(e);let r=h();return C(r.navigateTo("vehicle-checklists"))}),x(75,"i",31),s(76,"span"),d(77,"\u0633\u062C\u0644 \u0627\u0644\u0645\u0648\u0627\u0631\u062F \u0627\u0644\u0637\u0628\u064A\u0629"),l()()(),s(78,"li")(79,"a",19),T("click",function(){b(e);let r=h();return C(r.navigateTo("medical-forms"))}),x(80,"i",32),s(81,"span"),d(82,"\u0627\u0644\u0646\u0645\u0627\u0630\u062C \u0627\u0644\u0637\u0628\u064A\u0629"),l()()()(),s(83,"ul",33)(84,"li")(85,"a",19),T("click",function(){b(e);let r=h();return C(r.navigateToUser())}),x(86,"i",34),s(87,"span"),d(88,"\u0635\u0641\u062D\u0629 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646"),l()()(),s(89,"li")(90,"a",19),T("click",function(){b(e);let r=h();return C(r.navigateTo("profile"))}),x(91,"i",35),s(92,"span"),d(93,"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u062D\u0633\u0627\u0628"),l()()(),s(94,"li")(95,"a",19),T("click",function(){b(e);let r=h();return C(r.logout())}),x(96,"i",36),s(97,"span"),d(98,"\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062E\u0631\u0648\u062C"),l()()()()()()}if(i&2){let e=h();fe("active",e.sidebarOpen),m(9),fe("active",e.isActive("admin-dashboard")),m(5),fe("active",e.isActive("drivers-list")),m(5),fe("active",e.isActive("paramedics-list")),m(5),fe("active",e.isActive("trips")),m(5),fe("active",e.isActive("stats")),m(5),fe("active",e.isActive("vehicles")),m(5),fe("active",e.isActive("vehicle-map")),m(5),fe("active",e.isActive("maintenance-history")),m(5),fe("active",e.isActive("fuel-history")),m(5),fe("active",e.isActive("transportation-types")),m(5),fe("active",e.isActive("maintenance-types")),m(5),fe("active",e.isActive("common-locations")),m(5),fe("active",e.isActive("audit-logs")),m(5),fe("active",e.isActive("vehicle-checklists")),m(5),fe("active",e.isActive("medical-forms")),m(11),fe("active",e.isActive("profile"))}}var ld=class i{constructor(t,e,n,r){this.globalVarsService=t;this.router=e;this.authService=n;this.toastService=r;this.header$=this.globalVarsService.globalHeader$,this.img$=this.globalVarsService.usersImg$,this.img$=this.globalVarsService.currentImgPath$}showSideBar=!1;header$;img$;isAdmin=We(()=>this.authService.isAdmin());sidebarOpen=!1;toggleSidebar(){this.sidebarOpen=!this.sidebarOpen}closeSidebar(){this.sidebarOpen=!1}navigateTo(t){if(t==="profile"){this.router.navigate([`user/${t}`]);return}this.router.navigate([`admin/${t}`]),this.closeSidebar()}navigateToUser(){this.router.navigate(["/user/driver-dashboard"]),this.closeSidebar()}isActive(t){return this.router.isActive(`admin/${t}`,!1)}logout(){this.authService.logout().subscribe({next:()=>this.toastService.success("\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062E\u0631\u0648\u062C \u0628\u0646\u062C\u0627\u062D"),error:()=>{this.toastService.error("\u0641\u0634\u0644 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062E\u0631\u0648\u062C")}})}returnToAdmin(){this.router.navigate(["/admin/admin-dashboard"])}static \u0275fac=function(e){return new(e||i)(G(ft),G(Xe),G(Pt),G(Ye))};static \u0275cmp=Oe({type:i,selectors:[["app-side-bar"]],inputs:{showSideBar:"showSideBar"},decls:12,vars:10,consts:[[1,"sticky-top","bg-light","shadow-sm","p-3","mb-2","d-flex","align-items-center","border-bottom","px-4",2,"height","61px","z-index","498"],[4,"ngIf"],["class","d-flex align-items-center p-2 border-bottom","style","height: 61px; background-color: #f8f9fa; cursor: pointer;",3,"click",4,"ngIf"],[1,"h5","fw-bold","flex-grow-1","text-center","m-0"],[1,"d-flex","align-items-center"],[1,"btn","btn-sm","p-0","text-dark",3,"click"],["alt","\u0635\u0648\u0631\u0629 \u0627\u0644\u0645\u0644\u0641 \u0627\u0644\u0634\u062E\u0635\u064A","width","35","height","35",1,"rounded-circle",3,"src"],["class","sidebar-overlay",3,"active","click",4,"ngIf"],["class","sidebar",3,"active",4,"ngIf"],[1,"fa-solid","fa-bars","d-md-none",2,"cursor","pointer",3,"click"],[1,"d-flex","align-items-center","p-2","border-bottom",2,"height","61px","background-color","#f8f9fa","cursor","pointer",3,"click"],[1,"fas","fa-user-shield"],[1,"sidebar-overlay",3,"click"],[1,"sidebar"],[1,"sidebar-header"],[1,"sidebar-title"],[1,"close-btn",3,"click"],[1,"sidebar-nav"],[1,"nav-group"],[3,"click"],[1,"fa-solid","fa-gauge","nav-icon"],[1,"fa-solid","fa-users","nav-icon"],[1,"fa-solid","fa-ambulance","nav-icon"],[1,"fa-solid","fa-chart-bar","nav-icon"],[1,"fa-solid","fa-map-location-dot","nav-icon"],[1,"fa-solid","fa-wrench","nav-icon"],[1,"fa-solid","fa-gas-pump","nav-icon"],[1,"fa-solid","fa-list","nav-icon"],[1,"fa-solid","fa-tools","nav-icon"],[1,"fa-solid","fa-location-dot","nav-icon"],[1,"fa-solid","fa-file-alt","nav-icon"],[1,"fa-solid","fa-file-medical","nav-icon"],[1,"fa-solid","fa-notes-medical","nav-icon"],[1,"nav-group","nav-group-footer"],[1,"fa-solid","fa-users-gear","nav-icon"],[1,"fa-solid","fa-user","nav-icon"],[1,"fa-solid","fa-right-from-bracket","nav-icon"]],template:function(e,n){e&1&&(s(0,"header",0),H(1,q8,2,0,"div",1)(2,Y8,2,0,"div",2),s(3,"h1",3),d(4),gt(5,"async"),l(),s(6,"div",4)(7,"button",5),T("click",function(){return n.navigateTo("profile")}),x(8,"img",6),gt(9,"async"),l()()(),H(10,X8,1,2,"div",7)(11,K8,99,34,"aside",8)),e&2&&(m(),S("ngIf",n.showSideBar),m(),S("ngIf",!n.showSideBar&&n.isAdmin()),m(2),z(Ya(5,6,n.header$)),m(4),Eh("src",Ya(9,8,n.img$),Lr),m(2),S("ngIf",n.showSideBar),m(),S("ngIf",n.showSideBar&&n.isAdmin()))},dependencies:[Sm,Le,kt],styles:["[_nghost-%COMP%]{--sidebar-width-desktop: 280px;--sidebar-width-mobile: 300px;--primary-color: #1193d4;--primary-color-light: #e0f2fe;--hover-bg: #f1f5f9;--text-color: #333;--text-color-light: #555;--border-color: #eee}.sidebar-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#0006;opacity:0;pointer-events:none;transition:opacity .3s ease-in-out;z-index:499}.sidebar-overlay.active[_ngcontent-%COMP%]{opacity:1;pointer-events:auto}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;right:-100vw;width:80vw;max-width:var(--sidebar-width-mobile);height:100vh;background:#fff;box-shadow:-2px 0 8px #0000001a;transition:right .3s ease-in-out;z-index:500;display:flex;flex-direction:column;overflow-y:auto}.sidebar.active[_ngcontent-%COMP%]{right:0}.sidebar-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1.5rem 1.25rem;border-bottom:1px solid var(--border-color)}.sidebar-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:var(--text-color);margin:0}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:2.5rem;font-weight:300;line-height:1;color:var(--text-color-light);cursor:pointer;padding:0}.sidebar-nav[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;flex-grow:1;padding:1rem}.nav-group[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:.5rem}.nav-group-footer[_ngcontent-%COMP%]{padding-top:1rem;border-top:1px solid var(--border-color)}.sidebar-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:.75rem 1rem;height:3rem;border-radius:.5rem;text-decoration:none;font-weight:500;font-size:1rem;color:var(--text-color-light);transition:background-color .2s,color .2s}.nav-icon[_ngcontent-%COMP%]{font-size:1.25rem;width:24px;text-align:center;color:#888;transition:color .2s}.sidebar-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--hover-bg);color:var(--text-color)}.sidebar-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .nav-icon[_ngcontent-%COMP%]{color:var(--text-color)}.sidebar-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:var(--primary-color-light);color:var(--primary-color);font-weight:600}.sidebar-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]{color:var(--primary-color)}@media (min-width: 768px){.sidebar[_ngcontent-%COMP%]{height:calc(100vh - 61px);top:61px;right:0;width:var(--sidebar-width-desktop);max-width:none;transition:none;transform:translate(0)!important}.sidebar-overlay[_ngcontent-%COMP%]{opacity:0!important;pointer-events:none!important}.sidebar-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{display:none}}"]})};var O2=()=>({exact:!0});function J8(i,t){if(i&1&&(s(0,"li",7)(1,"a",8),x(2,"i"),s(3,"span",9),d(4),l()()()),i&2){let e=t.$implicit;m(),S("routerLink",e.route)("routerLinkActiveOptions",Ei(5,O2)),m(),gn(e.icon+" fa-fw"),m(2),z(e.label)}}function Q8(i,t){if(i&1&&(s(0,"li",7)(1,"a",10),x(2,"i"),d(3),l()()),i&2){let e=t.$implicit;m(),S("routerLink",e.route)("routerLinkActiveOptions",Ei(5,O2)),m(),gn(e.icon+" fa-fw me-2 "),m(),q(" ",e.label," ")}}var ud=class i{navItems=[{label:"\u0644\u0648\u062D\u0629 \u0627\u0644\u0642\u064A\u0627\u062F\u0629",icon:"fa-solid fa-gauge",route:"/user/driver-dashboard"},{label:"\u0627\u0644\u062D\u0627\u0644\u0629",icon:"fa-solid fa-arrows-rotate",route:"/user/status-update"},{label:"\u0627\u0644\u0646\u0642\u0644\u064A\u0627\u062A",icon:"fa-solid fa-list-ul",route:"/user/my-trips"},{label:"\u0627\u0644\u0645\u0644\u0641 \u0627\u0644\u0634\u062E\u0635\u064A",icon:"fa-solid fa-user-circle",route:"/user/profile"}];static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Oe({type:i,selectors:[["app-bottom-bar"]],decls:8,vars:2,consts:[[1,"navbar","navbar-expand","navbar-light","bg-light","fixed-bottom","border-top","d-lg-none"],[1,"container-fluid"],[1,"navbar-nav","nav-justified","w-100"],["class","nav-item",4,"ngFor","ngForOf"],[1,"navbar","navbar-expand-lg","navbar-light","fixed-bottom","background-light","border-bottom","d-none","d-lg-flex"],[1,"container-fluid","justify-content-between"],[1,"navbar-nav","ms-auto","mb-2","mb-lg-0"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link","d-flex","flex-column","align-items-center",3,"routerLink","routerLinkActiveOptions"],[1,"mobile-nav-label"],["routerLinkActive","active",1,"nav-link",3,"routerLink","routerLinkActiveOptions"]],template:function(e,n){e&1&&(s(0,"nav",0)(1,"div",1)(2,"ul",2),H(3,J8,5,6,"li",3),l()()(),s(4,"nav",4)(5,"div",5)(6,"ul",6),H(7,Q8,4,6,"li",3),l()()()),e&2&&(m(3),S("ngForOf",n.navItems),m(4),S("ngForOf",n.navItems))},dependencies:[Le,ai,Aa,uf],styles:[".navbar.fixed-bottom[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:.75rem;padding-top:.75rem;padding-bottom:.75rem;color:#6c757d}.navbar.fixed-bottom[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:2px}.navbar.fixed-bottom[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:var(--bs-primary)}.navbar.d-lg-flex[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-weight:500}.navbar.d-lg-flex[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:var(--bs-primary);font-weight:700}.background-light[_ngcontent-%COMP%]{background-color:#fcfcfc}"]})};var eO=(i,t)=>t.id;function tO(i,t){if(i&1){let e=Q();s(0,"div")(1,"div",2),d(2),l(),s(3,"div",3),d(4),l(),s(5,"button",4),T("click",function(){let r=b(e).$implicit,a=h();return C(a.remove(r.id))}),d(6," \xD7 "),l()()}if(i&2){let e=t.$implicit,n=h();gn(n.getToastClass(e.type)),S("@slideIn",void 0),m(2),z(n.getIcon(e.type)),m(2),z(e.message)}}var p0=class i{toasts=Z([]);nextId=0;show(t,e="info",n=3e3){let r={id:this.nextId++,message:t,type:e,duration:n};this.toasts.update(a=>[...a,r]),setTimeout(()=>{this.remove(r.id)},n)}remove(t){this.toasts.update(e=>e.filter(n=>n.id!==t))}getToastClass(t){let e="toast-item";switch(t){case"success":return`${e} toast-success`;case"error":return`${e} toast-error`;case"warning":return`${e} toast-warning`;case"info":return`${e} toast-info`;default:return e}}getIcon(t){switch(t){case"success":return"\u2713";case"error":return"\u2715";case"warning":return"\u26A0";case"info":return"\u2139";default:return""}}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Oe({type:i,selectors:[["app-toast"]],decls:3,vars:0,consts:[[1,"toast-container"],[3,"class"],[1,"toast-icon"],[1,"toast-message"],["type","button",1,"toast-close",3,"click"]],template:function(e,n){e&1&&(s(0,"div",0),Te(1,tO,7,5,"div",1,eO),l()),e&2&&(m(),Ee(n.toasts()))},dependencies:[Le],styles:[".toast-container[_ngcontent-%COMP%]{pointer-events:auto;position:fixed;bottom:20px;left:20px;z-index:9999;display:flex;flex-direction:column;gap:10px;max-width:400px}.toast-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;border-radius:8px;box-shadow:0 4px 12px #00000026;animation:_ngcontent-%COMP%_slideIn .3s ease-out;min-width:300px;color:#fff;font-weight:500}.toast-success[_ngcontent-%COMP%]{background-color:#28a745}.toast-error[_ngcontent-%COMP%]{background-color:#dc3545}.toast-warning[_ngcontent-%COMP%]{background-color:#ffc107;color:#000}.toast-info[_ngcontent-%COMP%]{background-color:#17a2b8}.toast-icon[_ngcontent-%COMP%]{font-size:20px;font-weight:700;flex-shrink:0}.toast-message[_ngcontent-%COMP%]{flex:1;word-wrap:break-word}.toast-close[_ngcontent-%COMP%]{background:none;border:none;color:inherit;font-size:24px;line-height:1;cursor:pointer;padding:0;width:24px;height:24px;display:flex;align-items:center;justify-content:center;opacity:.7;transition:opacity .2s;flex-shrink:0}.toast-close[_ngcontent-%COMP%]:hover{opacity:1}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(400px);opacity:0}to{transform:translate(0);opacity:1}}[dir=rtl][_ngcontent-%COMP%]   .toast-container[_ngcontent-%COMP%]{right:auto;left:20px}@media (max-width: 768px){.toast-container[_ngcontent-%COMP%]{right:10px;left:10px;max-width:calc(100% - 20px)}.toast-item[_ngcontent-%COMP%]{min-width:auto}}"]})};var iO=i=>({"with-sidebar":i});function nO(i,t){if(i&1&&x(0,"app-side-bar",4),i&2){let e=h();S("showSideBar",e.showSideBar)}}function rO(i,t){i&1&&x(0,"app-bottom-bar")}var cd=class i{constructor(t,e,n,r){this.router=t;this.route=e;this.toastService=n;this.vehicleCookieService=r}title="ambulance";showSideBar=!0;showBottomBar=!0;toastComponent;dontshowsidebar=!1;ngOnInit(){this.router.events.pipe(Wn(t=>t instanceof qn)).subscribe(t=>{let e=t,n=e.urlAfterRedirects||e.url||this.router.url;this.showSideBar=n.startsWith("/admin"),this.dontshowsidebar=n.endsWith("login");let r=n.startsWith("/user"),a=this.vehicleCookieService.hasSelectedVehicle();this.showBottomBar=r}),this.toastService.toast$.subscribe(t=>{this.toastComponent&&this.toastComponent.show(t.message,t.type,t.duration)})}static \u0275fac=function(e){return new(e||i)(G(Xe),G(Ai),G(Ye),G(Oi))};static \u0275cmp=Oe({type:i,selectors:[["app-root"]],viewQuery:function(e,n){if(e&1&&Mh(p0,5),e&2){let r;W0(r=j0())&&(n.toastComponent=r.first)}},decls:6,vars:5,consts:[[1,"main-body"],[3,"showSideBar",4,"ngIf"],[1,"main-content",3,"ngClass"],[4,"ngIf"],[3,"showSideBar"]],template:function(e,n){e&1&&(s(0,"div",0),H(1,nO,1,1,"app-side-bar",1),s(2,"div",2),x(3,"router-outlet"),l(),H(4,rO,1,0,"app-bottom-bar",3),x(5,"app-toast"),l()),e&2&&(m(),S("ngIf",!n.dontshowsidebar),m(),S("ngClass",$i(3,iO,n.showSideBar)),m(2),S("ngIf",n.showBottomBar))},dependencies:[Le,Ft,kt,Rl,ld,ud,p0],styles:["@media (min-width: 768px){.with-sidebar[_ngcontent-%COMP%]{margin-right:285px}}.main-content[_ngcontent-%COMP%]{padding-bottom:70px}.main-body[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}.main-body[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}"]})};Dm(cd,I2).catch(i=>console.error(i));
