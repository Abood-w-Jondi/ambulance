<div class="container-fluid py-4" dir="rtl">
  <!-- حالة السائق -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="card bg-success text-white border-0 shadow-sm">
        <div class="card-body text-center py-5">
          <h2 class="display-4 fw-bold mb-2">{{ driverStatus }}</h2>
          <p class="mb-0 opacity-75">أنت جاهز للرحلة التالية.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- أزرار التحكم -->
  <div class="row mb-4 g-3">
    <div class="col-6">
      <button class="btn btn-primary w-100 py-3 fw-bold" (click)="startTrip()">
        بدء رحلة
      </button>
    </div>
    <div class="col-6">
      <button class="btn btn-outline-secondary w-100 py-3 fw-bold" (click)="endShift()">
        إنهاء الدوام
      </button>
    </div>
  </div>

  <!-- ملخص اليوم -->
  <h3 class="fw-bold mb-3">ملخص اليوم</h3>
  <div class="row mb-4 g-3">
    <div class="col-12 col-md-6">
      <div class="card border shadow-sm">
        <div class="card-body">
          <p class="text-muted mb-2">الرحلات المكتملة</p>
          <h2 class="display-5 fw-bold mb-0">{{ tripsCompleted }}</h2>
        </div>
      </div>
    </div>
    <div class="col-12 col-md-6">
      <div class="card border shadow-sm">
        <div class="card-body">
          <p class="text-muted mb-2">إجمالي الأرباح</p>
          <h2 class="display-5 fw-bold mb-0">${{ totalEarnings }}</h2>
        </div>
      </div>
    </div>
  </div>

  <!-- الموقع الحالي -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="card border shadow-sm overflow-hidden">
        <div class="row g-0">
          <div class="col-12 col-lg-6">
            <div class="ratio ratio-16x9">
              <img src="https://lh3.googleusercontent.com/aida-public/AB6AXuBqmTI3zG9WJPPfYynjTiTZJFmbi2T1vT6qhMqcdVdQDTIuYawzz13Tw2tGGiXiWAv0K9ibS8-RS4DWN5G4c9bBvKQj99Aq7t4HvPgI76CHi4jjktZEhfo6UcY9_wIJVFjdm0uj81RkPX0xuJ29fBu8wE1mWkxhHKELhd8LlrdULbQE3-hRtcEPXVto8Yp-bKrumvdj5_k77HDIrDGLpGg3Hureet7qoIOAFerqtcgjiO43ddaACU0hUn2XGxMIXv6-2b_wZdMR8dM" 
                   alt="خريطة الموقع الحالي" 
                   class="img-fluid object-fit-cover w-100 h-100">
            </div>
          </div>
          <div class="col-12 col-lg-6">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <h5 class="fw-bold mb-0">الموقع الحالي</h5>
                <button class="btn btn-sm btn-light rounded-circle" (click)="refreshLocation()">
                  <i class="fas fa-sync-alt"></i>
                </button>
              </div>
              <p class="text-muted mb-0">{{ currentLocation }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- الإجراءات السريعة -->
  <h3 class="fw-bold mb-3">الإجراءات السريعة</h3>
  <div class="row g-3 mb-5">
    <div class="col-6 col-md-3">
      <div class="card border shadow-sm h-100" role="button" (click)="openFuelModal()">
        <div class="card-body text-center d-flex flex-column align-items-center justify-content-center py-4">
          <i class="fas fa-gas-pump text-primary fa-2x mb-3"></i>
          <p class="fw-medium mb-0">إضافة وقود</p>
        </div>
      </div>
    </div>
    <div class="col-6 col-md-3">
      <div class="card border shadow-sm h-100" role="button" (click)="openMaintenanceModal()">
        <div class="card-body text-center d-flex flex-column align-items-center justify-content-center py-4">
          <i class="fas fa-wrench text-primary fa-2x mb-3"></i>
          <p class="fw-medium mb-0">إضافة صيانة</p>
        </div>
      </div>
    </div>
    <div class="col-6 col-md-3">
      <div class="card border shadow-sm h-100" role="button" (click)="viewTrips()">
        <div class="card-body text-center d-flex flex-column align-items-center justify-content-center py-4">
          <i class="fas fa-receipt text-primary fa-2x mb-3"></i>
          <p class="fw-medium mb-0">عرض الرحلات</p>
        </div>
      </div>
    </div>
    <div class="col-6 col-md-3">
      <div class="card border shadow-sm h-100" role="button" (click)="viewWallet()">
        <div class="card-body text-center d-flex flex-column align-items-center justify-content-center py-4">
          <i class="fas fa-wallet text-primary fa-2x mb-3"></i>
          <p class="fw-medium mb-0">عرض المحفظة</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Fuel Modal -->
<app-add-fuel-modal 
  *ngIf="showFuelModal" 
  (close)="closeFuelModal()"
  (fuelAdded)="onFuelAdded()">
</app-add-fuel-modal>

<!-- Maintenance Modal -->
<app-add-maintenance-modal 
  *ngIf="showMaintenanceModal" 
  (close)="closeMaintenanceModal()"
  (maintenanceAdded)="onMaintenanceAdded()">
</app-add-maintenance-modal>